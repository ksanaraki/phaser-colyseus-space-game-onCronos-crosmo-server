(this["webpackJsonpcrosmo-crafts"]=this["webpackJsonpcrosmo-crafts"]||[]).push([[0],{345:function(e,t){},353:function(e,t){},355:function(e,t){},397:function(e,t){},399:function(e,t){},423:function(e,t){},425:function(e,t){},437:function(e,t){},438:function(e,t){},455:function(e,t){},459:function(e,t){},461:function(e,t){},586:function(e,t,i){"use strict";i.r(t);i(337);var n,s,a=i(0),o=i.n(a),r=i(73),l=i.n(r),c=i(123),d=i(12),u=i(14),p=i(103),h=i(32),y=i(16),m=i(672),_=c.c,b=i(15),g=i(2),v=i.n(g),f=i(673),x=i(662),w=i(670),E=i(675),O=i(71),S="0xA554482831bC8D5ae809B637f6932D4E608BE5E7",j={mode:"regular",testnet:{rpcUrl:"https://cronos-testnet-3.crypto.org:8545/",chainId:338,chainIdHex:"0x152",chainName:"Cronos Testnet",chainType:"mainnet",nativeCurrency:{name:"CRO",symbol:"CRO",decimals:18},blockExplorerUrl:"https://cronos.crypto.org/explorer/testnet3/"},mainnet:{rpcUrl:"https://mainnet.cronoslabs.com/v1/55e37d8975113ae7a44603ef8ce460aa",chainId:25,chainIdHex:"0x19",chainName:"Cronos Mainnet Beta",chainType:"mainnet",nativeCurrency:{name:"CRO",symbol:"CRO",decimals:18},blockExplorerUrl:"https://cronos.crypto.org/explorer/"}},k=function(e){var t=O.a.BigNumber.from(e);return parseInt(t.toString())},A=function(e){return new Promise((function(t){return setTimeout(t,e)}))},T=function(){var e=Object(b.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:j.mainnet.chainIdHex}]});case 3:e.next=10;break;case 5:return e.prev=5,e.t0=e.catch(0),console.log("error in switchNetwork",e.t0),e.next=10,window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:j.mainnet.chainIdHex,chainName:j.mainnet.chainName,rpcUrls:[j.mainnet.rpcUrl],nativeCurrency:j.mainnet.nativeCurrency,blockExplorerUrls:[j.mainnet.blockExplorerUrl]}]});case 10:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(b.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,window.ethereum.request({method:"eth_chainId"});case 3:if(e.sent===j.mainnet.chainIdHex){e.next=9;break}return e.next=7,T();case 7:return e.next=9,A(2e3);case 9:return e.next=11,window.ethereum.request({method:"eth_requestAccounts"});case 11:return t=e.sent,e.t0=t[0],e.t1=new O.a.providers.Web3Provider(window.ethereum),e.t2=new O.a.providers.JsonRpcProvider(j.mainnet.rpcUrl),e.t3=k,e.next=18,window.ethereum.request({method:"eth_chainId"});case 18:return e.t4=e.sent,e.t5=(0,e.t3)(e.t4),e.abrupt("return",{walletProviderName:"metamask",address:e.t0,browserWeb3Provider:e.t1,serverWeb3Provider:e.t2,connected:!0,chainId:e.t5});case 23:return e.prev=23,e.t6=e.catch(0),console.log("error in connect",e.t6),e.abrupt("return",null);case 27:case"end":return e.stop()}}),e,null,[[0,23]])})));return function(){return e.apply(this,arguments)}}(),R=i(13),P=i(318),I=function(){var e=Object(b.a)(v.a.mark((function e(){var t,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,localStorage.clear(),t=new P.a({rpc:Object(R.a)({},j.mainnet.chainId,j.mainnet.rpcUrl),chainId:j.mainnet.chainId}),e.next=5,t.enable();case 5:if(i=new O.a.providers.Web3Provider(t),t.chainId===j.mainnet.chainId){e.next=9;break}return window.alert("Switch your Wallet to blockchain network "+j.mainnet.chainName),e.abrupt("return",null);case 9:return t.on("accountsChanged",(function(e){if(e.length<=0){var t={walletConnected:"false",expiry:(new Date).getTime()};localStorage.setItem("wallet-connected",JSON.stringify(t))}window.location.reload()})),e.next=12,i.listAccounts();case 12:return e.t0=e.sent[0],e.t1=i,e.t2=new O.a.providers.JsonRpcProvider(j.mainnet.rpcUrl),e.t3=t,e.t4=t.chainId,e.abrupt("return",{walletProviderName:"walletconnect",address:e.t0,browserWeb3Provider:e.t1,serverWeb3Provider:e.t2,wcProvider:e.t3,connected:!0,chainId:e.t4});case 20:return e.prev=20,e.t5=e.catch(0),e.abrupt("return",null);case 23:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(){return e.apply(this,arguments)}}(),M=i(1),C={fontSize:"25px",color:"var(--color-yellow)"},B={marginTop:2,fontSize:"19px",color:"#280D5f",background:"wheat","&:hover":{background:"rgba(253,218,158,0.8)"},padding:"10px 30px",display:"flex",justifyContent:"space-between"},D=function(e){var t=null,i=function(){var i=Object(b.a)(v.a.mark((function i(n){var s,a;return v.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:e.setOpen(!1),i.t0=n,i.next="metamask"===i.t0?4:"walletconnect"===i.t0?9:14;break;case 4:return i.next=6,L();case 6:return t=i.sent,localStorage.setItem("wallet-type","metamask"),i.abrupt("break",17);case 9:return i.next=11,I();case 11:return t=i.sent,localStorage.setItem("wallet-type","walletconnect"),i.abrupt("break",17);case 14:return i.next=16,L();case 16:t=i.sent;case 17:null!==t&&(e.setWallet(t),s=new Date,a={walletConnected:"true",expiry:s.getTime()+36e5},localStorage.setItem("wallet-connected",JSON.stringify(a)));case 18:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}();return Object(a.useEffect)((function(){var e=new Date,t=JSON.parse(localStorage.getItem("wallet-connected")),n=null===t||void 0===t?void 0:t.walletConnected,s=null===t||void 0===t?void 0:t.expiry,a=localStorage.getItem("wallet-type");"true"===n&&s>e.getTime()&&i(a)}),[]),Object(M.jsx)("div",{children:Object(M.jsx)(x.a,{keepMounted:!0,open:e.open,onClose:function(){return e.setOpen(!1)},"aria-labelledby":"keep-mounted-modal-title","aria-describedby":"keep-mounted-modal-description",children:Object(M.jsxs)(f.a,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",maxWidth:350,width:"70%",backgroundColor:"rgba(40, 13, 95, 0.9)",boxShadow:"0px 11px 15px -7px rgb(255 255 255 / 20%), 0px -4px 10px 2px rgb(255 255 255 / 14%), 0px 9px 46px 8px rgb(255 255 255 / 12%);",borderRadius:5,p:4},children:[Object(M.jsx)(E.a,{id:"keep-mounted-modal-title",variant:"h6",component:"h2",sx:C,children:"Connect Wallet"}),Object(M.jsxs)(w.a,{fullWidth:!0,sx:B,onClick:function(){return i("metamask")},children:[Object(M.jsx)("img",{src:"assets/images/metamask.svg",width:"30",height:"30",style:{marginRight:10}}),"Metamask"]}),Object(M.jsxs)(w.a,{fullWidth:!0,sx:B,onClick:function(){return i("walletconnect")},children:[Object(M.jsx)("img",{src:"assets/images/walletconnect.svg",width:"30",height:"30",style:{marginRight:10}}),"Wallet Connect"]})]})})})},N=y.c.div(n||(n=Object(u.a)(["\n  display: flex;\n  justify-content: space-between;\n  margin: 30px 50px;\n  align-items: flex-start;\n\n  img.logo {\n    width: 85px;\n    height: 87px;\n  }\n"]))),U=y.c.div(s||(s=Object(u.a)(["\n  background: url('assets/images/btn_connect.png');\n  background-size: contain;\n  width: 250px;\n  height: 47px;\n  color: white;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  cursor: pointer;\n  font-size: 17px;\n"]))),F=function(e){var t=e.account,i=e.setWallet,n=e.setBg,s=Object(a.useState)(!1),o=Object(d.a)(s,2),r=o[0],l=o[1];return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsxs)(N,{children:[Object(M.jsx)(p.b,{to:"/",onClick:function(){return n("bg_main")},children:Object(M.jsx)("img",{className:"logo",src:"assets/images/logo_yellow.png",alt:"logo"})}),Object(M.jsx)(U,{onClick:function(){!t&&l(!0)},children:t?function(e){return e.slice(0,7)+"..."+e.slice(38,42)}(t):"CONNECT YOUR WALLET"})]}),Object(M.jsx)(D,{open:r,setOpen:l,setWallet:i})]})},V=i(674),Y=i(44),z=i(75),G=i(63),H={VERSION:"PRODUCT",environment:{VERSION:"PRODUCT",SIGN_DATA:"Crosmo Crafts",SIGN_PASS:"meta-pirate",API_URL:"".concat(window.location.protocol.replace("http","http"),"//").concat(window.location.hostname,":2083/api"),END_POINT:"".concat(window.location.protocol.replace("http","ws"),"//").concat(window.location.hostname,":2083")}},K={SYNC_INTERVAL:50,gamePros:{screenWidth:1600,screenHeight:900,padding:30,introNewEnemyDelay:2e3,endLevelDelay:1500},multiPlayerPros:{screenWidth:1600,screenHeight:900},graphicAssets:{background:{URL:"assets/images/bg_shooter.png",name:"background"},particles:{URL:"assets/images/particles.png",data:"assets/images/particle_orbs.json",name:"particles"},shipUrl:"assets/images/ships/",shipsTypes:["Black Spaceship type 1","Black Spaceship type 1","Black Spaceship type 2","Black Spaceship type 3","Blue Spaceship type 1","Blue Spaceship type 2","Blue Spaceship type 3","Gold Spaceship type 1","Gold Spaceship type 2","Gold Spaceship type 3","Green Spaceship type 1","Green Spaceship type 2","Green Spaceship type 3","Grey Spaceship type 1","Grey Spaceship type 2","Grey Spaceship type 3","Pink Spaceship type 1","Pink Spaceship type 2","Pink Spaceship type 3","Red Spaceship type 1","Red Spaceship type 2","Red Spaceship type 3","White Spaceship type 1","White Spaceship type 2","White Spaceship type 3","Holographic Spaceship"],bulletNormal:{URL:"assets/images/bullet_normal.png",name:"bulletNormal"},bulletAtomic:{URL:"assets/images/bullet_atomic.png",name:"bulletAtomic"},bulletUnlimited:{URL:"assets/images/bullet_unlimited.png",name:"bulletUnlimited"},bulletDouble:{URL:"assets/images/bullet_normal.png",name:"bulletDouble"},bulletTriple:{URL:"assets/images/bullet_normal.png",name:"bulletTriple"},bulletVolley:{URL:"assets/images/bullet_normal.png",name:"bulletVolley"},bulletLazer:{URL:"assets/images/bullet_lazer.png",name:"bulletLazer"},bulletExplose:{URL:"assets/images/bullet_explosive.png",name:"bulletExplose"},bulletRegion:{URL:"assets/images/bullet_region.png",name:"bulletRegion"},asteroidFirstL:{URL:"assets/images/asteroid_first_large.png",name:"asteroidFirstL"},asteroidFirstS:{URL:"assets/images/asteroid_first_small.png",name:"asteroidFirstS"},asteroidSecondL:{URL:"assets/images/asteroid_second_large.png",name:"asteroidSecondL"},asteroidSecondS:{URL:"assets/images/asteroid_second_small.png",name:"asteroidSecondS"},airdropRapid:{URL:"assets/images/airdrop_rapid.png",name:"airdropRapid"},airdropDouble:{URL:"assets/images/airdrop_double.png",name:"airdropDouble"},airdropTriple:{URL:"assets/images/airdrop_triple.png",name:"airdropTriple"},airdropBurst:{URL:"assets/images/airdrop_burst.png",name:"airdropBurst"},airdropExplosive:{URL:"assets/images/airdrop_explosive.png",name:"airdropExplosive"},airdropLazer:{URL:"assets/images/airdrop_lazer.png",name:"airdropLazer"},airdropRocket:{URL:"assets/images/airdrop_rocket.png",name:"airdropRocket"},airdropLife:{URL:"assets/images/airdrop_life.png",name:"airdropLife"},airdropShield:{URL:"assets/images/airdrop_shield.png",name:"airdropShield"},shield:{URL:"assets/images/shield.png",name:"shield"},enemyFirst:{URL:"assets/images/enemy_1.png",name:"enemyFirst"},enemySecond:{URL:"assets/images/enemy_2.png",name:"enemySecond"},enemyBullet:{URL:"assets/images/bullet_enemy.png",name:"enemyBullet"},rocketFirst:{URL:"assets/images/rocket_1.png",name:"rocketFirst"},rocketSecond:{URL:"assets/images/rocket_2.png",name:"rocketSecond"},rocketThird:{URL:"assets/images/rocket_3.png",name:"rocketThird"},rocketFourth:{URL:"assets/images/rocket_4.png",name:"rocketFourth"},rocketBullet:{URL:"assets/images/bullet_boss.png",name:"rocketBullet"},lifeEmpty:{URL:"assets/images/life_empty.png",name:"lifeEmpty"},lifeFull:{URL:"assets/images/life_full.png",name:"lifeFull"},lazerEffectParticle:{URL:"assets/images/lazer_effect.png",data:"assets/images/particle_lazer.json",name:"lazerEffectParticle"}},soundAssets:{bg:{URL:"assets/sounds/bg.mp3",name:"bg"},fire:{URL:["assets/sounds/fire.m4a","assets/sounds/fire.ogg"],name:"fire"},destroyed:{URL:["assets/sounds/destroyed.m4a","assets/sounds/destroyed.ogg"],name:"destroyed"},engine:{URL:"assets/sounds/engine.mp3",name:"engine"},shipExplose:{URL:"assets/sounds/ship_explode.wav",name:"shipExplose"}},shipPros:{acceleration:200,drag:100,maxVelocity:300,angularVelocity:180,startingLives:5,blinkDelay:.2},bulletPros:{NORMAL_BULLET:{maxBullets:5,fireCooldown:.4,passiveRegenCooldown:1,speed:300,lifespan:2e3},UNLIMITED_BULLET:{maxBullets:99,fireCooldown:.4,passiveRegenCooldown:.1,speed:300,lifespan:2e3},DOUBLE_BULLET:{maxBullets:5,fireCooldown:.4,passiveRegenCooldown:1,speed:300,lifespan:2e3},TRIPLE_BULLET:{maxBullets:5,fireCooldown:.4,passiveRegenCooldown:1,speed:300,lifespan:2e3},VOLLEY_BULLET:{maxBullets:5,fireCooldown:.4,passiveRegenCooldown:1,speed:300,lifespan:2e3},LAZER_BULLET:{maxBullets:10,fireCooldown:.5,passiveRegenCooldown:1,speed:450,lifespan:2e3},EXPLOSIVE_BULLET:{maxBullets:5,fireCooldown:.8,passiveRegenCooldown:1,speed:250,lifespan:2e3},ATOMIC_BULLET:{maxBullets:5,fireCooldown:.4,passiveRegenCooldown:1,speed:300,lifespan:2e3}},asteroidPros:{startingAsteroids:3,maxAsteroids:12,incrementAsteroids:2,minSpeed:60,maxSpeed:100},enemyPros:{minSpeed:60,maxSpeed:80,startingEnemies:0,incrementEnemies:1,startingBoss:0,incrementBoss:1,bossLives:10,angVelRange:40},enemyBulletPros:{maxBullets:999,fireCooldown:3,passiveRegenCooldown:0,normalSpeed:120,velocity:{x:180,y:180},lives:2,bossSpeed:180,bossFireCooldown:.8},airdropPros:{percentAsteroid:5,percentEnemy:70,percentBoss:100,duration:15,lifetime:10,alertTime:7},fontAssets:{endLevel:{fontFamily:"Fast Hand",fontSize:"30px",color:"#ffffff"},waitingFontStyle:{fontFamily:"Fast Hand",fontSize:"45px",color:"#ff601a",align:"center"},scoreLabel:{fontFamily:"Fast Hand",fontSize:"30px",color:"#24c2bc"},scoreText:{fontFamily:"Fast Hand",fontSize:"30px",color:"#ffffff"},levelLabel:{fontFamily:"Fast Hand",fontSize:"20px",color:"#ff601a"},levelText:{fontFamily:"Fast Hand",fontSize:"20px",color:"#ffffff"},gameoverFontStyle:{fontFamily:"Fast Hand",fill:"#ff601a",fontSize:"50px",align:"center"}}},W=Object(G.a)(Object(G.a)({},H),K);function X(e,t){return e+Math.random()*(t-e)}function J(e){var t=e;return t.length>9&&t.endsWith("-ss")&&(t=t.substring(0,t.length-3)),t.replace(/[^0-9a-z]/gi,"G")}var q,Z=function(){return{headers:{token:!!localStorage.getItem("jwt")&&JSON.parse(localStorage.getItem("jwt")).token}}},Q=Math.PI/4,$={FIRST:{LARGE:W.graphicAssets.asteroidFirstL.name,SMALL:W.graphicAssets.asteroidFirstS.name},SECOND:{LARGE:W.graphicAssets.asteroidSecondL.name,SMALL:W.graphicAssets.asteroidSecondS.name}},ee="FIRST",te="SECOND",ie="LARGE",ne="SMALL",se="NORMAL_BULLET",ae="UNLIMITED_BULLET",oe="DOUBLE_BULLET",re="TRIPLE_BULLET",le="VOLLEY_BULLET",ce="LAZER_BULLET",de="EXPLOSIVE_BULLET",ue="ATOMIC_BULLET",pe={NORMAL_BULLET:W.graphicAssets.bulletNormal.name,UNLIMITED_BULLET:W.graphicAssets.bulletUnlimited.name,DOUBLE_BULLET:W.graphicAssets.bulletDouble.name,TRIPLE_BULLET:W.graphicAssets.bulletTriple.name,VOLLEY_BULLET:W.graphicAssets.bulletVolley.name,LAZER_BULLET:W.graphicAssets.bulletLazer.name,EXPLOSIVE_BULLET:W.graphicAssets.bulletExplose.name,REGION_BULLET:W.graphicAssets.bulletRegion.name,ATOMIC_BULLET:W.graphicAssets.bulletAtomic.name},he={UNLIMITED_BULLET:W.graphicAssets.airdropRapid.name,DOUBLE_BULLET:W.graphicAssets.airdropDouble.name,TRIPLE_BULLET:W.graphicAssets.airdropTriple.name,VOLLEY_BULLET:W.graphicAssets.airdropBurst.name,LAZER_BULLET:W.graphicAssets.airdropLazer.name,EXPLOSIVE_BULLET:W.graphicAssets.airdropExplosive.name,ATOMIC_BULLET:W.graphicAssets.airdropRocket.name,LIFE:W.graphicAssets.airdropLife.name,SHIELD:W.graphicAssets.airdropShield.name},ye="UNLIMITED_BULLET",me="DOUBLE_BULLET",_e="TRIPLE_BULLET",be="VOLLEY_BULLET",ge="LAZER_BULLET",ve="EXPLOSIVE_BULLET",fe="ATOMIC_BULLET",xe="LIFE",we="SHIELD",Ee={NORMAL_FIRST:W.graphicAssets.enemyFirst.name,NORMAL_SECOND:W.graphicAssets.enemySecond.name,BOSS_FIRST:W.graphicAssets.rocketFirst.name,BOSS_SECOND:W.graphicAssets.rocketSecond.name,BOSS_THIRD:W.graphicAssets.rocketThird.name,BOSS_FOURTH:W.graphicAssets.rocketFourth.name},Oe="NORMAL_FIRST",Se="NORMAL_SECOND",je="NORMAL_BOTH",ke="BOSS_FIRST",Ae="BOSS_SECOND",Te="BOSS_THIRD",Le="BOSS_FOURTH",Re={0:"ZERO",1:"BRONZE",2:"SILVER",3:"GOLD",4:"DIAMOND",5:"PLATINUM"},Pe={0:0,1:1e3,2:4e3,3:1e4,4:24e3,5:44e3},Ie={0:0,1:1,2:2,3:2,4:2,5:3},Me={0:1,1:.95,2:.9,3:.85,4:.8,5:.75},Ce={0:0,1:0,2:0,3:1,4:1,5:2},Be={0:1,1:1,2:1,3:1,4:1.25,5:1.5},De={easy:{STARTING_ASTEROIDS:0,INCREASE_ASTEROIDS:0,MAX_ASTEROIDS:0,MIN_ASTEROID_SPEED:1,MAX_ASTEROID_SPEED:1,STARTING_ENEMIES:0,INCREASE_ENEMIES:0,MIN_ENEMY_SPEED:1,MAX_ENEMY_SPEED:1},medium:{STARTING_ASTEROIDS:2,INCREASE_ASTEROIDS:0,MAX_ASTEROIDS:5,MIN_ASTEROID_SPEED:1.1,MAX_ASTEROID_SPEED:1.1,STARTING_ENEMIES:2,INCREASE_ENEMIES:0,MIN_ENEMY_SPEED:1,MAX_ENEMY_SPEED:1},hard:{STARTING_ASTEROIDS:2,INCREASE_ASTEROIDS:1,MAX_ASTEROIDS:10,MIN_ASTEROID_SPEED:1.1,MAX_ASTEROID_SPEED:1.1,STARTING_ENEMIES:2,INCREASE_ENEMIES:1,MIN_ENEMY_SPEED:1.1,MAX_ENEMY_SPEED:1.1},extreme:{STARTING_ASTEROIDS:2,INCREASE_ASTEROIDS:2,MAX_ASTEROIDS:18,MIN_ASTEROID_SPEED:1.25,MAX_ASTEROID_SPEED:1.25,STARTING_ENEMIES:2,INCREASE_ENEMIES:2,MIN_ENEMY_SPEED:1.2,MAX_ENEMY_SPEED:1.2}},Ne=Object(z.b)({name:"user",initialState:{sessionId:"",videoConnected:!1,loggedIn:!1,gameOver:!1,canPlayAgain:!1,joinLobbyRoom:!1,tokenId:-1,shipName:"",tier:0,paid:!1,team:0,playerNameMap:new Map,showJoystick:!0},reducers:{setSessionId:function(e,t){e.sessionId=t.payload},setVideoConnected:function(e,t){e.videoConnected=t.payload},setLoggedIn:function(e,t){e.loggedIn=t.payload},setGameOver:function(e,t){e.gameOver=t.payload},setCanPlayAgain:function(e,t){e.canPlayAgain=t.payload},setJoinLobbyRoom:function(e,t){e.joinLobbyRoom=t.payload},setTokenId:function(e,t){e.tokenId=t.payload},setShipName:function(e,t){e.shipName=t.payload},setTier:function(e,t){e.tier=t.payload},setPaid:function(e,t){e.paid=t.payload},setTeam:function(e,t){e.team=t.payload},setPlayerNameMap:function(e,t){e.playerNameMap.set(J(t.payload.id),t.payload.name)},removePlayerNameMap:function(e,t){e.playerNameMap.delete(J(t.payload))},setShowJoystick:function(e,t){e.showJoystick=t.payload}}}),Ue=Ne.actions,Fe=Ue.setSessionId,Ve=(Ue.setVideoConnected,Ue.setLoggedIn,Ue.setGameOver),Ye=Ue.setCanPlayAgain,ze=Ue.setJoinLobbyRoom,Ge=Ue.setTokenId,He=Ue.setShipName,Ke=Ue.setPaid,We=Ue.setTeam,Xe=Ue.setTier,Je=Ue.setPlayerNameMap,qe=Ue.removePlayerNameMap,Ze=(Ue.setShowJoystick,Ne.reducer),Qe=Object(z.b)({name:"wallet",initialState:{account:"",craftInstance:null,shooterInstance:null,tokenInstance:null,pilotInstance:null},reducers:{setAccount:function(e,t){e.account=t.payload},setCraftInstance:function(e,t){e.craftInstance=t.payload},setShooterInstance:function(e,t){e.shooterInstance=t.payload},setTokenInstance:function(e,t){e.tokenInstance=t.payload},setPilotInstance:function(e,t){e.pilotInstance=t.payload}}}),$e=Qe.actions,et=($e.setAccount,$e.setCraftInstance,$e.setShooterInstance,$e.setTokenInstance,$e.setPilotInstance,Qe.reducer);!function(e){e.LOBBY="lobby",e.PUBLIC="crosmo",e.CUSTOM="custom"}(q||(q={}));var tt=function(e){return e.name===q.CUSTOM},it=Object(z.b)({name:"room",initialState:{lobbyJoined:!1,roomJoined:!1,roomId:"",roomData:void 0,availableRooms:new Array,playerList:new Array,curPlayer:""},reducers:{setLobbyJoined:function(e,t){e.lobbyJoined=t.payload},setRoomJoined:function(e,t){e.roomJoined=t.payload},setCurPlayer:function(e,t){e.curPlayer=t.payload},setJoinedRoomData:function(e,t){e.roomId=t.payload.id,e.roomData=t.payload},setPlayerList:function(e,t){console.log("payloadpayloadpayloadpayload",t.payload),e.playerList=t.payload.filter((function(e){return!0}))},setAvailableRooms:function(e,t){e.availableRooms=t.payload.filter((function(e){return tt(e)}))},addAvailableRooms:function(e,t){if(tt(t.payload.room)){var i=e.availableRooms.findIndex((function(e){return e.roomId===t.payload.roomId}));-1!==i?e.availableRooms[i]=t.payload.room:e.availableRooms.push(t.payload.room)}},removeAvailableRooms:function(e,t){e.availableRooms=e.availableRooms.filter((function(e){return e.roomId!==t.payload}))}}}),nt=it.actions,st=nt.setLobbyJoined,at=nt.setRoomJoined,ot=nt.setJoinedRoomData,rt=nt.setAvailableRooms,lt=nt.addAvailableRooms,ct=nt.removeAvailableRooms,dt=nt.setPlayerList,ut=nt.setCurPlayer,pt=it.reducer,ht=Object(z.b)({name:"phaser",initialState:{bulletName:"",bulletDuration:0,shieldName:"",shieldDuration:0,bulletChanged:!1,shieldChanged:!1,hasAtomic:!1,isExist:!1},reducers:{setBulletName:function(e,t){e.bulletName=t.payload,e.bulletChanged=!e.bulletChanged},setBulletDuration:function(e,t){e.bulletDuration=t.payload},setShieldName:function(e,t){e.shieldName=t.payload,e.shieldChanged=!e.shieldChanged},setShieldDuration:function(e,t){e.shieldDuration=t.payload},setHasAtomic:function(e,t){e.hasAtomic=t.payload},setIsExist:function(e,t){e.isExist=t.payload}}}),yt=ht.actions,mt=yt.setBulletName,_t=yt.setBulletDuration,bt=yt.setShieldName,gt=yt.setShieldDuration,vt=yt.setHasAtomic,ft=yt.setIsExist,xt=ht.reducer;Object(Y.d)();var wt,Et,Ot,St,jt,kt,At,Tt,Lt,Rt,Pt,It,Mt,Ct,Bt,Dt,Nt=Object(z.a)({reducer:{user:Ze,wallet:et,room:pt,phaser:xt},middleware:function(e){return e({serializableCheck:!1})}}),Ut=i(84),Ft=i.n(Ut),Vt={login:function(){var e=Object(b.a)(v.a.mark((function e(t){var i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ft.a.post("".concat(W.environment.API_URL,"/auth/login"),{account:t});case 2:return i=e.sent,e.abrupt("return",i.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Yt={auth:Vt,score:{saveScore:function(e,t,i,n){return Ft.a.post("".concat(W.environment.API_URL,"/score/saveScore"),{account:e,tokenId:t,shipName:i,tier:n},Z())},getScores:function(e,t){return Ft.a.post("".concat(W.environment.API_URL,"/score/getScores"),{period:e,league:t})},saveScoreLog:function(e,t,i,n,s){return Ft.a.post("".concat(W.environment.API_URL,"/score/saveScoreLog"),{account:e,tokenId:t,shipName:i,tier:n,score:s},Z())}}},zt=i(35),Gt=i(194),Ht=i(666),Kt=i(671),Wt=i(676),Xt=i(668),Jt=i(663),qt=i(658),Zt=i(659),Qt=i(657),$t=(i(292),i(293),i(667)),ei=i(664),ti=o.a.forwardRef((function(e,t){return Object(M.jsx)(ei.a,Object(G.a)({elevation:6,ref:t,variant:"filled"},e))})),ii=function(e){var t=e.noticeMsg,i=e.showNotice,n=e.setShowNotice,s=e.severity,a=function(e,t){"clickaway"!==t&&n(!1)};return Object(M.jsx)($t.a,{open:i,autoHideDuration:5e3,onClose:a,anchorOrigin:{vertical:"top",horizontal:"right"},children:Object(M.jsx)(ti,{onClose:a,severity:s,sx:{width:"100%"},children:t})})},ni=y.c.div(wt||(wt=Object(u.a)(["\n  height: 100%;\n  width: 100%;\n  max-width: 1700px;\n  margin: 0 auto;\n}\n"]))),si=y.c.div(Et||(Et=Object(u.a)(["\n  height: calc(100vh - 250px);\n  width: 88%;\n  max-width: 980px;\n  margin: 0 auto;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),ai=y.c.div(Ot||(Ot=Object(u.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  width: 100%;\n  height: 100%;\n  min-height: 150px;\n"]))),oi=y.c.div(St||(St=Object(u.a)(["\n  width: 70%;\n  max-width: 600px;\n"]))),ri=y.c.div(jt||(jt=Object(u.a)(["\n  text-align: center;\n  margin-bottom: 10px;\n  p {\n    font-size: 48px;\n    color: #FFFFFF;\n  }\n  img {\n    width: 450px;\n  }\n"]))),li=y.c.h3(kt||(kt=Object(u.a)(["\n  font-size: 25px;\n  color: white;\n  text-align: center;\n  font-weight: normal;\n"]))),ci=y.c.div(At||(At=Object(u.a)(["\n  display: flex;\n  justify-content: space-between;\n"]))),di=y.c.div(Tt||(Tt=Object(u.a)(["\n  width: 425px;\n  height: 460px;\n  max-height: 460px;\n  background-size: contain;\n  margin: 0 auto;\n  display: flex;\n\n  --swiper-navigation-size: 24px;\n\n  .swiper-container {\n    width: 425px;\n    height: 440px;\n    border-radius: 8px;\n    overflow: hidden;\n  }\n\n  .swiper-container .swiper-button-next::after,\n  .swiper-container .swiper-button-prev::after {\n    content: none;\n  }\n\n  .swiper-slide {\n    height: 440px;\n    margin-top: 30px;\n    margin-left: 0px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n\n  .swiper-slide img.create-game {\n    width: 100%;\n    height: 100%;\n    object-fit: cover\n  }\n\n  .swiper-slide p.title {\n    position: absolute;\n    color: white;\n    font-size: 36px;\n  }\n\n  .swiper-slide img.ship {\n    position: absolute;\n    width: 400px;\n    top: 0px;\n    left: 12px;\n  }\n\n  .swiper-slide img.shield {\n    position: absolute;\n    width: 400px;\n    top: 0px;\n    left: 12px;\n  }\n  \n  .swiper-slide img.broken {\n    position: absolute;\n    width: 400px;\n    top: 0px;\n    left: 12px;\n  }\n  .swiper-slide img.crosmonaut {\n    position: absolute;\n    width: 400px;\n    top: 0px;\n    left: 12px;\n  }\n  .swiper-slide img.background {\n    position: absolute;\n    width: 400px;\n    top: 0px;\n    left: 12px;\n  }\n  .swiper-slide img.on_background {\n    position: absolute;\n    width: 400px;\n    top: 0px;\n    left: 12px;\n  }\n  .swiper-slide img.booster {\n    position: absolute;\n    width: 400px;\n    top: 0px;\n    left: 12px;\n  }\n  .swiper-slide img.weapon {\n    position: absolute;\n    width: 400px;\n    top: 0px;\n    left: 12px;\n  }\n  \n  .swiper-slide img.banner {\n    position: absolute;\n    width: 400px;\n    top: 0px;\n    left: 12px;\n  }\n  .swiper-slide img.tier {\n    position: absolute;\n    width: 80px;\n    top: 20px;\n    right: 33px;\n  }\n  \n  .swiper-slide img.avatarBg {\n    position: absolute;\n    top: -46px;\n    left: 2px;\n    width: 421px;\n    height: 462px;\n  }\n\n  .swiper-slide p.name {\n    position: absolute;\n    top: -15px;\n    left: calc(50% );\n    transform: translate(-50%, 0);\n    font-size: 16px;\n    color: var(--color-yellow);\n  }\n\n  .swiper-slide p.tier {\n    position: absolute;\n    left: calc(50% - 10px);\n    bottom: 50px;\n    transform: translate(-50%, 0);\n    font-size: 16px;\n    color: var(--color-yellow);\n  }\n"]))),ui=y.c.div(Lt||(Lt=Object(u.a)(["\n  display: flex;\n  align-items: center;\n  \n  img {\n    width: 50px;\n    height: 55px;\n    cursor: pointer;\n  }\n"]))),pi=y.c.div(Rt||(Rt=Object(u.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-around;\n  height: 300px;\n  flex-direction: column;\n  margin-top: 65px;\n\n  color: var(--color-yellow);\n"]))),hi=y.c.div(Pt||(Pt=Object(u.a)(["\n  font-size: 23px;\n  text-align: center;\n  span {\n    padding-top: 4px;\n  }\n"]))),yi=y.c.div(It||(It=Object(u.a)(["\n  padding: 8px 10px;\n  border-radius: 8px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 25px;\n  background: rgba(40,13,95,1);\n  color: white;\n  cursor: pointer;\n"]))),mi=y.c.div(Mt||(Mt=Object(u.a)(["\n  background: url('assets/images/avatar_join.png');\n  font-size: 30px;\n  background-size: contain;\n  background-repeat: no-repeat;\n  width: 132px;\n  height: 50px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  color: white;\n  cursor: pointer;\n"]))),_i=y.c.div(Ct||(Ct=Object(u.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  img.room {\n    width: 80px;\n    object-fit: cover;\n    opacity: 0.45;\n    &:hover {\n      cursor: pointer;\n    }\n  }\n  img.room.selected {\n    opacity: 1 !important\n  }\n"]))),bi=(y.c.div(Bt||(Bt=Object(u.a)(["\n  width: 80px;\n  margin-right: 4px;\n  margin-left: 4px;\n  padding: 8px 10px;\n  border-radius: 8px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 18px;\n  background-image: ",";\n  color: white;\n  cursor: pointer;\n"])),(function(e){return e.bgColor})),i(29)),gi=i.n(bi),vi=i(7),fi=i(6),xi=i(9),wi=i(10),Ei=i(313),Oi=i.n(Ei),Si=i(314);!function(e){e[e.GET_PLAYERS=0]="GET_PLAYERS",e[e.UPDATE_PLAYER=1]="UPDATE_PLAYER",e[e.UPDATE_SCORE=2]="UPDATE_SCORE",e[e.UPDATE_PLAYER_NAME=3]="UPDATE_PLAYER_NAME",e[e.READY_TO_CONNECT=4]="READY_TO_CONNECT",e[e.SEND_ROOM_DATA=5]="SEND_ROOM_DATA",e[e.UPDATE_BULLET=6]="UPDATE_BULLET",e[e.COLLIDE_PLAYER_BULLET=7]="COLLIDE_PLAYER_BULLET",e[e.COLLIDE_BULLET_ASTEROID=8]="COLLIDE_BULLET_ASTEROID",e[e.COLLIDE_PLAYER_ASTEROID=9]="COLLIDE_PLAYER_ASTEROID",e[e.COLLIDE_PLAYER_AIRDROP=10]="COLLIDE_PLAYER_AIRDROP",e[e.GAMEPLAY_READY=11]="GAMEPLAY_READY",e[e.ATOMIC_EXPLODE=12]="ATOMIC_EXPLODE",e[e.CS_ASTEROID_CREATE=13]="CS_ASTEROID_CREATE",e[e.CS_ASTEROID_REMOVE=14]="CS_ASTEROID_REMOVE",e[e.CS_PLAYER_AIRDROP=15]="CS_PLAYER_AIRDROP",e[e.SC_BULLET_CREATE=16]="SC_BULLET_CREATE"}(Dt||(Dt={}));var ji,ki=new gi.a.Events.EventEmitter;!function(e){e.PLAYER_JOINED="player-joined",e.PLAYER_UPDATED="player-updated",e.PLAYER_LEFT="player-left",e.PLAYER_DISCONNECTED="player-disconnected",e.MY_PLAYER_READY="my-player-ready",e.MY_PLAYER_NAME_CHANGE="my-player-name-change",e.MY_PLAYER_TEXTURE_CHANGE="my-player-texture-change",e.ITEM_USER_ADDED="item-user-added",e.ITEM_USER_REMOVED="item-user-removed",e.TOKEN_REWARDED="token-rewarded",e.CAN_PLAY="can-play",e.SHIP_DAMAGED="ship-damaged",e.GOTO_MAINMENU="goto-mainmenu",e.TOGGLE_SOUNDS="toggle-sounds",e.EXIST_GAME="exit-game",e.PLAY_AGAIN="play-again",e.BULLET_UPDATED="bullet-updated",e.BULLET_CREATED="bullet-created",e.BULLET_REMOVED="bullet-removed",e.ASTEROID_UPDATED="asteroid-updated",e.ASTEROID_CREATED="asteroid-created",e.ASTEROID_REMOVED="asteroid-removed",e.ASTEROID_SPLIT="asteroid-split",e.AIRDROP_UPDATED="airdrop-updated",e.AIRDROP_CREATED="airdrop-created",e.AIRDROP_REMOVED="airdrop-removed",e.COLLISION_PLAYER_BULLET="collision-player-bullet",e.COLLISION_PLAYER_ASTEROID="collision-player-asteroid",e.COLLISION_BULLET_ASTEROID="collision-bullet-asteroid",e.COLLISION_PLAYER_AIRDROP="collision-player-airdrop",e.ASTEROID_CHANGES_UPDATED="asteroid-changes-updated"}(ji||(ji={}));var Ai=function(){function e(){Object(vi.a)(this,e),this._client=void 0,this._room=void 0,this._lobby=void 0,this._mySessionId=void 0,this._dtServer2Client=void 0;var t=W.environment.END_POINT;console.log("connect to ",t," at : ",(new Date).getTime()),this._client=new Si.Client(t),this.joinLobbyRoom().then((function(){console.log("success connect  at : ",(new Date).getTime()),Nt.dispatch(st(!0))})),ki.on(ji.MY_PLAYER_NAME_CHANGE,this.updatePlayerName,this),ki.on(ji.MY_PLAYER_TEXTURE_CHANGE,this.updatePlayer,this)}return Object(fi.a)(e,[{key:"joinLobbyRoom",value:function(){var e=Object(b.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._client.joinOrCreate(q.LOBBY);case 2:this._lobby=e.sent,this._lobby.onMessage("rooms",(function(e){Nt.dispatch(rt(e))})),this._lobby.onMessage("+",(function(e){var t=Object(d.a)(e,2),i=t[0],n=t[1];Nt.dispatch(lt({roomId:i,room:n}))})),this._lobby.onMessage("-",(function(e){Nt.dispatch(ct(e))}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getRoomData",value:function(){return{a:this._lobby,b:this._room}}},{key:"joinOrCreatePublic",value:function(){var e=Object(b.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._client.joinOrCreate(q.PUBLIC);case 2:this._room=e.sent,this.initialize();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createCustom",value:function(){var e=Object(b.a)(v.a.mark((function e(t){var i,n,s,a,o,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.name,n=t.password,s=t.autoDispose,a=t.roomMode,o=t.mapMode,r=t.cost,e.next=3,this._client.create(q.CUSTOM,{name:i,password:n,autoDispose:s,roomMode:a,mapMode:o,cost:r});case 3:this._room=e.sent,this.initialize();case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"joinCustomById",value:function(){var e=Object(b.a)(v.a.mark((function e(t,i){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._client.joinById(t,{password:i});case 2:this._room=e.sent,this.initialize();case 4:case"end":return e.stop()}}),e,this)})));return function(t,i){return e.apply(this,arguments)}}()},{key:"initialize",value:function(){var e=this;this._room&&(this._lobby.leave(),this._mySessionId=this._room.sessionId,Nt.dispatch(Fe(this._room.sessionId)),this._room.onMessage(Dt.SEND_ROOM_DATA,(function(e){Nt.dispatch(ot(e))})),this._room.onMessage(Dt.GET_PLAYERS,(function(e){Nt.dispatch(dt(Object.entries(null===e||void 0===e?void 0:e.players).map((function(e){var t=Object(d.a)(e,2);return{id:t[0],val:t[1]}})))),console.log("content",Object.entries(null===e||void 0===e?void 0:e.players).map((function(e){var t=Object(d.a)(e,2);return{id:t[0],val:t[1]}})))})),console.log("this._room.state.players",this._room.state.players),this._room.state.players&&(this._room.state.players.onAdd=function(t,i){i!==e._mySessionId&&(Nt.dispatch(ut(e._mySessionId)),t.onChange=function(e){ki.emit(ji.PLAYER_UPDATED,e,i),e.forEach((function(e){var n=e.field,s=e.value;"name"===n&&""===s&&(ki.emit(ji.PLAYER_JOINED,t,i),Nt.dispatch(Je({id:i,name:s})))}))})}),this._room.state.players.onRemove=function(e,t){ki.emit(ji.PLAYER_LEFT,t),Nt.dispatch(qe(t))},this._room.state.bullets.onAdd=function(e,t){console.log("Get bullet create : ",(new Date).getTime()),ki.emit(ji.BULLET_CREATED,e,t)},this._room.state.bullets.onRemove=function(e,t){ki.emit(ji.BULLET_REMOVED,t)},this._room.state.asteroids.onAdd=function(t,i){ki.emit(ji.ASTEROID_CREATED,t,i),t.onChange=function(t){ki.emit(ji.ASTEROID_CHANGES_UPDATED,t,i),t.forEach((function(t){var i=t.field,n=t.value;"curServerTime"===i&&e.setDtServer2Client(n)}))}},this._room.state.asteroids.onRemove=function(e,t){ki.emit(ji.ASTEROID_REMOVED,t)},this._room.state.airdrops.onAdd=function(e,t){ki.emit(ji.AIRDROP_CREATED,e,t),e.onChange=function(e){e.forEach((function(e){var i=e.field,n=e.value;ki.emit(ji.AIRDROP_UPDATED,i,n,t)}))}},this._room.state.airdrops.onRemove=function(e,t){ki.emit(ji.AIRDROP_REMOVED,t)},this._room.onMessage(Dt.COLLIDE_PLAYER_ASTEROID,(function(e){ki.emit(ji.COLLISION_PLAYER_ASTEROID,e)})),this._room.onMessage(Dt.COLLIDE_PLAYER_BULLET,(function(e){ki.emit(ji.COLLISION_PLAYER_BULLET,e)})),this._room.onMessage(Dt.COLLIDE_BULLET_ASTEROID,(function(e){ki.emit(ji.COLLISION_BULLET_ASTEROID,e)})),this._room.onMessage(Dt.COLLIDE_PLAYER_AIRDROP,(function(e){ki.emit(ji.COLLISION_PLAYER_AIRDROP,e)})))}},{key:"onPlayerJoined",value:function(e,t){ki.on(ji.PLAYER_JOINED,e,t)}},{key:"onPlayerLeft",value:function(e,t){ki.on(ji.PLAYER_LEFT,e,t)}},{key:"onMyPlayerReady",value:function(e,t){ki.on(ji.MY_PLAYER_READY,e,t)}},{key:"onPlayerUpdated",value:function(e,t){ki.on(ji.PLAYER_UPDATED,e,t)}},{key:"onBulletCreated",value:function(e,t){ki.on(ji.BULLET_CREATED,e,t)}},{key:"onBulletUpdated",value:function(e,t){ki.on(ji.BULLET_UPDATED,e,t)}},{key:"onBulletRemoved",value:function(e,t){ki.on(ji.BULLET_REMOVED,e,t)}},{key:"onAsteroidCreated",value:function(e,t){ki.on(ji.ASTEROID_CREATED,e,t)}},{key:"onAsteroidUpdated",value:function(e,t){ki.on(ji.ASTEROID_UPDATED,e,t)}},{key:"onAsteroidRemoved",value:function(e,t){ki.on(ji.ASTEROID_REMOVED,e,t)}},{key:"onAsteroidChangesUpdated",value:function(e,t){ki.on(ji.ASTEROID_CHANGES_UPDATED,e,t)}},{key:"onAirdropCreated",value:function(e,t){ki.on(ji.AIRDROP_CREATED,e,t)}},{key:"onAirdropUpdated",value:function(e,t){ki.on(ji.AIRDROP_UPDATED,e,t)}},{key:"onAirdropRemoved",value:function(e,t){ki.on(ji.AIRDROP_REMOVED,e,t)}},{key:"onCollisionPlayerWithBullet",value:function(e,t){ki.on(ji.COLLISION_PLAYER_BULLET,e,t)}},{key:"onCollisionPlayerWithAsteroid",value:function(e,t){ki.on(ji.COLLISION_PLAYER_ASTEROID,e,t)}},{key:"onCollisionBulletAsteroid",value:function(e,t){ki.on(ji.COLLISION_BULLET_ASTEROID,e,t)}},{key:"onCollisionPlayerAirdrop",value:function(e,t){ki.on(ji.COLLISION_PLAYER_AIRDROP,e,t)}},{key:"updatePlayer",value:function(e,t,i,n,s,a,o,r,l,c,d,u,p,h,y,m,_,b){var g,v=this.clientTime();null===(g=this._room)||void 0===g||g.send(Dt.UPDATE_PLAYER,{x:e,y:t,rotation:i,speed_x:n,speed_y:s,angularVel:a,isForwarding:o,hasShield:r,isFire:l,score:c,isExplode:d,lives:u,clientTime:v,account:p,shipName:h,tokenId:y,tier:m,paid:_,team:b})}},{key:"updateBulletToServer",value:function(e,t,i,n,s,a){var o;null===(o=this._room)||void 0===o||o.send(Dt.UPDATE_BULLET,{x:e,y:t,rotation:i,speed_x:n,speed_y:s,bulletType:a})}},{key:"createAirdropToServer",value:function(e,t,i,n){var s;null===(s=this._room)||void 0===s||s.send(Dt.CS_ASTEROID_CREATE,{x:e,y:t,owner:i,kind:n})}},{key:"removeAirdropToServer",value:function(e){var t;null===(t=this._room)||void 0===t||t.send(Dt.CS_ASTEROID_REMOVE,{index:e})}},{key:"clientTime",value:function(){return(new Date).getTime()}},{key:"setDtServer2Client",value:function(e){this._dtServer2Client=this.clientTime()-e}},{key:"updatePlayerName",value:function(e){var t;null===(t=this._room)||void 0===t||t.send(Dt.UPDATE_PLAYER_NAME,{name:e})}},{key:"allPlayersReady",value:function(e){var t;null===(t=this._room)||void 0===t||t.send(Dt.GAMEPLAY_READY,{ready:e})}},{key:"specialKeyIsDown",value:function(e){var t;null===(t=this._room)||void 0===t||t.send(Dt.ATOMIC_EXPLODE,{explode:e})}},{key:"readyToConnect",value:function(){var e;null===(e=this._room)||void 0===e||e.send(Dt.READY_TO_CONNECT,{clientTime:this.clientTime()}),ki.emit(ji.MY_PLAYER_READY)}},{key:"recordScore",value:function(){var e=Object(b.a)(v.a.mark((function e(t,i,n,s,a){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Yt.score.saveScoreLog(t,i.toString(),n,s,a);case 3:e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log("record failed! ",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,i,n,s,a){return e.apply(this,arguments)}}()}]),e}(),Ti=function(e){Object(xi.a)(i,e);var t=Object(wi.a)(i);function i(){var e;return Object(vi.a)(this,i),(e=t.call(this,"boot"))._txtIntro=void 0,e._network=void 0,e}return Object(fi.a)(i,[{key:"init",value:function(){var e=document.createElement("style");document.head.appendChild(e);e.sheet.insertRule('@font-face { font-family: "Fast Hand"; src: url("assets/fonts/Fast_Hand.otf") format("opentype"); }',0),W.gamePros.screenWidth=this.cameras.main.width,W.gamePros.screenHeight=this.cameras.main.height,this._network=new Ai}},{key:"preload",value:function(){var e=this;this.load.script("webfont","https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js"),Oi.a.load({custom:{families:["Fast Hand"]}});this.load.plugin("rexvirtualjoystickplugin","https://raw.githubusercontent.com/rexrainbow/phaser3-rex-notes/master/dist/rexvirtualjoystickplugin.min.js",!0),W.graphicAssets.shipsTypes.forEach((function(t){e.load.image(t,W.graphicAssets.shipUrl+t+".png")})),this.load.image(W.graphicAssets.bulletNormal.name,W.graphicAssets.bulletNormal.URL),this.load.image(W.graphicAssets.bulletUnlimited.name,W.graphicAssets.bulletUnlimited.URL),this.load.image(W.graphicAssets.bulletDouble.name,W.graphicAssets.bulletDouble.URL),this.load.image(W.graphicAssets.bulletTriple.name,W.graphicAssets.bulletTriple.URL),this.load.image(W.graphicAssets.bulletVolley.name,W.graphicAssets.bulletVolley.URL),this.load.image(W.graphicAssets.bulletLazer.name,W.graphicAssets.bulletLazer.URL),this.load.image(W.graphicAssets.bulletExplose.name,W.graphicAssets.bulletExplose.URL),this.load.image(W.graphicAssets.bulletRegion.name,W.graphicAssets.bulletRegion.URL),this.load.image(W.graphicAssets.bulletAtomic.name,W.graphicAssets.bulletAtomic.URL),this.load.image(W.graphicAssets.asteroidFirstL.name,W.graphicAssets.asteroidFirstL.URL),this.load.image(W.graphicAssets.asteroidFirstS.name,W.graphicAssets.asteroidFirstS.URL),this.load.image(W.graphicAssets.asteroidSecondL.name,W.graphicAssets.asteroidSecondL.URL),this.load.image(W.graphicAssets.asteroidSecondS.name,W.graphicAssets.asteroidSecondS.URL),this.load.image(W.graphicAssets.airdropRapid.name,W.graphicAssets.airdropRapid.URL),this.load.image(W.graphicAssets.airdropDouble.name,W.graphicAssets.airdropDouble.URL),this.load.image(W.graphicAssets.airdropTriple.name,W.graphicAssets.airdropTriple.URL),this.load.image(W.graphicAssets.airdropBurst.name,W.graphicAssets.airdropBurst.URL),this.load.image(W.graphicAssets.airdropExplosive.name,W.graphicAssets.airdropExplosive.URL),this.load.image(W.graphicAssets.airdropLazer.name,W.graphicAssets.airdropLazer.URL),this.load.image(W.graphicAssets.airdropRocket.name,W.graphicAssets.airdropRocket.URL),this.load.image(W.graphicAssets.airdropLife.name,W.graphicAssets.airdropLife.URL),this.load.image(W.graphicAssets.airdropShield.name,W.graphicAssets.airdropShield.URL),this.load.image(W.graphicAssets.enemyFirst.name,W.graphicAssets.enemyFirst.URL),this.load.image(W.graphicAssets.enemySecond.name,W.graphicAssets.enemySecond.URL),this.load.image(W.graphicAssets.enemyBullet.name,W.graphicAssets.enemyBullet.URL),this.load.image(W.graphicAssets.rocketFirst.name,W.graphicAssets.rocketFirst.URL),this.load.image(W.graphicAssets.rocketSecond.name,W.graphicAssets.rocketSecond.URL),this.load.image(W.graphicAssets.rocketThird.name,W.graphicAssets.rocketThird.URL),this.load.image(W.graphicAssets.rocketFourth.name,W.graphicAssets.rocketFourth.URL),this.load.image(W.graphicAssets.rocketBullet.name,W.graphicAssets.rocketBullet.URL),this.load.image(W.graphicAssets.lifeEmpty.name,W.graphicAssets.lifeEmpty.URL),this.load.image(W.graphicAssets.lifeFull.name,W.graphicAssets.lifeFull.URL),this.load.image(W.graphicAssets.background.name,W.graphicAssets.background.URL),this.load.atlas(W.graphicAssets.particles.name,W.graphicAssets.particles.URL,W.graphicAssets.particles.data),this.load.atlas(W.graphicAssets.lazerEffectParticle.name,W.graphicAssets.lazerEffectParticle.URL,W.graphicAssets.lazerEffectParticle.data),this.load.image(W.graphicAssets.shield.name,W.graphicAssets.shield.URL),this.load.audio(W.soundAssets.bg.name,W.soundAssets.bg.URL),this.load.audio(W.soundAssets.destroyed.name,W.soundAssets.destroyed.URL),this.load.audio(W.soundAssets.fire.name,W.soundAssets.fire.URL),this.load.audio(W.soundAssets.engine.name,W.soundAssets.engine.URL),this.load.audio(W.soundAssets.shipExplose.name,W.soundAssets.shipExplose.URL)}},{key:"startGame",value:function(e,t){this.scene.stop("boot"),this.scene.start("play",{network:this._network,shipPros:e,gameProps:t}),Nt.dispatch(at(!0))}},{key:"startMultiGame",value:function(e,t){this.scene.stop("boot"),this.scene.start("multiplay",{network:this._network,shipPros:e,gameProps:t}),Nt.dispatch(at(!0)),this._network&&this._network.readyToConnect()}}]),i}(gi.a.Scene),Li=i(18),Ri=function(e){Object(xi.a)(i,e);var t=Object(wi.a)(i);function i(e){var n,s=e.scene,a=e.group,o=e.x,r=e.y,l=e.texture,c=e.frame;return Object(vi.a)(this,i),n=t.call(this,s,o,r,l,c),s.add.existing(Object(Li.a)(n)),s.physics.add.existing(Object(Li.a)(n)),a.add(Object(Li.a)(n)),n}return Object(fi.a)(i)}(gi.a.Physics.Arcade.Sprite),Pi=i(43),Ii=i(36),Mi=function(){function e(t,i,n,s,a){var o=this;Object(vi.a)(this,e),this._owner=void 0,this._scene=void 0,this._fireCooldown=void 0,this._passiveRegenCooldown=void 0,this._sinceFired=void 0,this._sinceRegen=void 0,this._storedBullets=void 0,this._maxBullets=void 0,this._speed=void 0,this._triggerHeld=void 0,this._triggered=void 0,this._isShip=void 0,this._isEnableSoundEffect=void 0,this._owner=t,this._scene=t.scene,this._fireCooldown=1e3*n,this._passiveRegenCooldown=1e3*s,this._speed=a,this._isEnableSoundEffect=void 0===this._scene.registry.get("enabledSound")||this._scene.registry.get("enabledSound"),this._isShip=999!==i,this._sinceFired=0,this._sinceRegen=0,this._storedBullets=i,this._isShip&&99!==this._maxBullets&&this._scene.registry.set("shots",this._storedBullets),this._maxBullets=i,this._triggerHeld=!1,ki.on(ji.TOGGLE_SOUNDS,(function(e){o._isEnableSoundEffect=e,o._scene.registry.set("enabledSound",e)}),this),void 0===this._isEnableSoundEffect&&(this._isEnableSoundEffect=!0)}return Object(fi.a)(e,[{key:"update",value:function(e,t){this._sinceFired+=t,this._sinceRegen+=t,this._sinceRegen>this._passiveRegenCooldown&&this._storedBullets<this._maxBullets&&(this.reload(),this._sinceRegen=0)}},{key:"updateBullet",value:function(e,t,i,n){0!==e&&(this._maxBullets=e),0!==t&&(this._fireCooldown=1e3*t),0!==i&&(this._passiveRegenCooldown=1e3*i),0!==n&&(this._speed=n),99===e&&(this._scene.registry.values.shots=99),this.reload()}},{key:"setTriggerHeld",value:function(e){this._triggered=e}},{key:"spendBullet",value:function(){this._storedBullets=Math.max(this._storedBullets-1,0),this._isShip&&99!==this._maxBullets&&(this._scene.registry.values.shots=this._storedBullets)}},{key:"reload",value:function(){this._storedBullets=Math.min(this._storedBullets+1,this._maxBullets),this._isShip&&99!==this._maxBullets&&(this._scene.registry.values.shots=this._storedBullets)}}]),e}(),Ci=function(e){Object(xi.a)(i,e);var t=Object(wi.a)(i);function i(){return Object(vi.a)(this,i),t.apply(this,arguments)}return Object(fi.a)(i,[{key:"update",value:function(e,t){Object(Pi.a)(Object(Ii.a)(i.prototype),"update",this).call(this,e,t),this._triggered&&this.canFire()&&this.fire({pos:this._owner.getCenter(),rotation:this._owner.rotForward,speed:this._speed})}},{key:"fire",value:function(e){var t=e.pos,i=t.x,n=t.y,s=e.rotation,a=e.speed;this.spendBullet(),this._scene._network?(this._scene.updateBulletLaunchDataToserver(i,n,s,a,this._owner),this._scene.spawnRandomBullet(i,n,s,a,this._owner,!0)):this._scene.spawnRandomBullet(i,n,s,a,this._owner,!0),this._isEnableSoundEffect&&this._scene._bulletSound.play(),this._sinceFired=0}},{key:"canFire",value:function(){return this._storedBullets>0&&this._sinceFired>this._fireCooldown}}]),i}(Mi),Bi=function(e){Object(xi.a)(i,e);var t=Object(wi.a)(i);function i(){return Object(vi.a)(this,i),t.apply(this,arguments)}return Object(fi.a)(i,[{key:"update",value:function(e,t){Object(Pi.a)(Object(Ii.a)(i.prototype),"update",this).call(this,e,t),this._triggered&&this.canFire()&&this.fire({pos:this._owner.getCenter(),rotation:this._owner.rotLeft,speed:this._speed})}},{key:"fire",value:function(e){var t=e.pos,i=t.x,n=t.y,s=e.rotation,a=e.speed;this.spendBullet(),this._scene.spawnRandomEnemyBullet(i,n,s,a,this._owner),this._isEnableSoundEffect&&this._scene._bulletSound.play(),this._sinceFired=0}},{key:"canFire",value:function(){return this._sinceFired>this._fireCooldown}}]),i}(Mi),Di=function(e){Object(xi.a)(i,e);var t=Object(wi.a)(i);function i(e,n,s,a){var o;Object(vi.a)(this,i),(o=t.call(this,e))._playerTexture=void 0,o._playerName=void 0,o._engine=void 0,o._lazerEffectParticle=void 0,o._lazerEffect=void 0,o._particles=void 0,o._shield=void 0,o._gunModule=void 0,o._lives=void 0,o._playerId=void 0,o._tier=void 0,o._hasCombat=void 0,o._readyToConnect=!1,o._hasShield=void 0,o._bulletType=void 0,o._bulletTypeTimer=void 0,o._playerId=n,o._tier=0|s.tier,o._hasCombat=a,o._playerTexture=e.texture;var r=s.isBroken?W.shipPros.startingLives-1:W.shipPros.startingLives;o.Lives=r+Ce[s.tier],o._shield=o.scene.add.sprite(o.x,o.y,W.graphicAssets.shield.name),o._shield.setVisible(!1),o._hasShield=!1,o._bulletType=se;var l=Object(Li.a)(o),c=W.bulletPros.NORMAL_BULLET.maxBullets+Ie[o._tier]+(a?1:0),d=W.bulletPros.NORMAL_BULLET.fireCooldown*Me[o._tier]*(a?.9:1),u=W.bulletPros.NORMAL_BULLET.passiveRegenCooldown,p=W.bulletPros.NORMAL_BULLET.speed;return o._gunModule=new Ci(l,c,d,u,p),o._particles=o.scene.add.particles(W.graphicAssets.particles.name),o._engine=o._particles.createEmitter({frame:["green"],scale:{start:.2,end:0},alpha:{start:.5,end:0},x:0,y:0,quantity:3,lifespan:{min:10,max:100},speed:{min:10,max:50},blendMode:"ADD",follow:Object(Li.a)(o)}),o._lazerEffectParticle=o.scene.add.particles(W.graphicAssets.lazerEffectParticle.name),o._lazerEffect=o._lazerEffectParticle.createEmitter({frame:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15"],scale:{start:1,end:0},alpha:{start:.5,end:0},x:0,y:0,quantity:3,lifespan:{min:10,max:10},speed:{min:10,max:10},blendMode:"ADD",follow:Object(Li.a)(o)}),o}return Object(fi.a)(i,[{key:"updateBulletProperty",value:function(e,t){this._bulletType=e;var i=this._bulletType===ae?W.bulletPros[e].maxBullets:W.bulletPros[e].maxBullets+Ie[this._tier]+(this._hasCombat?1:0),n=W.bulletPros[e].fireCooldown*Me[this._tier]*(this._hasCombat?.9:1),s=W.bulletPros[e].passiveRegenCooldown,a=W.bulletPros[e].speed;this._gunModule.updateBullet(i,n,s,a),this.restoreBulletProperty(t)}},{key:"restoreBulletProperty",value:function(e){var t,i=this;null===(t=this._bulletTypeTimer)||void 0===t||t.remove(),this._bulletTypeTimer=this.scene.time.delayedCall(1e3*e,(function(){i._bulletType=se;var e=W.bulletPros.NORMAL_BULLET.maxBullets+Ie[i._tier]+(i._hasCombat?1:0),t=W.bulletPros.NORMAL_BULLET.fireCooldown*Me[i._tier]*(i._hasCombat?.9:1),n=W.bulletPros.NORMAL_BULLET.passiveRegenCooldown,s=W.bulletPros.NORMAL_BULLET.speed;i._gunModule.updateBullet(e,t,n,s)}),null,this)}},{key:"Lives",get:function(){return this._lives},set:function(e){e>W.shipPros.startingLives+Ce[this._tier]||(this._lives=e,this.scene.registry.set("playerLives",this._lives))}},{key:"reload",value:function(){this._gunModule.reload()}},{key:"rotForward",get:function(){return this.rotation}},{key:"rotLeft",get:function(){return this.rotation-Math.PI/2}},{key:"rotRight",get:function(){return this.rotation+Math.PI/2}},{key:"rotBack",get:function(){return this.rotation+Math.PI}},{key:"angleForward",get:function(){return this.angle}},{key:"angleLeft",get:function(){return this.angle-90}},{key:"angleRight",get:function(){return this.angle+90}},{key:"angleBack",get:function(){return this.angle+180}}]),i}(Ri),Ni=function(e){Object(xi.a)(i,e);var t=Object(wi.a)(i);function i(e){var n,s=e.sargs,a=e.id,o=e.shipPros,r=e.hasCombat,l=e.inputKeys,c=l.forward,d=l.brake,u=l.left,p=l.right,h=l.fire;return Object(vi.a)(this,i),(n=t.call(this,s,a,o,r))._shipBody=void 0,n._engineSound=void 0,n._account=void 0,n._tokenId=void 0,n._shipName=void 0,n._paid=void 0,n._team=void 0,n._score=void 0,n._vulnerable=void 0,n._angularVelocity=void 0,n._acceleration=void 0,n._maxVelocity=void 0,n._isExplode=void 0,n._shieldTimer=void 0,n._hasAtomic=void 0,n._hasLazer=void 0,n._forwardKey=void 0,n._brakeKey=void 0,n._leftKey=void 0,n._rightKey=void 0,n._fireKey=void 0,n._curSpeedX=void 0,n._curSpeedY=void 0,n.joystickMovement=void 0,n.fireButtonHandle=void 0,n._maxVelocity=W.shipPros.maxVelocity,n.Score=0,n._angularVelocity=W.shipPros.angularVelocity,n._acceleration=W.shipPros.acceleration,n._vulnerable=!0,n._hasAtomic=!1,n._hasLazer=!1,n._isExplode=!1,n.setDrag(W.shipPros.drag),n.setCircle(27),n.setOrigin(.5),n._shipBody=n.body,n._shipBody.setMaxVelocity(n._maxVelocity),n._forwardKey=c,n._brakeKey=d,n._leftKey=u,n._rightKey=p,n._fireKey=h,n._account=null===o||void 0===o?void 0:o.account,n._tokenId=null===o||void 0===o?void 0:o.tokenId,n._shipName=null===o||void 0===o?void 0:o.name,n._paid=null===o||void 0===o?void 0:o.paid,n._team=null===o||void 0===o?void 0:o.team,n}return Object(fi.a)(i,[{key:"Score",get:function(){return this._score},set:function(e){this._score=e,this.scene.registry.set("score",this._score)}},{key:"Vulnerable",get:function(){return this._vulnerable},set:function(e){this._vulnerable=e}},{key:"BulletType",get:function(){return this._bulletType}},{key:"setShiled",value:function(e){var t,i=this;this._vulnerable=!1,this._shield.setVisible(!0),this._hasShield=!0,this.setCircle(33),null===(t=this._shieldTimer)||void 0===t||t.remove(),this._shieldTimer=this.scene.time.delayedCall(1e3*e,(function(){i._vulnerable=!0,i._shield.setVisible(!1),i._hasShield=!1,i.setCircle(27)}),null,this)}},{key:"handleJoystickMovement",value:function(e){this.joystickMovement=e}},{key:"handleFire",value:function(e){this.fireButtonHandle=e}},{key:"update",value:function(e,t){var i;this._gunModule.update(e,t),this._lazerEffect.setAngle(this.angleBack),this._lazerEffect.setSpeed({min:this.body.velocity.length()-150,max:this.body.velocity.length()-100}),this._lazerEffect.followOffset.setToPolar(this.rotBack,-22),this._hasLazer?this._lazerEffect.start():this._lazerEffect.stop();var n=!1,s=!1,a=!1,o=!1;if(null!==(i=this.joystickMovement)&&void 0!==i&&i.isMoving&&(n=this.joystickMovement.direction.left,s=this.joystickMovement.direction.right,a=this.joystickMovement.direction.up,o=this.joystickMovement.direction.down),this._forwardKey.isDown||a?(this.setMaxVelocity(this._maxVelocity),this._engine.setAngle(this.angleBack),this._engine.setSpeed({min:this.body.velocity.length()-150,max:this.body.velocity.length()-100}),this._engine.followOffset.setToPolar(this.rotBack,25),this._engine.start(),this.scene.physics.velocityFromRotation(this.rotation,this._shipBody.velocity.length(),this._shipBody.velocity),this.scene.physics.velocityFromRotation(this.rotation,this._acceleration,this._shipBody.acceleration)):(this.scene.physics.velocityFromRotation(this.rotation,this._shipBody.velocity.length(),this._shipBody.velocity),this.scene.physics.velocityFromRotation(this.rotation,0,this._shipBody.acceleration),this._engine.stop()),this._brakeKey.isDown||o){var r=this._maxVelocity;r/=3,this.setMaxVelocity(r)}var l=0;this._leftKey.isDown||n?(n&&(this.setMaxVelocity(this._maxVelocity),this._engine.setAngle(this.angleBack),this._engine.setSpeed({min:this.body.velocity.length()-150,max:this.body.velocity.length()-100}),this._engine.followOffset.setToPolar(this.rotBack,25),this._engine.start(),this.scene.physics.velocityFromRotation(this.rotation,this._shipBody.velocity.length(),this._shipBody.velocity),this.scene.physics.velocityFromRotation(this.rotation,this._acceleration,this._shipBody.acceleration)),l+=-this._angularVelocity):(this._rightKey.isDown||s)&&(s&&(this.setMaxVelocity(this._maxVelocity),this._engine.setAngle(this.angleBack),this._engine.setSpeed({min:this.body.velocity.length()-150,max:this.body.velocity.length()-100}),this._engine.followOffset.setToPolar(this.rotBack,25),this._engine.start(),this.scene.physics.velocityFromRotation(this.rotation,this._shipBody.velocity.length(),this._shipBody.velocity),this.scene.physics.velocityFromRotation(this.rotation,this._acceleration,this._shipBody.acceleration)),l+=this._angularVelocity),this.setAngularVelocity(l),this._fireKey.isDown||this.fireButtonHandle?this._gunModule.setTriggerHeld(!0):this._gunModule.setTriggerHeld(!1),this._hasShield&&this._shield.setPosition(this.x,this.y),this._curSpeedX=this._shipBody.velocity.x,this._curSpeedY=this._shipBody.velocity.y}},{key:"updateToServer",value:function(e){0===this._shipBody.speed&&0===this._shipBody.rotation||e.updatePlayer(this.x,this.y,this.rotation,this._shipBody.velocity.x,this._shipBody.velocity.y,this._shipBody.angularVelocity,this._forwardKey.isDown,this._hasShield,this._fireKey.isDown,this._score,this._isExplode,this._lives,this._account,this._shipName,this._tokenId,this._tier,this._paid,this._team)}},{key:"facing",value:function(){return new gi.a.Math.Vector2(Math.sin(this.rotation),-Math.cos(this.rotation))}},{key:"kill",value:function(){this._isExplode=!0,this._vulnerable=!1,this.Lives-=1,this._engine.stop(),this.emit("ship_death"),this.setActive(!1).setVisible(!1)}},{key:"makeTempInvulnerable",value:function(e){var t=this;this._vulnerable=!1,this._isExplode=!1;var i=this.scene.time.addEvent({delay:200,callback:function(){t.setVisible(!t.visible)},callbackScope:this,repeat:-1});this.scene.time.delayedCall(1e3*e,(function(){t._vulnerable=!0,i.remove(),t.setVisible(!0)}),null,this)}},{key:"respawn",value:function(e,t){this.setActive(!0).setVisible(!0),this.setRotation(0),this.setRotation(this.rotLeft),this.setPosition(e,t),this._shipBody.setVelocity(0),this.makeTempInvulnerable(3)}}]),i}(Di),Ui=function(e){Object(xi.a)(i,e);var t=Object(wi.a)(i);function i(e){var n,s=e.sargs,a=e.owner,o=e.kind;return Object(vi.a)(this,i),(n=t.call(this,s))._owner=void 0,n._bulletKind=void 0,n._timetemp=0,n._owner=a,n._bulletKind=o,n.setOrigin(.5,.5),s.texture===pe.REGION_BULLET&&("explosive"===n._bulletKind?n.setCircle(100):"atomic"===n._bulletKind&&n.setSize(n.scene.cameras.main.width,n.scene.cameras.main.height),n.scene.time.addEvent({delay:50,callback:function(){n.destroy()}})),n}return Object(fi.a)(i,[{key:"preUpdate",value:function(e,t){}},{key:"updateServerDataBullet",value:function(e,t,i){switch(e){case"x":if("number"===typeof t){this.body.velocity.x;this.x=t}break;case"y":if("number"===typeof t){this.body.velocity.x;this.y=t}break;case"speed_x":"number"===typeof t&&this.setVelocityX(t);break;case"speed_y":"number"===typeof t&&this.setVelocityY(t)}}},{key:"updateServerDataChangesBullet",value:function(e,t){var i=this,n=Date.now(),s=e.find((function(e){return"curServerTime"===e.field})).value;if(!(s<this._timetemp)){var a=(n-s-t)/1e3;e.map((function(e){i.updateServerDataBullet(e.field,e.value,a)})),this._timetemp=s}}}]),i}(Ri),Fi=function(e){Object(xi.a)(i,e);var t=Object(wi.a)(i);function i(e){var n,s=e.sargs,a=e.type,o=e.size;return Object(vi.a)(this,i),(n=t.call(this,s))._type=void 0,n._size=void 0,n._lives=2,n._group="asteroid",n._timetemp=0,n._type=a,n._size=o,n}return Object(fi.a)(i,[{key:"launchAsteroid",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:50,s=X(t-i,t+i),a=X(t-i,t+i),o=e*Math.cos(s),r=e*Math.sin(a);this.setOrigin(.5,.5),this._size===ie&&this.setCircle(29),this._size===ne&&this.setCircle(19),this.setVelocity(o,r),this.setAngularVelocity(X(-n,n))}},{key:"updateServerDataAsteroid",value:function(e,t,i){switch(e){case"x":if("number"===typeof t){if(i>1||i<-1)break;(t-this.x>40||t-this.x<-40)&&(this.x=t)}break;case"y":if("number"===typeof t){if(i>1||i<-1)break;(t-this.y>40||t-this.y<-40)&&(this.y=t)}break;case"speed_x":"number"===typeof t&&this.setVelocityX(t);break;case"speed_y":"number"===typeof t&&this.setVelocityY(t)}}},{key:"updateServerDataChangesAsteroid",value:function(e,t){var i=this,n=Date.now(),s=e.find((function(e){return"curServerTime"===e.field})),a=null===s||void 0===s?void 0:s.value;if(!(a<this._timetemp)){var o=(n-a-t)/1e3;e.map((function(e){i.updateServerDataAsteroid(e.field,e.value,o)})),this._timetemp=a}}}]),i}(Ri),Vi=Fi,Yi=function(e){Object(xi.a)(i,e);var t=Object(wi.a)(i);function i(e){var n,s=e.sargs,a=e.owner,o=e.kind;return Object(vi.a)(this,i),(n=t.call(this,s))._kind=void 0,n._owner=void 0,n._owner=a,n._kind=o,n}return Object(fi.a)(i,[{key:"launchAirdrop",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30,s=X(t-i,t+i),a=X(t-i,t+i),o=e*Math.cos(s),r=e*Math.sin(a);this.setOrigin(.5,.5),this.setVelocity(o,r),this.setAngularVelocity(X(-n,n))}},{key:"updateServerDataAirdrop",value:function(e,t){switch(e){case"x":"number"===typeof t&&(this.x=t);break;case"y":"number"===typeof t&&(this.y=t);break;case"speed_x":"number"===typeof t&&this.setVelocityX(t);break;case"speed_y":"number"===typeof t&&this.setVelocityY(t)}}}]),i}(Ri),zi=Yi,Gi=function(e){Object(xi.a)(i,e);var t=Object(wi.a)(i);function i(e){var n,s=e.sargs,a=e.type,o=e.lives;Object(vi.a)(this,i),(n=t.call(this,s))._type=void 0,n._gunModule=void 0,n._group="enemy",n._lives=2,n._type=a,n._lives=o,a!==ke&&a!==Ae&&a!==Te&&a!==Le||(n._group="boss");var r=Object(Li.a)(n),l=W.enemyBulletPros.maxBullets,c=a===Oe||a===Se?W.enemyBulletPros.fireCooldown:W.enemyBulletPros.bossFireCooldown,d=W.enemyBulletPros.passiveRegenCooldown,u=a===Oe||a===Se?W.enemyBulletPros.normalSpeed:W.enemyBulletPros.bossSpeed;return n._gunModule=new Bi(r,l,c,d,u),n}return Object(fi.a)(i,[{key:"launchEnemy",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=W.enemyPros.angVelRange,s=X(t-i,t+i),a=X(t-i,t+i),o=e*Math.cos(s),r=e*Math.sin(a);this.setOrigin(.5,.5),this.setVelocity(o,r),this._type===Oe||this._type===Se?this.setAngularVelocity(X(-n,n)):this.setRotation(t),this._type===Oe?this.setCircle(19):this._type===Se?this.setCircle(20):this.setCircle(70)}},{key:"update",value:function(e,t){var i=this;this._gunModule.update(e,t),this.scene.time.addEvent({delay:1e3,callback:function(){i._gunModule.setTriggerHeld(!i._gunModule._triggered)},repeat:-1})}},{key:"rotForward",get:function(){return this.rotation}},{key:"rotLeft",get:function(){return this.rotation-Math.PI/2}},{key:"rotRight",get:function(){return this.rotation+Math.PI/2}},{key:"rotBack",get:function(){return this.rotation+Math.PI}},{key:"angleForward",get:function(){return this.angle}},{key:"angleLeft",get:function(){return this.angle-90}},{key:"angleRight",get:function(){return this.angle+90}},{key:"angleBack",get:function(){return this.angle+180}}]),i}(Ri),Hi=Gi,Ki=function(e){Object(xi.a)(i,e);var t=Object(wi.a)(i);function i(e){var n,s=e.sargs,a=e.owner;return Object(vi.a)(this,i),(n=t.call(this,s))._owner=void 0,n._group="enemyBullet",n._owner=a,n.setOrigin(.5,.5),n}return Object(fi.a)(i)}(Ri),Wi=function(e){Object(xi.a)(i,e);var t=Object(wi.a)(i);function i(){var e;return Object(vi.a)(this,i),(e=t.call(this,"play"))._network=void 0,e._myShip=void 0,e._myBullet=void 0,e._account=void 0,e._tokenId=void 0,e._shipName=void 0,e._paid=void 0,e._team=void 0,e._ships=void 0,e._otherShips=void 0,e._otherShipMap=new Map,e._bullets=void 0,e._regionBullets=void 0,e._enemies=void 0,e._airdrops=void 0,e._worldBounds=void 0,e._backgroundSprite=void 0,e._particles=void 0,e._destroyedSound=void 0,e._fireSound=void 0,e._bulletSound=void 0,e._bgSound=void 0,e._airdropPercentAsteroid=void 0,e._airdropPercentEnemy=void 0,e._airdropPercentBoss=void 0,e._airdropDuration=void 0,e._airdropTimer=void 0,e._startingAsteroids=void 0,e._maxAsteroids=void 0,e._incrementAsteroids=void 0,e._minAsteroidSpeed=void 0,e._maxAsteroidSpeed=void 0,e._minEnemySpeed=void 0,e._maxEnemySpeed=void 0,e._startingEnemies=void 0,e._increaseEnemies=void 0,e._enemyLives=void 0,e._startingBoss=void 0,e._bossLives=void 0,e._increaseBoss=void 0,e._enemyBulletVelocity=void 0,e._bossSpeed=void 0,e._width=void 0,e._height=void 0,e._center=void 0,e._level=void 0,e._levelTimer=void 0,e._readyNewLevel=void 0,e._passedIntro=void 0,e._specialKey=void 0,e._isEnableSoundEffect=void 0,e._isEnableBgSound=void 0,e._shot=void 0,e._waitingText=void 0,e._gameStarted=void 0,e._shipPros=void 0,e}return Object(fi.a)(i,[{key:"init",value:function(){this._width=W.gamePros.screenWidth,this._height=W.gamePros.screenHeight,this._center={x:this._width/2,y:this._height/2},this._level=0,this._readyNewLevel=!1,this._passedIntro=!1,this._isEnableSoundEffect=!0,this._isEnableBgSound=!0,this._startingAsteroids=W.asteroidPros.startingAsteroids,this._maxAsteroids=W.asteroidPros.maxAsteroids,this._incrementAsteroids=W.asteroidPros.incrementAsteroids,this._minAsteroidSpeed=W.asteroidPros.minSpeed,this._maxAsteroidSpeed=W.asteroidPros.maxSpeed,this._minEnemySpeed=W.enemyPros.minSpeed,this._maxEnemySpeed=W.enemyPros.maxSpeed,this._startingEnemies=W.enemyPros.startingEnemies,this._increaseEnemies=W.enemyPros.incrementEnemies,this._enemyBulletVelocity=W.enemyBulletPros.velocity,this._enemyLives=W.enemyBulletPros.lives,this._startingBoss=W.enemyPros.startingBoss,this._increaseBoss=W.enemyPros.incrementBoss,this._bossLives=W.enemyPros.bossLives,this._bossSpeed=W.enemyBulletPros.bossSpeed,this._airdropPercentAsteroid=W.airdropPros.percentAsteroid,this._airdropPercentEnemy=W.airdropPros.percentEnemy,this._airdropPercentBoss=W.airdropPros.percentBoss,this._airdropDuration=W.airdropPros.duration,this.initAssets(),this.initWorld(),this._shot=!1,this._gameStarted=!1}},{key:"initWorld",value:function(){this._ships=this.physics.add.group(),this._ships.runChildUpdate=!0,this._otherShips=this.physics.add.group(),this._otherShips.runChildUpdate=!0,this._bullets=this.physics.add.group(),this._bullets.runChildUpdate=!0,this._regionBullets=this.physics.add.group(),this._regionBullets.runChildUpdate=!0,this._airdrops=this.physics.add.group(),this._airdrops.runChildUpdate=!0,this._enemies=this.physics.add.group(),this._enemies.runChildUpdate=!0,this._backgroundSprite=this.add.sprite(0,0,W.graphicAssets.background.name),this._backgroundSprite.displayWidth=W.gamePros.screenWidth,this._backgroundSprite.displayHeight=W.gamePros.screenHeight,this._backgroundSprite.setOrigin(0),this.initWorldBounds(),this.physics.add.overlap(this._ships,this._enemies,this.shipEnemyCollision,null,this),this.physics.add.overlap(this._ships,this._airdrops,this.shipAirdropCollision,null,this),this.physics.add.overlap([this._bullets,this._regionBullets],this._enemies,this.bulletEnemyCollision,null,this),this.physics.add.overlap(this._bullets,this._worldBounds,(function(e,t){e.destroy()})),this.physics.add.overlap(this._enemies,this._worldBounds,this.respawnEnemies,null,this)}},{key:"initWorldBounds",value:function(){var e=this._width/2+100,t=this._height/2+100,i=this._center.x-e,n=this._center.x+(e-5),s=this._center.y-t,a=this._center.y+(t-5),o=n-i,r=a-s,l=s+r/2,c=i+o/2;this._worldBounds=this.physics.add.staticGroup(),this._worldBounds.add(new gi.a.GameObjects.Rectangle(this,c,s,o,5)),this._worldBounds.add(new gi.a.GameObjects.Rectangle(this,i,l,5,r)),this._worldBounds.add(new gi.a.GameObjects.Rectangle(this,c,a,o,5,1)),this._worldBounds.add(new gi.a.GameObjects.Rectangle(this,n,l,5,r,0))}},{key:"initShip",value:function(e,t,i){var n=this,s={forward:this.input.keyboard.addKey(i.forward),brake:this.input.keyboard.addKey(i.brake),left:this.input.keyboard.addKey(i.left),right:this.input.keyboard.addKey(i.right),fire:this.input.keyboard.addKey(i.fire)};this._myShip=new Ni({sargs:{scene:this,group:this._ships,x:this.cameras.main.centerX,y:this.cameras.main.centerY,texture:e.spaceship},id:1,shipPros:e,hasCombat:t,inputKeys:s}),this._myShip.setRotation(this._myShip.rotLeft);var a=this.sound.add(W.soundAssets.shipExplose.name,{volume:.5});a.on("complete",(function(){n._myShip.Lives<1?n.gameOver():n._myShip.respawn(n._width/2,n._height/2)})),this._myShip.on("ship_death",(function(){a.play(),n._particles.shipExplode.emitParticleAt(n._myShip.x,n._myShip.y)})),this._myShip._engineSound=this.sound.add(W.soundAssets.engine.name,{loop:!0,volume:.5}),this._isEnableSoundEffect&&this._myShip._engineSound.play(),this._myShip._engineSound.pause()}},{key:"initAssets",value:function(){var e=this;this._bulletSound=this.sound.add(W.soundAssets.fire.name),this._destroyedSound=this.sound.add(W.soundAssets.destroyed.name),this._fireSound=this.sound.add(W.soundAssets.fire.name),this._particles={};var t=this.add.particles(W.graphicAssets.particles.name);t.setDepth(9);this._particles.bulletImpact=t.createEmitter({frame:["blue","red","orange"],scale:{start:.2,end:0},quantity:30,alpha:{start:1,end:0},lifespan:{min:500,max:1e3},speed:{min:120,max:150},frequency:-1,blendMode:"ADD"}),this._particles.asteroidExplode=t.createEmitter({frame:["white","red"],scale:{start:.3,end:0},quantity:60,alpha:{start:1,end:0},lifespan:{min:300,max:600},speed:{min:20,max:150},frequency:-1,blendMode:"ADD"}),this._particles.shipExplode=t.createEmitter({frame:["white","red","orange"],scale:{start:.6,end:0},quantity:60,alpha:{start:1,end:0},lifespan:{min:300,max:600},speed:{min:20,max:150},frequency:-1,blendMode:"ADD"}),this.time.addEvent({delay:1e3,callback:function(){e._bgSound=e.sound.add(W.soundAssets.bg.name)}})}},{key:"create",value:function(e){var t=this;if(this._airdropDuration*=Be[e.shipPros.tier],this.registry.set("bonusLives",Ce[e.shipPros.tier]),this._specialKey=e.gameProps.keyboard.special,this.scene.launch("text",{level:1}),!e.network)throw new Error("server instance missing");this._network=e.network,this.initShip(e.shipPros,e.gameProps.hasCombat,e.gameProps.keyboard),this._account=e.shipPros.account,this._tokenId=e.shipPros.tokenID,this._paid=e.shipPros.paid,this._team=e.shipPros.team,e.shipPros.hasShield&&(this._myShip.setShiled(this._airdropDuration),Nt.dispatch(bt(he.SHIELD)),Nt.dispatch(gt(this._airdropDuration))),this._startingAsteroids+=De[e.gameProps.difficulty].STARTING_ASTEROIDS,this._incrementAsteroids+=De[e.gameProps.difficulty].INCREASE_ASTEROIDS,this._maxAsteroids+=De[e.gameProps.difficulty].MAX_ASTEROIDS,this._minAsteroidSpeed*=De[e.gameProps.difficulty].MIN_ASTEROID_SPEED,this._maxAsteroidSpeed*=De[e.gameProps.difficulty].MAX_ASTEROID_SPEED,this._startingEnemies+=De[e.gameProps.difficulty].STARTING_ENEMIES,this._increaseEnemies+=De[e.gameProps.difficulty].INCREASE_ENEMIES,this._minEnemySpeed*=De[e.gameProps.difficulty].MIN_ENEMY_SPEED,this._maxEnemySpeed*=De[e.gameProps.difficulty].MAX_ENEMY_SPEED,this.input.keyboard.on("keyup-".concat(e.gameProps.keyboard.sounds),(function(){t._isEnableSoundEffect=!t._isEnableSoundEffect,ki.emit(ji.TOGGLE_SOUNDS,t._isEnableSoundEffect)}),this),this.input.keyboard.on("keyup-".concat(e.gameProps.keyboard.music),(function(){t._isEnableBgSound=!t._isEnableBgSound,t._isEnableBgSound?t._bgSound.play():t._bgSound.stop()}),this),this.input.keyboard.on("keyup-".concat(e.gameProps.keyboard.exit),(function(){Nt.dispatch(ft(!0))}),this),ki.on(ji.EXIST_GAME,(function(){t.gameOver()})),this.time.addEvent({delay:2e3,callback:function(){t._bgSound.play()}})}},{key:"updateBulletLaunchDataToserver",value:function(e,t,i,n,s){var a,o,r=s.body.velocity,l=(new gi.a.Math.Vector2).setToPolar(i,n);console.log("ask bullet (",s._bulletType,s,")at : ",(new Date).getTime()),a=r.x+l.x,o=r.y+l.y,this._shot||(this._network&&this._network.updateBulletToServer(e,t,i,a,o,s._bulletType),this._shot=!0),this._shot=!1}},{key:"shipEnemyCollision",value:function(e,t){e._hasShield?("asteroid"===t._group&&this.splitAsteroid(t),this._particles.asteroidExplode.emitParticleAt(t.x,t.y),this._isEnableSoundEffect&&this._destroyedSound.play(),t.destroy()):e.Vulnerable&&e.kill()}},{key:"shipAirdropCollision",value:function(e,t){t._kind===xe||(t._kind===fe?Nt.dispatch(vt(!0)):t._kind===we?(Nt.dispatch(bt(t._kind)),Nt.dispatch(gt(this._airdropDuration))):(Nt.dispatch(mt(t._kind)),Nt.dispatch(_t(this._airdropDuration)))),t._kind===fe?e._hasAtomic=!0:t._kind===xe?e.Lives+=1:t._kind===we?e.setShiled(this._airdropDuration):e.updateBulletProperty(t._kind,this._airdropDuration),t.destroy()}},{key:"bulletEnemyCollision",value:function(e,t){if("normal"===e._bulletKind&&e._owner._bulletType===de)return e.destroy(),void this.spawnRegionBullet(t.x,t.y,e._owner,"explosive");if("asteroid"===t._group){if(t._type===te&&2===t._lives)return t._lives--,this._particles.asteroidExplode.emitParticleAt(t.x,t.y),void(e._owner._bulletType!==ce&&e.destroy());e._owner.Score+=1,this._network&&this._network.recordScore(e._owner._account,e._owner._tokenId,e._owner._shipName,e._owner._tier,e._owner._score),this.spawnRandomAirdrop(t,e._owner,this._airdropPercentAsteroid),this.splitAsteroid(t)}if("enemy"===t._group||"boss"===t._group){if("enemy"===t._group&&2===t._lives)return t._lives--,this._particles.asteroidExplode.emitParticleAt(t.x,t.y),void(e._owner._bulletType!==ce&&e.destroy());if("boss"===t._group&&t._lives>1)return t._lives--,this._particles.asteroidExplode.emitParticleAt(t.x,t.y),void(e._owner._bulletType!==ce&&e.destroy());"enemy"===t._group&&(e._owner.Score+=10,this.spawnRandomAirdrop(t,e._owner,this._airdropPercentEnemy)),"boss"===t._group&&(e._owner.Score+=80,this.spawnRandomAirdrop(t,e._owner,this._airdropPercentBoss))}this._particles.asteroidExplode.emitParticleAt(t.x,t.y),this._isEnableSoundEffect&&this._destroyedSound.play(),"atomic"!==e._bulletKind&&e._owner.reload(),e._owner._bulletType!==ce&&e.destroy(),t.destroy()}},{key:"spawnRandomBullet",value:function(e,t,i,n,s){var a=this;switch(s._bulletType){case oe:for(var o=s.body.velocity,r=(new gi.a.Math.Vector2).setToPolar(i,n).add(o),l=Math.sqrt(r.x*r.x+r.y*r.y),c={x:r.x/l,y:r.y/l},d=-1;d<=1;d+=2){var u=this.spawnBullet(e-15*c.y*d,t+15*c.x*d,s);u.rotation=s.rotation,u.setVelocity(r.x,r.y)}break;case re:for(var p=s.body.velocity,h=(new gi.a.Math.Vector2).setToPolar(i,n).add(p),y=Math.sqrt(h.x*h.x+h.y*h.y),m={x:h.x/y,y:h.y/y},_=-1;_<=1;_++){var b=this.spawnBullet(e-15*m.y*_,t+15*m.x*_,s);b.rotation=s.rotation,b.setVelocity(h.x,h.y)}break;case le:for(var g=-1;g<=1;g++){var v=g*Math.PI/10,f=this.spawnBullet(e,t,s);f.rotation=s.rotation+v;var x=s.body.velocity,w=(new gi.a.Math.Vector2).setToPolar(i,n).add(x).length(),E=s.rotation;f.setVelocity(w*Math.cos(E+v),w*Math.sin(E+v))}break;case de:var O=this.spawnBullet(e,t,s);O.rotation=s.rotation;var S=s.body.velocity,j=(new gi.a.Math.Vector2).setToPolar(i,n);O.setVelocity(S.x+j.x,S.y+j.y);break;case ce:s._hasLazer=!0,setTimeout((function(){var i=a.spawnBullet(e,t,s);i.rotation=s.rotation;var o=s.body.velocity,r=(new gi.a.Math.Vector2).setToPolar(s.rotation,n);i.setVelocity(o.x+r.x,o.y+r.y),s._hasLazer=!1}),500);break;case ue:var k=this.spawnBullet(e,t,s);k.rotation=s.rotation;var A=s.body.velocity,T=(new gi.a.Math.Vector2).setToPolar(i,n);k.setVelocity(A.x+T.x,A.y+T.y);break;default:console.log("spawnBullet  shooter",s.body);var L=this.spawnBullet(e,t,s);L.rotation=s.rotation;var R=s.body.velocity,P=(new gi.a.Math.Vector2).setToPolar(i,n);L.setVelocity(R.x+P.x,R.y+P.y)}}},{key:"spawnBullet",value:function(e,t,i){var n,s;return i._bulletType===ce?(n=i.x,s=i.y):(n=e,s=t),new Ui({sargs:{scene:this,group:this._bullets,x:n,y:s,texture:pe[i._bulletType],frame:0},owner:i,kind:"normal"})}},{key:"spawnRegionBullet",value:function(e,t,i,n){return this._myBullet=new Ui({sargs:{scene:this,group:this._regionBullets,x:e,y:t,texture:pe.REGION_BULLET,frame:0},owner:i,kind:n}),this._myBullet}},{key:"spawnRandomAsteroid",value:function(e,t){var i=this.getOuterRimCoords(),n=i.x,s=i.y,a=i.dir;this.spawnAsteroid(n,s,e,t).launchAsteroid(X(this._minAsteroidSpeed,this._maxAsteroidSpeed),a+Math.PI,Q)}},{key:"spawnAsteroid",value:function(e,t,i,n){return new Vi({sargs:{scene:this,group:this._enemies,x:e,y:t,texture:$[i][n],frame:Math.round(2*Math.random())},type:i,size:n})}},{key:"respawnEnemies",value:function(e,t){var i=this.getOuterRimCoords(),n=i.x,s=i.y,a=i.dir;e.setPosition(n,s),"enemy"===e._group?e.launchEnemy(X(this._minEnemySpeed,this._maxEnemySpeed),a+Math.PI,Q):"asteroid"===e._group?e.launchAsteroid(X(this._minAsteroidSpeed,this._maxAsteroidSpeed),a+Math.PI,Q):"enemyBullet"===e._group&&e.destroy()}},{key:"splitAsteroid",value:function(e){if(e._size!==ne)for(var t=e._type,i=ne,n=e.body.velocity,s=e.getCenter(),a=s.x,o=s.y,r=0;r<2;r++){var l=gi.a.Math.RandomXY(new gi.a.Math.Vector2,40),c=l.x,d=l.y;this.spawnAsteroid(a+c,o+d,t,i).launchAsteroid(X(this._minAsteroidSpeed,this._maxAsteroidSpeed),n.angle(),Q,60)}}},{key:"spawnRandomEnemies",value:function(e,t){var i=this.getOuterRimCoords(),n=i.x,s=i.y,a=i.dir;this.spawnEnemy(n,s,e,t).launchEnemy(X(this._minEnemySpeed,this._maxEnemySpeed),a+Math.PI,Q-Math.PI)}},{key:"spawnEnemy",value:function(e,t,i,n){return new Hi({sargs:{scene:this,group:this._enemies,x:e,y:t,texture:Ee[i],frame:Math.round(2*Math.random())},type:i,lives:n})}},{key:"spawnRandomEnemyBullet",value:function(e,t,i,n,s){if(s._type===Oe){var a=this.spawnEnemyBullet(e,t,s);a.rotation=i;var o=s.body.velocity,r=(new gi.a.Math.Vector2).setToPolar(i,n);a.setVelocity(o.x+r.x,o.y+r.y)}else if(s._type===Se)for(var l=0;l<10;l++){var c=l*Math.PI/5,d=this.spawnEnemyBullet(e,t,s),u=this._enemyBulletVelocity;d.setVelocity(u.x*Math.cos(c),u.y*Math.sin(c))}else if(s._type===ke||s._type===Ae){var p=this.spawnEnemyBullet(e,t,s),h={x:this._myShip.x-s.x,y:this._myShip.y-s.y},y=Math.sqrt(h.x*h.x+h.y*h.y),m={x:h.x/y,y:h.y/y},_={x:m.x*this._bossSpeed,y:m.y*this._bossSpeed};p.setVelocity(_.x,_.y)}else if(s._type===Te||s._type===Le)for(var b={x:this._myShip.x-s.x,y:this._myShip.y-s.y},g=Math.sqrt(b.x*b.x+b.y*b.y),v={x:b.x/g,y:b.y/g},f={x:v.x*this._bossSpeed,y:v.y*this._bossSpeed},x=Math.sqrt(f.x*f.x+f.y*f.y),w={x:f.x/x,y:f.y/x},E=-1;E<=1;E+=2){this.spawnEnemyBullet(e-15*w.y*E,t+15*w.x*E,s).setVelocity(f.x,f.y)}}},{key:"spawnEnemyBullet",value:function(e,t,i){var n=i._type.startsWith("NORMAL")?W.graphicAssets.enemyBullet.name:W.graphicAssets.rocketBullet.name;return new Ki({sargs:{scene:this,group:this._enemies,x:e,y:t,texture:n,frame:0},owner:i})}},{key:"spawnRandomAirdrop",value:function(e,t,i){var n=this;if(s=i,Math.floor(100*Math.random())<=s){var s,a=X(0,9),o="";o=a<=1?ye:a<=2?me:a<=3?_e:a<=4?be:a<=5?ge:a<=6?ve:a<=7?xe:a<=8?fe:we;var r=this.getOuterRimCoords().dir,l=this.spawnAirdrop(e.x,e.y,t,o);l.launchAirdrop(10+X(-5,10),r+Math.PI,Q);var c=this.time.delayedCall(1e3*W.airdropPros.alertTime,(function(){n.time.addEvent({delay:500,callback:function(){l.setVisible(!l.visible)},callbackScope:n,repeat:-1})}));this.time.delayedCall(1e3*W.airdropPros.lifetime,(function(){c.remove(),l.destroy()}))}}},{key:"spawnAirdrop",value:function(e,t,i,n){return new zi({sargs:{scene:this,group:this._airdrops,x:e,y:t,texture:he[n],frame:Math.round(2*Math.random())},owner:i,kind:n})}},{key:"getOuterRimCoords",value:function(){var e=0,t=0,i=0,n=Math.random()*(2*this._width+2*this._height);return n<this._width?(e=n,t=0,i=-X(.1,.9)*Math.PI):n<this._width+this._height?(e=this._width,t=n-this._width,i=X(-.4,.4)*Math.PI):n<2*this._width+this._height?(e=n-this._width-this._height,t=this._height,i=X(.1,.9)*Math.PI):(e=0,t=n-2*this._width-this._height,i=X(.6,1.4)*Math.PI),{x:e,y:t,dir:i}}},{key:"gameOver",value:function(){this.sound.stopAll(),this.scene.stop("play"),this.scene.stop("text"),this.scene.launch("gameOver",{score:this._myShip.Score,paid:this._myShip.paid})}},{key:"nextAsteroids",value:function(){this._startingAsteroids=Math.min(this._startingAsteroids+this._incrementAsteroids,this._maxAsteroids);for(var e=0;e<this._startingAsteroids;e++){var t=1===this._level||X(0,1)>=.5?ee:te,i=ie;this.spawnRandomAsteroid(t,i)}}},{key:"nextEnemies",value:function(e,t,i){if(t!==je)for(var n=0;n<e;n++)this.spawnRandomEnemies(t,i);else{this.spawnRandomEnemies(Oe,i),this.spawnRandomEnemies(Se,i);for(var s=0;s<e-2;s++){var a=X(1,3)>=2?Se:Oe;this.spawnRandomEnemies(a,i)}}}},{key:"nextLevel",value:function(){var e=this;if(this._passedIntro=!1,this.time.removeEvent(this._levelTimer),this._readyNewLevel=!1,this._levelTimer=this.time.addEvent({delay:2e3,callback:function(){e._readyNewLevel=!1}}),this._level++,this.registry.set("level",this._level),7===this._level||this._level>=8&&this._level%4===0||this.nextAsteroids(),this._level>=3&&!(this._level>=8&&this._level%4===0)){this._startingEnemies+=this._increaseEnemies;var t=this._level>=5?je:Oe;this.nextEnemies(this._startingEnemies,t,this._enemyLives)}if(this._level>=8&&this._level%4===0){12!==this._level&&(this._startingBoss+=this._increaseBoss);var i=X(0,1)>.5?ke:Ae;this.nextEnemies(this._startingBoss,i,this._bossLives)}if(this._level>=12&&this._level%4===0){var n=X(0,1)>.5?Te:Le;this._bossLives+=5,this.nextEnemies(this._startingBoss,n,this._bossLives)}}},{key:"introNewEnemy",value:function(e){this.nextEnemies(1,e,this._bossLives)}},{key:"newMission",value:function(){var e=this;2!==this._level||this._passedIntro?4!==this._level||this._passedIntro?(this.registry.set("endLevel",this._level),this.registry.set("newEnemy",-1),this._levelTimer=this.time.addEvent({delay:W.gamePros.endLevelDelay,callback:function(){e._readyNewLevel=!0,e.registry.set("endLevel",-1)}})):(this._passedIntro=!0,this.registry.set("newEnemy",1),this.introNewEnemy(Se),this._levelTimer=this.time.addEvent({delay:W.gamePros.introNewEnemyDelay,callback:function(){e.registry.set("newEnemy",-1)}})):(this._passedIntro=!0,this.registry.set("newEnemy",1),this.introNewEnemy(Oe),this._levelTimer=this.time.addEvent({delay:W.gamePros.introNewEnemyDelay,callback:function(){e.registry.set("newEnemy",-1)}}))}},{key:"update",value:function(e,t){this.physics.world.wrap(this._ships);var i=this._enemies.children.entries.filter((function(e){return"enemyBullet"!==e._group})).length;i<=0&&this.newMission(),i<=0&&!0===this._readyNewLevel&&this.nextLevel(),this._myShip&&this._network&&this._myShip.updateToServer(this._network),this.input.keyboard.addKey(this._specialKey).isDown&&this._myShip._hasAtomic&&(this.spawnRegionBullet(this._center.x,this._center.y,this,"atomic"),this._myShip._hasAtomic=!1,Nt.dispatch(vt(!1)))}}]),i}(gi.a.Scene),Xi=i(145),Ji=function(e){Object(xi.a)(i,e);var t=Object(wi.a)(i);function i(e){var n,s=e.sargs,a=e.id,o=(e.shipPros,e.tier);return Object(vi.a)(this,i),(n=t.call(this,s,a,o,!1))._shipBody=void 0,n._engineSound=void 0,n._targetPosition=void 0,n._rotation=void 0,n._isForwarding=void 0,n._isBraking=void 0,n._angVel=void 0,n._hasShield=void 0,n._isFire=void 0,n._lastUpdateTimestamp=void 0,n._connected=!1,n._isExplode=void 0,n._explodeDone=!1,n._isEnableSoundEffect=!1,n._shipId=void 0,n._timetemp=0,n._shipId=a,n._targetPosition={x:s.x,y:s.y},n._shipBody=n.body,n._angVel=180,n}return Object(fi.a)(i,[{key:"updateOtherPlayer",value:function(e,t,i){switch(e){case"name":"string"===typeof t&&this._playerName.setText(t);break;case"x":"number"===typeof t&&(this._targetPosition.x=t);break;case"y":"number"===typeof t&&(this._targetPosition.y=t);break;case"angularVel":"number"===typeof t&&(t>0?this._rotation+=Math.PI/2*i:this._rotation-=Math.PI/2*i);break;case"rotation":"number"===typeof t&&(this._rotation=t);break;case"speed_x":"number"===typeof t&&(this._shipBody.velocity.x=t);break;case"speed_y":"number"===typeof t&&(this._shipBody.velocity.y=t);break;case"isForwarding":"boolean"===typeof t&&(this._isForwarding=t);break;case"isFire":"boolean"===typeof t&&(this._isFire=t);break;case"hasShield":"boolean"===typeof t&&(this._hasShield=t);break;case"isExplode":"boolean"===typeof t&&(this._isExplode=t);break;case"readyToConnect":"boolean"===typeof t&&(this._readyToConnect=t);break;case"lives":"number"===typeof t&&(this._lives=t)}}},{key:"updateOtherPlayerChanges",value:function(e,t){var i=this,n=Date.now(),s=e.find((function(e){return"curServerTime"===e.field})),a=null===s||void 0===s?void 0:s.value;if(!(a<this._timetemp)){var o=(n-a-t)/1e3;e.map((function(e){i.updateOtherPlayer(e.field,e.value,o)})),this._timetemp=a}}},{key:"preUpdate",value:function(e,t){Object(Pi.a)(Object(Ii.a)(i.prototype),"preUpdate",this).call(this,e,t),this._gunModule.update(e,t),this.x+=.5*((this._targetPosition.x||this.x)-this.x),this.y+=.5*((this._targetPosition.y||this.y)-this.y);var n=((this._rotation||this.rotation)-this.rotation)/(2*Math.PI);n=(n-=Math.round(n))*Math.PI*2,this.rotation+=n,this._lastUpdateTimestamp=e,this.setDepth(this.y),this._isForwarding?(this._engine.setAngle(this.angleBack),this._engine.setSpeed({min:this.body.velocity.length()-150,max:this.body.velocity.length()-100}),this._engine.followOffset.setToPolar(this.rotBack,8),this._isEnableSoundEffect=!0,this._engine.start()):(this._engine.stop(),this._isEnableSoundEffect=!1),this._shield.setVisible(this._hasShield),this._shield.setPosition(this.x,this.y),this._isExplode&&this.kill()}},{key:"kill",value:function(){this._engine.stop(),this.emit("ship_death"),this.setActive(!1).setVisible(!1),this._explodeDone=!0}},{key:"makeTempInvulnerable",value:function(e){var t=this,i=this.scene.time.addEvent({delay:200,callback:function(){t.setVisible(!t.visible)},callbackScope:this,repeat:-1});this.scene.time.delayedCall(1e3*e,(function(){i.remove(),t.setVisible(!0)}),null,this)}},{key:"respawn",value:function(e,t){this.setActive(!0).setVisible(!0),this.setRotation(0),this.setRotation(this.rotLeft),this.setPosition(e,t),this._shipBody.setVelocity(0),this.makeTempInvulnerable(3)}}]),i}(Di),qi=function(e){Object(xi.a)(i,e);var t=Object(wi.a)(i);function i(){var e;return Object(vi.a)(this,i),(e=t.call(this,"multiplay"))._network=void 0,e._myShip=void 0,e._account=void 0,e._tokenId=void 0,e._shipName=void 0,e._mySessionId=void 0,e._paid=void 0,e._team=void 0,e._ships=void 0,e._otherShips=void 0,e._otherShipMap=new Map,e._bullets=void 0,e._bulletsMap=new Map,e._asteroids=void 0,e._asteroidsMap=new Map,e._regionBullets=void 0,e._enemies=void 0,e._airdrops=void 0,e._airdropsMap=new Map,e._worldBounds=void 0,e._backgroundSprite=void 0,e._particles=void 0,e._destroyedSound=void 0,e._fireSound=void 0,e._bulletSound=void 0,e._bgSound=void 0,e._deathSound=void 0,e._airdropPercentAsteroid=void 0,e._airdropPercentEnemy=void 0,e._airdropPercentBoss=void 0,e._airdropDuration=void 0,e._airdropTimer=void 0,e._startingAsteroids=void 0,e._maxAsteroids=void 0,e._incrementAsteroids=void 0,e._minAsteroidSpeed=void 0,e._maxAsteroidSpeed=void 0,e._minEnemySpeed=void 0,e._maxEnemySpeed=void 0,e._startingEnemies=void 0,e._increaseEnemies=void 0,e._enemyLives=void 0,e._startingBoss=void 0,e._bossLives=void 0,e._increaseBoss=void 0,e._enemyBulletVelocity=void 0,e._bossSpeed=void 0,e._width=void 0,e._height=void 0,e._center=void 0,e._level=void 0,e._levelTimer=void 0,e._readyNewLevel=void 0,e._passedIntro=void 0,e._specialKey=void 0,e._isEnableSoundEffect=void 0,e._isEnableBgSound=void 0,e._shot=void 0,e._waitingText=void 0,e._gameStarted=void 0,e._shipPros=void 0,e._joyStick=void 0,e}return Object(fi.a)(i,[{key:"preLoad",value:function(){}},{key:"init",value:function(){this._width=W.gamePros.screenWidth,this._height=W.gamePros.screenHeight,this._center={x:this._width/2,y:this._height/2},this._level=0,this._readyNewLevel=!1,this._passedIntro=!1,this._isEnableSoundEffect=!0,this._isEnableBgSound=!0,this._startingAsteroids=W.asteroidPros.startingAsteroids,this._maxAsteroids=W.asteroidPros.maxAsteroids,this._incrementAsteroids=W.asteroidPros.incrementAsteroids,this._minAsteroidSpeed=W.asteroidPros.minSpeed,this._maxAsteroidSpeed=W.asteroidPros.maxSpeed,this._minEnemySpeed=W.enemyPros.minSpeed,this._maxEnemySpeed=W.enemyPros.maxSpeed,this._startingEnemies=W.enemyPros.startingEnemies,this._increaseEnemies=W.enemyPros.incrementEnemies,this._enemyBulletVelocity=W.enemyBulletPros.velocity,this._enemyLives=W.enemyBulletPros.lives,this._startingBoss=W.enemyPros.startingBoss,this._increaseBoss=W.enemyPros.incrementBoss,this._bossLives=W.enemyPros.bossLives,this._bossSpeed=W.enemyBulletPros.bossSpeed,this._airdropPercentAsteroid=W.airdropPros.percentAsteroid,this._airdropPercentEnemy=W.airdropPros.percentEnemy,this._airdropPercentBoss=W.airdropPros.percentBoss,this._airdropDuration=W.airdropPros.duration,this.initAssets(),this.initWorld(),this._shot=!1,this._gameStarted=!1}},{key:"initWorld",value:function(){this._ships=this.physics.add.group(),this._ships.runChildUpdate=!0,this._otherShips=this.physics.add.group(),this._otherShips.runChildUpdate=!0,this._bullets=this.physics.add.group(),this._bullets.runChildUpdate=!0,this._asteroids=this.physics.add.group(),this._asteroids.runChildUpdate=!0,this._regionBullets=this.physics.add.group(),this._regionBullets.runChildUpdate=!0,this._airdrops=this.physics.add.group(),this._airdrops.runChildUpdate=!0,this._enemies=this.physics.add.group(),this._enemies.runChildUpdate=!0,this._backgroundSprite=this.add.sprite(0,0,W.graphicAssets.background.name),this._backgroundSprite.displayWidth=W.gamePros.screenWidth,this._backgroundSprite.displayHeight=W.gamePros.screenHeight,this._backgroundSprite.setOrigin(0),this.initWorldBounds(),this.physics.add.overlap(this._ships,this._asteroids,this.shipAsteroidCollision,null,this),this.physics.add.overlap(this._ships,this._enemies,this.shipEnemyCollision,null,this),this.physics.add.overlap([this._bullets,this._regionBullets],this._asteroids,this.bulletAsteroidCollision,null,this),this.physics.add.overlap([this._bullets,this._regionBullets],this._enemies,this.bulletEnemyCollision,null,this),this.physics.add.overlap(this._ships,this._airdrops,this.shipAirdropCollision,null,this),this.physics.add.overlap(this._bullets,this._otherShips,this.shipBulletCollision,null,this)}},{key:"initWorldBounds",value:function(){var e=this._width/2+100,t=this._height/2+100,i=this._center.x-e,n=this._center.x+(e-5),s=this._center.y-t,a=this._center.y+(t-5),o=n-i,r=a-s,l=s+r/2,c=i+o/2;this._worldBounds=this.physics.add.staticGroup(),this._worldBounds.add(new gi.a.GameObjects.Rectangle(this,c,s,o,5)),this._worldBounds.add(new gi.a.GameObjects.Rectangle(this,i,l,5,r)),this._worldBounds.add(new gi.a.GameObjects.Rectangle(this,c,a,o,5,1)),this._worldBounds.add(new gi.a.GameObjects.Rectangle(this,n,l,5,r,0))}},{key:"initShip",value:function(e,t,i){var n=this,s={forward:this.input.keyboard.addKey(i.forward),brake:this.input.keyboard.addKey(i.brake),left:this.input.keyboard.addKey(i.left),right:this.input.keyboard.addKey(i.right),fire:this.input.keyboard.addKey(i.fire)};this._shipPros=e,this._myShip=new Ni({sargs:{scene:this,group:this._ships,x:this.cameras.main.centerX,y:this.cameras.main.centerY,texture:e.spaceship},id:1,shipPros:e,hasCombat:t,inputKeys:s}),this._myShip.setRotation(this._myShip.rotLeft);var a=this.sound.add(W.soundAssets.shipExplose.name,{volume:.5});a.on("complete",(function(){n._myShip.Lives<1?n.gameOver():n._myShip.respawn(n._width/2,n._height/2)})),this._myShip.on("ship_death",(function(){a.play(),n._particles.shipExplode.emitParticleAt(n._myShip.x,n._myShip.y)})),this._myShip._engineSound=this.sound.add(W.soundAssets.engine.name,{loop:!0,volume:.5}),this._isEnableSoundEffect&&this._myShip._engineSound.play(),this._myShip._engineSound.pause()}},{key:"initAssets",value:function(){var e=this;this._bulletSound=this.sound.add(W.soundAssets.fire.name),this._destroyedSound=this.sound.add(W.soundAssets.destroyed.name),this._fireSound=this.sound.add(W.soundAssets.fire.name),this._deathSound=this.sound.add(W.soundAssets.shipExplose.name,{volume:.5}),this._particles={};var t=this.add.particles(W.graphicAssets.particles.name);t.setDepth(9);this._particles.bulletImpact=t.createEmitter({frame:["blue","red","orange"],scale:{start:.2,end:0},quantity:30,alpha:{start:1,end:0},lifespan:{min:500,max:1e3},speed:{min:120,max:150},frequency:-1,blendMode:"ADD"}),this._particles.asteroidExplode=t.createEmitter({frame:["white","red"],scale:{start:.3,end:0},quantity:60,alpha:{start:1,end:0},lifespan:{min:300,max:600},speed:{min:20,max:150},frequency:-1,blendMode:"ADD"}),this._particles.shipExplode=t.createEmitter({frame:["white","red","orange"],scale:{start:.6,end:0},quantity:60,alpha:{start:1,end:0},lifespan:{min:300,max:600},speed:{min:20,max:150},frequency:-1,blendMode:"ADD"}),this.time.addEvent({delay:1e3,callback:function(){e._bgSound=e.sound.add(W.soundAssets.bg.name)}})}},{key:"create",value:function(e){var t=this;console.log("this.sys.game.device.os",this.sys.game.device.os);var i=this.sys.game.device.os;if(this._joyStick=this.plugins.get("rexvirtualjoystickplugin"),console.log("joystick",this._joyStick),!0===i.android&&(this._joyStick.add(this,{x:200,y:800,radius:100,base:this.add.circle(0,0,100,8947848),thumb:this.add.circle(0,0,50,13421772)}),this.dumpJoyStickState()),this._airdropDuration*=Be[e.shipPros.tier],this.registry.set("bonusLives",Ce[e.shipPros.tier]),this._specialKey=e.gameProps.keyboard.special,this.scene.launch("text",{level:""}),!e.network)throw new Error("server instance missing");this._network=e.network,this._mySessionId=e.network._mySessionId,this.initShip(e.shipPros,e.gameProps.hasCombat,e.gameProps.keyboard),this._account=e.shipPros.account,this._tokenId=e.shipPros.tokenID,this._shipName=e.shipPros.shipName,this._paid=e.shipPros.paid,this._team=e.shipPros.team,e.shipPros.hasShield&&(this._myShip.setShiled(this._airdropDuration),Nt.dispatch(bt(he.SHIELD)),Nt.dispatch(gt(this._airdropDuration))),this._startingAsteroids+=De[e.gameProps.difficulty].STARTING_ASTEROIDS,this._incrementAsteroids+=De[e.gameProps.difficulty].INCREASE_ASTEROIDS,this._maxAsteroids+=De[e.gameProps.difficulty].MAX_ASTEROIDS,this._minAsteroidSpeed*=De[e.gameProps.difficulty].MIN_ASTEROID_SPEED,this._maxAsteroidSpeed*=De[e.gameProps.difficulty].MAX_ASTEROID_SPEED,this._startingEnemies+=De[e.gameProps.difficulty].STARTING_ENEMIES,this._increaseEnemies+=De[e.gameProps.difficulty].INCREASE_ENEMIES,this._minEnemySpeed*=De[e.gameProps.difficulty].MIN_ENEMY_SPEED,this._maxEnemySpeed*=De[e.gameProps.difficulty].MAX_ENEMY_SPEED,this.input.keyboard.on("keyup-".concat(e.gameProps.keyboard.sounds),(function(){t._isEnableSoundEffect=!t._isEnableSoundEffect,ki.emit(ji.TOGGLE_SOUNDS,t._isEnableSoundEffect)}),this),this.time.addEvent({delay:2e3,callback:function(){t._bgSound.play()}}),this.input.keyboard.on("keyup-".concat(e.gameProps.keyboard.music),(function(){t._isEnableBgSound=!t._isEnableBgSound,t._isEnableBgSound?t._bgSound.play():t._bgSound.stop()}),this),this.input.keyboard.on("keyup-".concat(e.gameProps.keyboard.exit),(function(){Nt.dispatch(ft(!0))}),this),ki.on(ji.EXIST_GAME,(function(){t.gameOver()})),this._network.onMyPlayerReady(this.handleMyPlayerReady,this),this._network.onPlayerJoined(this.handlePlayerJoined,this),this._network.onPlayerUpdated(this.handlePlayerUpdated,this),this._network.onPlayerLeft(this.handlePlayerLeft,this),this._network.onBulletCreated(this.handleBulletCreated,this),this._network.onBulletRemoved(this.handleBulletRemoved,this),this._network.onAsteroidCreated(this.handleAsteroidCreated,this),this._network.onAsteroidRemoved(this.handleAsteroidRemoved,this),this._network.onAsteroidChangesUpdated(this.handleAsteroidChangesUpdated,this),this._network.onAirdropCreated(this.handleAirdropCreated,this),this._network.onAirdropUpdated(this.handleAirdropUpdated,this),this._network.onAirdropRemoved(this.handleAirdropRemoved,this),this._network.onCollisionPlayerWithAsteroid(this.handleCollisionPlayerWithAsteroid,this),this._network.onCollisionPlayerWithBullet(this.handleCollisionPlayerWithBullet,this),this._network.onCollisionBulletAsteroid(this.handleCollisionBulletAsteroid,this),this._network.onCollisionPlayerAirdrop(this.handleCollisionPlayerWithAirdrop,this)}},{key:"dumpJoyStickState",value:function(){}},{key:"handlePlayerJoined",value:function(e,t){var i=this;this.input.keyboard.enabled=!0,this._network&&this._network.allPlayersReady(!0),this._gameStarted=!0;var n=new Ji({sargs:{scene:this,group:this._otherShips,x:e.x,y:e.y,texture:W.graphicAssets.shipsTypes[0]},id:1,shipPros:this._shipPros,tier:0});this.scene.launch("text",{level:"Multiplayer"}),this._otherShips.add(n),this._otherShipMap.set(t,n);var s=this.sound.add(W.soundAssets.shipExplose.name,{volume:.5});s.on("complete",(function(){n._lives<1?(n.setActive(!1),n.setVisible(!1),n.destroy()):n.respawn(i._width/2,i._height/2)})),n.on("ship_death",(function(){s.play(),i._particles.shipExplode.emitParticleAt(n.x,n.y)})),n._engineSound=this.sound.add(W.soundAssets.engine.name,{loop:!0,volume:.5}),n._isEnableSoundEffect&&n._engineSound.play(),n._engineSound.pause()}},{key:"handlePlayerLeft",value:function(e){if(this._otherShipMap.has(e)){var t=this._otherShipMap.get(e);if(!t)return;this._otherShips.remove(t,!0,!0),this._otherShipMap.delete(e)}}},{key:"handleMyPlayerReady",value:function(){this._myShip._readyToConnect=!0}},{key:"handlePlayerUpdated",value:function(e,t){var i=this._otherShipMap.get(t);null===i||void 0===i||i.updateOtherPlayerChanges(e,this._network._dtServer2Client)}},{key:"handleBulletCreated",value:function(e,t,i){if(console.log("newBullet ",e,"_mySessionId",this._network._mySessionId),e.owner!=this._network._mySessionId){var n=Math.sqrt(e.speed_x*e.speed_x+e.speed_y*e.speed_y);e.owner!=this._myShip&&this.spawnRandomBullet(e.x,e.y,e.rotation,n,e.owner,!1)}}},{key:"handleBulletUpdated",value:function(e,t){var i=this._bulletsMap.get(t);null===i||void 0===i||i.updateServerDataChangesBullet(e,this._network._dtServer2Client)}},{key:"handleBulletRemoved",value:function(e,t){if(this._bulletsMap.has(e)){var i=this._bulletsMap.get(e);if(!i)return;this._bullets.remove(i,!0,!0),this._bulletsMap.delete(e)}}},{key:"handleAsteroidCreated",value:function(e,t,i){var n,s,a,o;n=e.x,s=e.y,a=1===e.type?"FIRST":"SECOND",o=1===e.size?"LARGE":"SMALL";var r=new Vi({sargs:{scene:this,group:this._asteroids,x:n,y:s,texture:$[a][o],frame:Math.round(2*Math.random())},type:a,size:o});o===ie&&r.setCircle(29),o===ne&&r.setCircle(19),r.setOrigin(.5,.5),r.setAngularVelocity(X(-50,50)),this._asteroidsMap.set(t,r)}},{key:"handleAsteroidRemoved",value:function(e,t){if(this._asteroidsMap.has(e)){var i=this._asteroidsMap.get(e);if(!i)return;this._asteroids.remove(i,!0,!0),this._asteroidsMap.delete(e)}}},{key:"handleAsteroidChangesUpdated",value:function(e,t){var i=this._asteroidsMap.get(t);null===i||void 0===i||i.updateServerDataChangesAsteroid(e,this._network._dtServer2Client)}},{key:"handleAirdropCreated",value:function(e,t,i){if(console.log("in handleAirdropCreated",e,t),e.owner!==this._mySessionId){var n=new zi({sargs:{scene:this,group:this._airdrops,x:e.x,y:e.y,texture:he[e.kind],frame:Math.round(2*Math.random())},owner:e.owner,kind:e.kind});this._airdropsMap.set(t,n)}}},{key:"handleAirdropUpdated",value:function(e,t,i){var n=this._airdropsMap.get(i);null===n||void 0===n||n.updateServerDataAirdrop(e,t)}},{key:"handleAirdropRemoved",value:function(e,t){if(this._airdropsMap.has(e)){var i=this._airdropsMap.get(e);if(!i)return;this._airdrops.remove(i,!0,!0),this._airdropsMap.delete(e)}}},{key:"handleCollisionPlayerWithAsteroid",value:function(e){}},{key:"shipAsteroidCollision",value:function(e,t){e._hasShield?"asteroid"===t._group&&(this.splitAsteroid(t),this._particles.asteroidExplode.emitParticleAt(t.x,t.y),this._isEnableSoundEffect&&this._destroyedSound.play(),t.destroy()):e.Vulnerable&&e.kill()}},{key:"shipEnemyCollision",value:function(e,t){e._hasShield?("asteroid"===t._group&&this.splitAsteroid(t),this._particles.asteroidExplode.emitParticleAt(t.x,t.y),this._isEnableSoundEffect&&this._destroyedSound.play(),t.destroy()):e.Vulnerable&&e.kill()}},{key:"bulletAsteroidCollision",value:function(e,t){if("normal"===e._bulletKind&&e._owner._bulletType===de)return e.destroy(),void this.spawnRegionBullet(t.x,t.y,e._owner,"explosive");if("asteroid"===t._group){if(t._type===te&&2===t._lives)return t._lives--,this._particles.asteroidExplode.emitParticleAt(t.x,t.y),void(e._owner._bulletType!==ce&&e.destroy());e._owner.Score+=1,this._network&&this._network.recordScore(e._owner._account,e._owner._tokenId,e._owner._shipName,e._owner._tier,e._owner._score),e._owner==this._myShip&&(console.log("spawnRandomAirdrop3",e),this.spawnRandomAirdrop(t,this._mySessionId,this._airdropPercentAsteroid)),this.splitAsteroid(t)}this._particles.asteroidExplode.emitParticleAt(t.x,t.y),this._isEnableSoundEffect&&this._destroyedSound.play(),"atomic"!==e._bulletKind&&e._owner.reload(),e._owner._bulletType!==ce&&e.destroy(),t.destroy()}},{key:"bulletEnemyCollision",value:function(e,t){if("normal"===e._bulletKind&&e._owner._bulletType===de)return e.destroy(),void this.spawnRegionBullet(t.x,t.y,e._owner,"explosive");if("enemy"===t._group||"boss"===t._group){if("enemy"===t._group&&2===t._lives)return t._lives--,this._particles.asteroidExplode.emitParticleAt(t.x,t.y),void(e._owner._bulletType!==ce&&e.destroy());if("boss"===t._group&&t._lives>1)return t._lives--,this._particles.asteroidExplode.emitParticleAt(t.x,t.y),void(e._owner._bulletType!==ce&&e.destroy());"enemy"===t._group&&(e._owner.Score+=10,console.log("spawnRandomAirdrop1",e),this.spawnRandomAirdrop(t,e._owner,this._airdropPercentEnemy)),"boss"===t._group&&(e._owner.Score+=80,console.log("spawnRandomAirdrop2",e),this.spawnRandomAirdrop(t,e._owner,this._airdropPercentBoss))}this._particles.asteroidExplode.emitParticleAt(t.x,t.y),this._isEnableSoundEffect&&this._destroyedSound.play(),"atomic"!==e._bulletKind&&e._owner.reload(),e._owner._bulletType!==ce&&e.destroy(),t.destroy()}},{key:"getKeyByValue",value:function(e,t){var i,n=Object(Xi.a)(e.entries());try{for(n.s();!(i=n.n()).done;){var s=Object(d.a)(i.value,2),a=s[0];if(s[1]===t)return a}}catch(o){n.e(o)}finally{n.f()}return 0}},{key:"shipAirdropCollision",value:function(e,t){t._kind===xe||(t._kind===fe?Nt.dispatch(vt(!0)):t._kind===we?(Nt.dispatch(bt(t._kind)),Nt.dispatch(gt(this._airdropDuration))):(Nt.dispatch(mt(t._kind)),Nt.dispatch(_t(this._airdropDuration)))),t._kind===fe?e._hasAtomic=!0:t._kind===xe?e.Lives+=1:t._kind===we?e.setShiled(this._airdropDuration):e.updateBulletProperty(t._kind,this._airdropDuration);var i=t,n=this.getKeyByValue(this._airdropsMap,i);console.log("kkkk",this._airdropsMap,"kkkk",i),this._network.removeAirdropToServer(n),t.destroy()}},{key:"shipBulletCollision",value:function(e,t){console.log("shipBulletCollision  bullet",e,"ship",t),console.log("bullet.owner",e._owner,"this._myShip",this._myShip),e._owner!=t&&(t._hasShield?(this._isEnableSoundEffect&&this._destroyedSound.play(),this._particles.bulletImpact.emitParticleAt(t.x,t.y)):t.kill(),e.destroy()),e._owner==this._myShip&&(this._myShip.Score+=5)}},{key:"handleCollisionPlayerWithBullet",value:function(e){e.punished_id===this._mySessionId?this._myShip._hasShield?(this._isEnableSoundEffect&&this._destroyedSound.play(),this._particles.bulletImpact.emitParticleAt(this._myShip.x,this._myShip.y)):this._myShip.Vulnerable&&this._myShip.kill():e.punisher_id===this._mySessionId&&(this._myShip.Score+=5)}},{key:"handleCollisionBulletAsteroid",value:function(e){e.punisher_id===this._network._mySessionId&&(this._myShip.Score+=1),this._isEnableSoundEffect&&this._destroyedSound.play(),this._particles.asteroidExplode.emitParticleAt(e.asteroid_x,e.asteroid_y)}},{key:"handleCollisionPlayerWithAirdrop",value:function(e){console.log("collide player with airdrop",e.id,this._mySessionId,e.player_id),this._mySessionId===e.player_id&&(e.kind===xe||(e.kind===fe?Nt.dispatch(vt(!0)):e.kind===we?(Nt.dispatch(bt(e.kind)),Nt.dispatch(gt(this._airdropDuration))):(Nt.dispatch(mt(e.kind)),Nt.dispatch(_t(this._airdropDuration)))),e.kind===fe?this._myShip._hasAtomic=!0:e.kind===xe?this._myShip.Lives+=1:e.kind===we?this._myShip.setShiled(this._airdropDuration):this._myShip.updateBulletProperty(e.kind,this._airdropDuration))}},{key:"updateBulletLaunchDataToserver",value:function(e,t,i,n,s){var a,o,r=s.body.velocity,l=(new gi.a.Math.Vector2).setToPolar(i,n);console.log("ask bullet (",s._bulletType,s,")at : ",(new Date).getTime()),a=r.x+l.x,o=r.y+l.y,this._shot||(this._network&&this._network.updateBulletToServer(e,t,i,a,o,s._bulletType),this._shot=!0),this._shot=!1}},{key:"spawnRandomBullet",value:function(e,t,i,n,s,a){var o=this,r=s._bulletType;if(a)s=this._myShip;else{if(console.log("_otherShipMap",this._otherShipMap,"speed",n),!this._otherShipMap.has(s))return;s=this._otherShipMap.get(s)}switch(r){case oe:for(var l=s.body.velocity,c=(new gi.a.Math.Vector2).setToPolar(i,n).add(l),d=Math.sqrt(c.x*c.x+c.y*c.y),u={x:c.x/d,y:c.y/d},p=-1;p<=1;p+=2){var h=this.spawnBullet(e-15*u.y*p,t+15*u.x*p,s);h.rotation=s.rotation,h.setVelocity(c.x,c.y)}break;case re:for(var y=s.body.velocity,m=(new gi.a.Math.Vector2).setToPolar(i,n).add(y),_=Math.sqrt(m.x*m.x+m.y*m.y),b={x:m.x/_,y:m.y/_},g=-1;g<=1;g++){var v=this.spawnBullet(e-15*b.y*g,t+15*b.x*g,s);v.rotation=s.rotation,v.setVelocity(m.x,m.y)}break;case le:for(var f=-1;f<=1;f++){var x=f*Math.PI/10,w=this.spawnBullet(e,t,s);w.rotation=s.rotation+x;var E=s.body.velocity,O=(new gi.a.Math.Vector2).setToPolar(i,n).add(E).length(),S=s.rotation;w.setVelocity(O*Math.cos(S+x),O*Math.sin(S+x))}break;case de:var j=this.spawnBullet(e,t,s);j.rotation=s.rotation;var k=s.body.velocity,A=(new gi.a.Math.Vector2).setToPolar(i,n);j.setVelocity(k.x+A.x,k.y+A.y);break;case ce:s._hasLazer=!0,setTimeout((function(){var i=o.spawnBullet(e,t,s);i.rotation=s.rotation;var a=s.body.velocity,r=(new gi.a.Math.Vector2).setToPolar(s.rotation,n);i.setVelocity(a.x+r.x,a.y+r.y),s._hasLazer=!1}),500);break;case ue:var T=this.spawnBullet(e,t,s);T.rotation=s.rotation;var L=s.body.velocity,R=(new gi.a.Math.Vector2).setToPolar(i,n);T.setVelocity(L.x+R.x,L.y+R.y);break;default:var P=this.spawnBullet(e,t,s);console.log("shooter.body.velocity",a,"   ",s.body.velocity),P.rotation=s.rotation;var I=s.body.velocity,M=(new gi.a.Math.Vector2).setToPolar(i,n);P.setVelocity(I.x+M.x,I.y+M.y)}}},{key:"spawnBullet",value:function(e,t,i){var n,s;return console.log("spawnBullet"),i._bulletType===ce?(n=i.x,s=i.y):(n=e,s=t),new Ui({sargs:{scene:this,group:this._bullets,x:n,y:s,texture:pe[i._bulletType],frame:0},owner:i,kind:"normal"})}},{key:"spawnRegionBullet",value:function(e,t,i,n){return new Ui({sargs:{scene:this,group:this._regionBullets,x:e,y:t,texture:pe.REGION_BULLET,frame:0},owner:i,kind:n})}},{key:"spawnRandomAsteroid",value:function(e,t){var i=this.getOuterRimCoords(),n=i.x,s=i.y,a=i.dir;this.spawnAsteroid(n,s,e,t).launchAsteroid(X(this._minAsteroidSpeed,this._maxAsteroidSpeed),a+Math.PI,Q)}},{key:"spawnAsteroid",value:function(e,t,i,n){return new Vi({sargs:{scene:this,group:this._enemies,x:e,y:t,texture:$[i][n],frame:Math.round(2*Math.random())},type:i,size:n})}},{key:"respawnEnemies",value:function(e,t){var i=this.getOuterRimCoords(),n=i.x,s=i.y,a=i.dir;e.setPosition(n,s),"enemy"===e._group?e.launchEnemy(X(this._minEnemySpeed,this._maxEnemySpeed),a+Math.PI,Q):"asteroid"===e._group?e.launchAsteroid(X(this._minAsteroidSpeed,this._maxAsteroidSpeed),a+Math.PI,Q):"enemyBullet"===e._group&&e.destroy()}},{key:"splitAsteroid",value:function(e){if(e._size!==ne)for(var t=e._type,i=ne,n=e.body.velocity,s=e.getCenter(),a=s.x,o=s.y,r=0;r<2;r++){var l=gi.a.Math.RandomXY(new gi.a.Math.Vector2,40),c=l.x,d=l.y;this.spawnAsteroid(a+c,o+d,t,i).launchAsteroid(X(this._minAsteroidSpeed,this._maxAsteroidSpeed),n.angle(),Q,60)}}},{key:"spawnRandomEnemies",value:function(e,t){var i=this.getOuterRimCoords(),n=i.x,s=i.y,a=i.dir;this.spawnEnemy(n,s,e,t).launchEnemy(X(this._minEnemySpeed,this._maxEnemySpeed),a+Math.PI,Q-Math.PI)}},{key:"spawnEnemy",value:function(e,t,i,n){return new Hi({sargs:{scene:this,group:this._enemies,x:e,y:t,texture:Ee[i],frame:Math.round(2*Math.random())},type:i,lives:n})}},{key:"spawnRandomEnemyBullet",value:function(e,t,i,n,s){if(s._type===Oe){var a=this.spawnEnemyBullet(e,t,s);a.rotation=i;var o=s.body.velocity,r=(new gi.a.Math.Vector2).setToPolar(i,n);a.setVelocity(o.x+r.x,o.y+r.y)}else if(s._type===Se)for(var l=0;l<10;l++){var c=l*Math.PI/5,d=this.spawnEnemyBullet(e,t,s),u=this._enemyBulletVelocity;d.setVelocity(u.x*Math.cos(c),u.y*Math.sin(c))}else if(s._type===ke||s._type===Ae){var p=this.spawnEnemyBullet(e,t,s),h={x:this._myShip.x-s.x,y:this._myShip.y-s.y},y=Math.sqrt(h.x*h.x+h.y*h.y),m={x:h.x/y,y:h.y/y},_={x:m.x*this._bossSpeed,y:m.y*this._bossSpeed};p.setVelocity(_.x,_.y)}else if(s._type===Te||s._type===Le)for(var b={x:this._myShip.x-s.x,y:this._myShip.y-s.y},g=Math.sqrt(b.x*b.x+b.y*b.y),v={x:b.x/g,y:b.y/g},f={x:v.x*this._bossSpeed,y:v.y*this._bossSpeed},x=Math.sqrt(f.x*f.x+f.y*f.y),w={x:f.x/x,y:f.y/x},E=-1;E<=1;E+=2){this.spawnEnemyBullet(e-15*w.y*E,t+15*w.x*E,s).setVelocity(f.x,f.y)}}},{key:"spawnEnemyBullet",value:function(e,t,i){var n=i._type.startsWith("NORMAL")?W.graphicAssets.enemyBullet.name:W.graphicAssets.rocketBullet.name;return new Ki({sargs:{scene:this,group:this._enemies,x:e,y:t,texture:n,frame:0},owner:i})}},{key:"spawnRandomAirdrop",value:function(e,t,i){var n=this,s=X(0,9),a="";a=s<=1?ye:s<=2?me:s<=3?_e:s<=4?be:s<=5?ge:s<=6?ve:s<=7?xe:s<=8?fe:we;var o=this.getOuterRimCoords().dir,r=this.spawnAirdrop(e.x,e.y,t,a);this._network.createAirdropToServer(e.x,e.y,t,a),r.launchAirdrop(10+X(-5,10),o+Math.PI,Q);var l=this.time.delayedCall(1e3*W.airdropPros.alertTime,(function(){n.time.addEvent({delay:1e3,callback:function(){r.setVisible(!r.visible)},callbackScope:n,repeat:-1})}));this.time.delayedCall(1e3*W.airdropPros.lifetime,(function(){l.remove(),r.destroy()}))}},{key:"spawnAirdrop",value:function(e,t,i,n){return new zi({sargs:{scene:this,group:this._airdrops,x:e,y:t,texture:he[n],frame:Math.round(2*Math.random())},owner:i,kind:n})}},{key:"getOuterRimCoords",value:function(){var e=0,t=0,i=0,n=Math.random()*(2*this._width+2*this._height);return n<this._width?(e=n,t=0,i=-X(.1,.9)*Math.PI):n<this._width+this._height?(e=this._width,t=n-this._width,i=X(-.4,.4)*Math.PI):n<2*this._width+this._height?(e=n-this._width-this._height,t=this._height,i=X(.1,.9)*Math.PI):(e=0,t=n-2*this._width-this._height,i=X(.6,1.4)*Math.PI),{x:e,y:t,dir:i}}},{key:"gameOver",value:function(){this.sound.stopAll(),this.scene.stop("multiplay"),this.scene.stop("text"),this.scene.launch("gameOver",{score:this._myShip.Score,paid:this._myShip.paid})}},{key:"nextAsteroids",value:function(){this._startingAsteroids=Math.min(this._startingAsteroids+this._incrementAsteroids,this._maxAsteroids);for(var e=0;e<this._startingAsteroids;e++){var t=1===this._level||X(0,1)>=.5?ee:te,i=ie;this.spawnRandomAsteroid(t,i)}}},{key:"nextEnemies",value:function(e,t,i){if(t!==je)for(var n=0;n<e;n++)this.spawnRandomEnemies(t,i);else{this.spawnRandomEnemies(Oe,i),this.spawnRandomEnemies(Se,i);for(var s=0;s<e-2;s++){var a=X(1,3)>=2?Se:Oe;this.spawnRandomEnemies(a,i)}}}},{key:"nextLevel",value:function(){var e=this;if(this._passedIntro=!1,this.time.removeEvent(this._levelTimer),this._readyNewLevel=!1,this._levelTimer=this.time.addEvent({delay:2e3,callback:function(){e._readyNewLevel=!1}}),this._level++,this.registry.set("level",this._level),7===this._level||this._level>=8&&this._level%4===0||this.nextAsteroids(),this._level>=3&&!(this._level>=8&&this._level%4===0)){this._startingEnemies+=this._increaseEnemies;var t=this._level>=5?je:Oe;this.nextEnemies(this._startingEnemies,t,this._enemyLives)}if(this._level>=8&&this._level%4===0){12!==this._level&&(this._startingBoss+=this._increaseBoss);var i=X(0,1)>.5?ke:Ae;this.nextEnemies(this._startingBoss,i,this._bossLives)}if(this._level>=12&&this._level%4===0){var n=X(0,1)>.5?Te:Le;this._bossLives+=5,this.nextEnemies(this._startingBoss,n,this._bossLives)}}},{key:"introNewEnemy",value:function(e){this.nextEnemies(1,e,this._bossLives)}},{key:"newMission",value:function(){var e=this;2!==this._level||this._passedIntro?4!==this._level||this._passedIntro?(this.registry.set("endLevel",this._level),this.registry.set("newEnemy",-1),this._levelTimer=this.time.addEvent({delay:W.gamePros.endLevelDelay,callback:function(){e._readyNewLevel=!0,e.registry.set("endLevel",-1)}})):(this._passedIntro=!0,this.registry.set("newEnemy",1),this.introNewEnemy(Se),this._levelTimer=this.time.addEvent({delay:W.gamePros.introNewEnemyDelay,callback:function(){e.registry.set("newEnemy",-1)}})):(this._passedIntro=!0,this.registry.set("newEnemy",1),this.introNewEnemy(Oe),this._levelTimer=this.time.addEvent({delay:W.gamePros.introNewEnemyDelay,callback:function(){e.registry.set("newEnemy",-1)}}))}},{key:"update",value:function(e,t){this.physics.world.wrap(this._ships),this._myShip&&this._network&&this._myShip.updateToServer(this._network),this.input.keyboard.addKey(this._specialKey).isDown&&this._myShip._hasAtomic&&(this._network.specialKeyIsDown(!0),this._myShip._hasAtomic=!1,Nt.dispatch(vt(!1)))}}]),i}(gi.a.Scene),Zi=function(e){Object(xi.a)(i,e);var t=Object(wi.a)(i);function i(){var e;return Object(vi.a)(this,i),(e=t.call(this,"text"))._scoreLabel=void 0,e._scoreText=void 0,e._levelLabel=void 0,e._levelText=void 0,e._shotLabel=void 0,e._shotText=void 0,e._endLevel=void 0,e._newEnemy=void 0,e._lives=void 0,e._startingLives=void 0,e._bonusLives=void 0,e._width=void 0,e._height=void 0,e}return Object(fi.a)(i,[{key:"init",value:function(){this._width=W.gamePros.screenWidth,this._height=W.gamePros.screenHeight,this._startingLives=W.shipPros.startingLives+this.registry.values.bonusLives,this._bonusLives=0,this._lives=[]}},{key:"create",value:function(e){var t=this;this._endLevel=this.add.text(this._width/2,this._height/2-50,"",W.fontAssets.endLevel),this._endLevel.setOrigin(.5),this._newEnemy=this.add.text(this._width/2,this._height/2-50,"",W.fontAssets.endLevel),this._newEnemy.setOrigin(.5),this._scoreLabel=this.add.text(16,16,"Score:",W.fontAssets.scoreLabel),this._scoreText=this.add.text(135,16,"0",W.fontAssets.scoreText),this._levelLabel=this.add.text(16,50,"Level:",W.fontAssets.levelLabel),this._levelText=this.add.text(85,50,e.level,W.fontAssets.levelText),this._shotLabel=this.add.text(this._width-155,this._height-45,"Shots:",W.fontAssets.scoreLabel),this._shotText=this.add.text(this._width-16,this._height-16,this.registry.values.shots,W.fontAssets.scoreText),this._shotText.setOrigin(1,1),this.setLives(),this.events.on("shutdown",(function(){return t.registry.events.removeListener("changedata",t.updateData,t)}),this),this.registry.events.on("changedata",this.updateData,this)}},{key:"updateData",value:function(e,t,i){"score"===t?this._scoreText.setText(i):"level"===t?(this._levelText.setText(i),this.setLives()):"playerLives"===t?this.setLives():"shots"===t?i>90?this._shotText.setText("\u221e"):this._shotText.setText(i):"endLevel"===t?-1===i?this._endLevel.setText(""):0===i?this._endLevel.setText("Enjoy Crosmo Shooter"):this._endLevel.setText("Level ".concat(i," completed")):"newEnemy"===t&&(-1===i?this._newEnemy.setText(""):this._newEnemy.setText("A new kind of enemy appears"))}},{key:"setLives",value:function(){this._lives=[];for(var e=this._width,t=0;t<this._startingLives;t++){var i=this.add.image(e-32-40*t,35,W.graphicAssets.lifeEmpty.name);this._lives.push(i)}for(var n=0;n<this.registry.values.playerLives;n++){var s=this.add.image(e-32-40*n,35,W.graphicAssets.lifeFull.name);this._lives[n]=s}}}]),i}(gi.a.Scene),Qi=function(e){Object(xi.a)(i,e);var t=Object(wi.a)(i);function i(){var e;return Object(vi.a)(this,i),(e=t.call(this,"gameOver"))._contentText=void 0,e._mainMenuButton=void 0,e._playAgainButton=void 0,e._tokenRewarded=void 0,e._canPlay=void 0,e._shipDamaged=void 0,e._tokenRewarded=!1,e._canPlay=!1,e._shipDamaged=!1,e}return Object(fi.a)(i,[{key:"create",value:function(e){var t=this;Nt.dispatch(Ve(!0)),W.fontAssets.gameoverFontStyle.fontSize="50px",this.add.text(this.cameras.main.centerX,this.cameras.main.centerY-100,"GAME OVER",W.fontAssets.gameoverFontStyle).setOrigin(.5),W.fontAssets.gameoverFontStyle.fontSize="30px",this._contentText=this.add.text(this.cameras.main.centerX,this.cameras.main.centerY,"You did not get any score.",W.fontAssets.gameoverFontStyle),this._contentText.setOrigin(.5),0!==e.score&&null!==e&&void 0!==e&&e.paid&&this._contentText.setText("You have reached a score of ".concat(e.score,". \n Sending ").concat(e.score," $CROSMO to rewards balance...")),this._mainMenuButton=this.add.text(this.cameras.main.centerX,this.cameras.main.centerY+70,"",W.fontAssets.gameoverFontStyle),this._mainMenuButton.setOrigin(.5),this._mainMenuButton.setInteractive(),this._mainMenuButton.on("pointerdown",(function(){t._mainMenuButton.setColor("#4c1a03")})),this._mainMenuButton.on("pointerup",(function(){t._mainMenuButton.setColor("#ff601a"),t.gotoMenu()})),this._playAgainButton=this.add.text(this.cameras.main.centerX,this.cameras.main.centerY+120,"",W.fontAssets.gameoverFontStyle),this._playAgainButton.setOrigin(.5),this._playAgainButton.setInteractive(),this._playAgainButton.on("pointerdown",(function(){t._playAgainButton.setColor("#4c1a03")})),this._playAgainButton.on("pointerup",(function(){t._playAgainButton.setColor("#ff601a"),t.playAgain()})),ki.on(ji.TOKEN_REWARDED,(function(){t._tokenRewarded=!0}),this),ki.on(ji.CAN_PLAY,(function(){t._contentText.setText(""),t._mainMenuButton.setText("Main Menu"),t._playAgainButton.setText("Play Again"),t._canPlay=!0}),this),ki.on(ji.SHIP_DAMAGED,(function(){t._contentText.setText("Your ship is damaged."),t._mainMenuButton.setText("Main Menu"),t._shipDamaged=!0}),this),ki.on(ji.PLAY_AGAIN,(function(){t.startGame()}))}},{key:"gotoMenu",value:function(){window.location.href="/"}},{key:"playAgain",value:function(){Nt.dispatch(Ye(!0))}},{key:"startGame",value:function(){this._canPlay=!1,this.scene.start("play")}}]),i}(gi.a.Scene),$i={type:gi.a.AUTO,parent:"phaser-game",backgroundColor:"black",pixelArt:!1,scale:{mode:gi.a.Scale.FIT,parent:"phaser-example",autoCenter:gi.a.Scale.CENTER_BOTH,width:1600,height:900},physics:{default:"arcade",arcade:{gravity:{y:0},debug:!1}},autoFocus:!0,scene:[Ti,Wi,qi,Zi,Qi]},en=new gi.a.Game($i);window.game=en;var tn,nn=en;Zt.a.use([Qt.a]),function(e){e.Create="create",e.Join="join",e.Quick="quick"}(tn||(tn={}));var sn,an,on,rn,ln,cn,dn,un,pn,hn,yn,mn,_n,bn,gn,vn,fn,xn,wn,En,On,Sn,jn,kn,An,Tn,Ln,Rn,Pn,In,Mn,Cn,Bn,Dn,Nn,Un,Fn,Vn,Yn,zn,Gn,Hn,Kn,Wn,Xn,Jn,qn,Zn,Qn,$n,es=function(e){var t,i,n,s=e.craftInstance,o=e.shooterInstance,r=e.tokenInstance,l=(e.pilotInstance,e.account),c=e.setBg,u=e.setIsGamePlaying,p=e.keyboard,y=e.isPlayEndless,m=e.isMultiplayer,g=e.difficulty,x=e.setCalculating,w=e.viewMultiMode,E=_((function(e){return e.room.lobbyJoined})),O=_((function(e){return e.room.playerList})),j=_((function(e){return e.room.curPlayer})),k=Object(h.g)(),A=Object(a.useState)(""),T=Object(d.a)(A,2),L=T[0],R=T[1],P=Object(a.useState)(!1),I=Object(d.a)(P,2),C=I[0],B=I[1],D=Object(a.useState)(""),N=Object(d.a)(D,2),U=N[0],F=N[1],Y=Object(a.useState)(""),z=Object(d.a)(Y,2),H=z[0],K=z[1],X=Object(a.useState)([]),J=Object(d.a)(X,2),q=J[0],Z=J[1],Q=Object(a.useState)(!1),$=Object(d.a)(Q,2),ee=$[0],te=($[1],Object(a.useState)(!1)),ie=Object(d.a)(te,2),ne=ie[0],se=(ie[1],Object(a.useState)(0)),ae=Object(d.a)(se,2),oe=ae[0],re=ae[1],le=Object(a.useState)(0),ce=Object(d.a)(le,2),de=ce[0],ue=ce[1],pe=Object(a.useState)(0),he=Object(d.a)(pe,2),ye=he[0],me=he[1],_e=Object(a.useState)(!1),be=Object(d.a)(_e,2),ge=be[0],ve=be[1],fe=Object(a.useState)(0),xe=Object(d.a)(fe,2),we=xe[0],Ee=xe[1],Oe=nn.scene.keys.boot,Se=nn.scene.keys.multiplay;Object(a.useEffect)((function(){var e=function(){var e=Object(b.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,je();case 2:console.log("_playerId",null===(t=Se._myShip)||void 0===t?void 0:t._playerId),console.log("curPlayers",O),console.log("cur",j);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(y||m)&&e()}),[y,m]);var je=function(){var e=Object(b.a)(v.a.mark((function e(){var t,i,n,a,c,d;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return K("fetching"),e.next=3,o.getRewardBalance(l);case 3:return t=e.sent,re(Number(t)/Math.pow(10,6)),e.next=7,r.balanceOf(l);case 7:return i=e.sent,ue(Number(i)/Math.pow(10,6)),e.next=11,s.walletOfOwner(l);case 11:if(n=e.sent,!Array.isArray(n)||!n.length){e.next=22;break}return"https://ipfs.filebase.io/ipfs/QmVPpQFBgmE4tHYfXVrs6vCDjuHXc1tRXyVxjZ9ZUqLf4s",e.next=16,Promise.all(n.map((function(e){return Ft.a.get("".concat("https://ipfs.filebase.io/ipfs/QmVPpQFBgmE4tHYfXVrs6vCDjuHXc1tRXyVxjZ9ZUqLf4s","/").concat(e,".json"))}))).catch((function(e){console.log("Getting Token Meta Datas is failed"+e.message),F("error"),R("Getting Token Meta Datas is failed!"),B(!0),setTimeout((function(){return k("/")}),7e3)}));case 16:return a=e.sent,e.next=19,Promise.all(n.map((function(e){return o.getCraftStatus(Number(e))}))).catch((function(e){console.log("Getting Craft Status is failed"+e.message),F("error"),R("Game Contract is not respond!"),B(!0),setTimeout((function(){return k("/")}),7e3)}));case 19:return c=e.sent,Array.isArray(a)&&a.length&&Array.isArray(c)&&c.length&&(d=n.map((function(e,t){return{name:a[t].data.name,tokenId:Number(e),background:a[t].data.attributes[0].value,on_background:a[t].data.attributes[1].value,weapon:a[t].data.attributes[2].value,booster:a[t].data.attributes[3].value,spaceship:a[t].data.attributes[4].value,banner:a[t].data.attributes[5].value,damaged:a[t].data.attributes[6].value,crosmonaut:a[t].data.attributes[7].value,shield:a[t].data.attributes[8].value,class:a[t].data.attributes[9].value,tier:c[t][1],damagedLevel:c[t][2]}}))).length>0&&(Z(d),K("fetched")),e.abrupt("return");case 22:F("error"),R("You don't have a NFT. Please purchase one!"),B(!0),setTimeout((function(){return k("/")}),7e3);case 26:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ke=function(){var e=Object(b.a)(v.a.mark((function e(){var t,i,n,s,a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x(!0),"DEV"==W.VERSION||!ge){e.next=21;break}return e.prev=2,e.next=5,o.enterGame({from:l,value:"1000000000000000000"});case 5:return t=e.sent,e.next=8,t.wait();case 8:i=e.sent,n=i.events,console.log("event",n),e.next=21;break;case 13:return e.prev=13,e.t0=e.catch(2),console.log("error in enterGame",e.t0),F("error"),R("You need 1 CRO to play game"),B(!0),x(!1),e.abrupt("return");case 21:return e.next=23,Yt.auth.login(l);case 23:if(!(s=e.sent).error){e.next=30;break}return F("error"),R(s.error),B(!0),x(!1),e.abrupt("return");case 30:x(!1),localStorage.setItem("jwt",JSON.stringify(s)),Nt.dispatch(Ge(q[ye].tokenId)),Nt.dispatch(He(q[ye].name)),Nt.dispatch(Ke(ge)),Nt.dispatch(We(we)),Nt.dispatch(Xe(q[ye].tier)),a=Object(G.a)(Object(G.a)({},q[ye]),{},{account:l,paid:ge,team:we}),r={hasCombat:ee,difficulty:g,keyboard:p},a.damagedLevel>=5?(F("error"),R("Your craft is damaged."),B(!0)):m&&w!=tn.Quick?E?(Oe.startMultiGame(a,r),u(!0),c("")):(F("error"),R("Trying to connect to server, please try again!"),B(!0)):E?Oe._network.joinOrCreatePublic().then((function(){Oe.startGame(a,r),u(!0),c("")})).catch((function(e){return console.error("error in joinOrCreatePublic",e)})):(F("error"),R("Trying to connect to server, please try again!"),B(!0));case 40:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(){return e.apply(this,arguments)}}(),Ae=function(){var e=Object(b.a)(v.a.mark((function e(){var t,i,n,s,a,c,d,u,p;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.prev=1,e.next=4,r.allowance(l,S);case 4:if(t=e.sent,!new Gt.BigNumber(t.toString()).eq(new Gt.BigNumber("0"))){e.next=14;break}return e.next=8,r.approve(S,"99999999999999999999999999999999999999999999999999999999999");case 8:return i=e.sent,e.next=11,i.wait();case 11:n=e.sent,s=n.events,s[0].transactionHash;case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(1),console.log("error in approve",e.t0),x(!1);case 20:if(!((a=q[ye].tier)<5)){e.next=50;break}if(!(de>=Pe[a+1]*(ne?.95:1))){e.next=45;break}return e.prev=23,e.next=26,o.upgradeCraft(q[ye].tokenId);case 26:return c=e.sent,e.next=29,c.wait();case 29:d=e.sent,u=d.events,u[0].transactionHash&&(p=q.map((function(e,t){return t===ye&&(e.name=Re[a+1],e.tier=a+1),e})),Z(Object(zt.a)(p)),ue(de-Pe[a+1]*(ne?.95:1)),F("success"),R("Crosmocraft has been upgraded."),B(!0)),e.next=43;break;case 35:e.prev=35,e.t1=e.catch(23),console.log("error in upgradeCraft",e.t1),F("error"),R("Error occurred in upgrading Crosmocraft."),B(!0),x(!1),x(!1);case 43:e.next=48;break;case 45:F("error"),R("You need ".concat(Pe[a+1]*(ne?.95:1)," $CROSMO for ").concat(Re[a+1]," Level.")),B(!0);case 48:e.next=53;break;case 50:F("success"),R("Your craft is the top level."),B(!0);case 53:x(!1);case 54:case"end":return e.stop()}}),e,null,[[1,16],[23,35]])})));return function(){return e.apply(this,arguments)}}(),Te=function(){var e=Object(b.a)(v.a.mark((function e(){var t,i,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x(!0),!(oe>0)){e.next=23;break}return e.prev=2,e.next=5,o.claimReward();case 5:return t=e.sent,e.next=8,t.wait();case 8:i=e.sent,n=i.events,n[0].transactionHash&&(F("success"),R("".concat(oe.toFixed(1),"$CROSMO has claimed.")),B(!0),ue(de+oe),re(0)),e.next=21;break;case 14:e.prev=14,e.t0=e.catch(2),console.log("error in claimReward",e.t0),F("error"),R("Error occurred in claiming reward."),B(!0),x(!1);case 21:e.next=26;break;case 23:F("error"),R("You don't have any reward token."),B(!0);case 26:x(!1);case 27:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(){return e.apply(this,arguments)}}(),Le=Object(a.useRef)(null);return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(ni,{children:Object(M.jsxs)(si,{children:["fetching"===H&&Object(M.jsxs)(f.a,{sx:{display:"block",textAlign:"center"},children:[Object(M.jsx)(li,{children:"Fetching NFT from your wallet ..."}),Object(M.jsx)(V.a,{sx:{mt:2}})]}),"fetched"===H&&Object(M.jsxs)(ai,{children:[Object(M.jsxs)(oi,{children:[Object(M.jsx)(ri,{children:Object(M.jsx)("img",{src:"assets/images/avatar_title.png",alt:"title"})}),Object(M.jsxs)(ci,{children:[Object(M.jsx)(ui,{onClick:function(){return Le.current.swiper.slidePrev()},children:Object(M.jsx)("img",{src:"assets/images/avatar_prev.png",alt:"prev"})}),Object(M.jsx)(di,{children:Object(M.jsx)(Jt.a,{ref:Le,navigation:!0,spaceBetween:0,slidesPerView:1,onSlideChange:function(e){me(e.activeIndex)},children:q.map((function(e){return Object(M.jsx)(qt.a,{children:Object(M.jsxs)("div",{children:[Object(M.jsx)("img",{className:"background",src:"assets/images/NFT/8 Background/".concat(e.background,".png"),alt:e.name}),Object(M.jsx)("img",{className:"on_background",src:"assets/images/NFT/7 On Background/".concat(e.on_background,".png"),alt:e.name}),Object(M.jsx)("img",{className:"booster",src:"assets/images/NFT/5 Booster/".concat(e.booster,".png"),alt:e.name}),Object(M.jsx)("img",{className:"weapon",src:"assets/images/NFT/6 Weapon System/".concat(e.weapon,".png"),alt:e.name}),Object(M.jsx)("img",{className:"ship",src:"assets/images/NFT/4 Spaceship/".concat(e.spaceship,".png"),alt:e.name}),Object(M.jsx)("img",{className:"banner",src:"assets/images/NFT/3 Banner/".concat(e.banner,".png"),alt:e.name}),Object(M.jsx)("img",{className:"broken",src:"assets/images/NFT/3 Damaged/".concat(e.damaged,".png"),alt:e.name}),Object(M.jsx)("img",{className:"crosmonaut",src:"assets/images/NFT/2 Crosmonaut/".concat(e.crosmonaut,".png"),alt:e.name}),Object(M.jsx)("img",{className:"shield",src:"assets/images/NFT/1 Force Shield/".concat(e.shield,".png"),alt:e.name}),0!==e.tier&&Object(M.jsx)("p",{className:"tier",children:Re[e.tier]}),Object(M.jsx)("img",{className:"tier",src:"assets/images/league_".concat(e.tier,".png"),alt:e.name}),Object(M.jsx)("img",{className:"avatarBg",src:"assets/images/avatar_modal_bg.png",alt:"avatar_bg"}),Object(M.jsx)("p",{className:"name",children:e.name})]})},e.tokenId)}))})}),Object(M.jsx)(ui,{onClick:function(){return Le.current.swiper.slideNext()},children:Object(M.jsx)("img",{src:"assets/images/avatar_next.png",alt:"next"})})]})]}),Object(M.jsxs)(pi,{children:[Object(M.jsxs)(hi,{children:["Claimable $CROSMO: ",oe.toFixed(1)]}),Object(M.jsx)(yi,{onClick:Te,children:"Claim Reward"}),Object(M.jsxs)(hi,{children:["$CROSMO Balance: ",de.toFixed(1)]}),Object(M.jsxs)(Kt.a,{row:!0,"aria-labelledby":"demo-row-radio-buttons-group-label",name:"row-radio-buttons-group",onChange:function(e){Ee(Number(e.target.value)||null)},sx:{"& *":{color:"white",borderColor:"white"}},children:[m&&Object(M.jsx)(Wt.a,{value:"1",control:Object(M.jsx)(Ht.a,{}),label:"Allied"}),m&&Object(M.jsx)(Wt.a,{value:"2",control:Object(M.jsx)(Ht.a,{}),label:"Axis"})]}),Object(M.jsx)(yi,{onClick:Ae,children:void 0!==q&&5!==(null===(t=q[ye])||void 0===t?void 0:t.tier)&&Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)("img",{src:"assets/images/upgrade.png",width:30,height:30})," to ",Re[(null===(i=q[ye])||void 0===i?void 0:i.tier)+1]," : ",Pe[(null===(n=q[ye])||void 0===n?void 0:n.tier)+1]*(ne?.95:1)]})}),Object(M.jsxs)(hi,{children:[Object(M.jsx)("span",{children:"Pay for Play?"})," ",Object(M.jsx)(Xt.a,{defaultChecked:!0,sx:{"& .MuiSvgIcon-root":{fontSize:28},"& *":{color:"white",borderColor:"white"}},checked:ge,onChange:function(e){ve(e.target.checked)}})]}),Object(M.jsx)(mi,{onClick:ke,children:"PLAY"})]})]})]})}),Object(M.jsx)(ii,{noticeMsg:L,showNotice:C,setShowNotice:B,severity:U})]})},ts=i(661),is=Object(ts.a)((function(){return{root:{borderRadius:5,height:10,width:"100%",border:"2px solid #ffe2b8"},colorPrimary:{backgroundColor:"#39260b"},bar:{borderRadius:5,backgroundColor:"#fff"}}}))(m.a),ns=Object(ts.a)((function(){return{root:{borderRadius:5,width:"100%",height:10,border:"2px solid #2099e5"},colorPrimary:{backgroundColor:"#0b1939"},bar:{borderRadius:5,backgroundColor:"#235aa5"}}}))(m.a),ss=function(e){var t=e.specialKey,i=Object(a.useState)(0),n=Object(d.a)(i,2),s=n[0],o=n[1],r=Object(a.useState)(0),l=Object(d.a)(r,2),c=l[0],u=l[1],p=_((function(e){return e.phaser.bulletName})),h=_((function(e){return e.phaser.bulletDuration})),y=_((function(e){return e.phaser.bulletChanged})),m=_((function(e){return e.phaser.shieldName})),b=_((function(e){return e.phaser.shieldDuration})),g=_((function(e){return e.phaser.shieldChanged})),v=_((function(e){return e.phaser.hasAtomic})),x=h-.15,w=b-.15;return Object(a.useEffect)((function(){var e=setInterval((function(){o(x/h*100),x<=0&&(o(0),clearInterval(e)),x-=.25}),250);return function(){clearInterval(e)}}),[p,h,y]),Object(a.useEffect)((function(){var e=setInterval((function(){u(w/b*100),w<=0&&(u(0),clearInterval(e)),w-=.25}),250);return function(){clearInterval(e)}}),[m,b,g]),Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(f.a,{sx:{display:"flex",justifyContent:"flex-end",height:70,mr:"10px"},children:0!==c&&Object(M.jsxs)(f.a,{sx:{textAlign:"right",mt:"60px"},children:[Object(M.jsx)(f.a,{sx:{width:210,transform:"rotate(180deg)"},children:Object(M.jsx)(ns,{variant:"determinate",value:c})}),Object(M.jsx)(E.a,{sx:{fontSize:"20px",color:"#24c2bc"},children:"SHIELD"})]})}),Object(M.jsx)(f.a,{sx:{display:"flex",justifyContent:"flex-end"},children:Object(M.jsx)(f.a,{sx:{width:"calc(100vh - 220px)",transform:"translate(42%, 20px)"},children:Object(M.jsx)(f.a,{sx:{width:"100%",transform:"rotate(-90deg) translateX(-50%)",flexDirection:"row-reverse",display:"flex",alignItems:"center"},children:0!==s&&Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(is,{variant:"determinate",value:s}),Object(M.jsx)(f.a,{sx:{transform:"rotate(90deg)"},children:Object(M.jsx)("img",{src:"assets/images/icon_".concat(p,".png"),alt:"airdrop icon"})})]})})})}),v&&Object(M.jsxs)(E.a,{sx:{color:"white",position:"absolute",bottom:"65px",right:"20px",fontSize:"20px"},children:['Press "',t,'" to use atomic bomb']})]})},as=y.c.div(sn||(sn=Object(u.a)(["\n  position: fixed;\n  width: 100vw;\n  height: 100vh;\n  top: 0;\n  background: #00000066;\n"]))),os=y.c.div(an||(an=Object(u.a)(["\n  background: url('assets/images/bg_leaderboard.png');\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 1100px;\n  height: 605px;\n  background-size: contain;\n  color: white;\n  font-size: 25px;\n"]))),rs=y.c.div(on||(on=Object(u.a)(["\n  width: 92%;\n  height: 83%;\n  margin: 5.5% auto;\n"]))),ls=y.c.div(rn||(rn=Object(u.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n\n  img.leagues {\n    width: 150px;\n  }\n  \n  img.close {\n    width: 50px;\n    cursor: pointer;\n  }\n"]))),cs=y.c.div(ln||(ln=Object(u.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n\n  img.league {\n    height: 33px;\n    margin-left: -12px;\n    cursor: pointer;\n  }\n\n  img.default {\n    margin-right: 20px;\n  }\n"]))),ds=y.c.div(cn||(cn=Object(u.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-top: 5px;\n\n  img.period {\n    width: 120px;\n    cursor: pointer;\n  }\n"]))),us=y.c.div(dn||(dn=Object(u.a)(["\n  height: 100%;\n  margin-top: 20px;\n"]))),ps=y.c.div(un||(un=Object(u.a)(["\n  background: url('assets/images/lead_thead.png');\n  background-size: contain;\n  border: 1px solid black;\n  border-radius: 10px;\n  display: flex;\n  align-items: center;\n  width: calc(100% - 30px);\n\n  img {\n    height: 28px;\n    margin-top: 7px;\n  }\n"]))),hs=y.c.div(pn||(pn=Object(u.a)(["\n  height: calc(100% - 150px);\n  overflow-y: scroll;\n\n  /* width */\n  ::-webkit-scrollbar {\n    width: 20px;\n    margin-left: 10px;\n    background: #40808a;\n    border-radius: 8px;\n  }\n\n  /* Track */\n  ::-webkit-scrollbar-track {\n    border-radius: 8px;\n  }\n  \n  /* Handle */\n  ::-webkit-scrollbar-thumb {\n    background: white; \n    border-radius: 8px;\n  }\n\n  /* Handle on hover */\n  ::-webkit-scrollbar-thumb:hover {\n    background: wheat; \n  }\n"]))),ys=y.c.div(hn||(hn=Object(u.a)(["\n  background: #40808a;\n  border: 1px solid black;\n  border-radius: 10px;\n  display: flex;\n  align-items: center;\n  height: 40px;\n  width: 99%;\n  margin-top: 3px;\n"]))),ms=y.c.div(yn||(yn=Object(u.a)(["\n  width: 15%;\n  padding-left: 20px;\n"]))),_s=y.c.div(mn||(mn=Object(u.a)(["\n  width: 55%;\n"]))),bs=y.c.div(_n||(_n=Object(u.a)(["\n  width: 30%;\n"]))),gs=function(e){var t=e.scores,i=e.setIsLeaderboard,n=e.league,s=e.setLeague,a=e.period,o=e.setPeriod;return Object(M.jsx)(as,{children:Object(M.jsx)(os,{children:Object(M.jsxs)(rs,{children:[Object(M.jsxs)(ls,{children:[Object(M.jsx)("img",{className:"leagues",src:"assets/images/lead_leagues.png",alt:"leagues"}),Object(M.jsxs)(cs,{children:[Object(M.jsx)("img",{className:"league default",onClick:function(){return s(0)},src:"assets/images/lead_default".concat(0===n?"_active":"",".png"),alt:"default"}),Object(M.jsx)("img",{className:"league",onClick:function(){return s(1)},src:"assets/images/lead_bronze".concat(1===n?"_active":"",".png"),alt:"bronze"}),Object(M.jsx)("img",{className:"league",onClick:function(){return s(2)},src:"assets/images/lead_silver".concat(2===n?"_active":"",".png"),alt:"silver"}),Object(M.jsx)("img",{className:"league",onClick:function(){return s(3)},src:"assets/images/lead_gold".concat(3===n?"_active":"",".png"),alt:"gold"}),Object(M.jsx)("img",{className:"league",onClick:function(){return s(4)},src:"assets/images/lead_diamond".concat(4===n?"_active":"",".png"),alt:"diamond"}),Object(M.jsx)("img",{className:"league",onClick:function(){return s(5)},src:"assets/images/lead_platinum".concat(5===n?"_active":"",".png"),alt:"platinum"})]}),Object(M.jsx)("img",{className:"close",src:"assets/images/btn_close.png",alt:"close",onClick:function(){return i(!1)}})]}),Object(M.jsxs)(ds,{children:[Object(M.jsx)("img",{className:"period",onClick:function(){return o("weekly")},src:"assets/images/lead_weekly".concat("weekly"===a?"_active":"",".png"),alt:"weekly"}),Object(M.jsx)("img",{className:"period",onClick:function(){return o("monthly")},src:"assets/images/lead_monthly".concat("monthly"===a?"_active":"",".png"),alt:"monthly"}),Object(M.jsx)("img",{className:"period",onClick:function(){return o("all")},src:"assets/images/lead_all".concat("all"===a?"_active":"",".png"),alt:"all"})]}),Object(M.jsxs)(us,{children:[Object(M.jsxs)(ps,{children:[Object(M.jsx)(ms,{children:Object(M.jsx)("img",{src:"assets/images/lead_rank.png",alt:"rank"})}),Object(M.jsx)(_s,{children:Object(M.jsx)("img",{src:"assets/images/lead_name.png",alt:"name"})}),Object(M.jsx)(bs,{children:Object(M.jsx)("img",{src:"assets/images/lead_score.png",alt:"name"})})]}),Object(M.jsxs)(hs,{children:[null===t||void 0===t?void 0:t.map((function(e,t){var i=e.shipName+"  (..."+e.account.slice(-4)+")";return i.indexOf("Crosmocraft")<0&&(i="Crosmocraft #"+e._id),Object(M.jsxs)(ys,{children:[Object(M.jsx)(ms,{children:t+1}),Object(M.jsx)(_s,{children:i}),Object(M.jsx)(bs,{children:e.score})]},t)})),(!t||0===t.length)&&Object(M.jsx)("div",{style:{textAlign:"center",marginTop:20},children:"There is no data"})]})]})]})})})},vs=i(320),fs=y.c.div(bn||(bn=Object(u.a)(["\n  position: fixed;\n  width: 100vw;\n  height: 100vh;\n  top: 0;\n  background: #00000066;\n"]))),xs=y.c.div(gn||(gn=Object(u.a)(["\n  background: url('assets/images/bg_setting.png');\n  background-repeat: no-repeat;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 80%;\n  height: 86%;\n  max-width: 950px;\n  max-height: 529px;\n  background-size: contain;\n  color: white;\n  font-size: 20px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  img.close {\n    position: absolute;\n    top: 55px;\n    right: 29px;\n    width: 50px;\n    cursor: pointer;\n  }\n"]))),ws=y.c.div(vn||(vn=Object(u.a)(["\n  width: 80%;\n  height: 78%;\n  margin-top: 20px;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n"]))),Es=y.c.div(fn||(fn=Object(u.a)(["\n  height: 44px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0 80px;\n  background: ",";\n  border: 2px solid #234955;\n  border-radius: 10px;\n  cursor: pointer;\n  color: ",";\n"])),(function(e){return e.selected?"#0b171a":"#12262c"}),(function(e){return e.selected?"var(--color-yellow)":"white"})),Os=y.c.div(xn||(xn=Object(u.a)(["\n\n"]))),Ss=y.c.div(wn||(wn=Object(u.a)(["\n\n"]))),js=function(e){var t=e.setIsSetting,i=e.keyboard,n=e.setKeboard,s=[{key:"forward",label:"Move Forward",keyboard:i.forward},{key:"left",label:"Move Left",keyboard:i.left},{key:"right",label:"Move Right",keyboard:i.right},{key:"brake",label:"Brake",keyboard:i.brake},{key:"fire",label:"Fire",keyboard:i.fire},{key:"special",label:"Special",keyboard:i.special},{key:"music",label:"Music ON/OFF",keyboard:i.music},{key:"sounds",label:"Sounds Effects ON/OFF",keyboard:i.sounds},{key:"exit",label:"Exit",keyboard:i.exit}],o=Object(a.useState)(void 0),r=Object(d.a)(o,2),l=r[0],c=r[1],u=Object(a.useState)(""),p=Object(d.a)(u,2),h=p[0],y=p[1];Object(a.useEffect)((function(){c(s)}),[]);var m=function(e){return" "===e?"SPACE":"Escape"===e?"ESC":e.startsWith("Arrow")?e.replace("Arrow","").toUpperCase():e.toUpperCase()};return Object(M.jsx)(fs,{children:Object(M.jsxs)(xs,{children:[Object(M.jsx)(ws,{children:null===l||void 0===l?void 0:l.map((function(e,t){return Object(M.jsxs)(Es,{selected:e.key===h,onClick:function(){return y(e.key)},children:[Object(M.jsx)(Os,{children:e.label}),Object(M.jsx)(Ss,{children:e.keyboard})]},t)}))}),Object(M.jsx)("img",{className:"close",src:"assets/images/btn_close.png",alt:"close",onClick:function(){return t(!1)}}),Object(M.jsx)(vs.a,{keyName:"a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,space,esc,up,down,left,right",onKeyDown:function(e,t,i){if(""!==h){a=t.key,n((function(e){return Object(G.a)(Object(G.a)({},e),{},Object(R.a)({},h,m(a)))}));var s=l.map((function(e){return e.key===h&&(e.keyboard=m(t.key)),e}));c(Object(zt.a)(s)),y("")}var a}})]})})},ks=y.c.div(En||(En=Object(u.a)(["\n  position: fixed;\n  width: 100vw;\n  height: 100vh;\n  top: 0;\n  background: #00000066;\n"]))),As=y.c.div(On||(On=Object(u.a)(["\n  background: url('assets/images/bg_difficulty.png');\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 500px;\n  height: 600px;\n  background-size: contain;\n  color: white;\n  font-size: 30px;\n"]))),Ts=y.c.div(Sn||(Sn=Object(u.a)(["\n  height: 100%;\n  text-align: center;\n\n  img.close {\n    position: absolute;\n    width: 50px;\n    cursor: pointer;\n    right: 35px;\n    top: 80px;\n  }\n"]))),Ls=y.c.div(jn||(jn=Object(u.a)(["\n  margin-top: 160px;\n  margin-bottom: 50px;\n"]))),Rs=y.c.div(kn||(kn=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  align-items: center;\n\n  img.difficulty {\n    width: 150px;\n    margin-top: 10px;\n    cursor: pointer;\n  }\n"]))),Ps=function(e){var t=e.setIsDifficulty,i=e.difficulty,n=e.setDifficulty;return Object(M.jsx)(ks,{children:Object(M.jsx)(As,{children:Object(M.jsxs)(Ts,{children:[Object(M.jsx)(Ls,{children:"CHOOSE YOUR DIFFICULTY"}),Object(M.jsxs)(Rs,{children:[Object(M.jsx)("img",{className:"difficulty",onClick:function(){return n("easy")},src:"assets/images/difficulty_easy".concat("easy"===i?"_active":"",".png"),alt:"easy"}),Object(M.jsx)("img",{className:"difficulty",onClick:function(){return n("medium")},src:"assets/images/difficulty_medium".concat("medium"===i?"_active":"",".png"),alt:"medium"}),Object(M.jsx)("img",{className:"difficulty",onClick:function(){return n("hard")},src:"assets/images/difficulty_hard".concat("hard"===i?"_active":"",".png"),alt:"hard"}),Object(M.jsx)("img",{className:"difficulty",onClick:function(){return n("extreme")},src:"assets/images/difficulty_extreme".concat("extreme"===i?"_active":"",".png"),alt:"extreme"})]}),Object(M.jsx)("img",{className:"close",src:"assets/images/btn_close.png",alt:"close",onClick:function(){return t(!1)}})]})})})},Is=y.c.div(An||(An=Object(u.a)(["\n  position: fixed;\n  width: 100vw;\n  height: 100vh;\n  top: 0;\n  background: #00000066;\n"]))),Ms=y.c.div(Tn||(Tn=Object(u.a)(["\n  background: url('assets/images/bg_confirm.png');\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 530px;\n  height: 310px;\n  background-size: contain;\n  display: flex;\n  align-items: flex-end;\n  justify-content: center;\n"]))),Cs=y.c.div(Ln||(Ln=Object(u.a)(["\n  width: 44%;\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 55px;\n  \n  img {\n    width: 110px;\n    cursor: pointer;\n  }\n"]))),Bs=function(){return Object(M.jsx)(Is,{children:Object(M.jsx)(Ms,{children:Object(M.jsxs)(Cs,{children:[Object(M.jsx)("img",{src:"assets/images/btn_yes.png",alt:"yes",onClick:function(){return ki.emit(ji.EXIST_GAME),void Nt.dispatch(ft(!1))}}),Object(M.jsx)("img",{src:"assets/images/btn_no.png",alt:"no",onClick:function(){return Nt.dispatch(ft(!1))}})]})})})},Ds=[{inputs:[{internalType:"string",name:"_initBaseURI",type:"string"},{internalType:"address",name:"_shipParts",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"SHIP1",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"SHIP2",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"SHIP3",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"adminAddress",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"airDropNFT",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"baseExtension",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"canMint",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"curIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getInfo",outputs:[{components:[{internalType:"uint256",name:"regularCost",type:"uint256"},{internalType:"uint256",name:"memberCost",type:"uint256"},{internalType:"uint256",name:"whitelistCost",type:"uint256"},{internalType:"uint256",name:"maxSupply",type:"uint256"},{internalType:"uint256",name:"totalSupply",type:"uint256"},{internalType:"uint256",name:"maxMintPerAddress",type:"uint256"},{internalType:"uint256",name:"maxMintPerTx",type:"uint256"}],internalType:"struct IDrop.Info",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[],name:"greatId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"greatMaxSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"legendId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"legendMaxSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxMintAmount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"bytes32",name:"shipType",type:"bytes32"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"mintCost",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bool",name:"_state",type:"bool"}],name:"pause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"regularId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"regularMaxSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address[]",name:"_holders",type:"address[]"},{internalType:"uint256[]",name:"_counts",type:"uint256[]"}],name:"setAirDropCounts",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_newBaseExtension",type:"string"}],name:"setBaseExtension",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_newBaseURI",type:"string"}],name:"setBaseURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"shipParts",outputs:[{internalType:"contract ShipItems",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"}],name:"walletOfOwner",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"withdrawAll",outputs:[],stateMutability:"nonpayable",type:"function"}],Ns=[{inputs:[{internalType:"address",name:"_crosmoToken",type:"address"},{internalType:"address",name:"_crosmoCraft",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[],name:"REPAIRE_COOLDOWN",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"UPGRADE_COST",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"claimReward",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"craftStatus",outputs:[{internalType:"uint256",name:"lastUpdated",type:"uint256"},{internalType:"uint8",name:"tier",type:"uint8"},{internalType:"uint8",name:"damagedLevel",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"crosmoCraft",outputs:[{internalType:"contract IERC721",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"crosmoPilot",outputs:[{internalType:"contract IERC721",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"crosmoStation",outputs:[{internalType:"contract IERC721",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"crosmoToken",outputs:[{internalType:"contract IERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"enterGame",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"craftID",type:"uint256"}],name:"getCraftStatus",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint8",name:"",type:"uint8"},{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_player",type:"address"}],name:"getRewardBalance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"player",type:"address"}],name:"hasCrosmoStation",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"score",type:"uint256"},{internalType:"address",name:"player",type:"address"},{internalType:"uint256",name:"craftID",type:"uint256"}],name:"playSession",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"rewardBalance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"scale",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_pilot",type:"address"}],name:"setCrosmoPilot",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_station",type:"address"}],name:"setCrosmoStation",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"craftID",type:"uint256"}],name:"updateCraftStatus",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"craftID",type:"uint256"}],name:"upgradeCraft",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdrawToken",outputs:[],stateMutability:"nonpayable",type:"function"}],Us=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Paused",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Unpaused",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"pause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"unpause",outputs:[],stateMutability:"nonpayable",type:"function"}],Fs=y.c.div(Rn||(Rn=Object(u.a)(["\n  position: absolute;\n  height: ",";\n  width: 100%;\n"])),(function(e){return e.isPlayEndless||e.isMultiplayer?"100vh":"calc(100vh - 220px)"})),Vs=y.c.div(Pn||(Pn=Object(u.a)(["\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  background-position: center;\n  background-size: cover;\n}\n"]))),Ys=y.c.div(In||(In=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  height: 100%;\n"]))),zs=y.c.div(Mn||(Mn=Object(u.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  img {\n    max-width: 770px;\n    width: 70%;\n    margin-top: -110px;\n    margin-left: 9%;\n  }\n"]))),Gs=y.c.div(Cn||(Cn=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  \n  img {\n    width: auto;\n    margin: 0 auto;\n    cursor: pointer;\n  }\n  \n  img.play {\n    height: 55px;\n    margin-top: 3px;\n  }\n\n  img.playmulti {\n    height: 48px;\n    margin-top: 12px;\n    &:hover {\n      box-shadow: rgba(0, 0, 0, 0.17) 0px -23px 25px 0px inset, rgba(0, 0, 0, 0.15) 0px -36px 30px 0px inset, rgba(0, 0, 0, 0.1) 0px -79px 40px 0px inset, rgba(0, 0, 0, 0.06) 0px 2px 1px, rgba(0, 0, 0, 0.09) 0px 4px 2px, rgba(0, 0, 0, 0.09) 0px 8px 4px, rgba(0, 0, 0, 0.09) 0px 16px 8px, rgba(0, 0, 0, 0.09) 0px 32px 16px;\n    }\n  }\n  \n  img.setting {\n    height: 45px;\n    margin-top: 5px;\n  }\n"]))),Hs=y.c.div(Bn||(Bn=Object(u.a)(["\n  position: absolute;\n  right: 15px;\n  bottom: -50px;\n\n  img {\n    width: 90px;\n    cursor: pointer;\n  }\n"]))),Ks=y.c.div(Dn||(Dn=Object(u.a)(["\n  position: fixed;\n  width: 100vw;\n  height: 100vh;\n  top: 0;\n  background: #00000066;\n"]))),Ws=y.c.div(Nn||(Nn=Object(u.a)(["\n  background: url('assets/images/bg_multiplayer.png');\n  background-repeat: no-repeat;\n  background-position: center;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 600px;\n  height: 576px;\n  background-size: contain;\n  color: white;\n"]))),Xs=y.c.div(Un||(Un=Object(u.a)(["\n  text-align: center;\n  height: calc(100% - 76px);\n  margin-top: 76px;\n\n  img.close {\n    position: absolute;\n    width: 36px;\n    cursor: pointer;\n    right: 8px;\n    top: 22px;\n  }\n"]))),Js=(y.c.div(Fn||(Fn=Object(u.a)(["\n  margin-top: 160px;\n  margin-bottom: 50px;\n"]))),y.c.div(Vn||(Vn=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  align-items: center;\n\n  img.RoomButton {\n    width: 150px;\n    margin-top: 10px;\n    cursor: pointer;\n  }  \n"]))),y.c.div(Yn||(Yn=Object(u.a)(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  display: flex;\n  flex-direction: column;\n  gap: 60px;\n  align-items: center;\n"]))),y.c.div(zn||(zn=Object(u.a)(["\n    width: calc(100% - 46px);\n    margin: 0 auto;\n    height: 100%;\n"])))),qs=y.c.div(Gn||(Gn=Object(u.a)(["\n  background: url('assets/images/lead_thead.png');\n  background-size: contain;\n  border: 1px solid black;\n  border-radius: 10px;\n  display: flex;\n  align-items: center;\n  width: 100%;\n  font-size: 24px;\n  padding: 8px 0px;\n"]))),Zs=y.c.div(Hn||(Hn=Object(u.a)(["\n  height: calc(100% - 76px);\n  overflow-y: auto;\n\n  /* width */\n  ::-webkit-scrollbar {\n    width: 20px;\n    margin-left: 10px;\n    background: #40808a;\n    border-radius: 8px;\n  }\n\n  /* Track */\n  ::-webkit-scrollbar-track {\n    border-radius: 8px;\n  }\n  \n  /* Handle */\n  ::-webkit-scrollbar-thumb {\n    background: white; \n    border-radius: 8px;\n  }\n\n  /* Handle on hover */\n  ::-webkit-scrollbar-thumb:hover {\n    background: wheat; \n  }\n"]))),Qs=y.c.div(Kn||(Kn=Object(u.a)(["\n  opacity: ",";\n  background: #40808a;\n  border: 1px solid black;\n  border-radius: 10px;\n  display: flex;\n  align-items: center;\n  height: 40px;\n  width: 100%;\n  margin-top: 3px;\n  &:hover {\n    cursor: pointer;\n    box-shadow: rgba(0, 0, 0, 0.17) 0px -23px 25px 0px inset, rgba(0, 0, 0, 0.15) 0px -36px 30px 0px inset, rgba(0, 0, 0, 0.1) 0px -79px 40px 0px inset, rgba(0, 0, 0, 0.06) 0px 2px 1px, rgba(0, 0, 0, 0.09) 0px 4px 2px, rgba(0, 0, 0, 0.09) 0px 8px 4px, rgba(0, 0, 0, 0.09) 0px 16px 8px, rgba(0, 0, 0, 0.09) 0px 32px 16px;\n  }\n"])),(function(e){return null!==e&&void 0!==e&&e.joinable?1:.5})),$s=y.c.div(Wn||(Wn=Object(u.a)(["\n  width: 30%;\n  padding-left: 8px;\n"]))),ea=y.c.div(Xn||(Xn=Object(u.a)(["\n  width: 15%;\n"]))),ta=y.c.div(Jn||(Jn=Object(u.a)(["\n  width: 15%;\n"]))),ia=y.c.div(qn||(qn=Object(u.a)(["\n  width: 20%;\n"]))),na=y.c.div(Zn||(Zn=Object(u.a)(["\n  width: 20%;\n"]))),sa=function(e){var t=e.setShowMultiJoin,i=e.setIsViewMulti,n=e.playMultiplayer,s=Object(a.useState)(""),o=Object(d.a)(s,2),r=(o[0],o[1],Object(a.useState)("")),l=Object(d.a)(r,2),c=(l[0],l[1],Object(a.useState)(!1)),u=Object(d.a)(c,2),p=(u[0],u[1],Object(a.useState)(!1)),h=Object(d.a)(p,2),y=(h[0],h[1]),m=Object(a.useState)(!1),b=Object(d.a)(m,2),g=(b[0],b[1],_((function(e){return e.room.lobbyJoined}))),v=_((function(e){return e.room.availableRooms}));Object(a.useEffect)((function(){console.log("availableRooms",v)}),[v]);var f=function(e,t){g&&nn.scene.keys.boot._network.joinCustomById(e,t).then((function(){i(!1),n()})).catch((function(e){console.error(e),t&&y(!0)}))};return Object(M.jsx)(Ks,{children:Object(M.jsx)(Ws,{children:Object(M.jsxs)(Xs,{children:[Object(M.jsx)("img",{className:"close",src:"assets/images/btn_close.png",alt:"close",onClick:function(){return t(!1)}}),Object(M.jsxs)(Js,{children:[Object(M.jsxs)(qs,{children:[Object(M.jsx)($s,{children:"ID"}),Object(M.jsx)(ea,{children:"Mode"}),Object(M.jsx)(ta,{children:"Map"}),Object(M.jsx)(ia,{children:"Players"}),Object(M.jsx)(na,{children:"Cost"})]}),Object(M.jsxs)(Zs,{children:[null===v||void 0===v?void 0:v.map((function(e,t){var i,n,s;return Object(M.jsxs)(Qs,{onClick:function(){(null===e||void 0===e?void 0:e.maxClients)>(null===e||void 0===e?void 0:e.clients)&&f(null===e||void 0===e?void 0:e.roomId,null)},joinable:(null===e||void 0===e?void 0:e.maxClients)>(null===e||void 0===e?void 0:e.clients),children:[Object(M.jsx)($s,{children:null===e||void 0===e?void 0:e.roomId}),Object(M.jsx)(ea,{children:null===e||void 0===e||null===(i=e.metadata)||void 0===i?void 0:i.roomMode}),Object(M.jsx)(ta,{children:null===e||void 0===e||null===(n=e.metadata)||void 0===n?void 0:n.mapMode}),Object(M.jsx)(ia,{children:(null===e||void 0===e?void 0:e.clients)||0}),Object(M.jsx)(na,{children:(null===e||void 0===e||null===(s=e.metadata)||void 0===s?void 0:s.cost)||0})]},t)})),(!v||0===v.length)&&Object(M.jsx)("div",{style:{textAlign:"center",marginTop:20},children:"There is no any Room!"})]})]})]})})})},aa=i(660),oa=i(677),ra=i(319),la=i(316),ca=i.n(la),da=i(315),ua=i.n(da);!function(e){e.Blank="Blank",e.Asteroid="Asteroid",e.Bots="Bots"}(Qn||(Qn={})),function(e){e.OvO="1X1",e.DvD="2X2",e.TvT="3X3",e.Free="FREE"}($n||($n={})),Zt.a.use([Qt.a]);var pa,ha=function(e){var t=e.setIsViewMulti,i=e.playMultiplayer,n=Object(a.useState)(""),s=Object(d.a)(n,2),o=s[0],r=(s[1],Object(a.useState)(!1)),l=Object(d.a)(r,2),c=l[0],u=l[1],p=Object(a.useState)(""),h=Object(d.a)(p,2),y=h[0],m=(h[1],Object(a.useState)($n.Free)),b=Object(d.a)(m,2),g=b[0],v=b[1],f=Object(a.useState)(Qn.Blank),x=Object(d.a)(f,2),w=x[0],E=x[1],O=Object(a.useState)(0),S=Object(d.a)(O,2),j=S[0],k=(S[1],Object(a.useState)("")),A=Object(d.a)(k,2),T=A[0],L=A[1],R=Object(a.useState)(!1),P=Object(d.a)(R,2),I=P[0],C=P[1],B=_((function(e){return e.room.lobbyJoined})),D=(_((function(e){return e.room.availableRooms})),Object(a.useRef)(null));return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(ni,{children:Object(M.jsx)(si,{children:Object(M.jsxs)(ai,{children:[Object(M.jsxs)(oi,{children:[Object(M.jsx)(ri,{children:Object(M.jsx)("p",{children:"Select The Game Mode"})}),Object(M.jsxs)(ci,{children:[Object(M.jsx)(ui,{onClick:function(){return D.current.swiper.slidePrev()},children:Object(M.jsx)("img",{src:"assets/images/avatar_prev.png",alt:"prev"})}),Object(M.jsx)(di,{children:Object(M.jsx)(Jt.a,{ref:D,navigation:!0,spaceBetween:0,slidesPerView:1,onSlideChange:function(e){switch(e.activeIndex){case 0:default:E(Qn.Blank);break;case 1:E(Qn.Asteroid);break;case 2:E(Qn.Bots)}},children:Object.keys(Qn).map((function(e,t){return Object(M.jsxs)(qt.a,{children:[Object(M.jsx)("img",{className:"create-game",src:"assets/images/mapmode/".concat(e,".jpg"),alt:e}),Object(M.jsxs)("p",{className:"title",children:[e," MAP"]})]},t)}))})}),Object(M.jsx)(ui,{onClick:function(){return D.current.swiper.slideNext()},children:Object(M.jsx)("img",{src:"assets/images/avatar_next.png",alt:"next"})})]})]}),Object(M.jsxs)(pi,{children:[Object(M.jsx)(hi,{children:"Select The Play Mode"}),Object(M.jsx)(_i,{children:Object.values($n).map((function(e,t){return Object(M.jsx)("img",{className:"room ".concat(g==e?"selected":""),src:"assets/images/roommode/".concat(e,".png"),alt:e,onClick:function(){return v(e)}},t)}))}),Object(M.jsxs)(hi,{children:["Cost For Creation: ",j," Crons"]}),Object(M.jsx)(aa.a,{type:I?"text":"password",label:"Password (optional)",onChange:function(e){L(e.target.value)},sx:{"& *":{color:"#FFFFFF",borderColor:"#FFFFFF"}},InputProps:{endAdornment:Object(M.jsx)(oa.a,{position:"end",children:Object(M.jsx)(ra.a,{"aria-label":"toggle password visibility",onClick:function(){return C(!I)},edge:"end",children:I?Object(M.jsx)(ua.a,{}):Object(M.jsx)(ca.a,{})})})}}),Object(M.jsx)(mi,{onClick:function(e){(e.preventDefault(),B)&&nn.scene.keys.boot._network.createCustom({name:"",password:T,autoDispose:!0,roomMode:g,mapMode:w,cost:j}).then((function(){t(!1),i()})).catch((function(e){return console.error(e)}))},children:"Create"})]})]})})}),Object(M.jsx)(ii,{noticeMsg:o,showNotice:c,setShowNotice:u,severity:y})]})};!function(e){e.Create="create",e.Join="join",e.Quick="quick"}(pa||(pa={}));var ya,ma,_a,ba,ga=function(e){var t,i=e.account,n=e.web3Provider,s=e.chainId,o=e.setBg,r=e.setIsGamePlaying,l=Object(h.g)(),c=(_((function(e){return e.user.loggedIn})),_((function(e){return e.room.roomJoined}))),u=_((function(e){return e.user.gameOver})),p=_((function(e){return e.user.canPlayAgain})),y=_((function(e){return e.user.joinLobbyRoom})),m=_((function(e){return e.user.tokenId})),g=Object(a.useState)(null),x=Object(d.a)(g,2),w=x[0],E=x[1],k=Object(a.useState)(null),A=Object(d.a)(k,2),T=A[0],L=A[1],R=Object(a.useState)(null),P=Object(d.a)(R,2),I=P[0],C=P[1],B=Object(a.useState)(null),D=Object(d.a)(B,2),N=D[0],U=(D[1],Object(a.useState)(!1)),F=Object(d.a)(U,2),Y=F[0],z=F[1],G=Object(a.useState)(!1),H=Object(d.a)(G,2),K=H[0],W=H[1],X=Object(a.useState)(!1),J=Object(d.a)(X,2),q=J[0],Z=J[1],Q=Object(a.useState)(!1),$=Object(d.a)(Q,2),ee=$[0],te=$[1],ie=Object(a.useState)(!1),ne=Object(d.a)(ie,2),se=ne[0],ae=ne[1],oe=Object(a.useState)(!1),re=Object(d.a)(oe,2),le=re[0],ce=re[1],de=_((function(e){return e.phaser.isExist})),ue=Object(a.useState)(!1),pe=Object(d.a)(ue,2),he=pe[0],ye=pe[1],me=Object(a.useState)(void 0),_e=Object(d.a)(me,2),be=_e[0],ge=_e[1],ve=Object(a.useState)(!1),fe=Object(d.a)(ve,2),xe=fe[0],we=fe[1],Ee=Object(a.useState)(void 0),Oe=Object(d.a)(Ee,2),Se=Oe[0],je=Oe[1],ke=Object(a.useState)({forward:"W",left:"A",right:"D",brake:"S",fire:"SPACE",special:"Q",music:"Y",sounds:"U",exit:"ESC"}),Ae=Object(d.a)(ke,2),Te=Ae[0],Le=Ae[1],Re=Object(a.useState)("easy"),Pe=Object(d.a)(Re,2),Ie=Pe[0],Me=Pe[1],Ce=Object(a.useState)("monthly"),Be=Object(d.a)(Ce,2),De=Be[0],Ne=Be[1],Ue=Object(a.useState)(0),Fe=Object(d.a)(Ue,2),Ge=Fe[0],He=Fe[1],Ke=Object(a.useState)(""),We=Object(d.a)(Ke,2),Xe=We[0],Je=We[1],qe=Object(a.useState)(!1),Ze=Object(d.a)(qe,2),Qe=Ze[0],$e=Ze[1],et=Object(a.useState)(""),tt=Object(d.a)(et,2),it=tt[0],nt=tt[1];Object(a.useEffect)((function(){if(void 0!==i&&s===j.mainnet.chainId){var e=new O.a.Contract("0xC6373d6F369A9FfE7D93B21F2A5b0E16291d996D",Ds,n),t=new O.a.Contract(S,Ns,n),a=new O.a.Contract("0xe6C2F6Ab401F08EB7B073Eac710D7DB2FBc2191C",Us,n);E(e.connect(n.getSigner())),L(t.connect(n.getSigner())),C(a.connect(n.getSigner()))}}),[i,s]),Object(a.useEffect)((function(){var e=function(){var e=Object(b.a)(v.a.mark((function e(){var t,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return z(!0),e.prev=1,e.next=4,T.enterGame({from:i,value:"1000000000000000000"});case 4:return t=e.sent,e.next=7,t.wait();case 7:n=e.sent,n.events,z(!1),ki.emit(ji.PLAY_AGAIN),e.next=21;break;case 13:return e.prev=13,e.t0=e.catch(1),nt("error"),Je("You need 1 CRO to play game"),$e(!0),Nt.dispatch(Ye(!1)),z(!1),e.abrupt("return");case 21:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(){return e.apply(this,arguments)}}();p&&e()}),[p]),Object(a.useEffect)((function(){var e=function(){var e=Object(b.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:st();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();y&&e()}),[y]),Object(a.useEffect)((function(){var e=function(){var e=Object(b.a)(v.a.mark((function e(){var t,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Nt.dispatch(Ve(!1)),e.next=3,T.getCraftStatus(m);case 3:t=e.sent,i=t[2],ki.emit(ji.TOKEN_REWARDED),i<5?ki.emit(ji.CAN_PLAY):ki.emit(ji.SHIP_DAMAGED);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();u&&e()}),[u]),Object(a.useEffect)((function(){var e=function(){var e=Object(b.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yt.score.getScores(De,Ge);case 2:t=e.sent,je(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[De,Ge]),Object(a.useEffect)((function(){var e=localStorage.getItem("forward"),t=localStorage.getItem("left"),i=localStorage.getItem("right"),n=localStorage.getItem("brake"),s=localStorage.getItem("fire"),a=localStorage.getItem("special"),o=localStorage.getItem("music"),r=localStorage.getItem("sounds"),l=localStorage.getItem("exit");null!==e&&"null"!==e&&void 0!==e&&"undefined"!==e&&Le({forward:e,left:t,right:i,brake:n,fire:s,special:a,music:o,sounds:r,exit:l});var c=localStorage.getItem("difficulty");null!==c&&"null"!==c&&void 0!==c&&"undefined"!==c&&Me(c)}),[]),Object(a.useEffect)((function(){localStorage.setItem("forward",null===Te||void 0===Te?void 0:Te.forward),localStorage.setItem("left",null===Te||void 0===Te?void 0:Te.left),localStorage.setItem("right",null===Te||void 0===Te?void 0:Te.right),localStorage.setItem("brake",null===Te||void 0===Te?void 0:Te.brake),localStorage.setItem("fire",null===Te||void 0===Te?void 0:Te.fire),localStorage.setItem("special",null===Te||void 0===Te?void 0:Te.special),localStorage.setItem("music",null===Te||void 0===Te?void 0:Te.music),localStorage.setItem("sounds",null===Te||void 0===Te?void 0:Te.sounds),localStorage.setItem("exit",null===Te||void 0===Te?void 0:Te.exit)}),[Te]),Object(a.useEffect)((function(){localStorage.setItem("difficulty",Ie||void 0)}),[Ie]),ki.on(ji.GOTO_MAINMENU,(function(){r(!1),o("bg_shooter"),l("/")}));var st=function(){i?(Z(!0),o("bg_shooter"),Nt.dispatch(ze(!0))):(nt("error"),Je("Please connect your wallet first."),$e(!0))};return t=K||he||q?!he||K||be&&be!=pa.Join||q?!he||K||be!=pa.Create||q?c?Object(M.jsx)(M.Fragment,{children:Object(M.jsx)(ss,{specialKey:Te.special})}):Object(M.jsx)(Vs,{children:Object(M.jsx)(es,{craftInstance:w,shooterInstance:T,tokenInstance:I,pilotInstance:N,account:i,setBg:o,setIsGamePlaying:r,keyboard:Te,isPlayEndless:K,isMultiplayer:q,viewMultiMode:be,difficulty:Ie,setCalculating:z})}):Object(M.jsx)(Vs,{children:Object(M.jsx)(ha,{setIsViewMulti:ye,playMultiplayer:st})}):Object(M.jsxs)(Ys,{children:[Object(M.jsx)(zs,{children:Object(M.jsx)("img",{src:"assets/images/title.png",alt:"title"})}),Object(M.jsxs)(Gs,{children:[Object(M.jsx)("img",{className:"playmulti",src:"assets/images/quick.png",alt:"play endless",onClick:function(){return ge(pa.Quick),void Z(!0)}}),Object(M.jsx)("img",{className:"playmulti",src:"assets/images/join.png",alt:"play endless",onClick:function(){return ge(pa.Join),void we(!0)}}),Object(M.jsx)("img",{className:"playmulti",src:"assets/images/create.png",alt:"play endless",onClick:function(){ge(pa.Create)}})]}),Object(M.jsx)(Hs,{children:Object(M.jsx)("img",{src:"assets/images/btn_setting.png",alt:"setting",onClick:function(){return te(!0)}})}),Object(M.jsx)(ii,{noticeMsg:Xe,showNotice:Qe,setShowNotice:$e,severity:it})]}):Object(M.jsxs)(Ys,{children:[Object(M.jsx)(zs,{children:Object(M.jsx)("img",{src:"assets/images/title.png",alt:"title"})}),Object(M.jsxs)(Gs,{children:[Object(M.jsx)("img",{className:"play",src:"assets/images/btn_playendless.png",alt:"play endless",onClick:function(){i?(W(!0),o("bg_shooter")):(nt("error"),Je("Please connect your wallet first."),$e(!0))}}),Object(M.jsx)("img",{className:"play",src:"assets/images/btn_crosmostation.png",alt:"enter crosmostation"}),Object(M.jsx)("img",{className:"setting",src:"assets/images/btn_difficulty.png",alt:"difficulty",onClick:function(){return ce(!0)}}),Object(M.jsx)("img",{className:"setting",src:"assets/images/btn_highscores.png",alt:"high scores",onClick:function(){return ae(!0)}})]}),Object(M.jsx)(Hs,{children:Object(M.jsx)("img",{src:"assets/images/btn_setting.png",alt:"setting",onClick:function(){return te(!0)}})}),Object(M.jsx)(ii,{noticeMsg:Xe,showNotice:Qe,setShowNotice:$e,severity:it})]}),Object(M.jsxs)(Fs,{isPlayEndless:K,isMultiplayer:q,children:[t,de&&Object(M.jsx)(Bs,{}),ee&&Object(M.jsx)(js,{setIsSetting:te,keyboard:Te,setKeboard:Le}),se&&Object(M.jsx)(gs,{scores:Se,setIsLeaderboard:ae,league:Ge,setLeague:He,period:De,setPeriod:Ne}),he&&xe&&Object(M.jsx)(sa,{setShowMultiJoin:we,setIsViewMulti:ye,playMultiplayer:st}),le&&Object(M.jsx)(Ps,{setIsDifficulty:ce,difficulty:Ie,setDifficulty:Me}),Y&&Object(M.jsx)(f.a,{sx:{position:"fixed",width:"100%",height:"100%",background:"rgba(0, 0, 0, .5)",top:0,left:0,pointerEvents:"stroke",zIndex:999},children:Object(M.jsx)(f.a,{sx:{position:"absolute",display:"flex",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"white"},children:Object(M.jsx)(V.a,{sx:{color:"inherit"}})})})]})},va=y.c.div(ya||(ya=Object(u.a)(["\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  background: url('assets/images/",".png');\n  background-position: center;\n  background-size: cover;\n}\n"])),(function(e){return e.bg})),fa=y.c.div(ma||(ma=Object(u.a)(["\n  position: fixed;\n  top: 16px;\n  left: 50%;\n  transform: translate(-50%, 0%);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  color: #4a97d2;\n"]))),xa=y.c.div(_a||(_a=Object(u.a)(["\n  font-size: 20px;\n  color: white;\n  text-align: center;\n  font-weight: normal;\n"]))),wa=Object(y.c)(m.a)(ba||(ba=Object(u.a)(["\n  width: 360px;\n"]))),Ea=function(){var e=_((function(e){return e.room.lobbyJoined})),t=Object(a.useState)({}),i=Object(d.a)(t,2),n=i[0],s=(n.walletProviderName,n.address),o=n.browserWeb3Provider,r=(n.serverWeb3Provider,n.connected,n.chainId),l=i[1],c=Object(a.useState)("bg_main"),u=Object(d.a)(c,2),y=u[0],m=u[1],b=Object(a.useState)(!1),g=Object(d.a)(b,2),v=g[0],f=g[1];return Object(M.jsxs)(va,{bg:y,children:[Object(M.jsxs)(p.a,{children:[!v&&Object(M.jsx)(F,{account:s,setWallet:l,setBg:m}),Object(M.jsxs)(h.d,{children:[Object(M.jsx)(h.b,{path:"/",element:Object(M.jsx)(h.a,{to:"/shooter",replace:!0})}),Object(M.jsx)(h.b,{path:"shooter",element:Object(M.jsx)(ga,{account:s,web3Provider:o,chainId:r,setBg:m,setIsGamePlaying:f})})]})]}),!e&&Object(M.jsxs)(fa,{children:[Object(M.jsx)(xa,{children:" Connecting to server..."}),Object(M.jsx)(wa,{color:"inherit",sx:{mt:1}})]})]})},Oa=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,680)).then((function(t){var i=t.getCLS,n=t.getFID,s=t.getFCP,a=t.getLCP,o=t.getTTFB;i(e),n(e),s(e),a(e),o(e)}))};l.a.render(Object(M.jsx)(o.a.StrictMode,{children:Object(M.jsx)(c.a,{store:Nt,children:Object(M.jsx)(Ea,{})})}),document.getElementById("root")),Oa()}},[[586,1,2]]]);