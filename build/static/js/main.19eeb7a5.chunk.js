(this["webpackJsonpcrosmo-crafts"]=this["webpackJsonpcrosmo-crafts"]||[]).push([[0],{312:function(e,t){},320:function(e,t){},322:function(e,t){},364:function(e,t){},366:function(e,t){},390:function(e,t){},392:function(e,t){},404:function(e,t){},405:function(e,t){},422:function(e,t){},426:function(e,t){},428:function(e,t){},553:function(e,t,i){"use strict";i.r(t);i(304);var n,s,a=i(0),r=i.n(a),o=i(68),l=i.n(o),d=i(114),c=i(16),u=i(11),p=i(96),h=i(28),m=i(15),y=i(615),_=d.c,g=i(10),b=i(1),f=i.n(b),v=i(616),x=i(608),E=i(614),S=i(618),w=i(66),O="0xA554482831bC8D5ae809B637f6932D4E608BE5E7",A={mode:"regular",testnet:{rpcUrl:"https://cronos-testnet-3.crypto.org:8545/",chainId:338,chainIdHex:"0x152",chainName:"Cronos Testnet",chainType:"mainnet",nativeCurrency:{name:"CRO",symbol:"CRO",decimals:18},blockExplorerUrl:"https://cronos.crypto.org/explorer/testnet3/"},mainnet:{rpcUrl:"https://mainnet.cronoslabs.com/v1/55e37d8975113ae7a44603ef8ce460aa",chainId:25,chainIdHex:"0x19",chainName:"Cronos Mainnet Beta",chainType:"mainnet",nativeCurrency:{name:"CRO",symbol:"CRO",decimals:18},blockExplorerUrl:"https://cronos.crypto.org/explorer/"}},j=function(e){var t=w.a.BigNumber.from(e);return parseInt(t.toString())},k=function(e){return new Promise((function(t){return setTimeout(t,e)}))},T=function(){var e=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:A.mainnet.chainIdHex}]});case 3:e.next=10;break;case 5:return e.prev=5,e.t0=e.catch(0),console.log("error in switchNetwork",e.t0),e.next=10,window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:A.mainnet.chainIdHex,chainName:A.mainnet.chainName,rpcUrls:[A.mainnet.rpcUrl],nativeCurrency:A.mainnet.nativeCurrency,blockExplorerUrls:[A.mainnet.blockExplorerUrl]}]});case 10:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(g.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,window.ethereum.request({method:"eth_chainId"});case 3:if(e.sent===A.mainnet.chainIdHex){e.next=9;break}return e.next=7,T();case 7:return e.next=9,k(2e3);case 9:return e.next=11,window.ethereum.request({method:"eth_requestAccounts"});case 11:return t=e.sent,e.t0=t[0],e.t1=new w.a.providers.Web3Provider(window.ethereum),e.t2=new w.a.providers.JsonRpcProvider(A.mainnet.rpcUrl),e.t3=j,e.next=18,window.ethereum.request({method:"eth_chainId"});case 18:return e.t4=e.sent,e.t5=(0,e.t3)(e.t4),e.abrupt("return",{walletProviderName:"metamask",address:e.t0,browserWeb3Provider:e.t1,serverWeb3Provider:e.t2,connected:!0,chainId:e.t5});case 23:return e.prev=23,e.t6=e.catch(0),console.log("error in connect",e.t6),e.abrupt("return",null);case 27:case"end":return e.stop()}}),e,null,[[0,23]])})));return function(){return e.apply(this,arguments)}}(),R=i(22),P=i(290),I=function(){var e=Object(g.a)(f.a.mark((function e(){var t,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,localStorage.clear(),t=new P.a({rpc:Object(R.a)({},A.mainnet.chainId,A.mainnet.rpcUrl),chainId:A.mainnet.chainId}),e.next=5,t.enable();case 5:if(i=new w.a.providers.Web3Provider(t),t.chainId===A.mainnet.chainId){e.next=9;break}return window.alert("Switch your Wallet to blockchain network "+A.mainnet.chainName),e.abrupt("return",null);case 9:return t.on("accountsChanged",(function(e){if(e.length<=0){var t={walletConnected:"false",expiry:(new Date).getTime()};localStorage.setItem("wallet-connected",JSON.stringify(t))}window.location.reload()})),e.next=12,i.listAccounts();case 12:return e.t0=e.sent[0],e.t1=i,e.t2=new w.a.providers.JsonRpcProvider(A.mainnet.rpcUrl),e.t3=t,e.t4=t.chainId,e.abrupt("return",{walletProviderName:"walletconnect",address:e.t0,browserWeb3Provider:e.t1,serverWeb3Provider:e.t2,wcProvider:e.t3,connected:!0,chainId:e.t4});case 20:return e.prev=20,e.t5=e.catch(0),e.abrupt("return",null);case 23:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(){return e.apply(this,arguments)}}(),M=i(3),B={fontSize:"25px",color:"var(--color-yellow)"},C={marginTop:2,fontSize:"19px",color:"#280D5f",background:"wheat","&:hover":{background:"rgba(253,218,158,0.8)"},padding:"10px 30px",display:"flex",justifyContent:"space-between"},D=function(e){var t=null,i=function(){var i=Object(g.a)(f.a.mark((function i(n){var s,a;return f.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:e.setOpen(!1),i.t0=n,i.next="metamask"===i.t0?4:"walletconnect"===i.t0?9:14;break;case 4:return i.next=6,L();case 6:return t=i.sent,localStorage.setItem("wallet-type","metamask"),i.abrupt("break",17);case 9:return i.next=11,I();case 11:return t=i.sent,localStorage.setItem("wallet-type","walletconnect"),i.abrupt("break",17);case 14:return i.next=16,L();case 16:t=i.sent;case 17:null!==t&&(e.setWallet(t),s=new Date,a={walletConnected:"true",expiry:s.getTime()+36e5},localStorage.setItem("wallet-connected",JSON.stringify(a)));case 18:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}();return Object(a.useEffect)((function(){var e=new Date,t=JSON.parse(localStorage.getItem("wallet-connected")),n=null===t||void 0===t?void 0:t.walletConnected,s=null===t||void 0===t?void 0:t.expiry,a=localStorage.getItem("wallet-type");"true"===n&&s>e.getTime()&&i(a)}),[]),Object(M.jsx)("div",{children:Object(M.jsx)(x.a,{keepMounted:!0,open:e.open,onClose:function(){return e.setOpen(!1)},"aria-labelledby":"keep-mounted-modal-title","aria-describedby":"keep-mounted-modal-description",children:Object(M.jsxs)(v.a,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",maxWidth:350,width:"70%",backgroundColor:"rgba(40, 13, 95, 0.9)",boxShadow:"0px 11px 15px -7px rgb(255 255 255 / 20%), 0px -4px 10px 2px rgb(255 255 255 / 14%), 0px 9px 46px 8px rgb(255 255 255 / 12%);",borderRadius:5,p:4},children:[Object(M.jsx)(S.a,{id:"keep-mounted-modal-title",variant:"h6",component:"h2",sx:B,children:"Connect Wallet"}),Object(M.jsxs)(E.a,{fullWidth:!0,sx:C,onClick:function(){return i("metamask")},children:[Object(M.jsx)("img",{src:"assets/images/metamask.svg",width:"30",height:"30",style:{marginRight:10}}),"Metamask"]}),Object(M.jsxs)(E.a,{fullWidth:!0,sx:C,onClick:function(){return i("walletconnect")},children:[Object(M.jsx)("img",{src:"assets/images/walletconnect.svg",width:"30",height:"30",style:{marginRight:10}}),"Wallet Connect"]})]})})})},N=m.b.div(n||(n=Object(u.a)(["\n  display: flex;\n  justify-content: space-between;\n  margin: 30px 50px;\n  align-items: flex-start;\n\n  img.logo {\n    width: 85px;\n    height: 87px;\n  }\n"]))),U=m.b.div(s||(s=Object(u.a)(["\n  background: url('assets/images/btn_connect.png');\n  background-size: contain;\n  width: 250px;\n  height: 47px;\n  color: white;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  cursor: pointer;\n  font-size: 17px;\n"]))),F=function(e){var t=e.account,i=e.setWallet,n=e.setBg,s=Object(a.useState)(!1),r=Object(c.a)(s,2),o=r[0],l=r[1];return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsxs)(N,{children:[Object(M.jsx)(p.b,{to:"/",onClick:function(){return n("bg_main")},children:Object(M.jsx)("img",{className:"logo",src:"assets/images/logo_yellow.png",alt:"logo"})}),Object(M.jsx)(U,{onClick:function(){!t&&l(!0)},children:t?function(e){return e.slice(0,7)+"..."+e.slice(38,42)}(t):"CONNECT YOUR WALLET"})]}),Object(M.jsx)(D,{open:o,setOpen:l,setWallet:i})]})},V=i(617),Y=i(42),G=i(69),z={VERSION:"TEST",environment:{VERSION:"TEST",SIGN_DATA:"Crosmo Crafts",SIGN_PASS:"meta-pirate",API_URL:"http://44.205.41.52:2083/api",END_POINT:"ws://44.205.41.52:2083"},gamePros:{screenWidth:1600,screenHeight:900,padding:30,introNewEnemyDelay:2e3,endLevelDelay:1500},multiPlayerPros:{screenWidth:1600,screenHeight:900},graphicAssets:{background:{URL:"assets/images/bg_shooter.png",name:"background"},particles:{URL:"assets/images/particles.png",data:"assets/images/particle_orbs.json",name:"particles"},shipUrl:"assets/images/ships/",shipsTypes:["Black Spaceship type 1","Black Spaceship type 1","Black Spaceship type 2","Black Spaceship type 3","Blue Spaceship type 1","Blue Spaceship type 2","Blue Spaceship type 3","Gold Spaceship type 1","Gold Spaceship type 2","Gold Spaceship type 3","Green Spaceship type 1","Green Spaceship type 2","Green Spaceship type 3","Grey Spaceship type 1","Grey Spaceship type 2","Grey Spaceship type 3","Pink Spaceship type 1","Pink Spaceship type 2","Pink Spaceship type 3","Red Spaceship type 1","Red Spaceship type 2","Red Spaceship type 3","White Spaceship type 1","White Spaceship type 2","White Spaceship type 3","Holographic Spaceship"],bulletNormal:{URL:"assets/images/bullet_normal.png",name:"bulletNormal"},bulletAtomic:{URL:"assets/images/bullet_atomic.png",name:"bulletAtomic"},bulletUnlimited:{URL:"assets/images/bullet_unlimited.png",name:"bulletUnlimited"},bulletDouble:{URL:"assets/images/bullet_normal.png",name:"bulletDouble"},bulletTriple:{URL:"assets/images/bullet_normal.png",name:"bulletTriple"},bulletVolley:{URL:"assets/images/bullet_normal.png",name:"bulletVolley"},bulletLazer:{URL:"assets/images/bullet_lazer.png",name:"bulletLazer"},bulletExplose:{URL:"assets/images/bullet_explosive.png",name:"bulletExplose"},bulletRegion:{URL:"assets/images/bullet_region.png",name:"bulletRegion"},asteroidFirstL:{URL:"assets/images/asteroid_first_large.png",name:"asteroidFirstL"},asteroidFirstS:{URL:"assets/images/asteroid_first_small.png",name:"asteroidFirstS"},asteroidSecondL:{URL:"assets/images/asteroid_second_large.png",name:"asteroidSecondL"},asteroidSecondS:{URL:"assets/images/asteroid_second_small.png",name:"asteroidSecondS"},airdropRapid:{URL:"assets/images/airdrop_rapid.png",name:"airdropRapid"},airdropDouble:{URL:"assets/images/airdrop_double.png",name:"airdropDouble"},airdropTriple:{URL:"assets/images/airdrop_triple.png",name:"airdropTriple"},airdropBurst:{URL:"assets/images/airdrop_burst.png",name:"airdropBurst"},airdropExplosive:{URL:"assets/images/airdrop_explosive.png",name:"airdropExplosive"},airdropLazer:{URL:"assets/images/airdrop_lazer.png",name:"airdropLazer"},airdropRocket:{URL:"assets/images/airdrop_rocket.png",name:"airdropRocket"},airdropLife:{URL:"assets/images/airdrop_life.png",name:"airdropLife"},airdropShield:{URL:"assets/images/airdrop_shield.png",name:"airdropShield"},shield:{URL:"assets/images/shield.png",name:"shield"},enemyFirst:{URL:"assets/images/enemy_1.png",name:"enemyFirst"},enemySecond:{URL:"assets/images/enemy_2.png",name:"enemySecond"},enemyBullet:{URL:"assets/images/bullet_enemy.png",name:"enemyBullet"},rocketFirst:{URL:"assets/images/rocket_1.png",name:"rocketFirst"},rocketSecond:{URL:"assets/images/rocket_2.png",name:"rocketSecond"},rocketThird:{URL:"assets/images/rocket_3.png",name:"rocketThird"},rocketFourth:{URL:"assets/images/rocket_4.png",name:"rocketFourth"},rocketBullet:{URL:"assets/images/bullet_boss.png",name:"rocketBullet"},lifeEmpty:{URL:"assets/images/life_empty.png",name:"lifeEmpty"},lifeFull:{URL:"assets/images/life_full.png",name:"lifeFull"},lazerEffectParticle:{URL:"assets/images/lazer_effect.png",data:"assets/images/particle_lazer.json",name:"lazerEffectParticle"}},soundAssets:{bg:{URL:"assets/sounds/bg.mp3",name:"bg"},fire:{URL:["assets/sounds/fire.m4a","assets/sounds/fire.ogg"],name:"fire"},destroyed:{URL:["assets/sounds/destroyed.m4a","assets/sounds/destroyed.ogg"],name:"destroyed"},engine:{URL:"assets/sounds/engine.mp3",name:"engine"},shipExplose:{URL:"assets/sounds/ship_explode.wav",name:"shipExplose"}},shipPros:{acceleration:200,drag:100,maxVelocity:300,angularVelocity:180,startingLives:5,blinkDelay:.2},bulletPros:{NORMAL_BULLET:{maxBullets:5,fireCooldown:.4,passiveRegenCooldown:1,speed:300,lifespan:2e3},UNLIMITED_BULLET:{maxBullets:99,fireCooldown:.4,passiveRegenCooldown:.1,speed:300,lifespan:2e3},DOUBLE_BULLET:{maxBullets:5,fireCooldown:.4,passiveRegenCooldown:1,speed:300,lifespan:2e3},TRIPLE_BULLET:{maxBullets:5,fireCooldown:.4,passiveRegenCooldown:1,speed:300,lifespan:2e3},VOLLEY_BULLET:{maxBullets:5,fireCooldown:.4,passiveRegenCooldown:1,speed:300,lifespan:2e3},LAZER_BULLET:{maxBullets:10,fireCooldown:.5,passiveRegenCooldown:1,speed:450,lifespan:2e3},EXPLOSIVE_BULLET:{maxBullets:5,fireCooldown:.8,passiveRegenCooldown:1,speed:250,lifespan:2e3},ATOMIC_BULLET:{maxBullets:5,fireCooldown:.4,passiveRegenCooldown:1,speed:300,lifespan:2e3}},asteroidPros:{startingAsteroids:3,maxAsteroids:12,incrementAsteroids:2,minSpeed:60,maxSpeed:100},enemyPros:{minSpeed:60,maxSpeed:80,startingEnemies:0,incrementEnemies:1,startingBoss:0,incrementBoss:1,bossLives:10,angVelRange:40},enemyBulletPros:{maxBullets:999,fireCooldown:3,passiveRegenCooldown:0,normalSpeed:120,velocity:{x:180,y:180},lives:2,bossSpeed:180,bossFireCooldown:.8},airdropPros:{percentAsteroid:5,percentEnemy:70,percentBoss:100,duration:15,lifetime:10,alertTime:7},fontAssets:{endLevel:{fontFamily:"Fast Hand",fontSize:"30px",color:"#ffffff"},waitingFontStyle:{fontFamily:"Fast Hand",fontSize:"45px",color:"#ff601a",align:"center"},scoreLabel:{fontFamily:"Fast Hand",fontSize:"30px",color:"#24c2bc"},scoreText:{fontFamily:"Fast Hand",fontSize:"30px",color:"#ffffff"},levelLabel:{fontFamily:"Fast Hand",fontSize:"20px",color:"#ff601a"},levelText:{fontFamily:"Fast Hand",fontSize:"20px",color:"#ffffff"},gameoverFontStyle:{fontFamily:"Fast Hand",fill:"#ff601a",fontSize:"50px",align:"center"}}};function H(e,t){return e+Math.random()*(t-e)}function W(e){return Math.floor(100*Math.random())<=e}function K(e){var t=e;return t.length>9&&t.endsWith("-ss")&&(t=t.substring(0,t.length-3)),t.replace(/[^0-9a-z]/gi,"G")}var X,J=Math.PI/4,q={FIRST:{LARGE:z.graphicAssets.asteroidFirstL.name,SMALL:z.graphicAssets.asteroidFirstS.name},SECOND:{LARGE:z.graphicAssets.asteroidSecondL.name,SMALL:z.graphicAssets.asteroidSecondS.name}},Z="FIRST",Q="SECOND",$="LARGE",ee="SMALL",te="NORMAL_BULLET",ie="UNLIMITED_BULLET",ne="DOUBLE_BULLET",se="TRIPLE_BULLET",ae="VOLLEY_BULLET",re="LAZER_BULLET",oe="EXPLOSIVE_BULLET",le="ATOMIC_BULLET",de={NORMAL_BULLET:z.graphicAssets.bulletNormal.name,UNLIMITED_BULLET:z.graphicAssets.bulletUnlimited.name,DOUBLE_BULLET:z.graphicAssets.bulletDouble.name,TRIPLE_BULLET:z.graphicAssets.bulletTriple.name,VOLLEY_BULLET:z.graphicAssets.bulletVolley.name,LAZER_BULLET:z.graphicAssets.bulletLazer.name,EXPLOSIVE_BULLET:z.graphicAssets.bulletExplose.name,REGION_BULLET:z.graphicAssets.bulletRegion.name,ATOMIC_BULLET:z.graphicAssets.bulletAtomic.name},ce={UNLIMITED_BULLET:z.graphicAssets.airdropRapid.name,DOUBLE_BULLET:z.graphicAssets.airdropDouble.name,TRIPLE_BULLET:z.graphicAssets.airdropTriple.name,VOLLEY_BULLET:z.graphicAssets.airdropBurst.name,LAZER_BULLET:z.graphicAssets.airdropLazer.name,EXPLOSIVE_BULLET:z.graphicAssets.airdropExplosive.name,ATOMIC_BULLET:z.graphicAssets.airdropRocket.name,LIFE:z.graphicAssets.airdropLife.name,SHIELD:z.graphicAssets.airdropShield.name},ue="UNLIMITED_BULLET",pe="DOUBLE_BULLET",he="TRIPLE_BULLET",me="VOLLEY_BULLET",ye="LAZER_BULLET",_e="EXPLOSIVE_BULLET",ge="ATOMIC_BULLET",be="LIFE",fe="SHIELD",ve={NORMAL_FIRST:z.graphicAssets.enemyFirst.name,NORMAL_SECOND:z.graphicAssets.enemySecond.name,BOSS_FIRST:z.graphicAssets.rocketFirst.name,BOSS_SECOND:z.graphicAssets.rocketSecond.name,BOSS_THIRD:z.graphicAssets.rocketThird.name,BOSS_FOURTH:z.graphicAssets.rocketFourth.name},xe="NORMAL_FIRST",Ee="NORMAL_SECOND",Se="NORMAL_BOTH",we="BOSS_FIRST",Oe="BOSS_SECOND",Ae="BOSS_THIRD",je="BOSS_FOURTH",ke={0:"ZERO",1:"BRONZE",2:"SILVER",3:"GOLD",4:"DIAMOND",5:"PLATINUM"},Te={0:0,1:1e3,2:4e3,3:1e4,4:24e3,5:44e3},Le={0:0,1:1,2:2,3:2,4:2,5:3},Re={0:1,1:.95,2:.9,3:.85,4:.8,5:.75},Pe={0:0,1:0,2:0,3:1,4:1,5:2},Ie={0:1,1:1,2:1,3:1,4:1.25,5:1.5},Me={easy:{STARTING_ASTEROIDS:0,INCREASE_ASTEROIDS:0,MAX_ASTEROIDS:0,MIN_ASTEROID_SPEED:1,MAX_ASTEROID_SPEED:1,STARTING_ENEMIES:0,INCREASE_ENEMIES:0,MIN_ENEMY_SPEED:1,MAX_ENEMY_SPEED:1},medium:{STARTING_ASTEROIDS:2,INCREASE_ASTEROIDS:0,MAX_ASTEROIDS:5,MIN_ASTEROID_SPEED:1.1,MAX_ASTEROID_SPEED:1.1,STARTING_ENEMIES:2,INCREASE_ENEMIES:0,MIN_ENEMY_SPEED:1,MAX_ENEMY_SPEED:1},hard:{STARTING_ASTEROIDS:2,INCREASE_ASTEROIDS:1,MAX_ASTEROIDS:10,MIN_ASTEROID_SPEED:1.1,MAX_ASTEROID_SPEED:1.1,STARTING_ENEMIES:2,INCREASE_ENEMIES:1,MIN_ENEMY_SPEED:1.1,MAX_ENEMY_SPEED:1.1},extreme:{STARTING_ASTEROIDS:2,INCREASE_ASTEROIDS:2,MAX_ASTEROIDS:18,MIN_ASTEROID_SPEED:1.25,MAX_ASTEROID_SPEED:1.25,STARTING_ENEMIES:2,INCREASE_ENEMIES:2,MIN_ENEMY_SPEED:1.2,MAX_ENEMY_SPEED:1.2}},Be=Object(G.b)({name:"user",initialState:{sessionId:"",videoConnected:!1,loggedIn:!1,gameOver:!1,canPlayAgain:!1,joinLobbyRoom:!1,tokenId:-1,shipName:"",tier:0,playerNameMap:new Map},reducers:{setSessionId:function(e,t){e.sessionId=t.payload},setVideoConnected:function(e,t){e.videoConnected=t.payload},setLoggedIn:function(e,t){e.loggedIn=t.payload},setGameOver:function(e,t){e.gameOver=t.payload},setCanPlayAgain:function(e,t){e.canPlayAgain=t.payload},setJoinLobbyRoom:function(e,t){e.joinLobbyRoom=t.payload},setTokenId:function(e,t){e.tokenId=t.payload},setShipName:function(e,t){e.shipName=t.payload},setTier:function(e,t){e.tier=t.payload},setPlayerNameMap:function(e,t){e.playerNameMap.set(K(t.payload.id),t.payload.name)},removePlayerNameMap:function(e,t){e.playerNameMap.delete(K(t.payload))}}}),Ce=Be.actions,De=Ce.setSessionId,Ne=(Ce.setVideoConnected,Ce.setLoggedIn,Ce.setGameOver),Ue=Ce.setCanPlayAgain,Fe=Ce.setJoinLobbyRoom,Ve=Ce.setTokenId,Ye=Ce.setShipName,Ge=Ce.setTier,ze=Ce.setPlayerNameMap,He=Ce.removePlayerNameMap,We=Be.reducer,Ke=Object(G.b)({name:"wallet",initialState:{account:"",craftInstance:null,shooterInstance:null,tokenInstance:null,pilotInstance:null},reducers:{setAccount:function(e,t){e.account=t.payload},setCraftInstance:function(e,t){e.craftInstance=t.payload},setShooterInstance:function(e,t){e.shooterInstance=t.payload},setTokenInstance:function(e,t){e.tokenInstance=t.payload},setPilotInstance:function(e,t){e.pilotInstance=t.payload}}}),Xe=Ke.actions,Je=(Xe.setAccount,Xe.setCraftInstance,Xe.setShooterInstance,Xe.setTokenInstance,Xe.setPilotInstance,Ke.reducer);!function(e){e.LOBBY="lobby",e.PUBLIC="crosmo",e.CUSTOM="custom"}(X||(X={}));var qe=function(e){return e.name===X.CUSTOM},Ze=Object(G.b)({name:"room",initialState:{lobbyJoined:!1,roomJoined:!1,roomId:"",availableRooms:new Array},reducers:{setLobbyJoined:function(e,t){e.lobbyJoined=t.payload},setRoomJoined:function(e,t){e.roomJoined=t.payload},setJoinedRoomData:function(e,t){e.roomId=t.payload.id},setAvailableRooms:function(e,t){e.availableRooms=t.payload.filter((function(e){return qe(e)}))},addAvailableRooms:function(e,t){if(qe(t.payload.room)){var i=e.availableRooms.findIndex((function(e){return e.roomId===t.payload.roomId}));-1!==i?e.availableRooms[i]=t.payload.room:e.availableRooms.push(t.payload.room)}},removeAvailableRooms:function(e,t){e.availableRooms=e.availableRooms.filter((function(e){return e.roomId!==t.payload}))}}}),Qe=Ze.actions,$e=Qe.setLobbyJoined,et=Qe.setRoomJoined,tt=Qe.setJoinedRoomData,it=Qe.setAvailableRooms,nt=Qe.addAvailableRooms,st=Qe.removeAvailableRooms,at=Ze.reducer,rt=Object(G.b)({name:"phaser",initialState:{bulletName:"",bulletDuration:0,shieldName:"",shieldDuration:0,bulletChanged:!1,shieldChanged:!1,hasAtomic:!1,isExist:!1},reducers:{setBulletName:function(e,t){e.bulletName=t.payload,e.bulletChanged=!e.bulletChanged},setBulletDuration:function(e,t){e.bulletDuration=t.payload},setShieldName:function(e,t){e.shieldName=t.payload,e.shieldChanged=!e.shieldChanged},setShieldDuration:function(e,t){e.shieldDuration=t.payload},setHasAtomic:function(e,t){e.hasAtomic=t.payload},setIsExist:function(e,t){e.isExist=t.payload}}}),ot=rt.actions,lt=ot.setBulletName,dt=ot.setBulletDuration,ct=ot.setShieldName,ut=ot.setShieldDuration,pt=ot.setHasAtomic,ht=ot.setIsExist,mt=rt.reducer;Object(Y.d)();var yt,_t,gt,bt,ft,vt,xt,Et,St,wt,Ot,At,jt,kt,Tt=Object(G.a)({reducer:{user:We,wallet:Je,room:at,phaser:mt},middleware:function(e){return e({serializableCheck:!1})}}),Lt=i(87),Rt=i.n(Lt),Pt={login:function(){var e=Object(g.a)(f.a.mark((function e(t){var i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rt.a.post("".concat(z.environment.API_URL,"/auth/login"),{account:t});case 2:return i=e.sent,e.abrupt("return",i.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},It={auth:Pt,score:{saveScore:function(e,t,i,n){return Rt.a.post("".concat(z.environment.API_URL,"/score/saveScore"),{account:e,tokenId:t,shipName:i,tier:n},{headers:{token:!!localStorage.getItem("jwt")&&JSON.parse(localStorage.getItem("jwt")).token}})},getScores:function(e,t){return Rt.a.post("".concat(z.environment.API_URL,"/score/getScores"),{period:e,league:t})}}},Mt=i(35),Bt=i(64),Ct=i(172),Dt=i(610),Nt=i(605),Ut=i(606),Ft=i(604),Vt=(i(549),i(550),i(612)),Yt=i(609),Gt=r.a.forwardRef((function(e,t){return Object(M.jsx)(Yt.a,Object(Bt.a)({elevation:6,ref:t,variant:"filled"},e))})),zt=function(e){var t=e.noticeMsg,i=e.showNotice,n=e.setShowNotice,s=e.severity,a=function(e,t){"clickaway"!==t&&n(!1)};return Object(M.jsx)(Vt.a,{open:i,autoHideDuration:5e3,onClose:a,anchorOrigin:{vertical:"top",horizontal:"right"},children:Object(M.jsx)(Gt,{onClose:a,severity:s,sx:{width:"100%"},children:t})})},Ht=m.b.div(yt||(yt=Object(u.a)(["\n  height: 100%;\n  width: 100%;\n  max-width: 1700px;\n  margin: 0 auto;\n}\n"]))),Wt=m.b.div(_t||(_t=Object(u.a)(["\n  height: calc(100vh - 250px);\n  width: 88%;\n  max-width: 980px;\n  margin: 0 auto;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),Kt=m.b.div(gt||(gt=Object(u.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  width: 100%;\n  height: 100%;\n  min-height: 150px;\n"]))),Xt=m.b.div(bt||(bt=Object(u.a)(["\n  width: 70%;\n  max-width: 600px;\n"]))),Jt=m.b.div(ft||(ft=Object(u.a)(["\n  text-align: center;\n  margin-bottom: 10px;\n\n  img {\n    width: 450px;\n  }\n"]))),qt=m.b.h3(vt||(vt=Object(u.a)(["\n  font-size: 25px;\n  color: white;\n  text-align: center;\n  font-weight: normal;\n"]))),Zt=m.b.div(xt||(xt=Object(u.a)(["\n  display: flex;\n  justify-content: space-between;\n"]))),Qt=m.b.div(Et||(Et=Object(u.a)(["\n  width: 425px;\n  height: 460px;\n  max-height: 460px;\n  background-size: contain;\n  margin: 0 auto;\n  display: flex;\n\n  --swiper-navigation-size: 24px;\n\n  .swiper-container {\n    width: 425px;\n    height: 440px;\n    border-radius: 8px;\n    overflow: hidden;\n  }\n\n  .swiper-container .swiper-button-next::after,\n  .swiper-container .swiper-button-prev::after {\n    content: none;\n  }\n\n  .swiper-slide {\n    height: 440px;\n    margin-top: 30px;\n    margin-left: 0px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n\n  .swiper-slide img.ship {\n    position: absolute;\n    width: 400px;\n    top: 0px;\n    left: 12px;\n  }\n\n  .swiper-slide img.shield {\n    position: absolute;\n    width: 400px;\n    top: 0px;\n    left: 12px;\n  }\n  \n  .swiper-slide img.broken {\n    position: absolute;\n    width: 400px;\n    top: 0px;\n    left: 12px;\n  }\n  .swiper-slide img.crosmonaut {\n    position: absolute;\n    width: 400px;\n    top: 0px;\n    left: 12px;\n  }\n  .swiper-slide img.background {\n    position: absolute;\n    width: 400px;\n    top: 0px;\n    left: 12px;\n  }\n  .swiper-slide img.on_background {\n    position: absolute;\n    width: 400px;\n    top: 0px;\n    left: 12px;\n  }\n  .swiper-slide img.booster {\n    position: absolute;\n    width: 400px;\n    top: 0px;\n    left: 12px;\n  }\n  .swiper-slide img.weapon {\n    position: absolute;\n    width: 400px;\n    top: 0px;\n    left: 12px;\n  }\n  \n  .swiper-slide img.banner {\n    position: absolute;\n    width: 400px;\n    top: 0px;\n    left: 12px;\n  }\n  .swiper-slide img.tier {\n    position: absolute;\n    width: 80px;\n    top: 20px;\n    right: 33px;\n  }\n  \n  .swiper-slide img.avatarBg {\n    position: absolute;\n    top: -46px;\n    left: 2px;\n    width: 421px;\n    height: 462px;\n  }\n\n  .swiper-slide p.name {\n    position: absolute;\n    top: -15px;\n    left: calc(50% );\n    transform: translate(-50%, 0);\n    font-size: 16px;\n    color: var(--color-yellow);\n  }\n\n  .swiper-slide p.tier {\n    position: absolute;\n    left: calc(50% - 10px);\n    bottom: 50px;\n    transform: translate(-50%, 0);\n    font-size: 16px;\n    color: var(--color-yellow);\n  }\n"]))),$t=m.b.div(St||(St=Object(u.a)(["\n  display: flex;\n  align-items: center;\n  \n  img {\n    width: 50px;\n    height: 55px;\n    cursor: pointer;\n  }\n"]))),ei=m.b.div(wt||(wt=Object(u.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-around;\n  height: 300px;\n  flex-direction: column;\n  margin-top: 65px;\n\n  color: var(--color-yellow);\n"]))),ti=m.b.div(Ot||(Ot=Object(u.a)(["\n  font-size: 23px;\n  text-align: center;\n"]))),ii=m.b.div(At||(At=Object(u.a)(["\n  padding: 8px 10px;\n  border-radius: 8px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 25px;\n  background: rgba(40,13,95,1);\n  color: white;\n  cursor: pointer;\n"]))),ni=m.b.div(jt||(jt=Object(u.a)(["\n  background: url('assets/images/avatar_join.png');\n  font-size: 30px;\n  background-size: contain;\n  background-repeat: no-repeat;\n  width: 132px;\n  height: 50px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  color: white;\n  cursor: pointer;\n"]))),si=i(24),ai=i.n(si),ri=i(7),oi=i(6),li=i(8),di=i(9),ci=i(287),ui=i.n(ci),pi=i(288);!function(e){e[e.UPDATE_PLAYER=0]="UPDATE_PLAYER",e[e.UPDATE_SCORE=1]="UPDATE_SCORE",e[e.UPDATE_PLAYER_NAME=2]="UPDATE_PLAYER_NAME",e[e.READY_TO_CONNECT=3]="READY_TO_CONNECT",e[e.SEND_ROOM_DATA=4]="SEND_ROOM_DATA",e[e.UPDATE_BULLET=5]="UPDATE_BULLET",e[e.COLLIDE_PLAYER_BULLET=6]="COLLIDE_PLAYER_BULLET",e[e.COLLIDE_BULLET_ASTEROID=7]="COLLIDE_BULLET_ASTEROID",e[e.COLLIDE_PLAYER_ASTEROID=8]="COLLIDE_PLAYER_ASTEROID",e[e.COLLIDE_PLAYER_AIRDROP=9]="COLLIDE_PLAYER_AIRDROP",e[e.GAMEPLAY_READY=10]="GAMEPLAY_READY",e[e.ATOMIC_EXPLODE=11]="ATOMIC_EXPLODE"}(kt||(kt={}));var hi,mi=new ai.a.Events.EventEmitter;!function(e){e.PLAYER_JOINED="player-joined",e.PLAYER_UPDATED="player-updated",e.PLAYER_LEFT="player-left",e.PLAYER_DISCONNECTED="player-disconnected",e.MY_PLAYER_READY="my-player-ready",e.MY_PLAYER_NAME_CHANGE="my-player-name-change",e.MY_PLAYER_TEXTURE_CHANGE="my-player-texture-change",e.ITEM_USER_ADDED="item-user-added",e.ITEM_USER_REMOVED="item-user-removed",e.TOKEN_REWARDED="token-rewarded",e.CAN_PLAY="can-play",e.SHIP_DAMAGED="ship-damaged",e.GOTO_MAINMENU="goto-mainmenu",e.TOGGLE_SOUNDS="toggle-sounds",e.EXIST_GAME="exit-game",e.PLAY_AGAIN="play-again",e.BULLET_UPDATED="bullet-updated",e.BULLET_CREATED="bullet-created",e.BULLET_REMOVED="bullet-removed",e.ASTEROID_UPDATED="asteroid-updated",e.ASTEROID_CREATED="asteroid-created",e.ASTEROID_REMOVED="asteroid-removed",e.ASTEROID_SPLIT="asteroid-split",e.AIRDROP_UPDATED="airdrop-updated",e.AIRDROP_CREATED="airdrop-created",e.AIRDROP_REMOVED="airdrop-removed",e.COLLISION_PLAYER_BULLET="collision-player-bullet",e.COLLISION_PLAYER_ASTEROID="collision-player-asteroid",e.COLLISION_BULLET_ASTEROID="collision-bullet-asteroid",e.COLLISION_PLAYER_AIRDROP="collision-player-airdrop",e.ASTEROID_CHANGES_UPDATED="asteroid-changes-updated"}(hi||(hi={}));var yi=function(){function e(){Object(ri.a)(this,e),this._client=void 0,this._room=void 0,this._lobby=void 0,this._mySessionId=void 0,this._dtServer2Client=void 0;var t=z.environment.END_POINT;console.log("endpoint",t),this._client=new pi.Client(t),this.joinLobbyRoom().then((function(){Tt.dispatch($e(!0))})),mi.on(hi.MY_PLAYER_NAME_CHANGE,this.updatePlayerName,this),mi.on(hi.MY_PLAYER_TEXTURE_CHANGE,this.updatePlayer,this)}return Object(oi.a)(e,[{key:"joinLobbyRoom",value:function(){var e=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._client.joinOrCreate(X.LOBBY);case 2:this._lobby=e.sent,this._lobby.onMessage("rooms",(function(e){Tt.dispatch(it(e))})),this._lobby.onMessage("+",(function(e){var t=Object(c.a)(e,2),i=t[0],n=t[1];Tt.dispatch(nt({roomId:i,room:n}))})),this._lobby.onMessage("-",(function(e){Tt.dispatch(st(e))}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"joinOrCreatePublic",value:function(){var e=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._client.joinOrCreate(X.PUBLIC);case 2:this._room=e.sent,this.initialize();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initialize",value:function(){var e=this;this._room&&(this._lobby.leave(),this._mySessionId=this._room.sessionId,Tt.dispatch(De(this._room.sessionId)),this._room.onMessage(kt.SEND_ROOM_DATA,(function(e){Tt.dispatch(tt(e))})),console.log("this._room.state.players",this._room.state.players),this._room.state.players&&(this._room.state.players.onAdd=function(t,i){i!==e._mySessionId&&(t.onChange=function(e){mi.emit(hi.PLAYER_UPDATED,e,i),e.forEach((function(e){var n=e.field,s=e.value;"name"===n&&""===s&&(mi.emit(hi.PLAYER_JOINED,t,i),Tt.dispatch(ze({id:i,name:s})))}))})}),this._room.state.players.onRemove=function(e,t){mi.emit(hi.PLAYER_LEFT,t),Tt.dispatch(He(t))},this._room.state.bullets.onAdd=function(e,t){console.log("Get bullet create : ",(new Date).getTime()),mi.emit(hi.BULLET_CREATED,e,t),e.onChange=function(e){mi.emit(hi.BULLET_UPDATED,e,t)}},this._room.state.bullets.onRemove=function(e,t){mi.emit(hi.BULLET_REMOVED,t)},this._room.state.asteroids.onAdd=function(t,i){mi.emit(hi.ASTEROID_CREATED,t,i),t.onChange=function(t){mi.emit(hi.ASTEROID_CHANGES_UPDATED,t,i),t.forEach((function(t){var i=t.field,n=t.value;"curServerTime"===i&&e.setDtServer2Client(n)}))}},this._room.state.asteroids.onRemove=function(e,t){mi.emit(hi.ASTEROID_REMOVED,t)},this._room.state.airdrops.onAdd=function(e,t){mi.emit(hi.AIRDROP_CREATED,e,t),e.onChange=function(e){e.forEach((function(e){var i=e.field,n=e.value;mi.emit(hi.AIRDROP_UPDATED,i,n,t)}))}},this._room.state.airdrops.onRemove=function(e,t){mi.emit(hi.AIRDROP_REMOVED,t)},this._room.onMessage(kt.COLLIDE_PLAYER_ASTEROID,(function(e){mi.emit(hi.COLLISION_PLAYER_ASTEROID,e)})),this._room.onMessage(kt.COLLIDE_PLAYER_BULLET,(function(e){mi.emit(hi.COLLISION_PLAYER_BULLET,e)})),this._room.onMessage(kt.COLLIDE_BULLET_ASTEROID,(function(e){mi.emit(hi.COLLISION_BULLET_ASTEROID,e)})),this._room.onMessage(kt.COLLIDE_PLAYER_AIRDROP,(function(e){mi.emit(hi.COLLISION_PLAYER_AIRDROP,e)})))}},{key:"onPlayerJoined",value:function(e,t){mi.on(hi.PLAYER_JOINED,e,t)}},{key:"onPlayerLeft",value:function(e,t){mi.on(hi.PLAYER_LEFT,e,t)}},{key:"onMyPlayerReady",value:function(e,t){mi.on(hi.MY_PLAYER_READY,e,t)}},{key:"onPlayerUpdated",value:function(e,t){mi.on(hi.PLAYER_UPDATED,e,t)}},{key:"onBulletCreated",value:function(e,t){mi.on(hi.BULLET_CREATED,e,t)}},{key:"onBulletUpdated",value:function(e,t){mi.on(hi.BULLET_UPDATED,e,t)}},{key:"onBulletRemoved",value:function(e,t){mi.on(hi.BULLET_REMOVED,e,t)}},{key:"onAsteroidCreated",value:function(e,t){mi.on(hi.ASTEROID_CREATED,e,t)}},{key:"onAsteroidUpdated",value:function(e,t){mi.on(hi.ASTEROID_UPDATED,e,t)}},{key:"onAsteroidRemoved",value:function(e,t){mi.on(hi.ASTEROID_REMOVED,e,t)}},{key:"onAsteroidChangesUpdated",value:function(e,t){mi.on(hi.ASTEROID_CHANGES_UPDATED,e,t)}},{key:"onAirdropCreated",value:function(e,t){mi.on(hi.AIRDROP_CREATED,e,t)}},{key:"onAirdropUpdated",value:function(e,t){mi.on(hi.AIRDROP_UPDATED,e,t)}},{key:"onAirdropRemoved",value:function(e,t){mi.on(hi.AIRDROP_REMOVED,e,t)}},{key:"onCollisionPlayerWithBullet",value:function(e,t){mi.on(hi.COLLISION_PLAYER_BULLET,e,t)}},{key:"onCollisionPlayerWithAsteroid",value:function(e,t){mi.on(hi.COLLISION_PLAYER_ASTEROID,e,t)}},{key:"onCollisionBulletAsteroid",value:function(e,t){mi.on(hi.COLLISION_BULLET_ASTEROID,e,t)}},{key:"onCollisionPlayerAirdrop",value:function(e,t){mi.on(hi.COLLISION_PLAYER_AIRDROP,e,t)}},{key:"updatePlayer",value:function(e,t,i,n,s,a,r,o,l,d,c,u){var p,h=this.clientTime();null===(p=this._room)||void 0===p||p.send(kt.UPDATE_PLAYER,{x:e,y:t,rotation:i,speed_x:n,speed_y:s,angularVel:a,isForwarding:r,hasShield:o,isFire:l,score:d,isExplode:c,lives:u,clientTime:h})}},{key:"updateBulletToServer",value:function(e,t,i,n,s,a){var r;null===(r=this._room)||void 0===r||r.send(kt.UPDATE_BULLET,{x:e,y:t,rotation:i,speed_x:n,speed_y:s,bulletType:a})}},{key:"clientTime",get:function(){return Date.now}},{key:"setDtServer2Client",value:function(e){this._dtServer2Client=this.clientTime()-e}},{key:"updatePlayerName",value:function(e){var t;null===(t=this._room)||void 0===t||t.send(kt.UPDATE_PLAYER_NAME,{name:e})}},{key:"allPlayersReady",value:function(e){var t;null===(t=this._room)||void 0===t||t.send(kt.GAMEPLAY_READY,{ready:e})}},{key:"specialKeyIsDown",value:function(e){var t;null===(t=this._room)||void 0===t||t.send(kt.ATOMIC_EXPLODE,{explode:e})}},{key:"readyToConnect",value:function(){var e;null===(e=this._room)||void 0===e||e.send(kt.READY_TO_CONNECT,{clientTime:this.clientTime()}),mi.emit(hi.MY_PLAYER_READY)}}]),e}(),_i=function(e){Object(li.a)(i,e);var t=Object(di.a)(i);function i(){var e;return Object(ri.a)(this,i),(e=t.call(this,"boot"))._txtIntro=void 0,e._network=void 0,e}return Object(oi.a)(i,[{key:"init",value:function(){var e=document.createElement("style");document.head.appendChild(e);e.sheet.insertRule('@font-face { font-family: "Fast Hand"; src: url("assets/fonts/Fast_Hand.otf") format("opentype"); }',0),z.gamePros.screenWidth=this.cameras.main.width,z.gamePros.screenHeight=this.cameras.main.height,this._network=new yi}},{key:"preload",value:function(){var e=this;this.load.script("webfont","https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js"),ui.a.load({custom:{families:["Fast Hand"]}});this.load.plugin("rexvirtualjoystickplugin","https://raw.githubusercontent.com/rexrainbow/phaser3-rex-notes/master/dist/rexvirtualjoystickplugin.min.js",!0),z.graphicAssets.shipsTypes.forEach((function(t){e.load.image(t,z.graphicAssets.shipUrl+t+".png")})),this.load.image(z.graphicAssets.bulletNormal.name,z.graphicAssets.bulletNormal.URL),this.load.image(z.graphicAssets.bulletUnlimited.name,z.graphicAssets.bulletUnlimited.URL),this.load.image(z.graphicAssets.bulletDouble.name,z.graphicAssets.bulletDouble.URL),this.load.image(z.graphicAssets.bulletTriple.name,z.graphicAssets.bulletTriple.URL),this.load.image(z.graphicAssets.bulletVolley.name,z.graphicAssets.bulletVolley.URL),this.load.image(z.graphicAssets.bulletLazer.name,z.graphicAssets.bulletLazer.URL),this.load.image(z.graphicAssets.bulletExplose.name,z.graphicAssets.bulletExplose.URL),this.load.image(z.graphicAssets.bulletRegion.name,z.graphicAssets.bulletRegion.URL),this.load.image(z.graphicAssets.bulletAtomic.name,z.graphicAssets.bulletAtomic.URL),this.load.image(z.graphicAssets.asteroidFirstL.name,z.graphicAssets.asteroidFirstL.URL),this.load.image(z.graphicAssets.asteroidFirstS.name,z.graphicAssets.asteroidFirstS.URL),this.load.image(z.graphicAssets.asteroidSecondL.name,z.graphicAssets.asteroidSecondL.URL),this.load.image(z.graphicAssets.asteroidSecondS.name,z.graphicAssets.asteroidSecondS.URL),this.load.image(z.graphicAssets.airdropRapid.name,z.graphicAssets.airdropRapid.URL),this.load.image(z.graphicAssets.airdropDouble.name,z.graphicAssets.airdropDouble.URL),this.load.image(z.graphicAssets.airdropTriple.name,z.graphicAssets.airdropTriple.URL),this.load.image(z.graphicAssets.airdropBurst.name,z.graphicAssets.airdropBurst.URL),this.load.image(z.graphicAssets.airdropExplosive.name,z.graphicAssets.airdropExplosive.URL),this.load.image(z.graphicAssets.airdropLazer.name,z.graphicAssets.airdropLazer.URL),this.load.image(z.graphicAssets.airdropRocket.name,z.graphicAssets.airdropRocket.URL),this.load.image(z.graphicAssets.airdropLife.name,z.graphicAssets.airdropLife.URL),this.load.image(z.graphicAssets.airdropShield.name,z.graphicAssets.airdropShield.URL),this.load.image(z.graphicAssets.enemyFirst.name,z.graphicAssets.enemyFirst.URL),this.load.image(z.graphicAssets.enemySecond.name,z.graphicAssets.enemySecond.URL),this.load.image(z.graphicAssets.enemyBullet.name,z.graphicAssets.enemyBullet.URL),this.load.image(z.graphicAssets.rocketFirst.name,z.graphicAssets.rocketFirst.URL),this.load.image(z.graphicAssets.rocketSecond.name,z.graphicAssets.rocketSecond.URL),this.load.image(z.graphicAssets.rocketThird.name,z.graphicAssets.rocketThird.URL),this.load.image(z.graphicAssets.rocketFourth.name,z.graphicAssets.rocketFourth.URL),this.load.image(z.graphicAssets.rocketBullet.name,z.graphicAssets.rocketBullet.URL),this.load.image(z.graphicAssets.lifeEmpty.name,z.graphicAssets.lifeEmpty.URL),this.load.image(z.graphicAssets.lifeFull.name,z.graphicAssets.lifeFull.URL),this.load.image(z.graphicAssets.background.name,z.graphicAssets.background.URL),this.load.atlas(z.graphicAssets.particles.name,z.graphicAssets.particles.URL,z.graphicAssets.particles.data),this.load.atlas(z.graphicAssets.lazerEffectParticle.name,z.graphicAssets.lazerEffectParticle.URL,z.graphicAssets.lazerEffectParticle.data),this.load.image(z.graphicAssets.shield.name,z.graphicAssets.shield.URL),this.load.audio(z.soundAssets.bg.name,z.soundAssets.bg.URL),this.load.audio(z.soundAssets.destroyed.name,z.soundAssets.destroyed.URL),this.load.audio(z.soundAssets.fire.name,z.soundAssets.fire.URL),this.load.audio(z.soundAssets.engine.name,z.soundAssets.engine.URL),this.load.audio(z.soundAssets.shipExplose.name,z.soundAssets.shipExplose.URL)}},{key:"startGame",value:function(e,t){this.scene.stop("boot"),this.scene.start("play",{shipPros:e,gameProps:t}),Tt.dispatch(et(!0))}},{key:"startMultiGame",value:function(e,t){this.scene.stop("boot"),this.scene.start("multiplay",{network:this._network,shipPros:e,gameProps:t}),Tt.dispatch(et(!0)),this._network&&this._network.readyToConnect()}}]),i}(ai.a.Scene),gi=i(13),bi=function(e){Object(li.a)(i,e);var t=Object(di.a)(i);function i(e){var n,s=e.scene,a=e.group,r=e.x,o=e.y,l=e.texture,d=e.frame;return Object(ri.a)(this,i),n=t.call(this,s,r,o,l,d),s.add.existing(Object(gi.a)(n)),s.physics.add.existing(Object(gi.a)(n)),a.add(Object(gi.a)(n)),n}return Object(oi.a)(i)}(ai.a.Physics.Arcade.Sprite),fi=i(41),vi=i(33),xi=function(){function e(t,i,n,s,a){var r=this;Object(ri.a)(this,e),this._owner=void 0,this._scene=void 0,this._fireCooldown=void 0,this._passiveRegenCooldown=void 0,this._sinceFired=void 0,this._sinceRegen=void 0,this._storedBullets=void 0,this._maxBullets=void 0,this._speed=void 0,this._triggerHeld=void 0,this._triggered=void 0,this._isShip=void 0,this._isEnableSoundEffect=void 0,this._owner=t,this._scene=t.scene,this._fireCooldown=1e3*n,this._passiveRegenCooldown=1e3*s,this._speed=a,this._isEnableSoundEffect=void 0===this._scene.registry.get("enabledSound")||this._scene.registry.get("enabledSound"),this._isShip=999!==i,this._sinceFired=0,this._sinceRegen=0,this._storedBullets=i,this._isShip&&99!==this._maxBullets&&this._scene.registry.set("shots",this._storedBullets),this._maxBullets=i,this._triggerHeld=!1,mi.on(hi.TOGGLE_SOUNDS,(function(e){r._isEnableSoundEffect=e,r._scene.registry.set("enabledSound",e)}),this),void 0===this._isEnableSoundEffect&&(this._isEnableSoundEffect=!0)}return Object(oi.a)(e,[{key:"update",value:function(e,t){this._sinceFired+=t,this._sinceRegen+=t,this._sinceRegen>this._passiveRegenCooldown&&this._storedBullets<this._maxBullets&&(this.reload(),this._sinceRegen=0)}},{key:"updateBullet",value:function(e,t,i,n){0!==e&&(this._maxBullets=e),0!==t&&(this._fireCooldown=1e3*t),0!==i&&(this._passiveRegenCooldown=1e3*i),0!==n&&(this._speed=n),99===e&&(this._scene.registry.values.shots=99),this.reload()}},{key:"setTriggerHeld",value:function(e){this._triggered=e}},{key:"spendBullet",value:function(){this._storedBullets=Math.max(this._storedBullets-1,0),this._isShip&&99!==this._maxBullets&&(this._scene.registry.values.shots=this._storedBullets)}},{key:"reload",value:function(){this._storedBullets=Math.min(this._storedBullets+1,this._maxBullets),this._isShip&&99!==this._maxBullets&&(this._scene.registry.values.shots=this._storedBullets)}}]),e}(),Ei=function(e){Object(li.a)(i,e);var t=Object(di.a)(i);function i(){return Object(ri.a)(this,i),t.apply(this,arguments)}return Object(oi.a)(i,[{key:"update",value:function(e,t){Object(fi.a)(Object(vi.a)(i.prototype),"update",this).call(this,e,t),this._triggered&&this.canFire()&&this.fire({pos:this._owner.getCenter(),rotation:this._owner.rotForward,speed:this._speed})}},{key:"fire",value:function(e){var t=e.pos,i=t.x,n=t.y,s=e.rotation,a=e.speed;this.spendBullet(),this._scene._network?this._scene.updateBulletLaunchDataToserver(i,n,s,a,this._owner):this._scene.spawnRandomBullet(i,n,s,a,this._owner),this._isEnableSoundEffect&&this._scene._bulletSound.play(),this._sinceFired=0}},{key:"canFire",value:function(){return this._storedBullets>0&&this._sinceFired>this._fireCooldown}}]),i}(xi),Si=function(e){Object(li.a)(i,e);var t=Object(di.a)(i);function i(){return Object(ri.a)(this,i),t.apply(this,arguments)}return Object(oi.a)(i,[{key:"update",value:function(e,t){Object(fi.a)(Object(vi.a)(i.prototype),"update",this).call(this,e,t),this._triggered&&this.canFire()&&this.fire({pos:this._owner.getCenter(),rotation:this._owner.rotLeft,speed:this._speed})}},{key:"fire",value:function(e){var t=e.pos,i=t.x,n=t.y,s=e.rotation,a=e.speed;this.spendBullet(),this._scene.spawnRandomEnemyBullet(i,n,s,a,this._owner),this._isEnableSoundEffect&&this._scene._bulletSound.play(),this._sinceFired=0}},{key:"canFire",value:function(){return this._sinceFired>this._fireCooldown}}]),i}(xi),wi=function(e){Object(li.a)(i,e);var t=Object(di.a)(i);function i(e,n,s,a){var r;Object(ri.a)(this,i),(r=t.call(this,e))._playerTexture=void 0,r._playerName=void 0,r._engine=void 0,r._lazerEffectParticle=void 0,r._lazerEffect=void 0,r._particles=void 0,r._shield=void 0,r._gunModule=void 0,r._lives=void 0,r._playerId=void 0,r._tier=void 0,r._hasCombat=void 0,r._readyToConnect=!1,r._hasShield=void 0,r._bulletType=void 0,r._bulletTypeTimer=void 0,r._playerId=n,r._tier=0|s.tier,r._hasCombat=a,r._playerTexture=e.texture;var o=s.isBroken?z.shipPros.startingLives-1:z.shipPros.startingLives;r.Lives=o+Pe[s.tier],r._shield=r.scene.add.sprite(r.x,r.y,z.graphicAssets.shield.name),r._shield.setVisible(!1),r._hasShield=!1,r._bulletType=te;var l=Object(gi.a)(r),d=z.bulletPros.NORMAL_BULLET.maxBullets+Le[r._tier]+(a?1:0),c=z.bulletPros.NORMAL_BULLET.fireCooldown*Re[r._tier]*(a?.9:1),u=z.bulletPros.NORMAL_BULLET.passiveRegenCooldown,p=z.bulletPros.NORMAL_BULLET.speed;return r._gunModule=new Ei(l,d,c,u,p),r._particles=r.scene.add.particles(z.graphicAssets.particles.name),r._engine=r._particles.createEmitter({frame:["green"],scale:{start:.2,end:0},alpha:{start:.5,end:0},x:0,y:0,quantity:3,lifespan:{min:10,max:100},speed:{min:10,max:50},blendMode:"ADD",follow:Object(gi.a)(r)}),r._lazerEffectParticle=r.scene.add.particles(z.graphicAssets.lazerEffectParticle.name),r._lazerEffect=r._lazerEffectParticle.createEmitter({frame:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15"],scale:{start:1,end:0},alpha:{start:.5,end:0},x:0,y:0,quantity:3,lifespan:{min:10,max:10},speed:{min:10,max:10},blendMode:"ADD",follow:Object(gi.a)(r)}),r}return Object(oi.a)(i,[{key:"updateBulletProperty",value:function(e,t){this._bulletType=e;var i=this._bulletType===ie?z.bulletPros[e].maxBullets:z.bulletPros[e].maxBullets+Le[this._tier]+(this._hasCombat?1:0),n=z.bulletPros[e].fireCooldown*Re[this._tier]*(this._hasCombat?.9:1),s=z.bulletPros[e].passiveRegenCooldown,a=z.bulletPros[e].speed;this._gunModule.updateBullet(i,n,s,a),this.restoreBulletProperty(t)}},{key:"restoreBulletProperty",value:function(e){var t,i=this;null===(t=this._bulletTypeTimer)||void 0===t||t.remove(),this._bulletTypeTimer=this.scene.time.delayedCall(1e3*e,(function(){i._bulletType=te;var e=z.bulletPros.NORMAL_BULLET.maxBullets+Le[i._tier]+(i._hasCombat?1:0),t=z.bulletPros.NORMAL_BULLET.fireCooldown*Re[i._tier]*(i._hasCombat?.9:1),n=z.bulletPros.NORMAL_BULLET.passiveRegenCooldown,s=z.bulletPros.NORMAL_BULLET.speed;i._gunModule.updateBullet(e,t,n,s)}),null,this)}},{key:"Lives",get:function(){return this._lives},set:function(e){e>z.shipPros.startingLives+Pe[this._tier]||(this._lives=e,this.scene.registry.set("playerLives",this._lives))}},{key:"reload",value:function(){this._gunModule.reload()}},{key:"rotForward",get:function(){return this.rotation}},{key:"rotLeft",get:function(){return this.rotation-Math.PI/2}},{key:"rotRight",get:function(){return this.rotation+Math.PI/2}},{key:"rotBack",get:function(){return this.rotation+Math.PI}},{key:"angleForward",get:function(){return this.angle}},{key:"angleLeft",get:function(){return this.angle-90}},{key:"angleRight",get:function(){return this.angle+90}},{key:"angleBack",get:function(){return this.angle+180}}]),i}(bi),Oi=function(e){Object(li.a)(i,e);var t=Object(di.a)(i);function i(e){var n,s=e.sargs,a=e.id,r=e.shipPros,o=e.hasCombat,l=e.inputKeys,d=l.forward,c=l.brake,u=l.left,p=l.right,h=l.fire;return Object(ri.a)(this,i),(n=t.call(this,s,a,r,o))._shipBody=void 0,n._engineSound=void 0,n._score=void 0,n._vulnerable=void 0,n._angularVelocity=void 0,n._acceleration=void 0,n._maxVelocity=void 0,n._isExplode=void 0,n._shieldTimer=void 0,n._hasAtomic=void 0,n._hasLazer=void 0,n._forwardKey=void 0,n._brakeKey=void 0,n._leftKey=void 0,n._rightKey=void 0,n._fireKey=void 0,n._curSpeedX=void 0,n._curSpeedY=void 0,n._maxVelocity=z.shipPros.maxVelocity,n.Score=0,n._angularVelocity=z.shipPros.angularVelocity,n._acceleration=z.shipPros.acceleration,n._vulnerable=!0,n._hasAtomic=!1,n._hasLazer=!1,n._isExplode=!1,n.setDrag(z.shipPros.drag),n.setCircle(27),n.setOrigin(.5),n._shipBody=n.body,n._shipBody.setMaxVelocity(n._maxVelocity),n._forwardKey=d,n._brakeKey=c,n._leftKey=u,n._rightKey=p,n._fireKey=h,n}return Object(oi.a)(i,[{key:"Score",get:function(){return this._score},set:function(e){this._score=e,this.scene.registry.set("score",this._score)}},{key:"Vulnerable",get:function(){return this._vulnerable},set:function(e){this._vulnerable=e}},{key:"BulletType",get:function(){return this._bulletType}},{key:"setShiled",value:function(e){var t,i=this;this._vulnerable=!1,this._shield.setVisible(!0),this._hasShield=!0,this.setCircle(33),null===(t=this._shieldTimer)||void 0===t||t.remove(),this._shieldTimer=this.scene.time.delayedCall(1e3*e,(function(){i._vulnerable=!0,i._shield.setVisible(!1),i._hasShield=!1,i.setCircle(27)}),null,this)}},{key:"update",value:function(e,t){if(this._gunModule.update(e,t),this._lazerEffect.setAngle(this.angleBack),this._lazerEffect.setSpeed({min:this.body.velocity.length()-150,max:this.body.velocity.length()-100}),this._lazerEffect.followOffset.setToPolar(this.rotBack,-22),this._hasLazer?this._lazerEffect.start():this._lazerEffect.stop(),this._forwardKey.isDown?(this.setMaxVelocity(this._maxVelocity),this._engine.setAngle(this.angleBack),this._engine.setSpeed({min:this.body.velocity.length()-150,max:this.body.velocity.length()-100}),this._engine.followOffset.setToPolar(this.rotBack,25),this._engine.start(),this.scene.physics.velocityFromRotation(this.rotation,this._shipBody.velocity.length(),this._shipBody.velocity),this.scene.physics.velocityFromRotation(this.rotation,this._acceleration,this._shipBody.acceleration)):(this.scene.physics.velocityFromRotation(this.rotation,this._shipBody.velocity.length(),this._shipBody.velocity),this.scene.physics.velocityFromRotation(this.rotation,0,this._shipBody.acceleration),this._engine.stop()),this._brakeKey.isDown){var i=this._maxVelocity;i/=3,this.setMaxVelocity(i)}var n=0;this._leftKey.isDown?n+=-this._angularVelocity:this._rightKey.isDown&&(n+=this._angularVelocity),this.setAngularVelocity(n),this._fireKey.isDown?this._gunModule.setTriggerHeld(!0):this._gunModule.setTriggerHeld(!1),this._hasShield&&this._shield.setPosition(this.x,this.y),this._curSpeedX=this._shipBody.velocity.x,this._curSpeedY=this._shipBody.velocity.y}},{key:"updateToServer",value:function(e){0===this._shipBody.speed&&0===this._shipBody.rotation||e.updatePlayer(this.x,this.y,this.rotation,this._shipBody.velocity.x,this._shipBody.velocity.y,this._shipBody.angularVelocity,this._forwardKey.isDown,this._hasShield,this._fireKey.isDown,this._score,this._isExplode,this._lives)}},{key:"facing",value:function(){return new ai.a.Math.Vector2(Math.sin(this.rotation),-Math.cos(this.rotation))}},{key:"kill",value:function(){this._isExplode=!0,this._vulnerable=!1,this.Lives-=1,this._engine.stop(),this.emit("ship_death"),this.setActive(!1).setVisible(!1)}},{key:"makeTempInvulnerable",value:function(e){var t=this;this._vulnerable=!1,this._isExplode=!1;var i=this.scene.time.addEvent({delay:200,callback:function(){t.setVisible(!t.visible)},callbackScope:this,repeat:-1});this.scene.time.delayedCall(1e3*e,(function(){t._vulnerable=!0,i.remove(),t.setVisible(!0)}),null,this)}},{key:"respawn",value:function(e,t){this.setActive(!0).setVisible(!0),this.setRotation(0),this.setRotation(this.rotLeft),this.setPosition(e,t),this._shipBody.setVelocity(0),this.makeTempInvulnerable(3)}}]),i}(wi),Ai=function(e){Object(li.a)(i,e);var t=Object(di.a)(i);function i(e){var n,s=e.sargs,a=e.owner,r=e.kind;return Object(ri.a)(this,i),(n=t.call(this,s))._owner=void 0,n._bulletKind=void 0,n._timetemp=0,n._owner=a,n._bulletKind=r,n.setOrigin(.5,.5),s.texture===de.REGION_BULLET&&("explosive"===n._bulletKind?n.setCircle(100):"atomic"===n._bulletKind&&n.setSize(n.scene.cameras.main.width,n.scene.cameras.main.height),n.scene.time.addEvent({delay:50,callback:function(){n.destroy()}})),n}return Object(oi.a)(i,[{key:"preUpdate",value:function(e,t){}},{key:"updateServerDataBullet",value:function(e,t,i){switch(e){case"x":if("number"===typeof t){var n=t+this.body.velocity.x*i;this.x=n}break;case"y":if("number"===typeof t){var s=t+this.body.velocity.x*i;this.y=s}break;case"speed_x":"number"===typeof t&&this.setVelocityX(t);break;case"speed_y":"number"===typeof t&&this.setVelocityY(t)}}},{key:"updateServerDataChangesBullet",value:function(e,t){var i=this,n=Date.now(),s=e.find((function(e){return"curServerTime"===e.field})).value;if(!(s<this._timetemp)){var a=(n-s-t)/1e3;e.map((function(e){i.updateServerDataBullet(e.field,e.value,a)})),this._timetemp=s}}}]),i}(bi),ji=function(e){Object(li.a)(i,e);var t=Object(di.a)(i);function i(e){var n,s=e.sargs,a=e.type,r=e.size;return Object(ri.a)(this,i),(n=t.call(this,s))._type=void 0,n._size=void 0,n._lives=2,n._group="asteroid",n._timetemp=0,n._type=a,n._size=r,n}return Object(oi.a)(i,[{key:"launchAsteroid",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:50,s=H(t-i,t+i),a=H(t-i,t+i),r=e*Math.cos(s),o=e*Math.sin(a);this.setOrigin(.5,.5),this._size===$&&this.setCircle(29),this._size===ee&&this.setCircle(19),this.setVelocity(r,o),this.setAngularVelocity(H(-n,n))}},{key:"updateServerDataAsteroid",value:function(e,t,i){switch(e){case"x":"number"===typeof t&&(this.x=t+this.body.velocity.x*i);break;case"y":"number"===typeof t&&(this.y=t+this.body.velocity.y*i);break;case"speed_x":"number"===typeof t&&this.setVelocityX(t);break;case"speed_y":"number"===typeof t&&this.setVelocityY(t)}}},{key:"updateServerDataChangesAsteroid",value:function(e,t){var i=this,n=Date.now(),s=e.find((function(e){return"curServerTime"===e.field})).value;if(!(s<this._timetemp)){var a=(n-s-t)/1e3;e.map((function(e){i.updateServerDataAsteroid(e.field,e.value,a)})),this._timetemp=s}}}]),i}(bi),ki=ji,Ti=function(e){Object(li.a)(i,e);var t=Object(di.a)(i);function i(e){var n,s=e.sargs,a=e.kind;return Object(ri.a)(this,i),(n=t.call(this,s))._kind=void 0,n._kind=a,n}return Object(oi.a)(i,[{key:"launchAirdrop",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30,s=H(t-i,t+i),a=H(t-i,t+i),r=e*Math.cos(s),o=e*Math.sin(a);this.setOrigin(.5,.5),this.setVelocity(r,o),this.setAngularVelocity(H(-n,n))}},{key:"updateServerDataAirdrop",value:function(e,t){switch(e){case"x":"number"===typeof t&&(this.x=t);break;case"y":"number"===typeof t&&(this.y=t);break;case"speed_x":"number"===typeof t&&this.setVelocityX(t);break;case"speed_y":"number"===typeof t&&this.setVelocityY(t)}}}]),i}(bi),Li=Ti,Ri=function(e){Object(li.a)(i,e);var t=Object(di.a)(i);function i(e){var n,s=e.sargs,a=e.type,r=e.lives;Object(ri.a)(this,i),(n=t.call(this,s))._type=void 0,n._gunModule=void 0,n._group="enemy",n._lives=2,n._type=a,n._lives=r,a!==we&&a!==Oe&&a!==Ae&&a!==je||(n._group="boss");var o=Object(gi.a)(n),l=z.enemyBulletPros.maxBullets,d=a===xe||a===Ee?z.enemyBulletPros.fireCooldown:z.enemyBulletPros.bossFireCooldown,c=z.enemyBulletPros.passiveRegenCooldown,u=a===xe||a===Ee?z.enemyBulletPros.normalSpeed:z.enemyBulletPros.bossSpeed;return n._gunModule=new Si(o,l,d,c,u),n}return Object(oi.a)(i,[{key:"launchEnemy",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=z.enemyPros.angVelRange,s=H(t-i,t+i),a=H(t-i,t+i),r=e*Math.cos(s),o=e*Math.sin(a);this.setOrigin(.5,.5),this.setVelocity(r,o),this._type===xe||this._type===Ee?this.setAngularVelocity(H(-n,n)):this.setRotation(t),this._type===xe?this.setCircle(19):this._type===Ee?this.setCircle(20):this.setCircle(70)}},{key:"update",value:function(e,t){var i=this;this._gunModule.update(e,t),this.scene.time.addEvent({delay:1e3,callback:function(){i._gunModule.setTriggerHeld(!i._gunModule._triggered)},repeat:-1})}},{key:"rotForward",get:function(){return this.rotation}},{key:"rotLeft",get:function(){return this.rotation-Math.PI/2}},{key:"rotRight",get:function(){return this.rotation+Math.PI/2}},{key:"rotBack",get:function(){return this.rotation+Math.PI}},{key:"angleForward",get:function(){return this.angle}},{key:"angleLeft",get:function(){return this.angle-90}},{key:"angleRight",get:function(){return this.angle+90}},{key:"angleBack",get:function(){return this.angle+180}}]),i}(bi),Pi=Ri,Ii=function(e){Object(li.a)(i,e);var t=Object(di.a)(i);function i(e){var n,s=e.sargs,a=e.owner;return Object(ri.a)(this,i),(n=t.call(this,s))._owner=void 0,n._group="enemyBullet",n._owner=a,n.setOrigin(.5,.5),n}return Object(oi.a)(i)}(bi),Mi=function(e){Object(li.a)(i,e);var t=Object(di.a)(i);function i(){var e;return Object(ri.a)(this,i),(e=t.call(this,"play"))._network=void 0,e._myShip=void 0,e._myBullet=void 0,e._account=void 0,e._tokenId=void 0,e._shipName=void 0,e._ships=void 0,e._otherShips=void 0,e._otherShipMap=new Map,e._bullets=void 0,e._regionBullets=void 0,e._enemies=void 0,e._airdrops=void 0,e._worldBounds=void 0,e._backgroundSprite=void 0,e._particles=void 0,e._destroyedSound=void 0,e._fireSound=void 0,e._bulletSound=void 0,e._bgSound=void 0,e._airdropPercentAsteroid=void 0,e._airdropPercentEnemy=void 0,e._airdropPercentBoss=void 0,e._airdropDuration=void 0,e._airdropTimer=void 0,e._startingAsteroids=void 0,e._maxAsteroids=void 0,e._incrementAsteroids=void 0,e._minAsteroidSpeed=void 0,e._maxAsteroidSpeed=void 0,e._minEnemySpeed=void 0,e._maxEnemySpeed=void 0,e._startingEnemies=void 0,e._increaseEnemies=void 0,e._enemyLives=void 0,e._startingBoss=void 0,e._bossLives=void 0,e._increaseBoss=void 0,e._enemyBulletVelocity=void 0,e._bossSpeed=void 0,e._width=void 0,e._height=void 0,e._center=void 0,e._level=void 0,e._levelTimer=void 0,e._readyNewLevel=void 0,e._passedIntro=void 0,e._specialKey=void 0,e._isEnableSoundEffect=void 0,e._isEnableBgSound=void 0,e}return Object(oi.a)(i,[{key:"init",value:function(){this._width=z.gamePros.screenWidth,this._height=z.gamePros.screenHeight,this._center={x:this._width/2,y:this._height/2},this._level=0,this._readyNewLevel=!1,this._passedIntro=!1,this._isEnableSoundEffect=!0,this._isEnableBgSound=!0,this._startingAsteroids=z.asteroidPros.startingAsteroids,this._maxAsteroids=z.asteroidPros.maxAsteroids,this._incrementAsteroids=z.asteroidPros.incrementAsteroids,this._minAsteroidSpeed=z.asteroidPros.minSpeed,this._maxAsteroidSpeed=z.asteroidPros.maxSpeed,this._minEnemySpeed=z.enemyPros.minSpeed,this._maxEnemySpeed=z.enemyPros.maxSpeed,this._startingEnemies=z.enemyPros.startingEnemies,this._increaseEnemies=z.enemyPros.incrementEnemies,this._enemyBulletVelocity=z.enemyBulletPros.velocity,this._enemyLives=z.enemyBulletPros.lives,this._startingBoss=z.enemyPros.startingBoss,this._increaseBoss=z.enemyPros.incrementBoss,this._bossLives=z.enemyPros.bossLives,this._bossSpeed=z.enemyBulletPros.bossSpeed,this._airdropPercentAsteroid=z.airdropPros.percentAsteroid,this._airdropPercentEnemy=z.airdropPros.percentEnemy,this._airdropPercentBoss=z.airdropPros.percentBoss,this._airdropDuration=z.airdropPros.duration,this.initAssets(),this.initWorld()}},{key:"initWorld",value:function(){this._ships=this.physics.add.group(),this._ships.runChildUpdate=!0,this._otherShips=this.physics.add.group(),this._otherShips.runChildUpdate=!0,this._bullets=this.physics.add.group(),this._bullets.runChildUpdate=!0,this._regionBullets=this.physics.add.group(),this._regionBullets.runChildUpdate=!0,this._airdrops=this.physics.add.group(),this._airdrops.runChildUpdate=!0,this._enemies=this.physics.add.group(),this._enemies.runChildUpdate=!0,this._backgroundSprite=this.add.sprite(0,0,z.graphicAssets.background.name),this._backgroundSprite.displayWidth=z.gamePros.screenWidth,this._backgroundSprite.displayHeight=z.gamePros.screenHeight,this._backgroundSprite.setOrigin(0),this.initWorldBounds(),this.physics.add.overlap(this._ships,this._enemies,this.shipEnemyCollision,null,this),this.physics.add.overlap(this._ships,this._airdrops,this.shipAirdropCollision,null,this),this.physics.add.overlap([this._bullets,this._regionBullets],this._enemies,this.bulletEnemyCollision,null,this),this.physics.add.overlap(this._bullets,this._worldBounds,(function(e,t){e.destroy()})),this.physics.add.overlap(this._enemies,this._worldBounds,this.respawnEnemies,null,this)}},{key:"initWorldBounds",value:function(){var e=this._width/2+100,t=this._height/2+100,i=this._center.x-e,n=this._center.x+(e-5),s=this._center.y-t,a=this._center.y+(t-5),r=n-i,o=a-s,l=s+o/2,d=i+r/2;this._worldBounds=this.physics.add.staticGroup(),this._worldBounds.add(new ai.a.GameObjects.Rectangle(this,d,s,r,5)),this._worldBounds.add(new ai.a.GameObjects.Rectangle(this,i,l,5,o)),this._worldBounds.add(new ai.a.GameObjects.Rectangle(this,d,a,r,5,1)),this._worldBounds.add(new ai.a.GameObjects.Rectangle(this,n,l,5,o,0))}},{key:"initShip",value:function(e,t,i){var n=this,s={forward:this.input.keyboard.addKey(i.forward),brake:this.input.keyboard.addKey(i.brake),left:this.input.keyboard.addKey(i.left),right:this.input.keyboard.addKey(i.right),fire:this.input.keyboard.addKey(i.fire)};this._myShip=new Oi({sargs:{scene:this,group:this._ships,x:this.cameras.main.centerX,y:this.cameras.main.centerY,texture:e.spaceship},id:1,shipPros:e,hasCombat:t,inputKeys:s}),this._myShip.setRotation(this._myShip.rotLeft);var a=this.sound.add(z.soundAssets.shipExplose.name,{volume:.5});a.on("complete",(function(){n._myShip.Lives<1?n.gameOver():n._myShip.respawn(n._width/2,n._height/2)})),this._myShip.on("ship_death",(function(){a.play(),n._particles.shipExplode.emitParticleAt(n._myShip.x,n._myShip.y)})),this._myShip._engineSound=this.sound.add(z.soundAssets.engine.name,{loop:!0,volume:.5}),this._isEnableSoundEffect&&this._myShip._engineSound.play(),this._myShip._engineSound.pause()}},{key:"initAssets",value:function(){var e=this;this._bulletSound=this.sound.add(z.soundAssets.fire.name),this._destroyedSound=this.sound.add(z.soundAssets.destroyed.name),this._fireSound=this.sound.add(z.soundAssets.fire.name),this._particles={};var t=this.add.particles(z.graphicAssets.particles.name);t.setDepth(9);this._particles.bulletImpact=t.createEmitter({frame:["blue","red","orange"],scale:{start:.2,end:0},quantity:30,alpha:{start:1,end:0},lifespan:{min:500,max:1e3},speed:{min:120,max:150},frequency:-1,blendMode:"ADD"}),this._particles.asteroidExplode=t.createEmitter({frame:["white","red"],scale:{start:.3,end:0},quantity:60,alpha:{start:1,end:0},lifespan:{min:300,max:600},speed:{min:20,max:150},frequency:-1,blendMode:"ADD"}),this._particles.shipExplode=t.createEmitter({frame:["white","red","orange"],scale:{start:.6,end:0},quantity:60,alpha:{start:1,end:0},lifespan:{min:300,max:600},speed:{min:20,max:150},frequency:-1,blendMode:"ADD"}),this.time.addEvent({delay:1e3,callback:function(){e._bgSound=e.sound.add(z.soundAssets.bg.name)}})}},{key:"create",value:function(e){var t=this;this._airdropDuration*=Ie[e.shipPros.tier],this.registry.set("bonusLives",Pe[e.shipPros.tier]),this._specialKey=e.gameProps.keyboard.special,this.scene.launch("text",{level:1}),this.initShip(e.shipPros,e.gameProps.hasCombat,e.gameProps.keyboard),this._account=e.shipPros.account,this._tokenId=e.shipPros.tokenID,this._shipName=e.shipPros.shipName,e.shipPros.hasShield&&(this._myShip.setShiled(this._airdropDuration),Tt.dispatch(ct(ce.SHIELD)),Tt.dispatch(ut(this._airdropDuration))),this._startingAsteroids+=Me[e.gameProps.difficulty].STARTING_ASTEROIDS,this._incrementAsteroids+=Me[e.gameProps.difficulty].INCREASE_ASTEROIDS,this._maxAsteroids+=Me[e.gameProps.difficulty].MAX_ASTEROIDS,this._minAsteroidSpeed*=Me[e.gameProps.difficulty].MIN_ASTEROID_SPEED,this._maxAsteroidSpeed*=Me[e.gameProps.difficulty].MAX_ASTEROID_SPEED,this._startingEnemies+=Me[e.gameProps.difficulty].STARTING_ENEMIES,this._increaseEnemies+=Me[e.gameProps.difficulty].INCREASE_ENEMIES,this._minEnemySpeed*=Me[e.gameProps.difficulty].MIN_ENEMY_SPEED,this._maxEnemySpeed*=Me[e.gameProps.difficulty].MAX_ENEMY_SPEED,this.input.keyboard.on("keyup-".concat(e.gameProps.keyboard.sounds),(function(){t._isEnableSoundEffect=!t._isEnableSoundEffect,mi.emit(hi.TOGGLE_SOUNDS,t._isEnableSoundEffect)}),this),this.input.keyboard.on("keyup-".concat(e.gameProps.keyboard.music),(function(){t._isEnableBgSound=!t._isEnableBgSound,t._isEnableBgSound?t._bgSound.play():t._bgSound.stop()}),this),this.input.keyboard.on("keyup-".concat(e.gameProps.keyboard.exit),(function(){Tt.dispatch(ht(!0))}),this),mi.on(hi.EXIST_GAME,(function(){t.gameOver()})),this.time.addEvent({delay:2e3,callback:function(){t._bgSound.play()}})}},{key:"shipEnemyCollision",value:function(e,t){e._hasShield?("asteroid"===t._group&&this.splitAsteroid(t),this._particles.asteroidExplode.emitParticleAt(t.x,t.y),this._isEnableSoundEffect&&this._destroyedSound.play(),t.destroy()):e.Vulnerable&&e.kill()}},{key:"shipAirdropCollision",value:function(e,t){t._kind===be||(t._kind===ge?Tt.dispatch(pt(!0)):t._kind===fe?(Tt.dispatch(ct(t._kind)),Tt.dispatch(ut(this._airdropDuration))):(Tt.dispatch(lt(t._kind)),Tt.dispatch(dt(this._airdropDuration)))),t._kind===ge?e._hasAtomic=!0:t._kind===be?e.Lives+=1:t._kind===fe?e.setShiled(this._airdropDuration):e.updateBulletProperty(t._kind,this._airdropDuration),t.destroy()}},{key:"bulletEnemyCollision",value:function(e,t){if("normal"===e._bulletKind&&e._owner._bulletType===oe)return e.destroy(),void this.spawnRegionBullet(t.x,t.y,e._owner,"explosive");if("asteroid"===t._group){if(t._type===Q&&2===t._lives)return t._lives--,this._particles.asteroidExplode.emitParticleAt(t.x,t.y),void(e._owner._bulletType!==re&&e.destroy());e._owner.Score+=1,this.spawnRandomAirdrop(t,this._airdropPercentAsteroid),this.splitAsteroid(t)}if("enemy"===t._group||"boss"===t._group){if("enemy"===t._group&&2===t._lives)return t._lives--,this._particles.asteroidExplode.emitParticleAt(t.x,t.y),void(e._owner._bulletType!==re&&e.destroy());if("boss"===t._group&&t._lives>1)return t._lives--,this._particles.asteroidExplode.emitParticleAt(t.x,t.y),void(e._owner._bulletType!==re&&e.destroy());"enemy"===t._group&&(e._owner.Score+=10,this.spawnRandomAirdrop(t,this._airdropPercentEnemy)),"boss"===t._group&&(e._owner.Score+=80,this.spawnRandomAirdrop(t,this._airdropPercentBoss))}this._particles.asteroidExplode.emitParticleAt(t.x,t.y),this._isEnableSoundEffect&&this._destroyedSound.play(),"atomic"!==e._bulletKind&&e._owner.reload(),e._owner._bulletType!==re&&e.destroy(),t.destroy()}},{key:"spawnRandomBullet",value:function(e,t,i,n,s){var a=this;switch(s._bulletType){case ne:for(var r=s.body.velocity,o=(new ai.a.Math.Vector2).setToPolar(i,n).add(r),l=Math.sqrt(o.x*o.x+o.y*o.y),d={x:o.x/l,y:o.y/l},c=-1;c<=1;c+=2){var u=this.spawnBullet(e-15*d.y*c,t+15*d.x*c,s);u.rotation=s.rotation,u.setVelocity(o.x,o.y)}break;case se:for(var p=s.body.velocity,h=(new ai.a.Math.Vector2).setToPolar(i,n).add(p),m=Math.sqrt(h.x*h.x+h.y*h.y),y={x:h.x/m,y:h.y/m},_=-1;_<=1;_++){var g=this.spawnBullet(e-15*y.y*_,t+15*y.x*_,s);g.rotation=s.rotation,g.setVelocity(h.x,h.y)}break;case ae:for(var b=-1;b<=1;b++){var f=b*Math.PI/10,v=this.spawnBullet(e,t,s);v.rotation=s.rotation+f;var x=s.body.velocity,E=(new ai.a.Math.Vector2).setToPolar(i,n).add(x).length(),S=s.rotation;v.setVelocity(E*Math.cos(S+f),E*Math.sin(S+f))}break;case oe:var w=this.spawnBullet(e,t,s);w.rotation=s.rotation;var O=s.body.velocity,A=(new ai.a.Math.Vector2).setToPolar(i,n);w.setVelocity(O.x+A.x,O.y+A.y);break;case re:s._hasLazer=!0,setTimeout((function(){var i=a.spawnBullet(e,t,s);i.rotation=s.rotation;var r=s.body.velocity,o=(new ai.a.Math.Vector2).setToPolar(s.rotation,n);i.setVelocity(r.x+o.x,r.y+o.y),s._hasLazer=!1}),500);break;case le:var j=this.spawnBullet(e,t,s);j.rotation=s.rotation;var k=s.body.velocity,T=(new ai.a.Math.Vector2).setToPolar(i,n);j.setVelocity(k.x+T.x,k.y+T.y);break;default:var L=this.spawnBullet(e,t,s);L.rotation=s.rotation;var R=s.body.velocity,P=(new ai.a.Math.Vector2).setToPolar(i,n);L.setVelocity(R.x+P.x,R.y+P.y)}}},{key:"spawnBullet",value:function(e,t,i){var n,s;return i._bulletType===re?(n=i.x,s=i.y):(n=e,s=t),new Ai({sargs:{scene:this,group:this._bullets,x:n,y:s,texture:de[i._bulletType],frame:0},owner:i,kind:"normal"})}},{key:"spawnRegionBullet",value:function(e,t,i,n){return this._myBullet=new Ai({sargs:{scene:this,group:this._regionBullets,x:e,y:t,texture:de.REGION_BULLET,frame:0},owner:i,kind:n}),this._myBullet}},{key:"spawnRandomAsteroid",value:function(e,t){var i=this.getOuterRimCoords(),n=i.x,s=i.y,a=i.dir;this.spawnAsteroid(n,s,e,t).launchAsteroid(H(this._minAsteroidSpeed,this._maxAsteroidSpeed),a+Math.PI,J)}},{key:"spawnAsteroid",value:function(e,t,i,n){return new ki({sargs:{scene:this,group:this._enemies,x:e,y:t,texture:q[i][n],frame:Math.round(2*Math.random())},type:i,size:n})}},{key:"respawnEnemies",value:function(e,t){var i=this.getOuterRimCoords(),n=i.x,s=i.y,a=i.dir;e.setPosition(n,s),"enemy"===e._group?e.launchEnemy(H(this._minEnemySpeed,this._maxEnemySpeed),a+Math.PI,J):"asteroid"===e._group?e.launchAsteroid(H(this._minAsteroidSpeed,this._maxAsteroidSpeed),a+Math.PI,J):"enemyBullet"===e._group&&e.destroy()}},{key:"splitAsteroid",value:function(e){if(e._size!==ee)for(var t=e._type,i=ee,n=e.body.velocity,s=e.getCenter(),a=s.x,r=s.y,o=0;o<2;o++){var l=ai.a.Math.RandomXY(new ai.a.Math.Vector2,40),d=l.x,c=l.y;this.spawnAsteroid(a+d,r+c,t,i).launchAsteroid(H(this._minAsteroidSpeed,this._maxAsteroidSpeed),n.angle(),J,60)}}},{key:"spawnRandomEnemies",value:function(e,t){var i=this.getOuterRimCoords(),n=i.x,s=i.y,a=i.dir;this.spawnEnemy(n,s,e,t).launchEnemy(H(this._minEnemySpeed,this._maxEnemySpeed),a+Math.PI,J-Math.PI)}},{key:"spawnEnemy",value:function(e,t,i,n){return new Pi({sargs:{scene:this,group:this._enemies,x:e,y:t,texture:ve[i],frame:Math.round(2*Math.random())},type:i,lives:n})}},{key:"spawnRandomEnemyBullet",value:function(e,t,i,n,s){if(s._type===xe){var a=this.spawnEnemyBullet(e,t,s);a.rotation=i;var r=s.body.velocity,o=(new ai.a.Math.Vector2).setToPolar(i,n);a.setVelocity(r.x+o.x,r.y+o.y)}else if(s._type===Ee)for(var l=0;l<10;l++){var d=l*Math.PI/5,c=this.spawnEnemyBullet(e,t,s),u=this._enemyBulletVelocity;c.setVelocity(u.x*Math.cos(d),u.y*Math.sin(d))}else if(s._type===we||s._type===Oe){var p=this.spawnEnemyBullet(e,t,s),h={x:this._myShip.x-s.x,y:this._myShip.y-s.y},m=Math.sqrt(h.x*h.x+h.y*h.y),y={x:h.x/m,y:h.y/m},_={x:y.x*this._bossSpeed,y:y.y*this._bossSpeed};p.setVelocity(_.x,_.y)}else if(s._type===Ae||s._type===je)for(var g={x:this._myShip.x-s.x,y:this._myShip.y-s.y},b=Math.sqrt(g.x*g.x+g.y*g.y),f={x:g.x/b,y:g.y/b},v={x:f.x*this._bossSpeed,y:f.y*this._bossSpeed},x=Math.sqrt(v.x*v.x+v.y*v.y),E={x:v.x/x,y:v.y/x},S=-1;S<=1;S+=2){this.spawnEnemyBullet(e-15*E.y*S,t+15*E.x*S,s).setVelocity(v.x,v.y)}}},{key:"spawnEnemyBullet",value:function(e,t,i){var n=i._type.startsWith("NORMAL")?z.graphicAssets.enemyBullet.name:z.graphicAssets.rocketBullet.name;return new Ii({sargs:{scene:this,group:this._enemies,x:e,y:t,texture:n,frame:0},owner:i})}},{key:"spawnRandomAirdrop",value:function(e,t){var i=this;if(W(t)){var n=H(0,9),s="";s=n<=1?ue:n<=2?pe:n<=3?he:n<=4?me:n<=5?ye:n<=6?_e:n<=7?be:n<=8?ge:fe;var a=this.getOuterRimCoords().dir,r=this.spawnAirdrop(e.x,e.y,s);r.launchAirdrop(10+H(-5,10),a+Math.PI,J);var o=this.time.delayedCall(1e3*z.airdropPros.alertTime,(function(){i.time.addEvent({delay:500,callback:function(){r.setVisible(!r.visible)},callbackScope:i,repeat:-1})}));this.time.delayedCall(1e3*z.airdropPros.lifetime,(function(){o.remove(),r.destroy()}))}}},{key:"spawnAirdrop",value:function(e,t,i){return new Li({sargs:{scene:this,group:this._airdrops,x:e,y:t,texture:ce[i],frame:Math.round(2*Math.random())},kind:i})}},{key:"getOuterRimCoords",value:function(){var e=0,t=0,i=0,n=Math.random()*(2*this._width+2*this._height);return n<this._width?(e=n,t=0,i=-H(.1,.9)*Math.PI):n<this._width+this._height?(e=this._width,t=n-this._width,i=H(-.4,.4)*Math.PI):n<2*this._width+this._height?(e=n-this._width-this._height,t=this._height,i=H(.1,.9)*Math.PI):(e=0,t=n-2*this._width-this._height,i=H(.6,1.4)*Math.PI),{x:e,y:t,dir:i}}},{key:"gameOver",value:function(){this.sound.stopAll(),this.scene.stop("play"),this.scene.stop("text"),this.scene.launch("gameOver",{score:this._myShip.Score})}},{key:"nextAsteroids",value:function(){this._startingAsteroids=Math.min(this._startingAsteroids+this._incrementAsteroids,this._maxAsteroids);for(var e=0;e<this._startingAsteroids;e++){var t=1===this._level||H(0,1)>=.5?Z:Q,i=$;this.spawnRandomAsteroid(t,i)}}},{key:"nextEnemies",value:function(e,t,i){if(t!==Se)for(var n=0;n<e;n++)this.spawnRandomEnemies(t,i);else{this.spawnRandomEnemies(xe,i),this.spawnRandomEnemies(Ee,i);for(var s=0;s<e-2;s++){var a=H(1,3)>=2?Ee:xe;this.spawnRandomEnemies(a,i)}}}},{key:"nextLevel",value:function(){var e=this;if(this._passedIntro=!1,this.time.removeEvent(this._levelTimer),this._readyNewLevel=!1,this._levelTimer=this.time.addEvent({delay:2e3,callback:function(){e._readyNewLevel=!1}}),this._level++,this.registry.set("level",this._level),7===this._level||this._level>=8&&this._level%4===0||this.nextAsteroids(),this._level>=3&&!(this._level>=8&&this._level%4===0)){this._startingEnemies+=this._increaseEnemies;var t=this._level>=5?Se:xe;this.nextEnemies(this._startingEnemies,t,this._enemyLives)}if(this._level>=8&&this._level%4===0){12!==this._level&&(this._startingBoss+=this._increaseBoss);var i=H(0,1)>.5?we:Oe;this.nextEnemies(this._startingBoss,i,this._bossLives)}if(this._level>=12&&this._level%4===0){var n=H(0,1)>.5?Ae:je;this._bossLives+=5,this.nextEnemies(this._startingBoss,n,this._bossLives)}}},{key:"introNewEnemy",value:function(e){this.nextEnemies(1,e,this._bossLives)}},{key:"newMission",value:function(){var e=this;2!==this._level||this._passedIntro?4!==this._level||this._passedIntro?(this.registry.set("endLevel",this._level),this.registry.set("newEnemy",-1),this._levelTimer=this.time.addEvent({delay:z.gamePros.endLevelDelay,callback:function(){e._readyNewLevel=!0,e.registry.set("endLevel",-1)}})):(this._passedIntro=!0,this.registry.set("newEnemy",1),this.introNewEnemy(Ee),this._levelTimer=this.time.addEvent({delay:z.gamePros.introNewEnemyDelay,callback:function(){e.registry.set("newEnemy",-1)}})):(this._passedIntro=!0,this.registry.set("newEnemy",1),this.introNewEnemy(xe),this._levelTimer=this.time.addEvent({delay:z.gamePros.introNewEnemyDelay,callback:function(){e.registry.set("newEnemy",-1)}}))}},{key:"update",value:function(e,t){this.physics.world.wrap(this._ships);var i=this._enemies.children.entries.filter((function(e){return"enemyBullet"!==e._group})).length;i<=0&&this.newMission(),i<=0&&!0===this._readyNewLevel&&this.nextLevel(),this.input.keyboard.addKey(this._specialKey).isDown&&this._myShip._hasAtomic&&(this.spawnRegionBullet(this._center.x,this._center.y,this,"atomic"),this._myShip._hasAtomic=!1,Tt.dispatch(pt(!1)))}}]),i}(ai.a.Scene),Bi=function(e){Object(li.a)(i,e);var t=Object(di.a)(i);function i(e){var n,s=e.sargs,a=e.id,r=(e.shipPros,e.tier);return Object(ri.a)(this,i),(n=t.call(this,s,a,r,!1))._shipBody=void 0,n._engineSound=void 0,n._targetPosition=void 0,n._rotation=void 0,n._isForwarding=void 0,n._isBraking=void 0,n._angVel=void 0,n._hasShield=void 0,n._isFire=void 0,n._lastUpdateTimestamp=void 0,n._connected=!1,n._isExplode=void 0,n._explodeDone=!1,n._isEnableSoundEffect=!1,n._shipId=void 0,n._timetemp=0,n._shipId=a,n._targetPosition={x:s.x,y:s.y},n._shipBody=n.body,n._angVel=180,n}return Object(oi.a)(i,[{key:"updateOtherPlayer",value:function(e,t,i){switch(e){case"name":"string"===typeof t&&this._playerName.setText(t);break;case"x":"number"===typeof t&&(this._targetPosition.x=t+this._shipBody.velocity.x*i);break;case"y":"number"===typeof t&&(this._targetPosition.y=t+this._shipBody.velocity.y*i);break;case"angularVel":"number"===typeof t&&(t>0?this._rotation+=Math.PI/2*i:this._rotation-=Math.PI/2*i);break;case"rotation":"number"===typeof t&&(this._rotation=t);break;case"isForwarding":"boolean"===typeof t&&(this._isForwarding=t,this.setMaxVelocity(200));break;case"isFire":"boolean"===typeof t&&(this._isFire=t);break;case"hasShield":"boolean"===typeof t&&(this._hasShield=t);break;case"isExplode":"boolean"===typeof t&&(this._isExplode=t);break;case"readyToConnect":"boolean"===typeof t&&(this._readyToConnect=t);break;case"lives":"number"===typeof t&&(this._lives=t)}}},{key:"updateOtherPlayerChanges",value:function(e,t){var i=this,n=Date.now(),s=e.find((function(e){return"curServerTime"===e.field})),a=null===s||void 0===s?void 0:s.value;if(!(a<this._timetemp)){var r=(n-a-t)/1e3;e.map((function(e){i.updateOtherPlayer(e.field,e.value,r)})),this._timetemp=a}}},{key:"preUpdate",value:function(e,t){Object(fi.a)(Object(vi.a)(i.prototype),"preUpdate",this).call(this,e,t),this._gunModule.update(e,t),this.x+=.5*((this._targetPosition.x||this.x)-this.x),this.y+=.5*((this._targetPosition.y||this.y)-this.y);var n=((this._rotation||this.rotation)-this.rotation)/(2*Math.PI);n=(n-=Math.round(n))*Math.PI*2,this.rotation+=n,this._lastUpdateTimestamp=e,this.setDepth(this.y),this._isForwarding?(this._engine.setAngle(this.angleBack),this._engine.setSpeed({min:100+this.body.velocity.length(),max:150+this.body.velocity.length()}),this._engine.followOffset.setToPolar(this.rotBack,8),this._isEnableSoundEffect=!0,this._engine.start()):(this._engine.stop(),this._isEnableSoundEffect=!1),this._shield.setVisible(this._hasShield),this._shield.setPosition(this.x,this.y),this._isExplode&&this.kill()}},{key:"kill",value:function(){this._engine.stop(),this.emit("ship_death"),this.setActive(!1).setVisible(!1),this._explodeDone=!0}},{key:"makeTempInvulnerable",value:function(e){var t=this,i=this.scene.time.addEvent({delay:200,callback:function(){t.setVisible(!t.visible)},callbackScope:this,repeat:-1});this.scene.time.delayedCall(1e3*e,(function(){i.remove(),t.setVisible(!0)}),null,this)}},{key:"respawn",value:function(e,t){this.setActive(!0).setVisible(!0),this.setRotation(0),this.setRotation(this.rotLeft),this.setPosition(e,t),this._shipBody.setVelocity(0),this.makeTempInvulnerable(3)}}]),i}(wi),Ci=function(e){Object(li.a)(i,e);var t=Object(di.a)(i);function i(){var e;return Object(ri.a)(this,i),(e=t.call(this,"multiplay"))._network=void 0,e._myShip=void 0,e._account=void 0,e._tokenId=void 0,e._shipName=void 0,e._mySessionId=void 0,e._ships=void 0,e._otherShips=void 0,e._otherShipMap=new Map,e._bullets=void 0,e._bulletsMap=new Map,e._asteroids=void 0,e._asteroidsMap=new Map,e._regionBullets=void 0,e._enemies=void 0,e._airdrops=void 0,e._airdropsMap=new Map,e._worldBounds=void 0,e._backgroundSprite=void 0,e._particles=void 0,e._destroyedSound=void 0,e._fireSound=void 0,e._bulletSound=void 0,e._bgSound=void 0,e._deathSound=void 0,e._airdropPercentAsteroid=void 0,e._airdropPercentEnemy=void 0,e._airdropPercentBoss=void 0,e._airdropDuration=void 0,e._airdropTimer=void 0,e._startingAsteroids=void 0,e._maxAsteroids=void 0,e._incrementAsteroids=void 0,e._minAsteroidSpeed=void 0,e._maxAsteroidSpeed=void 0,e._minEnemySpeed=void 0,e._maxEnemySpeed=void 0,e._startingEnemies=void 0,e._increaseEnemies=void 0,e._enemyLives=void 0,e._startingBoss=void 0,e._bossLives=void 0,e._increaseBoss=void 0,e._enemyBulletVelocity=void 0,e._bossSpeed=void 0,e._width=void 0,e._height=void 0,e._center=void 0,e._level=void 0,e._levelTimer=void 0,e._readyNewLevel=void 0,e._passedIntro=void 0,e._specialKey=void 0,e._isEnableSoundEffect=void 0,e._isEnableBgSound=void 0,e._shot=void 0,e._waitingText=void 0,e._gameStarted=void 0,e._shipPros=void 0,e._joyStick=void 0,e}return Object(oi.a)(i,[{key:"preLoad",value:function(){}},{key:"init",value:function(){this._width=z.gamePros.screenWidth,this._height=z.gamePros.screenHeight,this._center={x:this._width/2,y:this._height/2},this._level=0,this._readyNewLevel=!1,this._passedIntro=!1,this._isEnableSoundEffect=!0,this._isEnableBgSound=!0,this._startingAsteroids=z.asteroidPros.startingAsteroids,this._maxAsteroids=z.asteroidPros.maxAsteroids,this._incrementAsteroids=z.asteroidPros.incrementAsteroids,this._minAsteroidSpeed=z.asteroidPros.minSpeed,this._maxAsteroidSpeed=z.asteroidPros.maxSpeed,this._minEnemySpeed=z.enemyPros.minSpeed,this._maxEnemySpeed=z.enemyPros.maxSpeed,this._startingEnemies=z.enemyPros.startingEnemies,this._increaseEnemies=z.enemyPros.incrementEnemies,this._enemyBulletVelocity=z.enemyBulletPros.velocity,this._enemyLives=z.enemyBulletPros.lives,this._startingBoss=z.enemyPros.startingBoss,this._increaseBoss=z.enemyPros.incrementBoss,this._bossLives=z.enemyPros.bossLives,this._bossSpeed=z.enemyBulletPros.bossSpeed,this._airdropPercentAsteroid=z.airdropPros.percentAsteroid,this._airdropPercentEnemy=z.airdropPros.percentEnemy,this._airdropPercentBoss=z.airdropPros.percentBoss,this._airdropDuration=z.airdropPros.duration,this.initAssets(),this.initWorld(),this._shot=!1,this._gameStarted=!1}},{key:"initWorld",value:function(){this._ships=this.physics.add.group(),this._ships.runChildUpdate=!0,this._otherShips=this.physics.add.group(),this._otherShips.runChildUpdate=!0,this._bullets=this.physics.add.group(),this._bullets.runChildUpdate=!0,this._asteroids=this.physics.add.group(),this._asteroids.runChildUpdate=!0,this._regionBullets=this.physics.add.group(),this._regionBullets.runChildUpdate=!0,this._airdrops=this.physics.add.group(),this._airdrops.runChildUpdate=!0,this._enemies=this.physics.add.group(),this._enemies.runChildUpdate=!0,this._backgroundSprite=this.add.sprite(0,0,z.graphicAssets.background.name),this._backgroundSprite.displayWidth=z.gamePros.screenWidth,this._backgroundSprite.displayHeight=z.gamePros.screenHeight,this._backgroundSprite.setOrigin(0),this.initWorldBounds()}},{key:"initWorldBounds",value:function(){var e=this._width/2+100,t=this._height/2+100,i=this._center.x-e,n=this._center.x+(e-5),s=this._center.y-t,a=this._center.y+(t-5),r=n-i,o=a-s,l=s+o/2,d=i+r/2;this._worldBounds=this.physics.add.staticGroup(),this._worldBounds.add(new ai.a.GameObjects.Rectangle(this,d,s,r,5)),this._worldBounds.add(new ai.a.GameObjects.Rectangle(this,i,l,5,o)),this._worldBounds.add(new ai.a.GameObjects.Rectangle(this,d,a,r,5,1)),this._worldBounds.add(new ai.a.GameObjects.Rectangle(this,n,l,5,o,0))}},{key:"initShip",value:function(e,t,i){var n=this,s={forward:this.input.keyboard.addKey(i.forward),brake:this.input.keyboard.addKey(i.brake),left:this.input.keyboard.addKey(i.left),right:this.input.keyboard.addKey(i.right),fire:this.input.keyboard.addKey(i.fire)};this._shipPros=e,this._myShip=new Oi({sargs:{scene:this,group:this._ships,x:this.cameras.main.centerX,y:this.cameras.main.centerY,texture:e.spaceship},id:1,shipPros:e,hasCombat:t,inputKeys:s}),this._myShip.setRotation(this._myShip.rotLeft);var a=this.sound.add(z.soundAssets.shipExplose.name,{volume:.5});a.on("complete",(function(){n._myShip.Lives<1?n.gameOver():n._myShip.respawn(n._width/2,n._height/2)})),this._myShip.on("ship_death",(function(){a.play(),n._particles.shipExplode.emitParticleAt(n._myShip.x,n._myShip.y)})),this._myShip._engineSound=this.sound.add(z.soundAssets.engine.name,{loop:!0,volume:.5}),this._isEnableSoundEffect&&this._myShip._engineSound.play(),this._myShip._engineSound.pause()}},{key:"initAssets",value:function(){var e=this;this._bulletSound=this.sound.add(z.soundAssets.fire.name),this._destroyedSound=this.sound.add(z.soundAssets.destroyed.name),this._fireSound=this.sound.add(z.soundAssets.fire.name),this._deathSound=this.sound.add(z.soundAssets.shipExplose.name,{volume:.5}),this._particles={};var t=this.add.particles(z.graphicAssets.particles.name);t.setDepth(9);this._particles.bulletImpact=t.createEmitter({frame:["blue","red","orange"],scale:{start:.2,end:0},quantity:30,alpha:{start:1,end:0},lifespan:{min:500,max:1e3},speed:{min:120,max:150},frequency:-1,blendMode:"ADD"}),this._particles.asteroidExplode=t.createEmitter({frame:["white","red"],scale:{start:.3,end:0},quantity:60,alpha:{start:1,end:0},lifespan:{min:300,max:600},speed:{min:20,max:150},frequency:-1,blendMode:"ADD"}),this._particles.shipExplode=t.createEmitter({frame:["white","red","orange"],scale:{start:.6,end:0},quantity:60,alpha:{start:1,end:0},lifespan:{min:300,max:600},speed:{min:20,max:150},frequency:-1,blendMode:"ADD"}),this.time.addEvent({delay:1e3,callback:function(){e._bgSound=e.sound.add(z.soundAssets.bg.name)}})}},{key:"create",value:function(e){var t=this;console.log("this.sys.game.device.os",this.sys.game.device.os);var i=this.sys.game.device.os;if(this._joyStick=this.plugins.get("rexvirtualjoystickplugin"),console.log("joystick",this._joyStick),!0===i.android&&(this._joyStick.add(this,{x:200,y:800,radius:100,base:this.add.circle(0,0,100,8947848),thumb:this.add.circle(0,0,50,13421772)}),this.dumpJoyStickState()),this._airdropDuration*=Ie[e.shipPros.tier],this.registry.set("bonusLives",Pe[e.shipPros.tier]),this._specialKey=e.gameProps.keyboard.special,this.scene.launch("text",{level:""}),!e.network)throw new Error("server instance missing");this._network=e.network,this._mySessionId=e.network._mySessionId,this.initShip(e.shipPros,e.gameProps.hasCombat,e.gameProps.keyboard),this._account=e.shipPros.account,this._tokenId=e.shipPros.tokenID,this._shipName=e.shipPros.shipName,e.shipPros.hasShield&&(this._myShip.setShiled(this._airdropDuration),Tt.dispatch(ct(ce.SHIELD)),Tt.dispatch(ut(this._airdropDuration))),this._startingAsteroids+=Me[e.gameProps.difficulty].STARTING_ASTEROIDS,this._incrementAsteroids+=Me[e.gameProps.difficulty].INCREASE_ASTEROIDS,this._maxAsteroids+=Me[e.gameProps.difficulty].MAX_ASTEROIDS,this._minAsteroidSpeed*=Me[e.gameProps.difficulty].MIN_ASTEROID_SPEED,this._maxAsteroidSpeed*=Me[e.gameProps.difficulty].MAX_ASTEROID_SPEED,this._startingEnemies+=Me[e.gameProps.difficulty].STARTING_ENEMIES,this._increaseEnemies+=Me[e.gameProps.difficulty].INCREASE_ENEMIES,this._minEnemySpeed*=Me[e.gameProps.difficulty].MIN_ENEMY_SPEED,this._maxEnemySpeed*=Me[e.gameProps.difficulty].MAX_ENEMY_SPEED,this.input.keyboard.on("keyup-".concat(e.gameProps.keyboard.sounds),(function(){t._isEnableSoundEffect=!t._isEnableSoundEffect,mi.emit(hi.TOGGLE_SOUNDS,t._isEnableSoundEffect)}),this),this.time.addEvent({delay:2e3,callback:function(){t._bgSound.play()}}),this.input.keyboard.on("keyup-".concat(e.gameProps.keyboard.music),(function(){t._isEnableBgSound=!t._isEnableBgSound,t._isEnableBgSound?t._bgSound.play():t._bgSound.stop()}),this),this.input.keyboard.on("keyup-".concat(e.gameProps.keyboard.exit),(function(){Tt.dispatch(ht(!0))}),this),mi.on(hi.EXIST_GAME,(function(){t.gameOver()})),this._network.onMyPlayerReady(this.handleMyPlayerReady,this),this._network.onPlayerJoined(this.handlePlayerJoined,this),this._network.onPlayerUpdated(this.handlePlayerUpdated,this),this._network.onPlayerLeft(this.handlePlayerLeft,this),this._network.onBulletCreated(this.handleBulletCreated,this),this._network.onBulletUpdated(this.handleBulletUpdated,this),this._network.onBulletRemoved(this.handleBulletRemoved,this),this._network.onAsteroidCreated(this.handleAsteroidCreated,this),this._network.onAsteroidRemoved(this.handleAsteroidRemoved,this),this._network.onAsteroidChangesUpdated(this.handleAsteroidChangesUpdated,this),this._network.onAirdropCreated(this.handleAirdropCreated,this),this._network.onAirdropUpdated(this.handleAirdropUpdated,this),this._network.onAirdropRemoved(this.handleAirdropRemoved,this),this._network.onCollisionPlayerWithAsteroid(this.handleCollisionPlayerWithAsteroid,this),this._network.onCollisionPlayerWithBullet(this.handleCollisionPlayerWithBullet,this),this._network.onCollisionBulletAsteroid(this.handleCollisionBulletAsteroid,this),this._network.onCollisionPlayerAirdrop(this.handleCollisionPlayerWithAirdrop,this)}},{key:"dumpJoyStickState",value:function(){}},{key:"handlePlayerJoined",value:function(e,t){var i=this;this.input.keyboard.enabled=!0,this._network&&this._network.allPlayersReady(!0),this._gameStarted=!0;var n=new Bi({sargs:{scene:this,group:this._otherShips,x:e.x,y:e.y,texture:z.graphicAssets.shipsTypes[0]},id:1,shipPros:this._shipPros,tier:0});this.scene.launch("text",{level:"Multiplayer"}),this._otherShips.add(n),this._otherShipMap.set(t,n);var s=this.sound.add(z.soundAssets.shipExplose.name,{volume:.5});s.on("complete",(function(){n._lives<1?(n.setActive(!1),n.setVisible(!1),n.destroy()):n.respawn(i._width/2,i._height/2)})),n.on("ship_death",(function(){s.play(),i._particles.shipExplode.emitParticleAt(n.x,n.y)})),n._engineSound=this.sound.add(z.soundAssets.engine.name,{loop:!0,volume:.5}),n._isEnableSoundEffect&&n._engineSound.play(),n._engineSound.pause()}},{key:"handlePlayerLeft",value:function(e){if(this._otherShipMap.has(e)){var t=this._otherShipMap.get(e);if(!t)return;this._otherShips.remove(t,!0,!0),this._otherShipMap.delete(e)}}},{key:"handleMyPlayerReady",value:function(){this._myShip._readyToConnect=!0}},{key:"handlePlayerUpdated",value:function(e,t){var i=this._otherShipMap.get(t);null===i||void 0===i||i.updateOtherPlayerChanges(e,this._network._dtServer2Client)}},{key:"handleBulletCreated",value:function(e,t,i){var n,s;console.log("get bullet (",e,")at : ",(new Date).getTime()),n=e.x,s=e.y;var a=new Ai({sargs:{scene:this,group:this._bullets,x:n,y:s,texture:de[e.bulletType],frame:0},owner:e.owner,kind:"normal"});a.rotation=e.rotation,this._bulletsMap.set(t,a)}},{key:"handleBulletUpdated",value:function(e,t){var i=this._bulletsMap.get(t);null===i||void 0===i||i.updateServerDataChangesBullet(e,this._network._dtServer2Client)}},{key:"handleBulletRemoved",value:function(e,t){if(this._bulletsMap.has(e)){var i=this._bulletsMap.get(e);if(!i)return;this._bullets.remove(i,!0,!0),this._bulletsMap.delete(e)}}},{key:"handleAsteroidCreated",value:function(e,t,i){var n,s,a,r;n=e.x,s=e.y,a=1===e.type?"FIRST":"SECOND",r=1===e.size?"LARGE":"SMALL";var o=new ki({sargs:{scene:this,group:this._asteroids,x:n,y:s,texture:q[a][r],frame:Math.round(2*Math.random())},type:a,size:r});r===$&&o.setCircle(29),r===ee&&o.setCircle(19),o.setOrigin(.5,.5),o.setAngularVelocity(H(-50,50)),this._asteroidsMap.set(t,o)}},{key:"handleAsteroidRemoved",value:function(e,t){if(this._asteroidsMap.has(e)){var i=this._asteroidsMap.get(e);if(!i)return;this._asteroids.remove(i,!0,!0),this._asteroidsMap.delete(e)}}},{key:"handleAsteroidChangesUpdated",value:function(e,t){var i=this._asteroidsMap.get(t);null===i||void 0===i||i.updateServerDataChangesAsteroid(e,this._network._dtServer2Client)}},{key:"handleAirdropCreated",value:function(e,t,i){console.log("in handleAirdropCreated",e,t);var n=new Li({sargs:{scene:this,group:this._airdrops,x:e.x,y:e.y,texture:ce[e.kind],frame:Math.round(2*Math.random())},kind:e.kind});this._airdropsMap.set(t,n)}},{key:"handleAirdropUpdated",value:function(e,t,i){var n=this._airdropsMap.get(i);null===n||void 0===n||n.updateServerDataAirdrop(e,t)}},{key:"handleAirdropRemoved",value:function(e,t){if(this._airdropsMap.has(e)){var i=this._airdropsMap.get(e);if(!i)return;this._airdrops.remove(i,!0,!0),this._airdropsMap.delete(e)}}},{key:"handleCollisionPlayerWithAsteroid",value:function(e){e.punished_id===this._mySessionId&&(this._myShip._hasShield?(this._isEnableSoundEffect&&this._destroyedSound.play(),this._particles.bulletImpact.emitParticleAt(this._myShip.x,this._myShip.y)):this._myShip.Vulnerable&&this._myShip.kill())}},{key:"handleCollisionPlayerWithBullet",value:function(e){e.punished_id===this._mySessionId?this._myShip._hasShield?(this._isEnableSoundEffect&&this._destroyedSound.play(),this._particles.bulletImpact.emitParticleAt(this._myShip.x,this._myShip.y)):this._myShip.Vulnerable&&this._myShip.kill():e.punisher_id===this._mySessionId&&(this._myShip.Score+=5)}},{key:"handleCollisionBulletAsteroid",value:function(e){e.punisher_id===this._network._mySessionId&&(this._myShip.Score+=1),this._isEnableSoundEffect&&this._destroyedSound.play(),this._particles.asteroidExplode.emitParticleAt(e.asteroid_x,e.asteroid_y)}},{key:"handleCollisionPlayerWithAirdrop",value:function(e){console.log("collide player with airdrop",e.id,this._mySessionId,e.player_id),this._mySessionId===e.player_id&&(e.kind===be||(e.kind===ge?Tt.dispatch(pt(!0)):e.kind===fe?(Tt.dispatch(ct(e.kind)),Tt.dispatch(ut(this._airdropDuration))):(Tt.dispatch(lt(e.kind)),Tt.dispatch(dt(this._airdropDuration)))),e.kind===ge?this._myShip._hasAtomic=!0:e.kind===be?this._myShip.Lives+=1:e.kind===fe?this._myShip.setShiled(this._airdropDuration):this._myShip.updateBulletProperty(e.kind,this._airdropDuration))}},{key:"updateBulletLaunchDataToserver",value:function(e,t,i,n,s){var a,r,o=s.body.velocity,l=(new ai.a.Math.Vector2).setToPolar(i,n);console.log("ask bullet (",s._bulletType,s,")at : ",(new Date).getTime()),a=o.x+l.x,r=o.y+l.y,this._shot||(this._network&&this._network.updateBulletToServer(e,t,i,a,r,s._bulletType),this._shot=!0),this._shot=!1}},{key:"spawnRandomAsteroid",value:function(e,t){var i=this.getOuterRimCoords(),n=i.x,s=i.y,a=i.dir;this.spawnAsteroid(n,s,e,t).launchAsteroid(H(this._minAsteroidSpeed,this._maxAsteroidSpeed),a+Math.PI,J)}},{key:"spawnAsteroid",value:function(e,t,i,n){return new ki({sargs:{scene:this,group:this._enemies,x:e,y:t,texture:q[i][n],frame:Math.round(2*Math.random())},type:i,size:n})}},{key:"respawnEnemies",value:function(e,t){var i=this.getOuterRimCoords(),n=i.x,s=i.y,a=i.dir;e.setPosition(n,s),"enemy"===e._group?e.launchEnemy(H(this._minEnemySpeed,this._maxEnemySpeed),a+Math.PI,J):"asteroid"===e._group?e.launchAsteroid(H(this._minAsteroidSpeed,this._maxAsteroidSpeed),a+Math.PI,J):"enemyBullet"===e._group&&e.destroy()}},{key:"splitAsteroid",value:function(e){if(e._size!==ee)for(var t=e._type,i=ee,n=e.body.velocity,s=e.getCenter(),a=s.x,r=s.y,o=0;o<2;o++){var l=ai.a.Math.RandomXY(new ai.a.Math.Vector2,40),d=l.x,c=l.y;this.spawnAsteroid(a+d,r+c,t,i).launchAsteroid(H(this._minAsteroidSpeed,this._maxAsteroidSpeed),n.angle(),J,60)}}},{key:"spawnRandomEnemies",value:function(e,t){var i=this.getOuterRimCoords(),n=i.x,s=i.y,a=i.dir;this.spawnEnemy(n,s,e,t).launchEnemy(H(this._minEnemySpeed,this._maxEnemySpeed),a+Math.PI,J-Math.PI)}},{key:"spawnEnemy",value:function(e,t,i,n){return new Pi({sargs:{scene:this,group:this._enemies,x:e,y:t,texture:ve[i],frame:Math.round(2*Math.random())},type:i,lives:n})}},{key:"spawnRandomEnemyBullet",value:function(e,t,i,n,s){if(s._type===xe){var a=this.spawnEnemyBullet(e,t,s);a.rotation=i;var r=s.body.velocity,o=(new ai.a.Math.Vector2).setToPolar(i,n);a.setVelocity(r.x+o.x,r.y+o.y)}else if(s._type===Ee)for(var l=0;l<10;l++){var d=l*Math.PI/5,c=this.spawnEnemyBullet(e,t,s),u=this._enemyBulletVelocity;c.setVelocity(u.x*Math.cos(d),u.y*Math.sin(d))}else if(s._type===we||s._type===Oe){var p=this.spawnEnemyBullet(e,t,s),h={x:this._myShip.x-s.x,y:this._myShip.y-s.y},m=Math.sqrt(h.x*h.x+h.y*h.y),y={x:h.x/m,y:h.y/m},_={x:y.x*this._bossSpeed,y:y.y*this._bossSpeed};p.setVelocity(_.x,_.y)}else if(s._type===Ae||s._type===je)for(var g={x:this._myShip.x-s.x,y:this._myShip.y-s.y},b=Math.sqrt(g.x*g.x+g.y*g.y),f={x:g.x/b,y:g.y/b},v={x:f.x*this._bossSpeed,y:f.y*this._bossSpeed},x=Math.sqrt(v.x*v.x+v.y*v.y),E={x:v.x/x,y:v.y/x},S=-1;S<=1;S+=2){this.spawnEnemyBullet(e-15*E.y*S,t+15*E.x*S,s).setVelocity(v.x,v.y)}}},{key:"spawnEnemyBullet",value:function(e,t,i){var n=i._type.startsWith("NORMAL")?z.graphicAssets.enemyBullet.name:z.graphicAssets.rocketBullet.name;return new Ii({sargs:{scene:this,group:this._enemies,x:e,y:t,texture:n,frame:0},owner:i})}},{key:"spawnRandomAirdrop",value:function(e,t){var i=this;if(W(t)){var n=H(0,9),s="";s=n<=1?ue:n<=2?pe:n<=3?he:n<=4?me:n<=5?ye:n<=6?_e:n<=7?be:n<=8?ge:fe;var a=this.getOuterRimCoords().dir,r=this.spawnAirdrop(e.x,e.y,s);r.launchAirdrop(10+H(-5,10),a+Math.PI,J);var o=this.time.delayedCall(1e3*z.airdropPros.alertTime,(function(){i.time.addEvent({delay:1e3,callback:function(){r.setVisible(!r.visible)},callbackScope:i,repeat:-1})}));this.time.delayedCall(1e3*z.airdropPros.lifetime,(function(){o.remove(),r.destroy()}))}}},{key:"spawnAirdrop",value:function(e,t,i){return new Li({sargs:{scene:this,group:this._airdrops,x:e,y:t,texture:ce[i],frame:Math.round(2*Math.random())},kind:i})}},{key:"getOuterRimCoords",value:function(){var e=0,t=0,i=0,n=Math.random()*(2*this._width+2*this._height);return n<this._width?(e=n,t=0,i=-H(.1,.9)*Math.PI):n<this._width+this._height?(e=this._width,t=n-this._width,i=H(-.4,.4)*Math.PI):n<2*this._width+this._height?(e=n-this._width-this._height,t=this._height,i=H(.1,.9)*Math.PI):(e=0,t=n-2*this._width-this._height,i=H(.6,1.4)*Math.PI),{x:e,y:t,dir:i}}},{key:"gameOver",value:function(){this.sound.stopAll(),this.scene.stop("multiplay"),this.scene.stop("text"),this.scene.launch("gameOver",{score:this._myShip.Score})}},{key:"nextAsteroids",value:function(){this._startingAsteroids=Math.min(this._startingAsteroids+this._incrementAsteroids,this._maxAsteroids);for(var e=0;e<this._startingAsteroids;e++){var t=1===this._level||H(0,1)>=.5?Z:Q,i=$;this.spawnRandomAsteroid(t,i)}}},{key:"nextEnemies",value:function(e,t,i){if(t!==Se)for(var n=0;n<e;n++)this.spawnRandomEnemies(t,i);else{this.spawnRandomEnemies(xe,i),this.spawnRandomEnemies(Ee,i);for(var s=0;s<e-2;s++){var a=H(1,3)>=2?Ee:xe;this.spawnRandomEnemies(a,i)}}}},{key:"nextLevel",value:function(){var e=this;if(this._passedIntro=!1,this.time.removeEvent(this._levelTimer),this._readyNewLevel=!1,this._levelTimer=this.time.addEvent({delay:2e3,callback:function(){e._readyNewLevel=!1}}),this._level++,this.registry.set("level",this._level),7===this._level||this._level>=8&&this._level%4===0||this.nextAsteroids(),this._level>=3&&!(this._level>=8&&this._level%4===0)){this._startingEnemies+=this._increaseEnemies;var t=this._level>=5?Se:xe;this.nextEnemies(this._startingEnemies,t,this._enemyLives)}if(this._level>=8&&this._level%4===0){12!==this._level&&(this._startingBoss+=this._increaseBoss);var i=H(0,1)>.5?we:Oe;this.nextEnemies(this._startingBoss,i,this._bossLives)}if(this._level>=12&&this._level%4===0){var n=H(0,1)>.5?Ae:je;this._bossLives+=5,this.nextEnemies(this._startingBoss,n,this._bossLives)}}},{key:"introNewEnemy",value:function(e){this.nextEnemies(1,e,this._bossLives)}},{key:"newMission",value:function(){var e=this;2!==this._level||this._passedIntro?4!==this._level||this._passedIntro?(this.registry.set("endLevel",this._level),this.registry.set("newEnemy",-1),this._levelTimer=this.time.addEvent({delay:z.gamePros.endLevelDelay,callback:function(){e._readyNewLevel=!0,e.registry.set("endLevel",-1)}})):(this._passedIntro=!0,this.registry.set("newEnemy",1),this.introNewEnemy(Ee),this._levelTimer=this.time.addEvent({delay:z.gamePros.introNewEnemyDelay,callback:function(){e.registry.set("newEnemy",-1)}})):(this._passedIntro=!0,this.registry.set("newEnemy",1),this.introNewEnemy(xe),this._levelTimer=this.time.addEvent({delay:z.gamePros.introNewEnemyDelay,callback:function(){e.registry.set("newEnemy",-1)}}))}},{key:"update",value:function(e,t){this.physics.world.wrap(this._ships),this._myShip&&this._network&&this._myShip.updateToServer(this._network),this.input.keyboard.addKey(this._specialKey).isDown&&this._myShip._hasAtomic&&(this._network.specialKeyIsDown(!0),this._myShip._hasAtomic=!1,Tt.dispatch(pt(!1)))}}]),i}(ai.a.Scene),Di=function(e){Object(li.a)(i,e);var t=Object(di.a)(i);function i(){var e;return Object(ri.a)(this,i),(e=t.call(this,"text"))._scoreLabel=void 0,e._scoreText=void 0,e._levelLabel=void 0,e._levelText=void 0,e._shotLabel=void 0,e._shotText=void 0,e._endLevel=void 0,e._newEnemy=void 0,e._lives=void 0,e._startingLives=void 0,e._bonusLives=void 0,e._width=void 0,e._height=void 0,e}return Object(oi.a)(i,[{key:"init",value:function(){this._width=z.gamePros.screenWidth,this._height=z.gamePros.screenHeight,this._startingLives=z.shipPros.startingLives+this.registry.values.bonusLives,this._bonusLives=0,this._lives=[]}},{key:"create",value:function(e){var t=this;this._endLevel=this.add.text(this._width/2,this._height/2-50,"",z.fontAssets.endLevel),this._endLevel.setOrigin(.5),this._newEnemy=this.add.text(this._width/2,this._height/2-50,"",z.fontAssets.endLevel),this._newEnemy.setOrigin(.5),this._scoreLabel=this.add.text(16,16,"Score:",z.fontAssets.scoreLabel),this._scoreText=this.add.text(135,16,"0",z.fontAssets.scoreText),this._levelLabel=this.add.text(16,50,"Level:",z.fontAssets.levelLabel),this._levelText=this.add.text(85,50,e.level,z.fontAssets.levelText),this._shotLabel=this.add.text(this._width-155,this._height-45,"Shots:",z.fontAssets.scoreLabel),this._shotText=this.add.text(this._width-16,this._height-16,this.registry.values.shots,z.fontAssets.scoreText),this._shotText.setOrigin(1,1),this.setLives(),this.events.on("shutdown",(function(){return t.registry.events.removeListener("changedata",t.updateData,t)}),this),this.registry.events.on("changedata",this.updateData,this)}},{key:"updateData",value:function(e,t,i){"score"===t?this._scoreText.setText(i):"level"===t?(this._levelText.setText(i),this.setLives()):"playerLives"===t?this.setLives():"shots"===t?i>90?this._shotText.setText("\u221e"):this._shotText.setText(i):"endLevel"===t?-1===i?this._endLevel.setText(""):0===i?this._endLevel.setText("Enjoy Crosmo Shooter"):this._endLevel.setText("Level ".concat(i," completed")):"newEnemy"===t&&(-1===i?this._newEnemy.setText(""):this._newEnemy.setText("A new kind of enemy appears"))}},{key:"setLives",value:function(){this._lives=[];for(var e=this._width,t=0;t<this._startingLives;t++){var i=this.add.image(e-32-40*t,35,z.graphicAssets.lifeEmpty.name);this._lives.push(i)}for(var n=0;n<this.registry.values.playerLives;n++){var s=this.add.image(e-32-40*n,35,z.graphicAssets.lifeFull.name);this._lives[n]=s}}}]),i}(ai.a.Scene),Ni=function(e){Object(li.a)(i,e);var t=Object(di.a)(i);function i(){var e;return Object(ri.a)(this,i),(e=t.call(this,"gameOver"))._contentText=void 0,e._mainMenuButton=void 0,e._playAgainButton=void 0,e._tokenRewarded=void 0,e._canPlay=void 0,e._shipDamaged=void 0,e._tokenRewarded=!1,e._canPlay=!1,e._shipDamaged=!1,e}return Object(oi.a)(i,[{key:"create",value:function(e){var t=this;Tt.dispatch(Ne(!0)),z.fontAssets.gameoverFontStyle.fontSize="50px",this.add.text(this.cameras.main.centerX,this.cameras.main.centerY-100,"GAME OVER",z.fontAssets.gameoverFontStyle).setOrigin(.5),z.fontAssets.gameoverFontStyle.fontSize="30px",this._contentText=this.add.text(this.cameras.main.centerX,this.cameras.main.centerY,"You did not get any score.",z.fontAssets.gameoverFontStyle),this._contentText.setOrigin(.5),0!==e.score&&this._contentText.setText("You have reached a score of ".concat(e.score,". \n Sending ").concat(e.score," $CROSMO to rewards balance...")),this._mainMenuButton=this.add.text(this.cameras.main.centerX,this.cameras.main.centerY+70,"",z.fontAssets.gameoverFontStyle),this._mainMenuButton.setOrigin(.5),this._mainMenuButton.setInteractive(),this._mainMenuButton.on("pointerdown",(function(){t._mainMenuButton.setColor("#4c1a03")})),this._mainMenuButton.on("pointerup",(function(){t._mainMenuButton.setColor("#ff601a"),t.gotoMenu()})),this._playAgainButton=this.add.text(this.cameras.main.centerX,this.cameras.main.centerY+120,"",z.fontAssets.gameoverFontStyle),this._playAgainButton.setOrigin(.5),this._playAgainButton.setInteractive(),this._playAgainButton.on("pointerdown",(function(){t._playAgainButton.setColor("#4c1a03")})),this._playAgainButton.on("pointerup",(function(){t._playAgainButton.setColor("#ff601a"),t.playAgain()})),mi.on(hi.TOKEN_REWARDED,(function(){t._tokenRewarded=!0}),this),mi.on(hi.CAN_PLAY,(function(){t._contentText.setText(""),t._mainMenuButton.setText("Main Menu"),t._playAgainButton.setText("Play Again"),t._canPlay=!0}),this),mi.on(hi.SHIP_DAMAGED,(function(){t._contentText.setText("Your ship is damaged."),t._mainMenuButton.setText("Main Menu"),t._shipDamaged=!0}),this),mi.on(hi.PLAY_AGAIN,(function(){t.startGame()}))}},{key:"gotoMenu",value:function(){window.location.href="/"}},{key:"playAgain",value:function(){Tt.dispatch(Ue(!0))}},{key:"startGame",value:function(){this._canPlay=!1,this.scene.start("play")}}]),i}(ai.a.Scene),Ui={type:ai.a.AUTO,parent:"phaser-game",backgroundColor:"black",pixelArt:!1,scale:{mode:ai.a.Scale.FIT,parent:"phaser-example",autoCenter:ai.a.Scale.CENTER_BOTH,width:1600,height:900},physics:{default:"arcade",arcade:{gravity:{y:0},debug:!1}},autoFocus:!0,scene:[_i,Mi,Ci,Di,Ni]},Fi=new ai.a.Game(Ui);window.game=Fi;var Vi=Fi;Ut.a.use([Ft.a]);var Yi,Gi,zi,Hi,Wi,Ki,Xi,Ji,qi,Zi,Qi,$i,en,tn,nn,sn,an,rn,on,ln,dn,cn,un,pn,hn,mn,yn,_n,gn,bn,fn,vn,xn,En,Sn,wn,On,An,jn,kn,Tn,Ln,Rn,Pn=function(e){var t,i,n,s=e.craftInstance,r=e.shooterInstance,o=e.tokenInstance,l=(e.pilotInstance,e.account),d=e.setBg,u=e.setIsGamePlaying,p=e.keyboard,m=e.isPlayEndless,y=e.isMultiplayer,b=e.difficulty,x=e.setCalculating,E=_((function(e){return e.room.lobbyJoined})),S=Object(h.g)(),w=Object(a.useState)(""),A=Object(c.a)(w,2),j=A[0],k=A[1],T=Object(a.useState)(!1),L=Object(c.a)(T,2),R=L[0],P=L[1],I=Object(a.useState)(""),B=Object(c.a)(I,2),C=B[0],D=B[1],N=Object(a.useState)(""),U=Object(c.a)(N,2),F=U[0],Y=U[1],G=Object(a.useState)([]),H=Object(c.a)(G,2),W=H[0],K=H[1],X=Object(a.useState)(!1),J=Object(c.a)(X,2),q=J[0],Z=(J[1],Object(a.useState)(!1)),Q=Object(c.a)(Z,2),$=Q[0],ee=(Q[1],Object(a.useState)(0)),te=Object(c.a)(ee,2),ie=te[0],ne=te[1],se=Object(a.useState)(0),ae=Object(c.a)(se,2),re=ae[0],oe=ae[1],le=Object(a.useState)(0),de=Object(c.a)(le,2),ce=de[0],ue=de[1],pe=Vi.scene.keys.boot;Object(a.useEffect)((function(){var e=function(){var e=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he();case 2:console.log("in wallet.tsx",y,m);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(m||y)&&e()}),[m,y]);var he=function(){var e=Object(g.a)(f.a.mark((function e(){var t,i,n,a,d,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Y("fetching"),e.next=3,r.getRewardBalance(l);case 3:return t=e.sent,ne(Number(t)/Math.pow(10,6)),e.next=7,o.balanceOf(l);case 7:return i=e.sent,oe(Number(i)/Math.pow(10,6)),e.next=11,s.walletOfOwner(l);case 11:if(n=e.sent,!Array.isArray(n)||!n.length){e.next=22;break}return"https://ipfs.io/ipfs/QmVPpQFBgmE4tHYfXVrs6vCDjuHXc1tRXyVxjZ9ZUqLf4s/",e.next=16,Promise.all(n.map((function(e){return Rt.a.get("".concat("https://ipfs.io/ipfs/QmVPpQFBgmE4tHYfXVrs6vCDjuHXc1tRXyVxjZ9ZUqLf4s/").concat(e,".json"))}))).catch((function(e){console.log("Getting Token Meta Datas is failed"+e.message),D("error"),k("Getting Token Meta Datas is failed!"),P(!0),setTimeout((function(){return S("/")}),7e3)}));case 16:return a=e.sent,e.next=19,Promise.all(n.map((function(e){return r.getCraftStatus(Number(e))}))).catch((function(e){console.log("Getting Craft Status is failed"+e.message),D("error"),k("Game Contract is not respond!"),P(!0),setTimeout((function(){return S("/")}),7e3)}));case 19:return d=e.sent,Array.isArray(a)&&a.length&&Array.isArray(d)&&d.length&&(c=n.map((function(e,t){return{name:a[t].data.name,tokenId:Number(e),background:a[t].data.attributes[0].value,on_background:a[t].data.attributes[1].value,weapon:a[t].data.attributes[2].value,booster:a[t].data.attributes[3].value,spaceship:a[t].data.attributes[4].value,banner:a[t].data.attributes[5].value,damaged:a[t].data.attributes[6].value,crosmonaut:a[t].data.attributes[7].value,shield:a[t].data.attributes[8].value,class:a[t].data.attributes[9].value,tier:d[t][1],damagedLevel:d[t][2]}}))).length>0&&(console.log(c),K(c),Y("fetched")),e.abrupt("return");case 22:D("error"),k("You don't have a NFT. Please purchase one!"),P(!0),setTimeout((function(){return S("/")}),7e3);case 26:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),me=function(){var e=Object(g.a)(f.a.mark((function e(){var t,i,n,s,a,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x(!0),"TEST"==z.VERSION){e.next=21;break}return e.prev=2,e.next=5,r.enterGame({from:l,value:"1000000000000000000"});case 5:return t=e.sent,e.next=8,t.wait();case 8:i=e.sent,n=i.events,console.log("event",n),e.next=21;break;case 13:return e.prev=13,e.t0=e.catch(2),console.log("error in enterGame",e.t0),D("error"),k("You need 1 CRO to play game"),P(!0),x(!1),e.abrupt("return");case 21:return e.next=23,It.auth.login(l);case 23:if(!(s=e.sent).error){e.next=30;break}return D("error"),k(s.error),P(!0),x(!1),e.abrupt("return");case 30:x(!1),localStorage.setItem("jwt",JSON.stringify(s)),Tt.dispatch(Ve(W[ce].tokenId)),Tt.dispatch(Ye(W[ce].name)),Tt.dispatch(Ge(W[ce].tier)),a=Object(Bt.a)(Object(Bt.a)({},W[ce]),{},{account:l}),console.log(a),o={hasCombat:q,difficulty:b,keyboard:p},a.damagedLevel>=5?(D("error"),k("Your craft is damaged."),P(!0)):y?(console.log("multiplayer mode"),E?pe._network.joinOrCreatePublic().then((function(){pe.startMultiGame(a,o),u(!0),d("")})).catch((function(e){return console.error("error in joinOrCreatePublic",e)})):(D("error"),k("Trying to connect to server, please try again!"),P(!0))):E?(pe.startGame(a,o),u(!0),d("")):(D("error"),k("Trying to connect to server, please try again!"),P(!0));case 39:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(){return e.apply(this,arguments)}}(),ye=function(){var e=Object(g.a)(f.a.mark((function e(){var t,i,n,s,a,d,c,u,p;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.prev=1,e.next=4,o.allowance(l,O);case 4:if(t=e.sent,!new Ct.BigNumber(t.toString()).eq(new Ct.BigNumber("0"))){e.next=14;break}return e.next=8,o.approve(O,"99999999999999999999999999999999999999999999999999999999999");case 8:return i=e.sent,e.next=11,i.wait();case 11:n=e.sent,s=n.events,s[0].transactionHash;case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(1),console.log("error in approve",e.t0),x(!1);case 20:if(!((a=W[ce].tier)<5)){e.next=50;break}if(!(re>=Te[a+1]*($?.95:1))){e.next=45;break}return e.prev=23,e.next=26,r.upgradeCraft(W[ce].tokenId);case 26:return d=e.sent,e.next=29,d.wait();case 29:c=e.sent,u=c.events,u[0].transactionHash&&(p=W.map((function(e,t){return t===ce&&(e.name=ke[a+1],e.tier=a+1),e})),K(Object(Mt.a)(p)),oe(re-Te[a+1]*($?.95:1)),D("success"),k("Crosmocraft has been upgraded."),P(!0)),e.next=43;break;case 35:e.prev=35,e.t1=e.catch(23),console.log("error in upgradeCraft",e.t1),D("error"),k("Error occurred in upgrading Crosmocraft."),P(!0),x(!1),x(!1);case 43:e.next=48;break;case 45:D("error"),k("You need ".concat(Te[a+1]*($?.95:1)," $CROSMO for ").concat(ke[a+1]," Level.")),P(!0);case 48:e.next=53;break;case 50:D("success"),k("Your craft is the top level."),P(!0);case 53:x(!1);case 54:case"end":return e.stop()}}),e,null,[[1,16],[23,35]])})));return function(){return e.apply(this,arguments)}}(),_e=function(){var e=Object(g.a)(f.a.mark((function e(){var t,i,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x(!0),!(ie>0)){e.next=23;break}return e.prev=2,e.next=5,r.claimReward();case 5:return t=e.sent,e.next=8,t.wait();case 8:i=e.sent,n=i.events,n[0].transactionHash&&(D("success"),k("".concat(ie.toFixed(1),"$CROSMO has claimed.")),P(!0),oe(re+ie),ne(0)),e.next=21;break;case 14:e.prev=14,e.t0=e.catch(2),console.log("error in claimReward",e.t0),D("error"),k("Error occurred in claiming reward."),P(!0),x(!1);case 21:e.next=26;break;case 23:D("error"),k("You don't have any reward token."),P(!0);case 26:x(!1);case 27:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(){return e.apply(this,arguments)}}(),ge=Object(a.useRef)(null);return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(Ht,{children:Object(M.jsxs)(Wt,{children:["fetching"===F&&Object(M.jsxs)(v.a,{sx:{display:"block",textAlign:"center"},children:[Object(M.jsx)(qt,{children:"Fetching NFT from your wallet ..."}),Object(M.jsx)(V.a,{sx:{mt:2}})]}),"fetched"===F&&Object(M.jsxs)(Kt,{children:[Object(M.jsxs)(Xt,{children:[Object(M.jsx)(Jt,{children:Object(M.jsx)("img",{src:"assets/images/avatar_title.png",alt:"title"})}),Object(M.jsxs)(Zt,{children:[Object(M.jsx)($t,{onClick:function(){return ge.current.swiper.slidePrev()},children:Object(M.jsx)("img",{src:"assets/images/avatar_prev.png",alt:"prev"})}),Object(M.jsx)(Qt,{children:Object(M.jsx)(Dt.a,{ref:ge,navigation:!0,spaceBetween:0,slidesPerView:1,onSlideChange:function(e){ue(e.activeIndex)},children:W.map((function(e){return Object(M.jsx)(Nt.a,{children:Object(M.jsxs)("div",{children:[Object(M.jsx)("img",{className:"background",src:"assets/images/NFT/8 Background/".concat(e.background,".png"),alt:e.name}),Object(M.jsx)("img",{className:"on_background",src:"assets/images/NFT/7 On Background/".concat(e.on_background,".png"),alt:e.name}),Object(M.jsx)("img",{className:"booster",src:"assets/images/NFT/5 Booster/".concat(e.booster,".png"),alt:e.name}),Object(M.jsx)("img",{className:"weapon",src:"assets/images/NFT/6 Weapon System/".concat(e.weapon,".png"),alt:e.name}),Object(M.jsx)("img",{className:"ship",src:"assets/images/NFT/4 Spaceship/".concat(e.spaceship,".png"),alt:e.name}),Object(M.jsx)("img",{className:"banner",src:"assets/images/NFT/3 Banner/".concat(e.banner,".png"),alt:e.name}),Object(M.jsx)("img",{className:"broken",src:"assets/images/NFT/3 Damaged/".concat(e.damaged,".png"),alt:e.name}),Object(M.jsx)("img",{className:"crosmonaut",src:"assets/images/NFT/2 Crosmonaut/".concat(e.crosmonaut,".png"),alt:e.name}),Object(M.jsx)("img",{className:"shield",src:"assets/images/NFT/1 Force Shield/".concat(e.shield,".png"),alt:e.name}),0!==e.tier&&Object(M.jsx)("p",{className:"tier",children:ke[e.tier]}),Object(M.jsx)("img",{className:"tier",src:"assets/images/league_".concat(e.tier,".png"),alt:e.name}),Object(M.jsx)("img",{className:"avatarBg",src:"assets/images/avatar_modal_bg.png",alt:"avatar_bg"}),Object(M.jsx)("p",{className:"name",children:e.name})]})},e.tokenId)}))})}),Object(M.jsx)($t,{onClick:function(){return ge.current.swiper.slideNext()},children:Object(M.jsx)("img",{src:"assets/images/avatar_next.png",alt:"next"})})]})]}),Object(M.jsxs)(ei,{children:[Object(M.jsxs)(ti,{children:["Claimable $CROSMO: ",ie.toFixed(1)]}),Object(M.jsx)(ii,{onClick:_e,children:"Claim Reward"}),Object(M.jsxs)(ti,{children:["$CROSMO Balance: ",re.toFixed(1)]}),Object(M.jsx)(ii,{onClick:ye,children:void 0!==W&&5!==(null===(t=W[ce])||void 0===t?void 0:t.tier)&&Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)("img",{src:"assets/images/upgrade.png",width:30,height:30})," to ",ke[(null===(i=W[ce])||void 0===i?void 0:i.tier)+1]," : ",Te[(null===(n=W[ce])||void 0===n?void 0:n.tier)+1]*($?.95:1)]})}),Object(M.jsx)(ni,{onClick:me,children:"PLAY"})]})]})]})}),Object(M.jsx)(zt,{noticeMsg:j,showNotice:R,setShowNotice:P,severity:C})]})},In=i(607),Mn=Object(In.a)((function(){return{root:{borderRadius:5,height:10,width:"100%",border:"2px solid #ffe2b8"},colorPrimary:{backgroundColor:"#39260b"},bar:{borderRadius:5,backgroundColor:"#fff"}}}))(y.a),Bn=Object(In.a)((function(){return{root:{borderRadius:5,width:"100%",height:10,border:"2px solid #2099e5"},colorPrimary:{backgroundColor:"#0b1939"},bar:{borderRadius:5,backgroundColor:"#235aa5"}}}))(y.a),Cn=function(e){var t=e.specialKey,i=Object(a.useState)(0),n=Object(c.a)(i,2),s=n[0],r=n[1],o=Object(a.useState)(0),l=Object(c.a)(o,2),d=l[0],u=l[1],p=_((function(e){return e.phaser.bulletName})),h=_((function(e){return e.phaser.bulletDuration})),m=_((function(e){return e.phaser.bulletChanged})),y=_((function(e){return e.phaser.shieldName})),g=_((function(e){return e.phaser.shieldDuration})),b=_((function(e){return e.phaser.shieldChanged})),f=_((function(e){return e.phaser.hasAtomic})),x=h-.15,E=g-.15;return Object(a.useEffect)((function(){var e=setInterval((function(){r(x/h*100),x<=0&&(r(0),clearInterval(e)),x-=.25}),250);return function(){clearInterval(e)}}),[p,h,m]),Object(a.useEffect)((function(){var e=setInterval((function(){u(E/g*100),E<=0&&(u(0),clearInterval(e)),E-=.25}),250);return function(){clearInterval(e)}}),[y,g,b]),Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(v.a,{sx:{display:"flex",justifyContent:"flex-end",height:70,mr:"10px"},children:0!==d&&Object(M.jsxs)(v.a,{sx:{textAlign:"right",mt:"60px"},children:[Object(M.jsx)(v.a,{sx:{width:210,transform:"rotate(180deg)"},children:Object(M.jsx)(Bn,{variant:"determinate",value:d})}),Object(M.jsx)(S.a,{sx:{fontSize:"20px",color:"#24c2bc"},children:"SHIELD"})]})}),Object(M.jsx)(v.a,{sx:{display:"flex",justifyContent:"flex-end"},children:Object(M.jsx)(v.a,{sx:{width:"calc(100vh - 220px)",transform:"translate(42%, 20px)"},children:Object(M.jsx)(v.a,{sx:{width:"100%",transform:"rotate(-90deg) translateX(-50%)",flexDirection:"row-reverse",display:"flex",alignItems:"center"},children:0!==s&&Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(Mn,{variant:"determinate",value:s}),Object(M.jsx)(v.a,{sx:{transform:"rotate(90deg)"},children:Object(M.jsx)("img",{src:"assets/images/icon_".concat(p,".png"),alt:"airdrop icon"})})]})})})}),f&&Object(M.jsxs)(S.a,{sx:{color:"white",position:"absolute",bottom:"65px",right:"20px",fontSize:"20px"},children:['Press "',t,'" to use atomic bomb']})]})},Dn=m.b.div(Yi||(Yi=Object(u.a)(["\n  position: fixed;\n  width: 100vw;\n  height: 100vh;\n  top: 0;\n  background: #00000066;\n"]))),Nn=m.b.div(Gi||(Gi=Object(u.a)(["\n  background: url('assets/images/bg_leaderboard.png');\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 1100px;\n  height: 605px;\n  background-size: contain;\n  color: white;\n  font-size: 25px;\n"]))),Un=m.b.div(zi||(zi=Object(u.a)(["\n  width: 92%;\n  height: 83%;\n  margin: 5.5% auto;\n"]))),Fn=m.b.div(Hi||(Hi=Object(u.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n\n  img.leagues {\n    width: 150px;\n  }\n  \n  img.close {\n    width: 50px;\n    cursor: pointer;\n  }\n"]))),Vn=m.b.div(Wi||(Wi=Object(u.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n\n  img.league {\n    height: 33px;\n    margin-left: -12px;\n    cursor: pointer;\n  }\n\n  img.default {\n    margin-right: 20px;\n  }\n"]))),Yn=m.b.div(Ki||(Ki=Object(u.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-top: 5px;\n\n  img.period {\n    width: 120px;\n    cursor: pointer;\n  }\n"]))),Gn=m.b.div(Xi||(Xi=Object(u.a)(["\n  height: 100%;\n  margin-top: 20px;\n"]))),zn=m.b.div(Ji||(Ji=Object(u.a)(["\n  background: url('assets/images/lead_thead.png');\n  background-size: contain;\n  border: 1px solid black;\n  border-radius: 10px;\n  display: flex;\n  align-items: center;\n  width: calc(100% - 30px);\n\n  img {\n    height: 28px;\n    margin-top: 7px;\n  }\n"]))),Hn=m.b.div(qi||(qi=Object(u.a)(["\n  height: calc(100% - 150px);\n  overflow-y: scroll;\n\n  /* width */\n  ::-webkit-scrollbar {\n    width: 20px;\n    margin-left: 10px;\n    background: #40808a;\n    border-radius: 8px;\n  }\n\n  /* Track */\n  ::-webkit-scrollbar-track {\n    border-radius: 8px;\n  }\n  \n  /* Handle */\n  ::-webkit-scrollbar-thumb {\n    background: white; \n    border-radius: 8px;\n  }\n\n  /* Handle on hover */\n  ::-webkit-scrollbar-thumb:hover {\n    background: wheat; \n  }\n"]))),Wn=m.b.div(Zi||(Zi=Object(u.a)(["\n  background: #40808a;\n  border: 1px solid black;\n  border-radius: 10px;\n  display: flex;\n  align-items: center;\n  height: 40px;\n  width: 99%;\n  margin-top: 3px;\n"]))),Kn=m.b.div(Qi||(Qi=Object(u.a)(["\n  width: 15%;\n  padding-left: 20px;\n"]))),Xn=m.b.div($i||($i=Object(u.a)(["\n  width: 55%;\n"]))),Jn=m.b.div(en||(en=Object(u.a)(["\n  width: 30%;\n"]))),qn=function(e){var t=e.scores,i=e.setIsLeaderboard,n=e.league,s=e.setLeague,a=e.period,r=e.setPeriod;return Object(M.jsx)(Dn,{children:Object(M.jsx)(Nn,{children:Object(M.jsxs)(Un,{children:[Object(M.jsxs)(Fn,{children:[Object(M.jsx)("img",{className:"leagues",src:"assets/images/lead_leagues.png",alt:"leagues"}),Object(M.jsxs)(Vn,{children:[Object(M.jsx)("img",{className:"league default",onClick:function(){return s(0)},src:"assets/images/lead_default".concat(0===n?"_active":"",".png"),alt:"default"}),Object(M.jsx)("img",{className:"league",onClick:function(){return s(1)},src:"assets/images/lead_bronze".concat(1===n?"_active":"",".png"),alt:"bronze"}),Object(M.jsx)("img",{className:"league",onClick:function(){return s(2)},src:"assets/images/lead_silver".concat(2===n?"_active":"",".png"),alt:"silver"}),Object(M.jsx)("img",{className:"league",onClick:function(){return s(3)},src:"assets/images/lead_gold".concat(3===n?"_active":"",".png"),alt:"gold"}),Object(M.jsx)("img",{className:"league",onClick:function(){return s(4)},src:"assets/images/lead_diamond".concat(4===n?"_active":"",".png"),alt:"diamond"}),Object(M.jsx)("img",{className:"league",onClick:function(){return s(5)},src:"assets/images/lead_platinum".concat(5===n?"_active":"",".png"),alt:"platinum"})]}),Object(M.jsx)("img",{className:"close",src:"assets/images/btn_close.png",alt:"close",onClick:function(){return i(!1)}})]}),Object(M.jsxs)(Yn,{children:[Object(M.jsx)("img",{className:"period",onClick:function(){return r("weekly")},src:"assets/images/lead_weekly".concat("weekly"===a?"_active":"",".png"),alt:"weekly"}),Object(M.jsx)("img",{className:"period",onClick:function(){return r("monthly")},src:"assets/images/lead_monthly".concat("monthly"===a?"_active":"",".png"),alt:"monthly"}),Object(M.jsx)("img",{className:"period",onClick:function(){return r("all")},src:"assets/images/lead_all".concat("all"===a?"_active":"",".png"),alt:"all"})]}),Object(M.jsxs)(Gn,{children:[Object(M.jsxs)(zn,{children:[Object(M.jsx)(Kn,{children:Object(M.jsx)("img",{src:"assets/images/lead_rank.png",alt:"rank"})}),Object(M.jsx)(Xn,{children:Object(M.jsx)("img",{src:"assets/images/lead_name.png",alt:"name"})}),Object(M.jsx)(Jn,{children:Object(M.jsx)("img",{src:"assets/images/lead_score.png",alt:"name"})})]}),Object(M.jsxs)(Hn,{children:[null===t||void 0===t?void 0:t.map((function(e,t){var i=e.shipName+"  (..."+e.account.slice(-4)+")";return i.indexOf("Crosmocraft")<0&&(i="Crosmocraft #"+e._id),Object(M.jsxs)(Wn,{children:[Object(M.jsx)(Kn,{children:t+1}),Object(M.jsx)(Xn,{children:i}),Object(M.jsx)(Jn,{children:e.score})]},t)})),(!t||0===t.length)&&Object(M.jsx)("div",{style:{textAlign:"center",marginTop:20},children:"There is no data"})]})]})]})})})},Zn=i(291),Qn=m.b.div(tn||(tn=Object(u.a)(["\n  position: fixed;\n  width: 100vw;\n  height: 100vh;\n  top: 0;\n  background: #00000066;\n"]))),$n=m.b.div(nn||(nn=Object(u.a)(["\n  background: url('assets/images/bg_setting.png');\n  background-repeat: no-repeat;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 80%;\n  height: 86%;\n  max-width: 950px;\n  max-height: 529px;\n  background-size: contain;\n  color: white;\n  font-size: 20px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  img.close {\n    position: absolute;\n    top: 55px;\n    right: 29px;\n    width: 50px;\n    cursor: pointer;\n  }\n"]))),es=m.b.div(sn||(sn=Object(u.a)(["\n  width: 80%;\n  height: 78%;\n  margin-top: 20px;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n"]))),ts=m.b.div(an||(an=Object(u.a)(["\n  height: 44px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0 80px;\n  background: ",";\n  border: 2px solid #234955;\n  border-radius: 10px;\n  cursor: pointer;\n  color: ",";\n"])),(function(e){return e.selected?"#0b171a":"#12262c"}),(function(e){return e.selected?"var(--color-yellow)":"white"})),is=m.b.div(rn||(rn=Object(u.a)(["\n\n"]))),ns=m.b.div(on||(on=Object(u.a)(["\n\n"]))),ss=function(e){var t=e.setIsSetting,i=e.keyboard,n=e.setKeboard,s=[{key:"forward",label:"Move Forward",keyboard:i.forward},{key:"left",label:"Move Left",keyboard:i.left},{key:"right",label:"Move Right",keyboard:i.right},{key:"brake",label:"Brake",keyboard:i.brake},{key:"fire",label:"Fire",keyboard:i.fire},{key:"special",label:"Special",keyboard:i.special},{key:"music",label:"Music ON/OFF",keyboard:i.music},{key:"sounds",label:"Sounds Effects ON/OFF",keyboard:i.sounds},{key:"exit",label:"Exit",keyboard:i.exit}],r=Object(a.useState)(void 0),o=Object(c.a)(r,2),l=o[0],d=o[1],u=Object(a.useState)(""),p=Object(c.a)(u,2),h=p[0],m=p[1];Object(a.useEffect)((function(){d(s)}),[]);var y=function(e){return" "===e?"SPACE":"Escape"===e?"ESC":e.startsWith("Arrow")?e.replace("Arrow","").toUpperCase():e.toUpperCase()};return Object(M.jsx)(Qn,{children:Object(M.jsxs)($n,{children:[Object(M.jsx)(es,{children:null===l||void 0===l?void 0:l.map((function(e,t){return Object(M.jsxs)(ts,{selected:e.key===h,onClick:function(){return m(e.key)},children:[Object(M.jsx)(is,{children:e.label}),Object(M.jsx)(ns,{children:e.keyboard})]},t)}))}),Object(M.jsx)("img",{className:"close",src:"assets/images/btn_close.png",alt:"close",onClick:function(){return t(!1)}}),Object(M.jsx)(Zn.a,{keyName:"a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,space,esc,up,down,left,right",onKeyDown:function(e,t,i){if(""!==h){a=t.key,n((function(e){return Object(Bt.a)(Object(Bt.a)({},e),{},Object(R.a)({},h,y(a)))}));var s=l.map((function(e){return e.key===h&&(e.keyboard=y(t.key)),e}));d(Object(Mt.a)(s)),m("")}var a}})]})})},as=m.b.div(ln||(ln=Object(u.a)(["\n  position: fixed;\n  width: 100vw;\n  height: 100vh;\n  top: 0;\n  background: #00000066;\n"]))),rs=m.b.div(dn||(dn=Object(u.a)(["\n  background: url('assets/images/bg_difficulty.png');\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 500px;\n  height: 600px;\n  background-size: contain;\n  color: white;\n  font-size: 30px;\n"]))),os=m.b.div(cn||(cn=Object(u.a)(["\n  height: 100%;\n  text-align: center;\n\n  img.close {\n    position: absolute;\n    width: 50px;\n    cursor: pointer;\n    right: 35px;\n    top: 80px;\n  }\n"]))),ls=m.b.div(un||(un=Object(u.a)(["\n  margin-top: 160px;\n  margin-bottom: 50px;\n"]))),ds=m.b.div(pn||(pn=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  align-items: center;\n\n  img.difficulty {\n    width: 150px;\n    margin-top: 10px;\n    cursor: pointer;\n  }\n"]))),cs=function(e){var t=e.setIsDifficulty,i=e.difficulty,n=e.setDifficulty;return Object(M.jsx)(as,{children:Object(M.jsx)(rs,{children:Object(M.jsxs)(os,{children:[Object(M.jsx)(ls,{children:"CHOOSE YOUR DIFFICULTY"}),Object(M.jsxs)(ds,{children:[Object(M.jsx)("img",{className:"difficulty",onClick:function(){return n("easy")},src:"assets/images/difficulty_easy".concat("easy"===i?"_active":"",".png"),alt:"easy"}),Object(M.jsx)("img",{className:"difficulty",onClick:function(){return n("medium")},src:"assets/images/difficulty_medium".concat("medium"===i?"_active":"",".png"),alt:"medium"}),Object(M.jsx)("img",{className:"difficulty",onClick:function(){return n("hard")},src:"assets/images/difficulty_hard".concat("hard"===i?"_active":"",".png"),alt:"hard"}),Object(M.jsx)("img",{className:"difficulty",onClick:function(){return n("extreme")},src:"assets/images/difficulty_extreme".concat("extreme"===i?"_active":"",".png"),alt:"extreme"})]}),Object(M.jsx)("img",{className:"close",src:"assets/images/btn_close.png",alt:"close",onClick:function(){return t(!1)}})]})})})},us=m.b.div(hn||(hn=Object(u.a)(["\n  position: fixed;\n  width: 100vw;\n  height: 100vh;\n  top: 0;\n  background: #00000066;\n"]))),ps=m.b.div(mn||(mn=Object(u.a)(["\n  background: url('assets/images/bg_confirm.png');\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 530px;\n  height: 310px;\n  background-size: contain;\n  display: flex;\n  align-items: flex-end;\n  justify-content: center;\n"]))),hs=m.b.div(yn||(yn=Object(u.a)(["\n  width: 44%;\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 55px;\n  \n  img {\n    width: 110px;\n    cursor: pointer;\n  }\n"]))),ms=function(){return Object(M.jsx)(us,{children:Object(M.jsx)(ps,{children:Object(M.jsxs)(hs,{children:[Object(M.jsx)("img",{src:"assets/images/btn_yes.png",alt:"yes",onClick:function(){return mi.emit(hi.EXIST_GAME),void Tt.dispatch(ht(!1))}}),Object(M.jsx)("img",{src:"assets/images/btn_no.png",alt:"no",onClick:function(){return Tt.dispatch(ht(!1))}})]})})})},ys=[{inputs:[{internalType:"string",name:"_initBaseURI",type:"string"},{internalType:"address",name:"_shipParts",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"SHIP1",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"SHIP2",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"SHIP3",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"adminAddress",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"airDropNFT",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"baseExtension",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"canMint",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"curIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getInfo",outputs:[{components:[{internalType:"uint256",name:"regularCost",type:"uint256"},{internalType:"uint256",name:"memberCost",type:"uint256"},{internalType:"uint256",name:"whitelistCost",type:"uint256"},{internalType:"uint256",name:"maxSupply",type:"uint256"},{internalType:"uint256",name:"totalSupply",type:"uint256"},{internalType:"uint256",name:"maxMintPerAddress",type:"uint256"},{internalType:"uint256",name:"maxMintPerTx",type:"uint256"}],internalType:"struct IDrop.Info",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[],name:"greatId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"greatMaxSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"legendId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"legendMaxSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxMintAmount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"bytes32",name:"shipType",type:"bytes32"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"mintCost",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bool",name:"_state",type:"bool"}],name:"pause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"regularId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"regularMaxSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address[]",name:"_holders",type:"address[]"},{internalType:"uint256[]",name:"_counts",type:"uint256[]"}],name:"setAirDropCounts",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_newBaseExtension",type:"string"}],name:"setBaseExtension",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_newBaseURI",type:"string"}],name:"setBaseURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"shipParts",outputs:[{internalType:"contract ShipItems",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"}],name:"walletOfOwner",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"withdrawAll",outputs:[],stateMutability:"nonpayable",type:"function"}],_s=[{inputs:[{internalType:"address",name:"_crosmoToken",type:"address"},{internalType:"address",name:"_crosmoCraft",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[],name:"REPAIRE_COOLDOWN",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"UPGRADE_COST",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"claimReward",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"craftStatus",outputs:[{internalType:"uint256",name:"lastUpdated",type:"uint256"},{internalType:"uint8",name:"tier",type:"uint8"},{internalType:"uint8",name:"damagedLevel",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"crosmoCraft",outputs:[{internalType:"contract IERC721",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"crosmoPilot",outputs:[{internalType:"contract IERC721",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"crosmoStation",outputs:[{internalType:"contract IERC721",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"crosmoToken",outputs:[{internalType:"contract IERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"enterGame",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"craftID",type:"uint256"}],name:"getCraftStatus",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint8",name:"",type:"uint8"},{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_player",type:"address"}],name:"getRewardBalance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"player",type:"address"}],name:"hasCrosmoStation",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"score",type:"uint256"},{internalType:"address",name:"player",type:"address"},{internalType:"uint256",name:"craftID",type:"uint256"}],name:"playSession",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"rewardBalance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"scale",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_pilot",type:"address"}],name:"setCrosmoPilot",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_station",type:"address"}],name:"setCrosmoStation",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"craftID",type:"uint256"}],name:"updateCraftStatus",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"craftID",type:"uint256"}],name:"upgradeCraft",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdrawToken",outputs:[],stateMutability:"nonpayable",type:"function"}],gs=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Paused",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Unpaused",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"pause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"unpause",outputs:[],stateMutability:"nonpayable",type:"function"}],bs=m.b.div(_n||(_n=Object(u.a)(["\n  position: absolute;\n  height: ",";\n  width: 100%;\n"])),(function(e){return e.isPlayEndless||e.isMultiplayer?"100vh":"calc(100vh - 220px)"})),fs=m.b.div(gn||(gn=Object(u.a)(["\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  background-position: center;\n  background-size: cover;\n}\n"]))),vs=m.b.div(bn||(bn=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  height: 100%;\n"]))),xs=m.b.div(fn||(fn=Object(u.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  img {\n    max-width: 770px;\n    width: 70%;\n    margin-top: -110px;\n    margin-left: 9%;\n  }\n"]))),Es=m.b.div(vn||(vn=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  \n  img {\n    width: auto;\n    margin: 0 auto;\n    cursor: pointer;\n  }\n  \n  img.play {\n    height: 55px;\n    margin-top: 3px;\n  }\n  \n  img.setting {\n    height: 45px;\n    margin-top: 5px;\n  }\n"]))),Ss=m.b.div(xn||(xn=Object(u.a)(["\n  position: absolute;\n  right: 15px;\n  bottom: -50px;\n\n  img {\n    width: 90px;\n    cursor: pointer;\n  }\n"]))),ws=m.b.div(En||(En=Object(u.a)(["\n  position: fixed;\n  width: 100vw;\n  height: 100vh;\n  top: 0;\n  background: #00000066;\n"]))),Os=m.b.div(Sn||(Sn=Object(u.a)(["\n  background: url('assets/images/bg_multiplayer.png');\n  background-repeat: no-repeat;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 500px;\n  height: 600px;\n  background-size: contain;\n  color: white;\n  font-size: 30px;\n"]))),As=m.b.div(wn||(wn=Object(u.a)(["\n  height: 100%;\n  text-align: center;\n\n  img.close {\n    position: absolute;\n    width: 50px;\n    cursor: pointer;\n    right: 35px;\n    top: 80px;\n  }\n"]))),js=m.b.div(On||(On=Object(u.a)(["\n  margin-top: 160px;\n  margin-bottom: 50px;\n"]))),ks=m.b.div(An||(An=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  align-items: center;\n\n  img.RoomButton {\n    width: 150px;\n    margin-top: 10px;\n    cursor: pointer;\n  }  \n"]))),Ts=(m.b.div(jn||(jn=Object(u.a)(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  display: flex;\n  flex-direction: column;\n  gap: 60px;\n  align-items: center;\n"]))),function(e){var t,i=e.setIsChooseRoom,n=Object(a.useState)(!1),s=Object(c.a)(n,2),r=s[0];s[1];return t=r?Object(M.jsx)(Os,{children:Object(M.jsx)(As,{children:Object(M.jsx)("img",{className:"close",src:"assets/images/btn_close.png",alt:"close",onClick:function(){return i(!1)}})})}):Object(M.jsx)(Os,{children:Object(M.jsxs)(As,{children:[Object(M.jsx)(js,{children:"Start Multiplayer Game"}),Object(M.jsx)(ks,{children:Object(M.jsx)("img",{className:"RoomButton",onClick:function(){return i(!1),void Tt.dispatch(Fe(!0))},src:"assets/images/btn_joingame.png",alt:"join Game"})}),Object(M.jsx)("img",{className:"close",src:"assets/images/btn_close.png",alt:"close",onClick:function(){return i(!1)}})]})}),Object(M.jsx)(ws,{children:t})}),Ls=function(e){var t,i=e.account,n=e.web3Provider,s=e.chainId,r=e.setBg,o=e.setIsGamePlaying,l=Object(h.g)(),d=_((function(e){return e.user.loggedIn})),u=_((function(e){return e.room.roomJoined})),p=_((function(e){return e.user.gameOver})),m=_((function(e){return e.user.canPlayAgain})),y=_((function(e){return e.user.joinLobbyRoom})),b=_((function(e){return e.user.tokenId})),x=_((function(e){return e.user.shipName})),E=_((function(e){return e.user.tier})),S=Object(a.useState)(null),j=Object(c.a)(S,2),k=j[0],T=j[1],L=Object(a.useState)(null),R=Object(c.a)(L,2),P=R[0],I=R[1],B=Object(a.useState)(null),C=Object(c.a)(B,2),D=C[0],N=C[1],U=Object(a.useState)(null),F=Object(c.a)(U,2),Y=F[0],G=(F[1],Object(a.useState)(!1)),z=Object(c.a)(G,2),H=z[0],W=z[1],K=Object(a.useState)(!1),X=Object(c.a)(K,2),J=X[0],q=X[1],Z=Object(a.useState)(!1),Q=Object(c.a)(Z,2),$=Q[0],ee=Q[1],te=Object(a.useState)(!1),ie=Object(c.a)(te,2),ne=ie[0],se=ie[1],ae=Object(a.useState)(!1),re=Object(c.a)(ae,2),oe=re[0],le=re[1],de=Object(a.useState)(!1),ce=Object(c.a)(de,2),ue=ce[0],pe=ce[1],he=Object(a.useState)(!1),me=Object(c.a)(he,2),ye=me[0],_e=me[1],ge=_((function(e){return e.phaser.isExist})),be=Object(a.useState)(void 0),fe=Object(c.a)(be,2),ve=fe[0],xe=fe[1],Ee=Object(a.useState)({forward:"W",left:"A",right:"D",brake:"S",fire:"SPACE",special:"Q",music:"Y",sounds:"U",exit:"ESC"}),Se=Object(c.a)(Ee,2),we=Se[0],Oe=Se[1],Ae=Object(a.useState)("easy"),je=Object(c.a)(Ae,2),ke=je[0],Te=je[1],Le=Object(a.useState)("monthly"),Re=Object(c.a)(Le,2),Pe=Re[0],Ie=Re[1],Me=Object(a.useState)(0),Be=Object(c.a)(Me,2),Ce=Be[0],De=Be[1],Ve=Object(a.useState)(""),Ye=Object(c.a)(Ve,2),Ge=Ye[0],ze=Ye[1],He=Object(a.useState)(!1),We=Object(c.a)(He,2),Ke=We[0],Xe=We[1],Je=Object(a.useState)(""),qe=Object(c.a)(Je,2),Ze=qe[0],Qe=qe[1];Object(a.useEffect)((function(){if(void 0!==i&&s===A.mainnet.chainId){var e=new w.a.Contract("0xC6373d6F369A9FfE7D93B21F2A5b0E16291d996D",ys,n),t=new w.a.Contract(O,_s,n),a=new w.a.Contract("0xe6C2F6Ab401F08EB7B073Eac710D7DB2FBc2191C",gs,n);T(e.connect(n.getSigner())),I(t.connect(n.getSigner())),N(a.connect(n.getSigner()))}}),[i,s]),Object(a.useEffect)((function(){var e=function(){var e=Object(g.a)(f.a.mark((function e(){var t,n,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return W(!0),e.prev=1,e.next=4,P.enterGame({from:i,value:"1000000000000000000"});case 4:return t=e.sent,e.next=7,t.wait();case 7:n=e.sent,s=n.events,console.log("event",s),W(!1),mi.emit(hi.PLAY_AGAIN),e.next=23;break;case 14:return e.prev=14,e.t0=e.catch(1),console.log("error in enterGame",e.t0),Qe("error"),ze("You need 1 CRO to play game"),Xe(!0),Tt.dispatch(Ue(!1)),W(!1),e.abrupt("return");case 23:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(){return e.apply(this,arguments)}}();m&&e()}),[m]),Object(a.useEffect)((function(){var e=function(){var e=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:$e();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();y&&e()}),[y]),Object(a.useEffect)((function(){var e=function(){var e=Object(g.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,It.score.saveScore(i,b.toString(),x,E);case 2:return e.sent,Tt.dispatch(Ne(!1)),e.next=6,P.getCraftStatus(b);case 6:t=e.sent,n=t[2],mi.emit(hi.TOKEN_REWARDED),n<5?mi.emit(hi.CAN_PLAY):mi.emit(hi.SHIP_DAMAGED);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();p&&e()}),[p]),Object(a.useEffect)((function(){var e=function(){var e=Object(g.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,It.score.getScores(Pe,Ce);case 2:t=e.sent,xe(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[Pe,Ce]),Object(a.useEffect)((function(){var e=localStorage.getItem("forward"),t=localStorage.getItem("left"),i=localStorage.getItem("right"),n=localStorage.getItem("brake"),s=localStorage.getItem("fire"),a=localStorage.getItem("special"),r=localStorage.getItem("music"),o=localStorage.getItem("sounds"),l=localStorage.getItem("exit");null!==e&&"null"!==e&&void 0!==e&&"undefined"!==e&&Oe({forward:e,left:t,right:i,brake:n,fire:s,special:a,music:r,sounds:o,exit:l});var d=localStorage.getItem("difficulty");null!==d&&"null"!==d&&void 0!==d&&"undefined"!==d&&Te(d)}),[]),Object(a.useEffect)((function(){localStorage.setItem("forward",null===we||void 0===we?void 0:we.forward),localStorage.setItem("left",null===we||void 0===we?void 0:we.left),localStorage.setItem("right",null===we||void 0===we?void 0:we.right),localStorage.setItem("brake",null===we||void 0===we?void 0:we.brake),localStorage.setItem("fire",null===we||void 0===we?void 0:we.fire),localStorage.setItem("special",null===we||void 0===we?void 0:we.special),localStorage.setItem("music",null===we||void 0===we?void 0:we.music),localStorage.setItem("sounds",null===we||void 0===we?void 0:we.sounds),localStorage.setItem("exit",null===we||void 0===we?void 0:we.exit)}),[we]),Object(a.useEffect)((function(){localStorage.setItem("difficulty",ke||void 0)}),[ke]),mi.on(hi.GOTO_MAINMENU,(function(){o(!1),r("bg_shooter"),l("/")}));var $e=function(){i?(ee(!0),r("bg_shooter"),Tt.dispatch(Fe(!0))):(Qe("error"),ze("Please connect your wallet first."),Xe(!0))};return t=J||$?u||d?Object(M.jsx)(Cn,{specialKey:we.special}):Object(M.jsx)(fs,{children:Object(M.jsx)(Pn,{craftInstance:k,shooterInstance:P,tokenInstance:D,pilotInstance:Y,account:i,setBg:r,setIsGamePlaying:o,keyboard:we,isPlayEndless:J,isMultiplayer:$,difficulty:ke,setCalculating:W})}):Object(M.jsxs)(vs,{children:[Object(M.jsx)(xs,{children:Object(M.jsx)("img",{src:"assets/images/title.png",alt:"title"})}),Object(M.jsxs)(Es,{children:[Object(M.jsx)("img",{className:"play",src:"assets/images/btn_playendless.png",alt:"play endless",onClick:function(){i?(q(!0),r("bg_shooter")):(Qe("error"),ze("Please connect your wallet first."),Xe(!0))}}),Object(M.jsx)("img",{className:"play",src:"assets/images/btn_playmultiplayer.png",alt:"Multiplayer Mode",onClick:function(){return $e()}}),Object(M.jsx)("img",{className:"play",src:"assets/images/btn_crosmostation.png",alt:"enter crosmostation"}),Object(M.jsx)("img",{className:"setting",src:"assets/images/btn_difficulty.png",alt:"difficulty",onClick:function(){return _e(!0)}}),Object(M.jsx)("img",{className:"setting",src:"assets/images/btn_highscores.png",alt:"high scores",onClick:function(){return pe(!0)}})]}),Object(M.jsx)(Ss,{children:Object(M.jsx)("img",{src:"assets/images/btn_setting.png",alt:"setting",onClick:function(){return le(!0)}})}),Object(M.jsx)(zt,{noticeMsg:Ge,showNotice:Ke,setShowNotice:Xe,severity:Ze})]}),Object(M.jsxs)(bs,{isPlayEndless:J,isMultiplayer:$,children:[t,ge&&Object(M.jsx)(ms,{}),oe&&Object(M.jsx)(ss,{setIsSetting:le,keyboard:we,setKeboard:Oe}),ue&&Object(M.jsx)(qn,{scores:ve,setIsLeaderboard:pe,league:Ce,setLeague:De,period:Pe,setPeriod:Ie}),ye&&Object(M.jsx)(cs,{setIsDifficulty:_e,difficulty:ke,setDifficulty:Te}),ne&&Object(M.jsx)(Ts,{setIsChooseRoom:se}),H&&Object(M.jsx)(v.a,{sx:{position:"fixed",width:"100%",height:"100%",background:"rgba(0, 0, 0, .5)",top:0,left:0,pointerEvents:"stroke",zIndex:999},children:Object(M.jsx)(v.a,{sx:{position:"absolute",display:"flex",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"white"},children:Object(M.jsx)(V.a,{sx:{color:"inherit"}})})})]})},Rs=m.b.div(kn||(kn=Object(u.a)(["\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  background: url('assets/images/",".png');\n  background-position: center;\n  background-size: cover;\n}\n"])),(function(e){return e.bg})),Ps=m.b.div(Tn||(Tn=Object(u.a)(["\n  position: fixed;\n  bottom: 10px;\n  left: 50%;\n  transform: translate(-50%, 0%);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  color: #4a97d2;\n"]))),Is=m.b.div(Ln||(Ln=Object(u.a)(["\n  font-size: 20px;\n  color: white;\n  text-align: center;\n  font-weight: normal;\n"]))),Ms=Object(m.b)(y.a)(Rn||(Rn=Object(u.a)(["\n  width: 360px;\n"]))),Bs=function(){var e=_((function(e){return e.room.lobbyJoined})),t=Object(a.useState)({}),i=Object(c.a)(t,2),n=i[0],s=(n.walletProviderName,n.address),r=n.browserWeb3Provider,o=(n.serverWeb3Provider,n.connected,n.chainId),l=i[1],d=Object(a.useState)("bg_main"),u=Object(c.a)(d,2),m=u[0],y=u[1],g=Object(a.useState)(!1),b=Object(c.a)(g,2),f=b[0],v=b[1];return Object(M.jsxs)(Rs,{bg:m,children:[Object(M.jsxs)(p.a,{children:[!f&&Object(M.jsx)(F,{account:s,setWallet:l,setBg:y}),Object(M.jsxs)(h.d,{children:[Object(M.jsx)(h.b,{path:"/",element:Object(M.jsx)(h.a,{to:"/shooter",replace:!0})}),Object(M.jsx)(h.b,{path:"shooter",element:Object(M.jsx)(Ls,{account:s,web3Provider:r,chainId:o,setBg:y,setIsGamePlaying:v})})]})]}),!e&&Object(M.jsxs)(Ps,{children:[Object(M.jsx)(Is,{children:" Connecting to server..."}),Object(M.jsx)(Ms,{color:"inherit",sx:{mt:1}})]})]})},Cs=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,622)).then((function(t){var i=t.getCLS,n=t.getFID,s=t.getFCP,a=t.getLCP,r=t.getTTFB;i(e),n(e),s(e),a(e),r(e)}))};l.a.render(Object(M.jsx)(r.a.StrictMode,{children:Object(M.jsx)(d.a,{store:Tt,children:Object(M.jsx)(Bs,{})})}),document.getElementById("root")),Cs()}},[[553,1,2]]]);