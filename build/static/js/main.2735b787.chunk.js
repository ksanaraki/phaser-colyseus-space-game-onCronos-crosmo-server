(this["webpackJsonpcrosmo-crafts"]=this["webpackJsonpcrosmo-crafts"]||[]).push([[0],{346:function(e,t){},354:function(e,t){},357:function(e,t){},400:function(e,t){},402:function(e,t){},427:function(e,t){},429:function(e,t){},441:function(e,t){},442:function(e,t){},459:function(e,t){},470:function(e,t){},472:function(e,t){},597:function(e,t,n){"use strict";n.r(t);n(338);var i=n(0),a=n.n(i),s=n(72),o=n.n(s),r=n(131),d=n(10),l=n(11),c=n(110),p=n(18),h=n(13),u=n(669),m=r.c,y=n(1),x=n(12),g=n(670),_=n(656),b=n(666),f=n(672),v=n(61),w="0xA554482831bC8D5ae809B637f6932D4E608BE5E7",O={mode:"regular",testnet:{rpcUrl:"https://cronos-testnet-3.crypto.org:8545/",chainId:338,chainIdHex:"0x152",chainName:"Cronos Testnet",chainType:"mainnet",nativeCurrency:{name:"CRO",symbol:"CRO",decimals:18},blockExplorerUrl:"https://cronos.crypto.org/explorer/testnet3/"},mainnet:{rpcUrl:"https://mainnet.cronoslabs.com/v1/55e37d8975113ae7a44603ef8ce460aa",chainId:25,chainIdHex:"0x19",chainName:"Cronos Mainnet Beta",chainType:"mainnet",nativeCurrency:{name:"CRO",symbol:"CRO",decimals:18},blockExplorerUrl:"https://cronos.crypto.org/explorer/"}},j=function(e){var t=v.a.BigNumber.from(e);return parseInt(t.toString())},E=function(e){return new Promise((function(t){return setTimeout(t,e)}))},S=function(){var e=Object(x.a)(Object(y.a)().mark((function e(){return Object(y.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:O.mainnet.chainIdHex}]});case 3:e.next=10;break;case 5:return e.prev=5,e.t0=e.catch(0),console.log("error in switchNetwork",e.t0),e.next=10,window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:O.mainnet.chainIdHex,chainName:O.mainnet.chainName,rpcUrls:[O.mainnet.rpcUrl],nativeCurrency:O.mainnet.nativeCurrency,blockExplorerUrls:[O.mainnet.blockExplorerUrl]}]});case 10:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(x.a)(Object(y.a)().mark((function e(){var t;return Object(y.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,window.ethereum.request({method:"eth_chainId"});case 3:if(e.sent===O.mainnet.chainIdHex){e.next=9;break}return e.next=7,S();case 7:return e.next=9,E(2e3);case 9:return e.next=11,window.ethereum.request({method:"eth_requestAccounts"});case 11:return t=e.sent,e.t0=t[0],e.t1=new v.a.providers.Web3Provider(window.ethereum),e.t2=new v.a.providers.JsonRpcProvider(O.mainnet.rpcUrl),e.t3=j,e.next=18,window.ethereum.request({method:"eth_chainId"});case 18:return e.t4=e.sent,e.t5=(0,e.t3)(e.t4),e.abrupt("return",{walletProviderName:"metamask",address:e.t0,browserWeb3Provider:e.t1,serverWeb3Provider:e.t2,connected:!0,chainId:e.t5});case 23:return e.prev=23,e.t6=e.catch(0),console.log("error in connect",e.t6),e.abrupt("return",null);case 27:case"end":return e.stop()}}),e,null,[[0,23]])})));return function(){return e.apply(this,arguments)}}(),A=n(16),T=n(158),L=function(){var e=Object(x.a)(Object(y.a)().mark((function e(){var t,n;return Object(y.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,localStorage.clear(),t=new T.a({rpc:Object(A.a)({},O.mainnet.chainId,O.mainnet.rpcUrl),chainId:O.mainnet.chainId}),e.next=5,t.enable();case 5:if(n=new v.a.providers.Web3Provider(t),t.chainId===O.mainnet.chainId){e.next=9;break}return window.alert("Switch your Wallet to blockchain network "+O.mainnet.chainName),e.abrupt("return",null);case 9:return t.on("accountsChanged",(function(e){if(e.length<=0){var t={walletConnected:"false",expiry:(new Date).getTime()};localStorage.setItem("wallet-connected",JSON.stringify(t))}window.location.reload()})),e.next=12,n.listAccounts();case 12:return e.t0=e.sent[0],e.t1=n,e.t2=new v.a.providers.JsonRpcProvider(O.mainnet.rpcUrl),e.t3=t,e.t4=t.chainId,e.abrupt("return",{walletProviderName:"walletconnect",address:e.t0,browserWeb3Provider:e.t1,serverWeb3Provider:e.t2,wcProvider:e.t3,connected:!0,chainId:e.t4});case 20:return e.prev=20,e.t5=e.catch(0),e.abrupt("return",null);case 23:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(){return e.apply(this,arguments)}}(),R=n(2),P={fontSize:"25px",color:"var(--color-yellow)"},M={marginTop:2,fontSize:"19px",color:"#280D5f",background:"wheat","&:hover":{background:"rgba(253,218,158,0.8)"},padding:"10px 30px",display:"flex",justifyContent:"space-between"},I=function(e){var t=null,n=function(){var n=Object(x.a)(Object(y.a)().mark((function n(i){var a,s;return Object(y.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.setOpen(!1),n.t0=i,n.next="metamask"===n.t0?4:"walletconnect"===n.t0?9:14;break;case 4:return n.next=6,k();case 6:return t=n.sent,localStorage.setItem("wallet-type","metamask"),n.abrupt("break",17);case 9:return n.next=11,L();case 11:return t=n.sent,localStorage.setItem("wallet-type","walletconnect"),n.abrupt("break",17);case 14:return n.next=16,k();case 16:t=n.sent;case 17:null!==t&&(e.setWallet(t),a=new Date,s={walletConnected:"true",expiry:a.getTime()+36e5},localStorage.setItem("wallet-connected",JSON.stringify(s)));case 18:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e=new Date,t=JSON.parse(localStorage.getItem("wallet-connected")),i=null===t||void 0===t?void 0:t.walletConnected,a=null===t||void 0===t?void 0:t.expiry,s=localStorage.getItem("wallet-type");"true"===i&&a>e.getTime()&&n(s)}),[]),Object(R.jsx)("div",{children:Object(R.jsx)(_.a,{keepMounted:!0,open:e.open,onClose:function(){return e.setOpen(!1)},"aria-labelledby":"keep-mounted-modal-title","aria-describedby":"keep-mounted-modal-description",children:Object(R.jsxs)(g.a,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",maxWidth:350,width:"70%",backgroundColor:"rgba(40, 13, 95, 0.9)",boxShadow:"0px 11px 15px -7px rgb(255 255 255 / 20%), 0px -4px 10px 2px rgb(255 255 255 / 14%), 0px 9px 46px 8px rgb(255 255 255 / 12%);",borderRadius:5,p:4},children:[Object(R.jsx)(f.a,{id:"keep-mounted-modal-title",variant:"h6",component:"h2",sx:P,children:"Connect Wallet"}),Object(R.jsxs)(b.a,{fullWidth:!0,sx:M,onClick:function(){return n("metamask")},children:[Object(R.jsx)("img",{src:"assets/images/metamask.svg",width:"30",height:"30",style:{marginRight:10}}),"Metamask"]}),Object(R.jsxs)(b.a,{fullWidth:!0,sx:M,onClick:function(){return n("walletconnect")},children:[Object(R.jsx)("img",{src:"assets/images/walletconnect.svg",width:"30",height:"30",style:{marginRight:10}}),"Wallet Connect"]})]})})})},C=n(204),B=n.n(C),D=n(43),N=n(77),U=n(44),F={VERSION:"DEV",environment:{VERSION:"DEV",SIGN_DATA:"Crosmo Crafts",SIGN_PASS:"meta-pirate",API_URL:"http://10.10.17.151:2083/api",END_POINT:"ws://10.10.17.151:2083"}},z={SYNC_INTERVAL:50,gamePros:{screenWidth:1600,screenHeight:900,padding:30,introNewEnemyDelay:2e3,endLevelDelay:1500},multiPlayerPros:{screenWidth:1600,screenHeight:900},graphicAssets:{background:[{URL:"assets/images/backgrounds/0.png",name:"0"},{URL:"assets/images/backgrounds/1.png",name:"1"},{URL:"assets/images/backgrounds/2.png",name:"2"},{URL:"assets/images/backgrounds/3.png",name:"3"},{URL:"assets/images/backgrounds/4.png",name:"4"},{URL:"assets/images/backgrounds/5.png",name:"5"},{URL:"assets/images/backgrounds/6.png",name:"6"},{URL:"assets/images/backgrounds/7.png",name:"7"},{URL:"assets/images/backgrounds/8.png",name:"8"},{URL:"assets/images/backgrounds/9.png",name:"9"},{URL:"assets/images/backgrounds/10.png",name:"10"}],particles:{URL:"assets/images/particles.png",data:"assets/images/particle_orbs.json",name:"particles"},shipUrl:"assets/images/ships/",shipsTypes:["Black Spaceship type 1","Black Spaceship type 1","Black Spaceship type 2","Black Spaceship type 3","Blue Spaceship type 1","Blue Spaceship type 2","Blue Spaceship type 3","Gold Spaceship type 1","Gold Spaceship type 2","Gold Spaceship type 3","Green Spaceship type 1","Green Spaceship type 2","Green Spaceship type 3","Grey Spaceship type 1","Grey Spaceship type 2","Grey Spaceship type 3","Pink Spaceship type 1","Pink Spaceship type 2","Pink Spaceship type 3","Red Spaceship type 1","Red Spaceship type 2","Red Spaceship type 3","White Spaceship type 1","White Spaceship type 2","White Spaceship type 3","Holographic Spaceship"],bulletNormal:{URL:"assets/images/bullet_normal.png",name:"bulletNormal"},bulletAtomic:{URL:"assets/images/bullet_atomic.png",name:"bulletAtomic"},bulletUnlimited:{URL:"assets/images/bullet_unlimited.png",name:"bulletUnlimited"},bulletDouble:{URL:"assets/images/bullet_normal.png",name:"bulletDouble"},bulletTriple:{URL:"assets/images/bullet_normal.png",name:"bulletTriple"},bulletVolley:{URL:"assets/images/bullet_normal.png",name:"bulletVolley"},bulletLazer:{URL:"assets/images/bullet_lazer.png",name:"bulletLazer"},bulletExplose:{URL:"assets/images/bullet_explosive.png",name:"bulletExplose"},bulletRegion:{URL:"assets/images/bullet_region.png",name:"bulletRegion"},asteroidFirstL:{URL:"assets/images/asteroid_first_large.png",name:"asteroidFirstL"},asteroidFirstS:{URL:"assets/images/asteroid_first_small.png",name:"asteroidFirstS"},asteroidSecondL:{URL:"assets/images/asteroid_second_large.png",name:"asteroidSecondL"},asteroidSecondS:{URL:"assets/images/asteroid_second_small.png",name:"asteroidSecondS"},airdropRapid:{URL:"assets/images/airdrop_rapid.png",name:"airdropRapid"},airdropDouble:{URL:"assets/images/airdrop_double.png",name:"airdropDouble"},airdropTriple:{URL:"assets/images/airdrop_triple.png",name:"airdropTriple"},airdropBurst:{URL:"assets/images/airdrop_burst.png",name:"airdropBurst"},airdropExplosive:{URL:"assets/images/airdrop_explosive.png",name:"airdropExplosive"},airdropLazer:{URL:"assets/images/airdrop_lazer.png",name:"airdropLazer"},airdropRocket:{URL:"assets/images/airdrop_rocket.png",name:"airdropRocket"},airdropLife:{URL:"assets/images/airdrop_life.png",name:"airdropLife"},airdropShield:{URL:"assets/images/airdrop_shield.png",name:"airdropShield"},shield:{URL:"assets/images/shield.png",name:"shield"},enemyFirst:{URL:"assets/images/enemy_1.png",name:"enemyFirst"},enemySecond:{URL:"assets/images/enemy_2.png",name:"enemySecond"},enemyBullet:{URL:"assets/images/bullet_enemy.png",name:"enemyBullet"},rocketFirst:{URL:"assets/images/rocket_1.png",name:"rocketFirst"},rocketSecond:{URL:"assets/images/rocket_2.png",name:"rocketSecond"},rocketThird:{URL:"assets/images/rocket_3.png",name:"rocketThird"},rocketFourth:{URL:"assets/images/rocket_4.png",name:"rocketFourth"},rocketBullet:{URL:"assets/images/bullet_boss.png",name:"rocketBullet"},lifeEmpty:{URL:"assets/images/life_empty.png",name:"lifeEmpty"},lifeFull:{URL:"assets/images/life_full.png",name:"lifeFull"},lazerEffectParticle:{URL:"assets/images/lazer_effect.png",data:"assets/images/particle_lazer.json",name:"lazerEffectParticle"}},soundAssets:{bg:[{URL:"assets/sounds/bg/0.mp3",name:"0"},{URL:"assets/sounds/bg/1.mp3",name:"1"},{URL:"assets/sounds/bg/2.mp3",name:"2"},{URL:"assets/sounds/bg/3.mp3",name:"3"},{URL:"assets/sounds/bg/4.mp3",name:"4"},{URL:"assets/sounds/bg/5.mp3",name:"5"},{URL:"assets/sounds/bg/6.mp3",name:"6"}],fire:{URL:["assets/sounds/fire.m4a","assets/sounds/fire.ogg"],name:"fire"},destroyed:{URL:["assets/sounds/destroyed.m4a","assets/sounds/destroyed.ogg"],name:"destroyed"},engine:{URL:"assets/sounds/engine.mp3",name:"engine"},shipExplose:{URL:"assets/sounds/ship_explode.wav",name:"shipExplose"}},shipPros:{acceleration:200,drag:100,maxVelocity:300,angularVelocity:180,startingLives:5,blinkDelay:.2},bulletPros:{NORMAL_BULLET:{maxBullets:5,fireCooldown:.4,passiveRegenCooldown:1,speed:300,lifespan:2e3},UNLIMITED_BULLET:{maxBullets:99,fireCooldown:.4,passiveRegenCooldown:.1,speed:300,lifespan:2e3},DOUBLE_BULLET:{maxBullets:5,fireCooldown:.4,passiveRegenCooldown:1,speed:300,lifespan:2e3},TRIPLE_BULLET:{maxBullets:5,fireCooldown:.4,passiveRegenCooldown:1,speed:300,lifespan:2e3},VOLLEY_BULLET:{maxBullets:5,fireCooldown:.4,passiveRegenCooldown:1,speed:300,lifespan:2e3},LAZER_BULLET:{maxBullets:10,fireCooldown:.5,passiveRegenCooldown:1,speed:450,lifespan:2e3},EXPLOSIVE_BULLET:{maxBullets:5,fireCooldown:.8,passiveRegenCooldown:1,speed:250,lifespan:2e3},ATOMIC_BULLET:{maxBullets:5,fireCooldown:.4,passiveRegenCooldown:1,speed:300,lifespan:2e3}},asteroidPros:{startingAsteroids:1,maxAsteroids:10,incrementAsteroids:1,minSpeed:60,maxSpeed:60},enemyPros:{minSpeed:60,maxSpeed:80,startingEnemies:0,incrementEnemies:1,startingBoss:0,incrementBoss:1,bossLives:10,angVelRange:40},enemyBulletPros:{maxBullets:999,fireCooldown:3,passiveRegenCooldown:0,normalSpeed:120,velocity:{x:180,y:180},lives:2,bossSpeed:180,bossFireCooldown:.8},airdropPros:{percentAsteroid:5,percentEnemy:70,percentBoss:100,duration:15,lifetime:10,alertTime:7},fontAssets:{endLevel:{fontFamily:"Fast Hand",fontSize:"30px",color:"#ffffff"},waitingFontStyle:{fontFamily:"Fast Hand",fontSize:"45px",color:"#ff601a",align:"center"},scoreLabel:{fontFamily:"Fast Hand",fontSize:"30px",color:"#24c2bc"},scoreText:{fontFamily:"Fast Hand",fontSize:"30px",color:"#ffffff"},levelLabel:{fontFamily:"Fast Hand",fontSize:"20px",color:"#ff601a"},levelText:{fontFamily:"Fast Hand",fontSize:"20px",color:"#ffffff"},gameoverFontStyle:{fontFamily:"Fast Hand",fill:"#ff601a",fontSize:"50px",align:"center"}}},V=Object(U.a)(Object(U.a)({},F),z);function Y(e,t){return e+Math.random()*(t-e)}function G(e){var t=e;return t.length>9&&t.endsWith("-ss")&&(t=t.substring(0,t.length-3)),t.replace(/[^0-9a-z]/gi,"G")}var H=Math.PI/4,W={FIRST:{LARGE:V.graphicAssets.asteroidFirstL.name,SMALL:V.graphicAssets.asteroidFirstS.name},SECOND:{LARGE:V.graphicAssets.asteroidSecondL.name,SMALL:V.graphicAssets.asteroidSecondS.name}},K="FIRST",X="SECOND",J="LARGE",q="SMALL",Z="NORMAL_BULLET",Q="UNLIMITED_BULLET",$="DOUBLE_BULLET",ee="TRIPLE_BULLET",te="VOLLEY_BULLET",ne="LAZER_BULLET",ie="EXPLOSIVE_BULLET",ae="ATOMIC_BULLET",se={NORMAL_BULLET:V.graphicAssets.bulletNormal.name,UNLIMITED_BULLET:V.graphicAssets.bulletUnlimited.name,DOUBLE_BULLET:V.graphicAssets.bulletDouble.name,TRIPLE_BULLET:V.graphicAssets.bulletTriple.name,VOLLEY_BULLET:V.graphicAssets.bulletVolley.name,LAZER_BULLET:V.graphicAssets.bulletLazer.name,EXPLOSIVE_BULLET:V.graphicAssets.bulletExplose.name,REGION_BULLET:V.graphicAssets.bulletRegion.name,ATOMIC_BULLET:V.graphicAssets.bulletAtomic.name},oe={UNLIMITED_BULLET:V.graphicAssets.airdropRapid.name,DOUBLE_BULLET:V.graphicAssets.airdropDouble.name,TRIPLE_BULLET:V.graphicAssets.airdropTriple.name,VOLLEY_BULLET:V.graphicAssets.airdropBurst.name,LAZER_BULLET:V.graphicAssets.airdropLazer.name,EXPLOSIVE_BULLET:V.graphicAssets.airdropExplosive.name,ATOMIC_BULLET:V.graphicAssets.airdropRocket.name,LIFE:V.graphicAssets.airdropLife.name,SHIELD:V.graphicAssets.airdropShield.name},re="UNLIMITED_BULLET",de="DOUBLE_BULLET",le="TRIPLE_BULLET",ce="VOLLEY_BULLET",pe="LAZER_BULLET",he="EXPLOSIVE_BULLET",ue="ATOMIC_BULLET",me="LIFE",ye="SHIELD",xe={NORMAL_FIRST:V.graphicAssets.enemyFirst.name,NORMAL_SECOND:V.graphicAssets.enemySecond.name,BOSS_FIRST:V.graphicAssets.rocketFirst.name,BOSS_SECOND:V.graphicAssets.rocketSecond.name,BOSS_THIRD:V.graphicAssets.rocketThird.name,BOSS_FOURTH:V.graphicAssets.rocketFourth.name},ge="NORMAL_FIRST",_e="NORMAL_SECOND",be="NORMAL_BOTH",fe="BOSS_FIRST",ve="BOSS_SECOND",we="BOSS_THIRD",Oe="BOSS_FOURTH",je={0:"ZERO",1:"BRONZE",2:"SILVER",3:"GOLD",4:"DIAMOND",5:"PLATINUM"},Ee={0:0,1:1e3,2:4e3,3:1e4,4:24e3,5:44e3},Se={0:0,1:1,2:2,3:2,4:2,5:3},ke={0:1,1:.95,2:.9,3:.85,4:.8,5:.75},Ae={0:0,1:0,2:0,3:1,4:1,5:2},Te={0:1,1:1,2:1,3:1,4:1.25,5:1.5},Le={easy:{STARTING_ASTEROIDS:0,INCREASE_ASTEROIDS:0,MAX_ASTEROIDS:0,MIN_ASTEROID_SPEED:1,MAX_ASTEROID_SPEED:1,STARTING_ENEMIES:0,INCREASE_ENEMIES:0,MIN_ENEMY_SPEED:1,MAX_ENEMY_SPEED:1},medium:{STARTING_ASTEROIDS:1,INCREASE_ASTEROIDS:0,MAX_ASTEROIDS:3,MIN_ASTEROID_SPEED:1,MAX_ASTEROID_SPEED:1,STARTING_ENEMIES:1,INCREASE_ENEMIES:0,MIN_ENEMY_SPEED:1,MAX_ENEMY_SPEED:1},hard:{STARTING_ASTEROIDS:1,INCREASE_ASTEROIDS:1,MAX_ASTEROIDS:5,MIN_ASTEROID_SPEED:1,MAX_ASTEROID_SPEED:1,STARTING_ENEMIES:1,INCREASE_ENEMIES:1,MIN_ENEMY_SPEED:1.1,MAX_ENEMY_SPEED:1.1},extreme:{STARTING_ASTEROIDS:2,INCREASE_ASTEROIDS:1,MAX_ASTEROIDS:8,MIN_ASTEROID_SPEED:1,MAX_ASTEROID_SPEED:1,STARTING_ENEMIES:2,INCREASE_ENEMIES:1,MIN_ENEMY_SPEED:1.2,MAX_ENEMY_SPEED:1.2}},Re=Object(N.b)({name:"user",initialState:{sessionId:"",videoConnected:!1,loggedIn:!1,gameOver:!1,canPlayAgain:!1,joinLobbyRoom:!1,tokenId:-1,shipName:"",tier:0,paid:!1,team:0,wasted:0,hits:0,playerNameMap:new Map,showJoystick:!0},reducers:{setSessionId:function(e,t){e.sessionId=t.payload},setVideoConnected:function(e,t){e.videoConnected=t.payload},setLoggedIn:function(e,t){e.loggedIn=t.payload},setGameOver:function(e,t){e.gameOver=t.payload},setCanPlayAgain:function(e,t){e.canPlayAgain=t.payload},setJoinLobbyRoom:function(e,t){e.joinLobbyRoom=t.payload},setTokenId:function(e,t){e.tokenId=t.payload},setShipName:function(e,t){e.shipName=t.payload},setTier:function(e,t){e.tier=t.payload},setPaid:function(e,t){e.paid=t.payload},setTeam:function(e,t){e.team=t.payload},setWasted:function(e,t){e.wasted=t.payload},setHits:function(e,t){e.hits=t.payload},setPlayerNameMap:function(e,t){e.playerNameMap.set(G(t.payload.id),t.payload.name)},removePlayerNameMap:function(e,t){e.playerNameMap.delete(G(t.payload))},setShowJoystick:function(e,t){e.showJoystick=t.payload}}}),Pe=Re.actions,Me=Pe.setSessionId,Ie=(Pe.setVideoConnected,Pe.setLoggedIn,Pe.setGameOver),Ce=Pe.setCanPlayAgain,Be=Pe.setJoinLobbyRoom,De=Pe.setTokenId,Ne=Pe.setShipName,Ue=Pe.setPaid,Fe=Pe.setTeam,ze=(Pe.setWasted,Pe.setHits,Pe.setTier),Ve=Pe.setPlayerNameMap,Ye=Pe.removePlayerNameMap,Ge=(Pe.setShowJoystick,Re.reducer),He=Object(N.b)({name:"wallet",initialState:{account:"",craftInstance:null,shooterInstance:null,tokenInstance:null,pilotInstance:null,walletConnecting:!1},reducers:{setAccount:function(e,t){e.account=t.payload},setCraftInstance:function(e,t){e.craftInstance=t.payload},setShooterInstance:function(e,t){e.shooterInstance=t.payload},setTokenInstance:function(e,t){e.tokenInstance=t.payload},setPilotInstance:function(e,t){e.pilotInstance=t.payload},setWalletConnecting:function(e,t){e.walletConnecting=t.payload}}}),We=He.actions,Ke=(We.setAccount,We.setCraftInstance,We.setShooterInstance,We.setTokenInstance,We.setPilotInstance,We.setWalletConnecting),Xe=He.reducer,Je=function(e){return e.LOBBY="lobby",e.PUBLIC="crosmo",e.CUSTOM="custom",e}({}),qe=function(e){return e.name===Je.CUSTOM},Ze=Object(N.b)({name:"room",initialState:{lobbyJoined:!1,roomJoined:!1,roomId:"",roomData:void 0,availableRooms:new Array,playerList:new Array,curPlayer:"",curRoom:0},reducers:{setLobbyJoined:function(e,t){e.lobbyJoined=t.payload},setRoomJoined:function(e,t){e.roomJoined=t.payload},setCurRoom:function(e,t){e.curRoom=t.payload},setCurPlayer:function(e,t){e.curPlayer=t.payload},setJoinedRoomData:function(e,t){e.roomId=t.payload.id,e.roomData=t.payload},setPlayerList:function(e,t){e.playerList=t.payload.filter((function(e){return!0}))},setAvailableRooms:function(e,t){e.availableRooms=t.payload.filter((function(e){return qe(e)}))},addAvailableRooms:function(e,t){if(qe(t.payload.room)){var n=e.availableRooms.findIndex((function(e){return e.roomId===t.payload.roomId}));-1!==n?e.availableRooms[n]=t.payload.room:e.availableRooms.push(t.payload.room)}},removeAvailableRooms:function(e,t){e.availableRooms=e.availableRooms.filter((function(e){return e.roomId!==t.payload}))}}}),Qe=Ze.actions,$e=Qe.setLobbyJoined,et=Qe.setRoomJoined,tt=Qe.setJoinedRoomData,nt=Qe.setAvailableRooms,it=Qe.addAvailableRooms,at=Qe.removeAvailableRooms,st=Qe.setPlayerList,ot=Qe.setCurPlayer,rt=Qe.setCurRoom,dt=Ze.reducer,lt=Object(N.b)({name:"phaser",initialState:{bulletName:"",bulletDuration:0,shieldName:"",shieldDuration:0,bulletChanged:!1,shieldChanged:!1,hasAtomic:!1,isExist:!1},reducers:{setBulletName:function(e,t){e.bulletName=t.payload,e.bulletChanged=!e.bulletChanged},setBulletDuration:function(e,t){e.bulletDuration=t.payload},setShieldName:function(e,t){e.shieldName=t.payload,e.shieldChanged=!e.shieldChanged},setShieldDuration:function(e,t){e.shieldDuration=t.payload},setHasAtomic:function(e,t){e.hasAtomic=t.payload},setIsExist:function(e,t){e.isExist=t.payload}}}),ct=lt.actions,pt=ct.setBulletName,ht=ct.setBulletDuration,ut=ct.setShieldName,mt=ct.setShieldDuration,yt=ct.setHasAtomic,xt=ct.setIsExist,gt=lt.reducer;Object(D.d)();var _t,bt,ft,vt,wt,Ot,jt,Et,St,kt,At,Tt,Lt,Rt,Pt,Mt,It,Ct=Object(N.a)({reducer:{user:Ge,wallet:Xe,room:dt,phaser:gt},middleware:function(e){return e({serializableCheck:!1})}}),Bt=function(e){var t=v.a.BigNumber.from(e);return parseInt(t.toString())},Dt=function(){var e=Object(x.a)(Object(y.a)().mark((function e(){var t,n,i,a,s,o,r,d=arguments;return Object(y.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.length>0&&void 0!==d[0]&&d[0],d.length>1&&void 0!==d[1]?d[1]:"",t={injected:{display:{logo:"https://github.com/MetaMask/brand-resources/raw/master/SVG/metamask-fox.svg",name:"MetaMask",description:"Connect with MetaMask in your browser"},package:null},walletconnect:{package:T.a,options:{chainId:O.mainnet.chainId,rpc:Object(A.a)({},O.mainnet.chainId,O.mainnet.rpcUrl),network:"cronos",metadata:{icons:["https://ebisusbay.com/vector%20-%20face.svg"]}}}},n=new B.a({cacheProvider:!1,disableInjectedProvider:!1,providerOptions:t}),e.next=6,n.connect().then((function(e){return e})).catch((function(e){return console.log("Could not get a wallet connection",e),null}));case 6:if(i=e.sent){e.next=11;break}return console.log("web3provider"),Nt(),e.abrupt("return",null);case 11:return e.prev=11,Ct.dispatch(Ke(!0)),a=new v.a.providers.Web3Provider(i),e.next=16,i.request({method:"net_version"});case 16:return s=e.sent,e.next=19,i.request({method:"eth_accounts",params:[{chainId:s}]});case 19:if(o=e.sent,r=o[0],i.on("DeFiConnectorDeactivate",(function(e){console.log("DeFiConnectorDeactivate"),Nt()})),i.on("disconnect",(function(e){console.log("disconnect"),Nt()})),i.on("accountsChanged",(function(e){console.log("accountsChanged"),Nt()})),i.on("DeFiConnectorUpdate",(function(e){console.log("DeFiConnectorUpdate"),Ut(!1),window.location.reload()})),i.on("chainChanged",(function(e){console.log("chainChanged"),Ut(!1),window.location.reload()})),Ct.dispatch(Ke(!1)),Ut(!0),localStorage.setItem("wallet-type",i.isMetaMask?"metamask":"walletconnect"),e.t0=i.isMetaMask?"metamask":"walletconnect",e.t1=r,e.t2=a,e.t3=new v.a.providers.JsonRpcProvider(O.mainnet.rpcUrl),e.t4=a,!i.isMetaMask){e.next=42;break}return e.t6=Bt,e.next=38,window.ethereum.request({method:"eth_chainId"});case 38:e.t7=e.sent,e.t5=(0,e.t6)(e.t7),e.next=43;break;case 42:e.t5=Bt(i.chainId);case 43:return e.t8=e.t5,e.abrupt("return",{walletProviderName:e.t0,address:e.t1,browserWeb3Provider:e.t2,serverWeb3Provider:e.t3,wcProvider:e.t4,connected:!0,chainId:e.t8});case 47:return e.prev=47,e.t9=e.catch(11),console.log("Error connecting wallet!",e.t9),Nt(),e.abrupt("return",null);case 52:case"end":return e.stop()}}),e,null,[[11,47]])})));return function(){return e.apply(this,arguments)}}(),Nt=function(){new B.a({cacheProvider:!1,providerOptions:{}}).clearCachedProvider(),Ct.dispatch(Ke(!1)),Ut(!1)},Ut=function(e){var t=new Date,n={walletConnected:e?"true":"false",expiry:e?t.getTime()+36e5:t.getTime()};localStorage.setItem("wallet-connected",JSON.stringify(n))},Ft=h.a.div(_t||(_t=Object(l.a)(["\n  position: absolute;\n  top: 0;\n  right: 0;\n  left: 0;\n  display: flex;\n  justify-content: space-between;\n  padding: 30px 50px;\n  align-items: flex-start;\n\n  @media only screen and (max-width: 1024px) and (orientation:portrait)  {\n    padding: 24px 30px;\n  }\n  \n  @media only screen and (max-width: 960px) and (orientation:portrait)  {\n      \n  }\n  \n  @media only screen and (max-width: 860px) and (orientation:portrait)  {\n    padding: 20px 26px;\n  }\n  \n  @media only screen and (max-width: 768px) and (orientation:portrait)  {\n      \n  }\n\n  @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n    padding: 16px 20px;\n  }\n  \n  @media only screen and (max-width: 960px) and (orientation:landscape)  {\n      \n  }\n  \n  @media only screen and (max-width: 860px) and (orientation:landscape)  {\n    padding: 8px 16px;\n  }\n  \n  @media only screen and (max-width: 768px) and (orientation:landscape)  {\n      \n  }\n\n  @media only screen and (max-width: 639px) {\n    padding: 16px 24px;\n    z-index: 999;\n  }\n\n  @media only screen and (max-width: 560px) {\n\n  }\n\n  @media only screen and (max-width: 480px) {\n\n  }\n  \n\n  img.logo {\n    width: 85px;\n    height: 87px;\n\n    @media only screen and (max-width: 1024px) and (orientation:portrait)  {\n      width: 76px;\n      height: 76px;\n    }\n    \n    @media only screen and (max-width: 960px) and (orientation:portrait)  {\n        \n    }\n    \n    @media only screen and (max-width: 860px) and (orientation:portrait)  {\n      width: 68px;\n      height: 68px;\n    }\n    \n    @media only screen and (max-width: 768px) and (orientation:portrait)  {\n        \n    }\n\n    @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n      width: 64px;\n      height: 64px;\n    }\n    \n    @media only screen and (max-width: 960px) and (orientation:landscape)  {\n        \n    }\n    \n    @media only screen and (max-width: 860px) and (orientation:landscape)  {\n      width: 48px;\n      height: 48px;\n    }\n    \n    @media only screen and (max-width: 768px) and (orientation:landscape)  {\n        \n    }\n\n    @media only screen and (max-width: 639px) {\n      width: 64px;\n      height: 64px;\n    }\n\n    @media only screen and (max-width: 560px) {\n\n    }\n\n    @media only screen and (max-width: 480px) {\n      width: 48px;\n      height: 48px;\n    }\n  }\n"]))),zt=h.a.div(bt||(bt=Object(l.a)(["\n  background: url('assets/images/btn_connect.png');\n  background-size: contain;\n  width: 250px;\n  height: 47px;\n  color: white;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  cursor: pointer;\n  font-size: 17px;\n"]))),Vt=function(e){return new Promise((function(t){return setTimeout(t,e)}))},Yt=function(e){var t=e.account,n=e.setWallet,a=e.setBg,s=m((function(e){return e.wallet.walletConnecting})),o=Object(i.useState)(!1),r=Object(d.a)(o,2),l=r[0],p=r[1];Object(i.useEffect)((function(){new Date;var e=JSON.parse(localStorage.getItem("wallet-connected"));null===e||void 0===e||e.walletConnected,null===e||void 0===e||e.expiry,localStorage.getItem("wallet-type")}),[]);var h=function(){var e=Object(x.a)(Object(y.a)().mark((function e(){var i;return Object(y.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=7;break}return e.next=3,Dt();case 3:(i=e.sent)&&n(i),e.next=15;break;case 7:if(s){e.next=14;break}return Nt(),e.next=11,Vt(100);case 11:window.location.reload(),e.next=15;break;case 14:return e.abrupt("return");case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsxs)(Ft,{children:[Object(R.jsx)(c.b,{to:"/",onClick:function(){return a("bg_main")},children:Object(R.jsx)("img",{className:"logo",src:"assets/images/logo_yellow.png",alt:"logo"})}),Object(R.jsx)(zt,{onClick:h,className:"wallet-btn",children:s?"Connecting...":t?function(e){return e.slice(0,7)+"..."+e.slice(38,42)}(t):"CONNECT YOUR WALLET"})]}),Object(R.jsx)(I,{open:l,setOpen:p,setWallet:n})]})},Gt=n(671),Ht=n(102),Wt=n.n(Ht),Kt={login:function(){var e=Object(x.a)(Object(y.a)().mark((function e(t){var n;return Object(y.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wt.a.post("".concat("http://44.197.67.107:2083/api","/auth/login"),{account:t});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Xt={auth:Kt,score:{getScores:function(e,t){return Wt.a.post("".concat("http://44.197.67.107:2083/api","/score/getScores"),{period:e,league:t})},saveScoreLog:function(e,t,n,i,a){return Wt.a.post("".concat("http://44.197.67.107:2083/api","/score/saveScoreLog"),{account:e,tokenId:t,shipName:n,tier:i,score:a},{headers:{token:!!localStorage.getItem("jwt")&&JSON.parse(localStorage.getItem("jwt")).token}})}}},Jt=n(30),qt=n(207),Zt=n(661),Qt=n(662),$t=n(673),en=n(663),tn=n(659),nn=n(653),an=n(654),sn=n(652),on=(n(298),n(299),n(660)),rn=n(658),dn=a.a.forwardRef((function(e,t){return Object(R.jsx)(rn.a,Object(U.a)({elevation:6,ref:t,variant:"filled"},e))})),ln=function(e){var t=e.noticeMsg,n=e.showNotice,i=e.setShowNotice,a=e.severity,s=function(e,t){"clickaway"!==t&&i(!1)};return Object(R.jsx)(on.a,{open:n,autoHideDuration:5e3,onClose:s,anchorOrigin:{vertical:"top",horizontal:"right"},children:Object(R.jsx)(dn,{onClose:s,severity:a,sx:{width:"100%"},children:t})})},cn=h.a.div(ft||(ft=Object(l.a)(["\n  width: 100%;\n  max-width: 1700px;\n  margin: 0 auto;\n\n  @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n    margin-top: 10%;\n  }\n\n  @media only screen and (max-width: 639px) {\n    max-width: 100%;\n  }\n}\n"]))),pn=h.a.div(vt||(vt=Object(l.a)(["\n  width: 88%;\n  max-width: 980px;\n  margin: 0 auto;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n    width: 92%;\n    max-width: 100%;\n  }\n  \n  @media only screen and (max-width: 639px) {\n    width: 92%;\n  }\n"]))),hn=h.a.h3(wt||(wt=Object(l.a)(["\n  font-size: 25px;\n  color: white;\n  text-align: center;\n  font-weight: normal;\n\n  @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n    p {\n      font-size: 24px;\n      color: #FFFFFF;\n    }\n    img {\n      width: 90%;\n    }\n  }\n\n  @media only screen and (max-width: 639px) {\n    p {\n      font-size: 24px;\n      color: #FFFFFF;\n    }\n    img {\n      width: 90%;\n    }\n  }\n"]))),un=h.a.div(Ot||(Ot=Object(l.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  width: 100%;\n  @media only screen and (max-width: 639px) {\n    display: block;\n  }\n"]))),mn=h.a.div(jt||(jt=Object(l.a)(["\n  width: 70%;\n\n  @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n    width: 50%;\n  }\n  \n  @media only screen and (max-width: 639px) {\n    width: 100%;\n    max-width: 100%;\n  }\n\n  @media only screen and (max-width: 560px) {\n    \n  }\n\n  @media only screen and (max-width: 480px) {\n    \n  }\n"]))),yn=h.a.div(Et||(Et=Object(l.a)(["\n  text-align: center;\n  margin-bottom: 10px;\n  p {\n    font-size: 48px;\n    color: #FFFFFF;\n  }\n  img {\n    width: 450px;\n  }\n  \n  @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n    margin-bottom: 8px;\n    p {\n      font-size: 24px;\n      color: #FFFFFF;\n    }\n    img {\n      width: 78%;\n    }\n  }\n\n  @media only screen and (max-width: 639px) {\n    margin-bottom: 16px;\n    p {\n      font-size: 38px;\n      color: #FFFFFF;\n    }\n    img {\n      width: 90%;\n    }\n  }\n"]))),xn=h.a.div(St||(St=Object(l.a)(["\n  display: flex;\n  justify-content: space-between;\n"]))),gn=h.a.div(kt||(kt=Object(l.a)(["\n  width: 425px;\n  height: 460px;\n  background-size: contain;\n  margin: 0 auto;\n  display: flex;\n\n  --swiper-navigation-size: 24px;\n\n  @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n    width: 226px;\n    height: 226px;\n  }\n\n  @media only screen and (max-width: 639px) {\n\n  }\n\n  @media only screen and (max-width: 480px) {\n    width: 264px;\n    height: 264px;\n    max-height: fit-content;\n  }\n\n  .swiper-container {\n    width: 425px;\n    height: 440px;\n    border-radius: 8px;\n    overflow: hidden;\n\n    @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n      width: 226px;\n      height: 226px;\n    }\n\n    @media only screen and (max-width: 480px) {\n      width: 264px;\n      height: 264px;\n    }\n  }\n\n  .swiper-container .swiper-button-next::after,\n  .swiper-container .swiper-button-prev::after {\n    content: none;\n  }\n\n  .swiper-slide {\n    height: 440px;\n    margin-top: 30px;\n    margin-left: 0px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n      width: 226px;\n      height: 235px;\n      argin-top: 36px;\n    }\n\n    @media only screen and (max-width: 480px) {\n      width: 264px;\n      height: 264px;\n    }\n  }\n\n  .swiper-slide img.create-game {\n    width: 100%;\n    height: 100%;\n    object-fit: cover\n  }\n\n  .swiper-slide p.title {\n    position: absolute;\n    color: white;\n    font-size: 36px;\n  }\n\n  .swiper-slide img.ship {\n    position: absolute;\n    width: 400px;\n    top: 0px;\n    left: 12px;\n    @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n      width: 226px;\n      top: -36px;\n      left: 0px;\n    }\n\n    @media only screen and (max-width: 480px) {\n      width: 264px;\n      left: 0px;\n    }\n  }\n\n  .swiper-slide img.shield {\n    position: absolute;\n    width: 400px;\n    top: 0px;\n    left: 12px;\n\n    @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n      width: 226px;\n      top: -36px;\n      left: 0px;\n    }\n    @media only screen and (max-width: 480px) {\n      width: 264px;\n      left: 0px;\n    }\n  }\n  \n  .swiper-slide img.broken {\n    position: absolute;\n    width: 400px;\n    top: 0px;\n    left: 12px;\n    @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n      width: 226px;\n      top: -36px;\n      left: 0px;\n    }\n    @media only screen and (max-width: 480px) {\n      width: 264px;\n      left: 0px;\n    }\n  }\n  .swiper-slide img.crosmonaut {\n    position: absolute;\n    width: 400px;\n    top: 0px;\n    left: 12px;\n    @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n      width: 226px;\n      top: -36px;\n      left: 0px;\n    }\n    @media only screen and (max-width: 480px) {\n      width: 264px;\n      left: 0px;\n    }\n  }\n  .swiper-slide img.background {\n    position: absolute;\n    width: 400px;\n    top: 0px;\n    left: 12px;\n    @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n      width: 226px;\n      top: -36px;\n      left: 0px;\n    }\n    @media only screen and (max-width: 480px) {\n      width: 264px;\n      left: 0px;\n    }\n  }\n  .swiper-slide img.on_background {\n    position: absolute;\n    width: 400px;\n    top: 0px;\n    left: 12px;\n    @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n      width: 226px;\n      top: -36px;\n      left: 0px;\n    }\n    @media only screen and (max-width: 480px) {\n      width: 264px;\n      left: 0px;\n      top: -30px;\n    }\n  }\n  .swiper-slide img.booster {\n    position: absolute;\n    width: 400px;\n    top: 0px;\n    left: 12px;\n    @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n      width: 226px;\n      top: -36px;\n      left: 0px;\n    }\n    @media only screen and (max-width: 480px) {\n      width: 264px;\n      left: 0px;\n    }\n  }\n  .swiper-slide img.weapon {\n    position: absolute;\n    width: 400px;\n    top: 0px;\n    left: 12px;\n    @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n      width: 226px;\n      top: -36px;\n      left: 0px;\n    }\n    @media only screen and (max-width: 480px) {\n      width: 264px;\n      left: 0px;\n    }\n  }\n  \n  .swiper-slide img.banner {\n    position: absolute;\n    width: 400px;\n    top: 0px;\n    left: 12px;\n    @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n      width: 226px;\n      top: -36px;\n      left: 0px;\n    }\n    @media only screen and (max-width: 480px) {\n      width: 264px;\n      left: 0px;\n    }\n  }\n  .swiper-slide img.tier {\n    position: absolute;\n    width: 80px;\n    top: 20px;\n    right: 33px;\n    @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n      width: 226px;\n    }\n    @media only screen and (max-width: 480px) {\n      width: 264px;\n      top: 0px;\n      left: 0px;\n    }\n  }\n  \n  .swiper-slide img.avatarBg {\n    position: absolute;\n    top: -46px;\n    left: 2px;\n    width: 421px;\n    height: 462px;\n    @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n      width: 226px;\n      height: 226px;\n      top: -45px;\n      left: 1px;\n    }\n    @media only screen and (max-width: 480px) {\n      width: 264px;\n      height: 264px;\n      top: -26px;\n      left: 0;\n      height: calc(100% + 30px);\n    }\n  }\n\n  .swiper-slide p.name {\n    position: absolute;\n    top: -15px;\n    left: calc(50% );\n    transform: translate(-50%, 0);\n    font-size: 16px;\n    color: var(--color-yellow);\n\n    @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n      width: 226px;\n      width: 226px;\n      text-align: center;\n      top: -32px;\n    }\n\n    @media only screen and (max-width: 480px) {\n      top: -20px;\n      top: -16px;\n      width: 264px;\n      text-align: center;\n    }\n  }\n\n  .swiper-slide p.tier {\n    position: absolute;\n    left: calc(50% - 10px);\n    bottom: 50px;\n    transform: translate(-50%, 0);\n    font-size: 16px;\n    color: var(--color-yellow);\n  }\n"]))),_n=h.a.div(At||(At=Object(l.a)(["\n  display: flex;\n  align-items: center;\n  \n  img {\n    width: 50px;\n    height: 55px;\n    cursor: pointer;\n\n    @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n      width: 30px;\n      height: 30x;\n    }\n\n    @media only screen and (max-width: 480px) {\n      width: 32px;\n      height: 32px;\n      margin-top: 26px;\n    }\n  }\n"]))),bn=h.a.div(Tt||(Tt=Object(l.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-around;\n  height: 300px;\n  flex-direction: column;\n  margin-top: 65px;\n\n  color: var(--color-yellow);\n\n  @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n    width: 50%;\n    height: auto;\n    margin-top: 0;\n    justify-content: center;\n  }\n\n  @media only screen and (max-width: 480px) {\n    width: 100%;\n    height: auto;\n    margin-top: 32px;\n  }\n"]))),fn=h.a.div(Lt||(Lt=Object(l.a)(["\n  font-size: 23px;\n  text-align: center;\n  span {\n    padding-top: 4px;\n  }\n\n  @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n    font-size: 18px;\n    margin-bottom: 8px;\n  }\n\n  @media only screen and (max-width: 639px) {\n    margin-bottom: 8px;\n    font-size: 18px;\n  }\n"]))),vn=h.a.div(Rt||(Rt=Object(l.a)(["\n  padding: 8px 10px;\n  border-radius: 8px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 25px;\n  background: rgba(40,13,95,1);\n  color: white;\n  cursor: pointer;\n\n  @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n    font-size: 18px;\n    margin-bottom: 8px;\n  }\n\n  @media only screen and (max-width: 639px) {\n    margin-bottom: 8px;\n    font-size: 18px;\n  }\n"]))),wn=h.a.div(Pt||(Pt=Object(l.a)(["\n  background: url('assets/images/avatar_join.png');\n  font-size: 30px;\n  background-size: contain;\n  background-repeat: no-repeat;\n  width: 132px;\n  height: 50px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  color: white;\n  cursor: pointer;\n\n  @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n    width: 102px;\n    height: 38px;\n    margin-bottom: 8px;\n    font-size: 18px;\n  }\n\n  @media only screen and (max-width: 639px) {\n    width: 102px;\n    height: 38px;\n    margin-bottom: 8px;\n    font-size: 18px;\n  }\n"]))),On=(h.a.div(Mt||(Mt=Object(l.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  img.room {\n    width: 80px;\n    object-fit: cover;\n    opacity: 0.45;\n    &:hover {\n      cursor: pointer;\n    }\n  }\n  img.room.selected {\n    opacity: 1 !important\n  }\n\n  @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n    margin-bottom: 8px;\n    font-size: 18px;\n  }\n\n  @media only screen and (max-width: 639px) {\n    margin-bottom: 8px;\n    font-size: 18px;\n  }\n"]))),h.a.div(It||(It=Object(l.a)(["\n  width: 80px;\n  margin-right: 4px;\n  margin-left: 4px;\n  padding: 8px 10px;\n  border-radius: 8px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 18px;\n  background-image: ",";\n  color: white;\n  cursor: pointer;\n\n  @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n    margin-bottom: 8px;\n  }\n\n  @media only screen and (max-width: 639px) {\n    margin-bottom: 8px;\n  }\n"])),(function(e){return e.bgColor})),n(28)),jn=n.n(On),En=n(7),Sn=n(6),kn=n(8),An=n(9),Tn=n(323),Ln=n.n(Tn),Rn=n(324),Pn=function(e){return e[e.GET_PLAYERS=0]="GET_PLAYERS",e[e.UPDATE_PLAYER=1]="UPDATE_PLAYER",e[e.UPDATE_SCORE=2]="UPDATE_SCORE",e[e.UPDATE_PLAYER_NAME=3]="UPDATE_PLAYER_NAME",e[e.READY_TO_CONNECT=4]="READY_TO_CONNECT",e[e.SEND_ROOM_DATA=5]="SEND_ROOM_DATA",e[e.SEND_OTHER_DATA=6]="SEND_OTHER_DATA",e[e.UPDATE_BULLET=7]="UPDATE_BULLET",e[e.COLLIDE_PLAYER_BULLET=8]="COLLIDE_PLAYER_BULLET",e[e.COLLIDE_BULLET_ASTEROID=9]="COLLIDE_BULLET_ASTEROID",e[e.COLLIDE_PLAYER_ASTEROID=10]="COLLIDE_PLAYER_ASTEROID",e[e.COLLIDE_PLAYER_AIRDROP=11]="COLLIDE_PLAYER_AIRDROP",e[e.GAMEPLAY_READY=12]="GAMEPLAY_READY",e[e.ATOMIC_EXPLODE=13]="ATOMIC_EXPLODE",e[e.CS_ASTEROID_CREATE=14]="CS_ASTEROID_CREATE",e[e.CS_ASTEROID_REMOVE=15]="CS_ASTEROID_REMOVE",e[e.CS_PLAYER_AIRDROP=16]="CS_PLAYER_AIRDROP",e[e.SC_BULLET_CREATE=17]="SC_BULLET_CREATE",e}({}),Mn=new jn.a.Events.EventEmitter,In=function(e){return e.PLAYER_JOINED="player-joined",e.PLAYER_UPDATED="player-updated",e.PLAYER_LEFT="player-left",e.PLAYER_DISCONNECTED="player-disconnected",e.MY_PLAYER_READY="my-player-ready",e.MY_PLAYER_NAME_CHANGE="my-player-name-change",e.MY_PLAYER_TEXTURE_CHANGE="my-player-texture-change",e.ITEM_USER_ADDED="item-user-added",e.ITEM_USER_REMOVED="item-user-removed",e.TOKEN_REWARDED="token-rewarded",e.CAN_PLAY="can-play",e.SHIP_DAMAGED="ship-damaged",e.GOTO_MAINMENU="goto-mainmenu",e.TOGGLE_SOUNDS="toggle-sounds",e.EXIST_GAME="exit-game",e.PLAY_AGAIN="play-again",e.BULLET_UPDATED="bullet-updated",e.BULLET_CREATED="bullet-created",e.BULLET_REMOVED="bullet-removed",e.ASTEROID_UPDATED="asteroid-updated",e.ASTEROID_CREATED="asteroid-created",e.ASTEROID_REMOVED="asteroid-removed",e.ASTEROID_SPLIT="asteroid-split",e.AIRDROP_UPDATED="airdrop-updated",e.AIRDROP_CREATED="airdrop-created",e.AIRDROP_REMOVED="airdrop-removed",e.COLLISION_PLAYER_BULLET="collision-player-bullet",e.COLLISION_PLAYER_ASTEROID="collision-player-asteroid",e.COLLISION_BULLET_ASTEROID="collision-bullet-asteroid",e.COLLISION_PLAYER_AIRDROP="collision-player-airdrop",e.ASTEROID_CHANGES_UPDATED="asteroid-changes-updated",e}({}),Cn=function(){function e(){Object(En.a)(this,e),this._client=void 0,this._room=void 0,this._lobby=void 0,this._asteroidsMap=new Map,this._mySessionId=void 0,this._dtServer2Client=void 0;var t="ws://44.197.67.107:2083";console.log("connect to ",t," at : ",(new Date).getTime()),this._client=new Rn.Client(t),this.joinLobbyRoom().then((function(){console.log("success connect  at : ",(new Date).getTime()),Ct.dispatch($e(!0))})),Mn.on(In.MY_PLAYER_NAME_CHANGE,this.updatePlayerName,this),Mn.on(In.MY_PLAYER_TEXTURE_CHANGE,this.updatePlayer,this)}return Object(Sn.a)(e,[{key:"joinLobbyRoom",value:function(){var e=Object(x.a)(Object(y.a)().mark((function e(){return Object(y.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._client.joinOrCreate(Je.LOBBY);case 2:this._lobby=e.sent,this._lobby.onMessage("rooms",(function(e){Ct.dispatch(nt(e))})),this._lobby.onMessage("+",(function(e){var t=Object(d.a)(e,2),n=t[0],i=t[1];Ct.dispatch(it({roomId:n,room:i}))})),this._lobby.onMessage("-",(function(e){Ct.dispatch(at(e))}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getRoomData",value:function(){return{a:this._lobby,b:this._room}}},{key:"joinOrCreatePublic",value:function(){var e=Object(x.a)(Object(y.a)().mark((function e(){return Object(y.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._client.joinOrCreate(Je.PUBLIC);case 2:this._room=e.sent,this.initialize();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createCustom",value:function(){var e=Object(x.a)(Object(y.a)().mark((function e(t){var n,i,a,s,o,r;return Object(y.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.name,i=t.password,a=t.autoDispose,s=t.roomMode,o=t.mapMode,r=t.cost,e.next=3,this._client.create(Je.CUSTOM,{name:n,password:i,autoDispose:a,roomMode:s,mapMode:o,cost:r});case 3:this._room=e.sent,this.initialize();case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"joinCustomById",value:function(){var e=Object(x.a)(Object(y.a)().mark((function e(t,n){return Object(y.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._client.joinById(t,{password:n});case 2:this._room=e.sent,this.initialize();case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"initialize",value:function(){var e=this;this._room&&(this._lobby.leave(),this._mySessionId=this._room.sessionId,Ct.dispatch(Me(this._room.sessionId)),this._room.onMessage(Pn.SEND_ROOM_DATA,(function(e){Ct.dispatch(tt(e))})),this._room.onMessage(Pn.SEND_OTHER_DATA,(function(e){Mn.emit(In.PLAYER_JOINED,e.player,e.id)})),this._room.onMessage(Pn.GET_PLAYERS,(function(e){Ct.dispatch(st(Object.entries(null===e||void 0===e?void 0:e.players).map((function(e){var t=Object(d.a)(e,2);return{id:t[0],val:t[1]}}))))})),this._room.state.players&&(this._room.state.players.onAdd=function(t,n){n!==e._mySessionId&&(Ct.dispatch(ot(e._mySessionId)),t.onChange=function(i){Mn.emit(In.PLAYER_UPDATED,i,n),i.forEach((function(i){var a=i.field,s=i.value;n===e._mySessionId||(Mn.emit(In.PLAYER_UPDATED,a,s,n),"account"===a&&""!==s&&(Mn.emit(In.PLAYER_JOINED,t,n),Ct.dispatch(Ve({id:n,name:s}))))}))})}),this._room.state.players.onRemove=function(e,t){Mn.emit(In.PLAYER_LEFT,t),Ct.dispatch(Ye(t))},this._room.state.bullets.onAdd=function(e,t){console.log("Get bullet create : ",(new Date).getTime()),Mn.emit(In.BULLET_CREATED,e,t)},this._room.state.bullets.onRemove=function(e,t){Mn.emit(In.BULLET_REMOVED,t)},this._room.state.asteroids.onAdd=function(t,n){e._asteroidsMap.set(n,t),Mn.emit(In.ASTEROID_CREATED,t,n),t.onChange=function(t){Mn.emit(In.ASTEROID_CHANGES_UPDATED,t,n),t.forEach((function(t){var n=t.field,i=t.value;"curServerTime"===n&&e.setDtServer2Client(i)}))}},this._room.state.asteroids.onRemove=function(e,t){Mn.emit(In.ASTEROID_REMOVED,t)},this._room.state.airdrops.onAdd=function(e,t){Mn.emit(In.AIRDROP_CREATED,e,t),e.onChange=function(e){e.forEach((function(e){var n=e.field,i=e.value;Mn.emit(In.AIRDROP_UPDATED,n,i,t)}))}},this._room.state.airdrops.onRemove=function(e,t){Mn.emit(In.AIRDROP_REMOVED,t)},this._room.onMessage(Pn.COLLIDE_PLAYER_ASTEROID,(function(e){Mn.emit(In.COLLISION_PLAYER_ASTEROID,e)})),this._room.onMessage(Pn.COLLIDE_PLAYER_BULLET,(function(e){Mn.emit(In.COLLISION_PLAYER_BULLET,e)})),this._room.onMessage(Pn.COLLIDE_BULLET_ASTEROID,(function(e){Mn.emit(In.COLLISION_BULLET_ASTEROID,e)})),this._room.onMessage(Pn.COLLIDE_PLAYER_AIRDROP,(function(e){Mn.emit(In.COLLISION_PLAYER_AIRDROP,e)})))}},{key:"onPlayerJoined",value:function(e,t){Mn.on(In.PLAYER_JOINED,e,t)}},{key:"onPlayerLeft",value:function(e,t){Mn.on(In.PLAYER_LEFT,e,t)}},{key:"onMyPlayerReady",value:function(e,t){Mn.on(In.MY_PLAYER_READY,e,t)}},{key:"onPlayerUpdated",value:function(e,t){Mn.on(In.PLAYER_UPDATED,e,t)}},{key:"onBulletCreated",value:function(e,t){Mn.on(In.BULLET_CREATED,e,t)}},{key:"onBulletUpdated",value:function(e,t){Mn.on(In.BULLET_UPDATED,e,t)}},{key:"onBulletRemoved",value:function(e,t){Mn.on(In.BULLET_REMOVED,e,t)}},{key:"onAsteroidCreated",value:function(e,t){Mn.on(In.ASTEROID_CREATED,e,t)}},{key:"onAsteroidUpdated",value:function(e,t){Mn.on(In.ASTEROID_UPDATED,e,t)}},{key:"onAsteroidRemoved",value:function(e,t){Mn.on(In.ASTEROID_REMOVED,e,t)}},{key:"onAsteroidChangesUpdated",value:function(e,t){Mn.on(In.ASTEROID_CHANGES_UPDATED,e,t)}},{key:"onAirdropCreated",value:function(e,t){Mn.on(In.AIRDROP_CREATED,e,t)}},{key:"onAirdropUpdated",value:function(e,t){Mn.on(In.AIRDROP_UPDATED,e,t)}},{key:"onAirdropRemoved",value:function(e,t){Mn.on(In.AIRDROP_REMOVED,e,t)}},{key:"onCollisionPlayerWithBullet",value:function(e,t){Mn.on(In.COLLISION_PLAYER_BULLET,e,t)}},{key:"onCollisionPlayerWithAsteroid",value:function(e,t){Mn.on(In.COLLISION_PLAYER_ASTEROID,e,t)}},{key:"onCollisionBulletAsteroid",value:function(e,t){Mn.on(In.COLLISION_BULLET_ASTEROID,e,t)}},{key:"onCollisionPlayerAirdrop",value:function(e,t){Mn.on(In.COLLISION_PLAYER_AIRDROP,e,t)}},{key:"updatePlayer",value:function(e,t,n,i,a,s,o,r,d,l,c,p,h,u,m,y,x,g,_,b){var f,v=this.clientTime();null===(f=this._room)||void 0===f||f.send(Pn.UPDATE_PLAYER,{x:e,y:t,rotation:n,speed_x:i,speed_y:a,angularVel:s,isForwarding:o,hasShield:r,isFire:d,score:l,isExplode:c,lives:p,clientTime:v,account:h,shipName:u,tokenId:m,tier:y,paid:x,team:g,wasted:_,hits:b})}},{key:"updateBulletToServer",value:function(e,t,n,i,a,s,o){var r;null===(r=this._room)||void 0===r||r.send(Pn.UPDATE_BULLET,{x:e,y:t,rotation:n,speed_x:i,speed_y:a,bulletType:s,teamflag:o})}},{key:"createAirdropToServer",value:function(e,t,n,i){var a;null===(a=this._room)||void 0===a||a.send(Pn.CS_ASTEROID_CREATE,{x:e,y:t,owner:n,kind:i})}},{key:"removeAirdropToServer",value:function(e){var t;null===(t=this._room)||void 0===t||t.send(Pn.CS_ASTEROID_REMOVE,{index:e})}},{key:"clientTime",value:function(){return(new Date).getTime()}},{key:"setDtServer2Client",value:function(e){this._dtServer2Client=this.clientTime()-e}},{key:"updatePlayerName",value:function(e){var t;null===(t=this._room)||void 0===t||t.send(Pn.UPDATE_PLAYER_NAME,{name:e})}},{key:"allPlayersReady",value:function(e){var t;null===(t=this._room)||void 0===t||t.send(Pn.GAMEPLAY_READY,{ready:e})}},{key:"specialKeyIsDown",value:function(e){var t;null===(t=this._room)||void 0===t||t.send(Pn.ATOMIC_EXPLODE,{explode:e})}},{key:"readyToConnect",value:function(){var e;null===(e=this._room)||void 0===e||e.send(Pn.READY_TO_CONNECT,{clientTime:this.clientTime()}),Mn.emit(In.MY_PLAYER_READY)}},{key:"changeName",value:function(e){Mn.emit(In.MY_PLAYER_NAME_CHANGE,e)}},{key:"recordScore",value:function(){var e=Object(x.a)(Object(y.a)().mark((function e(){var t,n,i,a,s,o=arguments;return Object(y.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:"",n=o.length>1&&void 0!==o[1]?o[1]:0,i=o.length>2&&void 0!==o[2]?o[2]:"",a=o.length>3&&void 0!==o[3]?o[3]:0,s=o.length>4&&void 0!==o[4]?o[4]:0,e.prev=5,e.next=8,Xt.score.saveScoreLog(t,n.toString(),i,a,s);case 8:e.sent,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(5),console.log("record failed! ",e.t0);case 14:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Bn=function(e){Object(kn.a)(n,e);var t=Object(An.a)(n);function n(){var e;return Object(En.a)(this,n),(e=t.call(this,"boot"))._txtIntro=void 0,e._network=void 0,e}return Object(Sn.a)(n,[{key:"init",value:function(){var e=document.createElement("style");document.head.appendChild(e);e.sheet.insertRule('@font-face { font-family: "Fast Hand"; src: url("assets/fonts/Fast_Hand.otf") format("opentype"); }',0),V.gamePros.screenWidth=this.cameras.main.width,V.gamePros.screenHeight=this.cameras.main.height,this._network=new Cn}},{key:"preload",value:function(){var e=this;this.load.script("webfont","https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js"),Ln.a.load({custom:{families:["Fast Hand"]}});this.load.plugin("rexvirtualjoystickplugin","https://raw.githubusercontent.com/rexrainbow/phaser3-rex-notes/master/dist/rexvirtualjoystickplugin.min.js",!0),V.graphicAssets.shipsTypes.forEach((function(t){e.load.image(t,V.graphicAssets.shipUrl+t+".png")})),this.load.image(V.graphicAssets.bulletNormal.name,V.graphicAssets.bulletNormal.URL),this.load.image(V.graphicAssets.bulletUnlimited.name,V.graphicAssets.bulletUnlimited.URL),this.load.image(V.graphicAssets.bulletDouble.name,V.graphicAssets.bulletDouble.URL),this.load.image(V.graphicAssets.bulletTriple.name,V.graphicAssets.bulletTriple.URL),this.load.image(V.graphicAssets.bulletVolley.name,V.graphicAssets.bulletVolley.URL),this.load.image(V.graphicAssets.bulletLazer.name,V.graphicAssets.bulletLazer.URL),this.load.image(V.graphicAssets.bulletExplose.name,V.graphicAssets.bulletExplose.URL),this.load.image(V.graphicAssets.bulletRegion.name,V.graphicAssets.bulletRegion.URL),this.load.image(V.graphicAssets.bulletAtomic.name,V.graphicAssets.bulletAtomic.URL),this.load.image(V.graphicAssets.asteroidFirstL.name,V.graphicAssets.asteroidFirstL.URL),this.load.image(V.graphicAssets.asteroidFirstS.name,V.graphicAssets.asteroidFirstS.URL),this.load.image(V.graphicAssets.asteroidSecondL.name,V.graphicAssets.asteroidSecondL.URL),this.load.image(V.graphicAssets.asteroidSecondS.name,V.graphicAssets.asteroidSecondS.URL),this.load.image(V.graphicAssets.airdropRapid.name,V.graphicAssets.airdropRapid.URL),this.load.image(V.graphicAssets.airdropDouble.name,V.graphicAssets.airdropDouble.URL),this.load.image(V.graphicAssets.airdropTriple.name,V.graphicAssets.airdropTriple.URL),this.load.image(V.graphicAssets.airdropBurst.name,V.graphicAssets.airdropBurst.URL),this.load.image(V.graphicAssets.airdropExplosive.name,V.graphicAssets.airdropExplosive.URL),this.load.image(V.graphicAssets.airdropLazer.name,V.graphicAssets.airdropLazer.URL),this.load.image(V.graphicAssets.airdropRocket.name,V.graphicAssets.airdropRocket.URL),this.load.image(V.graphicAssets.airdropLife.name,V.graphicAssets.airdropLife.URL),this.load.image(V.graphicAssets.airdropShield.name,V.graphicAssets.airdropShield.URL),this.load.image(V.graphicAssets.enemyFirst.name,V.graphicAssets.enemyFirst.URL),this.load.image(V.graphicAssets.enemySecond.name,V.graphicAssets.enemySecond.URL),this.load.image(V.graphicAssets.enemyBullet.name,V.graphicAssets.enemyBullet.URL),this.load.image(V.graphicAssets.rocketFirst.name,V.graphicAssets.rocketFirst.URL),this.load.image(V.graphicAssets.rocketSecond.name,V.graphicAssets.rocketSecond.URL),this.load.image(V.graphicAssets.rocketThird.name,V.graphicAssets.rocketThird.URL),this.load.image(V.graphicAssets.rocketFourth.name,V.graphicAssets.rocketFourth.URL),this.load.image(V.graphicAssets.rocketBullet.name,V.graphicAssets.rocketBullet.URL),this.load.image(V.graphicAssets.lifeEmpty.name,V.graphicAssets.lifeEmpty.URL),this.load.image(V.graphicAssets.lifeFull.name,V.graphicAssets.lifeFull.URL);for(var t=0;t<V.graphicAssets.background.length;t++)this.load.image(V.graphicAssets.background[t].name,V.graphicAssets.background[t].URL);this.load.atlas(V.graphicAssets.particles.name,V.graphicAssets.particles.URL,V.graphicAssets.particles.data),this.load.atlas(V.graphicAssets.lazerEffectParticle.name,V.graphicAssets.lazerEffectParticle.URL,V.graphicAssets.lazerEffectParticle.data),this.load.image(V.graphicAssets.shield.name,V.graphicAssets.shield.URL);for(var n=0;n<V.soundAssets.bg.length;n++)this.load.audio(V.soundAssets.bg[n].name,V.soundAssets.bg[n].URL);this.load.audio(V.soundAssets.destroyed.name,V.soundAssets.destroyed.URL),this.load.audio(V.soundAssets.fire.name,V.soundAssets.fire.URL),this.load.audio(V.soundAssets.engine.name,V.soundAssets.engine.URL),this.load.audio(V.soundAssets.shipExplose.name,V.soundAssets.shipExplose.URL)}},{key:"startGame",value:function(e,t){this.scene.stop("boot"),this.scene.start("play",{network:this._network,shipPros:e,gameProps:t}),Ct.dispatch(et(!0))}},{key:"startMultiGame",value:function(e,t){this.scene.stop("boot"),this.scene.start("multiplay",{network:this._network,shipPros:e,gameProps:t}),Ct.dispatch(et(!0)),this._network&&(this._network.readyToConnect(),this._network.changeName("1"))}}]),n}(jn.a.Scene),Dn=n(17),Nn=function(e){Object(kn.a)(n,e);var t=Object(An.a)(n);function n(e){var i,a=e.scene,s=e.group,o=e.x,r=e.y,d=e.texture,l=e.frame;return Object(En.a)(this,n),i=t.call(this,a,o,r,d,l),a.add.existing(Object(Dn.a)(i)),a.physics.add.existing(Object(Dn.a)(i)),s.add(Object(Dn.a)(i)),i}return Object(Sn.a)(n)}(jn.a.Physics.Arcade.Sprite),Un=n(42),Fn=n(37),zn=function(){function e(t,n,i,a,s){var o=this;Object(En.a)(this,e),this._owner=void 0,this._scene=void 0,this._fireCooldown=void 0,this._passiveRegenCooldown=void 0,this._sinceFired=void 0,this._sinceRegen=void 0,this._storedBullets=void 0,this._maxBullets=void 0,this._speed=void 0,this._triggerHeld=void 0,this._triggered=void 0,this._isShip=void 0,this._isEnableSoundEffect=void 0,this._isFired=void 0,this._owner=t,this._scene=t.scene,this._fireCooldown=1e3*i,this._passiveRegenCooldown=1e3*a,this._speed=s,this._isEnableSoundEffect=void 0===this._scene.registry.get("enabledSound")||this._scene.registry.get("enabledSound"),this._isShip=999!==n,this._sinceFired=0,this._sinceRegen=0,this._storedBullets=n,this._isShip&&99!==this._maxBullets&&this._scene.registry.set("shots",this._storedBullets),this._maxBullets=n,this._triggerHeld=!1,Mn.on(In.TOGGLE_SOUNDS,(function(e){o._isEnableSoundEffect=e,o._scene.registry.set("enabledSound",e)}),this),void 0===this._isEnableSoundEffect&&(this._isEnableSoundEffect=!0)}return Object(Sn.a)(e,[{key:"update",value:function(e,t){this._sinceFired+=t,this._sinceRegen+=t,this._sinceRegen>this._passiveRegenCooldown&&this._storedBullets<this._maxBullets&&(this.reload(),this._sinceRegen=0)}},{key:"updateBullet",value:function(e,t,n,i){0!==e&&(this._maxBullets=e),0!==t&&(this._fireCooldown=1e3*t),0!==n&&(this._passiveRegenCooldown=1e3*n),0!==i&&(this._speed=i),99===e&&(this._scene.registry.values.shots=99),this.reload()}},{key:"setTriggerHeld",value:function(e){this._triggered=e}},{key:"spendBullet",value:function(){this._storedBullets=Math.max(this._storedBullets-1,0),this._isShip&&99!==this._maxBullets&&(this._scene.registry.values.shots=this._storedBullets)}},{key:"reload",value:function(){this._storedBullets=Math.min(this._storedBullets+1,this._maxBullets),this._isShip&&99!==this._maxBullets&&(this._scene.registry.values.shots=this._storedBullets)}}]),e}(),Vn=function(e){Object(kn.a)(n,e);var t=Object(An.a)(n);function n(){return Object(En.a)(this,n),t.apply(this,arguments)}return Object(Sn.a)(n,[{key:"update",value:function(e,t){Object(Un.a)(Object(Fn.a)(n.prototype),"update",this).call(this,e,t),this._isFired=!1,this._triggered&&this.canFire()&&(this.fire({pos:this._owner.getCenter(),rotation:this._owner.rotForward,speed:this._speed}),this._isFired=!0)}},{key:"fire",value:function(e){var t=e.pos,n=t.x,i=t.y,a=e.rotation,s=e.speed;this.spendBullet(),this._scene._network?(void 0===this._owner.team&&(this._owner.team=1),this._scene.updateBulletLaunchDataToserver(n,i,a,s,this._owner,this._owner.team),this._scene.spawnRandomBullet(n,i,a,s,this._owner,!0,this._owner.team)):this._scene.spawnRandomBullet(n,i,a,s,this._owner,!0),this._isEnableSoundEffect&&this._scene._bulletSound.play(),this._sinceFired=0}},{key:"canFire",value:function(){return this._storedBullets>0&&this._sinceFired>this._fireCooldown}}]),n}(zn),Yn=function(e){Object(kn.a)(n,e);var t=Object(An.a)(n);function n(){return Object(En.a)(this,n),t.apply(this,arguments)}return Object(Sn.a)(n,[{key:"update",value:function(e,t){Object(Un.a)(Object(Fn.a)(n.prototype),"update",this).call(this,e,t),this._triggered&&this.canFire()&&this.fire({pos:this._owner.getCenter(),rotation:this._owner.rotLeft,speed:this._speed})}},{key:"fire",value:function(e){var t=e.pos,n=t.x,i=t.y,a=e.rotation,s=e.speed;this.spendBullet(),this._scene.spawnRandomEnemyBullet(n,i,a,s,this._owner),this._isEnableSoundEffect&&this._scene._bulletSound.play(),this._sinceFired=0}},{key:"canFire",value:function(){return this._sinceFired>this._fireCooldown}}]),n}(zn),Gn=function(e){Object(kn.a)(n,e);var t=Object(An.a)(n);function n(e,i,a,s){var o;Object(En.a)(this,n),(o=t.call(this,e))._playerTexture=void 0,o._playerName=void 0,o._engine=void 0,o._lazerEffectParticle=void 0,o._lazerEffect=void 0,o._particles=void 0,o._shield=void 0,o._gunModule=void 0,o._lives=void 0,o._playerId=void 0,o._tier=void 0,o._hasCombat=void 0,o._readyToConnect=!1,o._hasShield=void 0,o._bulletType=void 0,o._bulletTypeTimer=void 0,o._team=void 0,o._playerId=i,o._tier=0|a.tier,o._hasCombat=s,o._playerTexture=e.texture,o._shield=o.scene.add.sprite(o.x,o.y,V.graphicAssets.shield.name),o._shield.setVisible(!1),o._hasShield=!1,o._bulletType=Z,o._team=null===a||void 0===a?void 0:a.team;var r=Object(Dn.a)(o),d=V.bulletPros.NORMAL_BULLET.maxBullets+Se[o._tier]+(s?1:0),l=V.bulletPros.NORMAL_BULLET.fireCooldown*ke[o._tier]*(s?.9:1),c=V.bulletPros.NORMAL_BULLET.passiveRegenCooldown,p=V.bulletPros.NORMAL_BULLET.speed;return o._gunModule=new Vn(r,d,l,c,p),o._particles=o.scene.add.particles(V.graphicAssets.particles.name),o._engine=o._particles.createEmitter({frame:["green"],scale:{start:.2,end:0},alpha:{start:.5,end:0},x:0,y:0,quantity:3,lifespan:{min:10,max:100},speed:{min:10,max:50},blendMode:"ADD",follow:Object(Dn.a)(o)}),o._lazerEffectParticle=o.scene.add.particles(V.graphicAssets.lazerEffectParticle.name),o._lazerEffect=o._lazerEffectParticle.createEmitter({frame:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15"],scale:{start:1,end:0},alpha:{start:.5,end:0},x:0,y:0,quantity:3,lifespan:{min:10,max:10},speed:{min:10,max:10},blendMode:"ADD",follow:Object(Dn.a)(o)}),o}return Object(Sn.a)(n,[{key:"updateBulletProperty",value:function(e,t){this._bulletType=e;var n=this._bulletType===Q?V.bulletPros[e].maxBullets:V.bulletPros[e].maxBullets+Se[this._tier]+(this._hasCombat?1:0),i=V.bulletPros[e].fireCooldown*ke[this._tier]*(this._hasCombat?.9:1),a=V.bulletPros[e].passiveRegenCooldown,s=V.bulletPros[e].speed;this._gunModule.updateBullet(n,i,a,s),this.restoreBulletProperty(t)}},{key:"restoreBulletProperty",value:function(e){var t,n=this;null===(t=this._bulletTypeTimer)||void 0===t||t.remove(),this._bulletTypeTimer=this.scene.time.delayedCall(1e3*e,(function(){n._bulletType=Z;var e=V.bulletPros.NORMAL_BULLET.maxBullets+Se[n._tier]+(n._hasCombat?1:0),t=V.bulletPros.NORMAL_BULLET.fireCooldown*ke[n._tier]*(n._hasCombat?.9:1),i=V.bulletPros.NORMAL_BULLET.passiveRegenCooldown,a=V.bulletPros.NORMAL_BULLET.speed;n._gunModule.updateBullet(e,t,i,a)}),null,this)}},{key:"reload",value:function(){this._gunModule.reload()}},{key:"rotForward",get:function(){return this.rotation}},{key:"rotLeft",get:function(){return this.rotation-Math.PI/2}},{key:"rotRight",get:function(){return this.rotation+Math.PI/2}},{key:"rotBack",get:function(){return this.rotation+Math.PI}},{key:"angleForward",get:function(){return this.angle}},{key:"angleLeft",get:function(){return this.angle-90}},{key:"angleRight",get:function(){return this.angle+90}},{key:"angleBack",get:function(){return this.angle+180}}]),n}(Nn),Hn=function(e){Object(kn.a)(n,e);var t=Object(An.a)(n);function n(e){var i,a=e.sargs,s=e.id,o=e.shipPros,r=e.hasCombat,d=e.inputKeys,l=d.forward,c=d.brake,p=d.left,h=d.right,u=d.fire;Object(En.a)(this,n),(i=t.call(this,a,s,o,r))._shipBody=void 0,i._engineSound=void 0,i._account=void 0,i._tokenId=void 0,i._shipName=void 0,i._paid=void 0,i._team=void 0,i._wasted=void 0,i._hits=void 0,i._score=void 0,i._vulnerable=void 0,i._angularVelocity=void 0,i._acceleration=void 0,i._maxVelocity=void 0,i._isExplode=void 0,i._shieldTimer=void 0,i._hasAtomic=void 0,i._hasLazer=void 0,i._forwardKey=void 0,i._brakeKey=void 0,i._leftKey=void 0,i._rightKey=void 0,i._fireKey=void 0,i._curSpeedX=void 0,i._curSpeedY=void 0,i.joystickMovement=void 0,i.fireButtonHandle=void 0;var m=o.isBroken?V.shipPros.startingLives-1:V.shipPros.startingLives;return i.Lives=m+Ae[o.tier],console.log("this.Lives",m,Ae,o.tier),i._maxVelocity=V.shipPros.maxVelocity,i.Score=0,i._angularVelocity=V.shipPros.angularVelocity,i._acceleration=V.shipPros.acceleration,i._vulnerable=!0,i._hasAtomic=!1,i._hasLazer=!1,i._isExplode=!1,i.setDrag(V.shipPros.drag),i.setCircle(27),i.setOrigin(.5),i._shipBody=i.body,i._shipBody.setMaxVelocity(i._maxVelocity),i._forwardKey=l,i._brakeKey=c,i._leftKey=p,i._rightKey=h,i._fireKey=u,i._account=null===o||void 0===o?void 0:o.account,i._tokenId=null===o||void 0===o?void 0:o.tokenId,i._shipName=null===o||void 0===o?void 0:o.name,i._paid=null===o||void 0===o?void 0:o.paid,i._team=null===o||void 0===o?void 0:o.team,i._wasted=null===o||void 0===o?void 0:o.wasted,i._hits=null===o||void 0===o?void 0:o.hits,i}return Object(Sn.a)(n,[{key:"Score",get:function(){return this._score},set:function(e){this._score=e,this.scene.registry.set("score",this._score)}},{key:"Vulnerable",get:function(){return this._vulnerable},set:function(e){this._vulnerable=e}},{key:"BulletType",get:function(){return this._bulletType}},{key:"setShiled",value:function(e){var t,n=this;this._vulnerable=!1,this._shield.setVisible(!0),this._hasShield=!0,this.setCircle(33),null===(t=this._shieldTimer)||void 0===t||t.remove(),this._shieldTimer=this.scene.time.delayedCall(1e3*e,(function(){n._vulnerable=!0,n._shield.setVisible(!1),n._hasShield=!1,n.setCircle(27)}),null,this)}},{key:"handleJoystickMovement",value:function(e){this.joystickMovement=e}},{key:"handleFire",value:function(e){this.fireButtonHandle=e}},{key:"update",value:function(e,t){var n;if(this._gunModule.update(e,t),this._lazerEffect.setAngle(this.angleBack),this._lazerEffect.setSpeed({min:this.body.velocity.length()-150,max:this.body.velocity.length()-100}),this._lazerEffect.followOffset.setToPolar(this.rotBack,-22),this._hasLazer?this._lazerEffect.start():this._lazerEffect.stop(),this._forwardKey.isDown?(this.setMaxVelocity(this._maxVelocity),this._engine.setAngle(this.angleBack),this._engine.setSpeed({min:this.body.velocity.length()-150,max:this.body.velocity.length()-100}),this._engine.followOffset.setToPolar(this.rotBack,25),this._engine.start(),this.scene.physics.velocityFromRotation(this.rotation,this._shipBody.velocity.length(),this._shipBody.velocity),this.scene.physics.velocityFromRotation(this.rotation,this._acceleration-100,this._shipBody.acceleration)):(this.scene.physics.velocityFromRotation(this.rotation,this._shipBody.velocity.length(),this._shipBody.velocity),this.scene.physics.velocityFromRotation(this.rotation,0,this._shipBody.acceleration),this._engine.stop()),this._brakeKey.isDown){var i=this._maxVelocity;i/=3,this.setMaxVelocity(i)}var a=0;this._leftKey.isDown?a+=-this._angularVelocity:this._rightKey.isDown&&(a+=this._angularVelocity),this.setAngularVelocity(a),null!==(n=this.joystickMovement)&&void 0!==n&&n.isMoving&&(this.setAngle(this.joystickMovement.direction),this._engine.setAngle(this.angleBack),this._engine.setSpeed({min:this.body.velocity.length()-150,max:this.body.velocity.length()-100}),this._engine.followOffset.setToPolar(this.rotBack,25),this._engine.start(),this.scene.physics.velocityFromRotation(this.rotation,this._shipBody.velocity.length(),this._shipBody.velocity),this.scene.physics.velocityFromRotation(this.rotation,this._acceleration,this._shipBody.acceleration)),this._fireKey.isDown?(this._gunModule.setTriggerHeld(!0),this._gunModule._isFired&&(this._wasted+=1,this.setAccuracy())):this._gunModule.setTriggerHeld(!1),this._hasShield&&this._shield.setPosition(this.x,this.y),this._curSpeedX=this._shipBody.velocity.x,this._curSpeedY=this._shipBody.velocity.y}},{key:"updateToServer",value:function(e){0===this._shipBody.speed&&0===this._shipBody.rotation||e.updatePlayer(this.x,this.y,this.rotation,this._shipBody.velocity.x,this._shipBody.velocity.y,this._shipBody.angularVelocity,this._forwardKey.isDown,this._hasShield,this._fireKey.isDown,this._score,this._isExplode,this._lives,this._account,this._shipName,this._tokenId,this._tier,this._paid,this._team,this._wasted,this._hits)}},{key:"facing",value:function(){return new jn.a.Math.Vector2(Math.sin(this.rotation),-Math.cos(this.rotation))}},{key:"kill",value:function(){this._isExplode=!0,this._vulnerable=!1,this.Lives-=1,this._engine.stop(),this.emit("ship_death"),this.setActive(!1).setVisible(!1)}},{key:"makeTempInvulnerable",value:function(e){var t=this;this._vulnerable=!1,this._isExplode=!1;var n=this.scene.time.addEvent({delay:200,callback:function(){t.setVisible(!t.visible)},callbackScope:this,repeat:-1});this.scene.time.delayedCall(1e3*e,(function(){t._vulnerable=!0,n.remove(),t.setVisible(!0)}),null,this)}},{key:"respawn",value:function(e,t){this.setActive(!0).setVisible(!0),this.setRotation(0),this.setRotation(this.rotLeft),this.setPosition(e,t),this._shipBody.setVelocity(0),this.makeTempInvulnerable(3)}},{key:"Lives",get:function(){return this._lives},set:function(e){e>V.shipPros.startingLives+Ae[this._tier]||(this._lives=e,this.scene.registry.set("playerLives",this._lives))}},{key:"setAccuracy",value:function(){var e=(this._hits/this._wasted*100).toFixed(1);this.scene.registry.set("accuracy",e)}}]),n}(Gn),Wn=function(e){Object(kn.a)(n,e);var t=Object(An.a)(n);function n(e){var i,a=e.sargs,s=e.owner,o=e.kind;return Object(En.a)(this,n),(i=t.call(this,a))._owner=void 0,i._bulletKind=void 0,i._timetemp=0,i._owner=s,i._bulletKind=o,i.setOrigin(.5,.5),a.texture===se.REGION_BULLET&&("explosive"===i._bulletKind?i.setCircle(100):"atomic"===i._bulletKind&&i.setSize(i.scene.cameras.main.width,i.scene.cameras.main.height),i.scene.time.addEvent({delay:50,callback:function(){i.destroy()}})),i}return Object(Sn.a)(n,[{key:"preUpdate",value:function(e,t){}},{key:"updateServerDataBullet",value:function(e,t,n){switch(e){case"x":if("number"===typeof t){this.body.velocity.x;this.x=t}break;case"y":if("number"===typeof t){this.body.velocity.x;this.y=t}break;case"speed_x":"number"===typeof t&&this.setVelocityX(t);break;case"speed_y":"number"===typeof t&&this.setVelocityY(t)}}},{key:"updateServerDataChangesBullet",value:function(e,t){var n=this,i=Date.now(),a=e.find((function(e){return"curServerTime"===e.field})).value;if(!(a<this._timetemp)){var s=(i-a-t)/1e3;e.map((function(e){n.updateServerDataBullet(e.field,e.value,s)})),this._timetemp=a}}}]),n}(Nn),Kn=function(e){Object(kn.a)(n,e);var t=Object(An.a)(n);function n(e){var i,a=e.sargs,s=e.type,o=e.size;return Object(En.a)(this,n),(i=t.call(this,a))._type=void 0,i._size=void 0,i._lives=2,i._group="asteroid",i._timetemp=0,i._type=s,i._size=o,i}return Object(Sn.a)(n,[{key:"launchAsteroid",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:50,a=(Y(t-n,t+n),Y(t-n,t+n),e*Math.cos(t)),s=e*Math.sin(t);this.setOrigin(.5,.5),this._size===J&&this.setCircle(29),this._size===q&&this.setCircle(19),this.setVelocity(a,s),this.setAngularVelocity(Y(-i,i))}},{key:"updateServerDataAsteroid",value:function(e,t,n){switch(e){case"x":if("number"===typeof t){if(n>1||n<-1)break;this.x=t}break;case"y":if("number"===typeof t){if(n>1||n<-1)break;this.y=t}break;case"speed_x":"number"===typeof t&&this.setVelocityX(t);break;case"speed_y":"number"===typeof t&&this.setVelocityY(t)}}},{key:"updateServerDataChangesAsteroid",value:function(e,t){var n=this,i=Date.now(),a=e.find((function(e){return"curServerTime"===e.field})),s=null===a||void 0===a?void 0:a.value;if(!(s<this._timetemp)){var o=(i-s-t)/1e3;e.map((function(e){n.updateServerDataAsteroid(e.field,e.value,o)})),this._timetemp=s}}}]),n}(Nn),Xn=Kn,Jn=function(e){Object(kn.a)(n,e);var t=Object(An.a)(n);function n(e){var i,a=e.sargs,s=e.owner,o=e.kind;return Object(En.a)(this,n),(i=t.call(this,a))._kind=void 0,i._owner=void 0,i._owner=s,i._kind=o,i}return Object(Sn.a)(n,[{key:"launchAirdrop",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30,a=Y(t-n,t+n),s=Y(t-n,t+n),o=e*Math.cos(a),r=e*Math.sin(s);this.setOrigin(.5,.5),this.setVelocity(o,r),this.setAngularVelocity(Y(-i,i))}},{key:"updateServerDataAirdrop",value:function(e,t){switch(e){case"x":"number"===typeof t&&(this.x=t);break;case"y":"number"===typeof t&&(this.y=t);break;case"speed_x":"number"===typeof t&&this.setVelocityX(t);break;case"speed_y":"number"===typeof t&&this.setVelocityY(t)}}}]),n}(Nn),qn=Jn,Zn=function(e){Object(kn.a)(n,e);var t=Object(An.a)(n);function n(e){var i,a=e.sargs,s=e.type,o=e.lives;Object(En.a)(this,n),(i=t.call(this,a))._type=void 0,i._gunModule=void 0,i._group="enemy",i._lives=2,i._type=s,i._lives=o,s!==fe&&s!==ve&&s!==we&&s!==Oe||(i._group="boss");var r=Object(Dn.a)(i),d=V.enemyBulletPros.maxBullets,l=s===ge||s===_e?V.enemyBulletPros.fireCooldown:V.enemyBulletPros.bossFireCooldown,c=V.enemyBulletPros.passiveRegenCooldown,p=s===ge||s===_e?V.enemyBulletPros.normalSpeed:V.enemyBulletPros.bossSpeed;return i._gunModule=new Yn(r,d,l,c,p),i}return Object(Sn.a)(n,[{key:"launchEnemy",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=V.enemyPros.angVelRange,a=Y(t-n,t+n),s=Y(t-n,t+n),o=e*Math.cos(a),r=e*Math.sin(s);this.setOrigin(.5,.5),this.setVelocity(o,r),this._type===ge||this._type===_e?this.setAngularVelocity(Y(-i,i)):this.setRotation(t),this._type===ge?this.setCircle(19):this._type===_e?this.setCircle(20):this.setCircle(70)}},{key:"update",value:function(e,t){var n=this;this._gunModule.update(e,t),this.scene.time.addEvent({delay:1e3,callback:function(){n._gunModule.setTriggerHeld(!n._gunModule._triggered)},repeat:-1})}},{key:"rotForward",get:function(){return this.rotation}},{key:"rotLeft",get:function(){return this.rotation-Math.PI/2}},{key:"rotRight",get:function(){return this.rotation+Math.PI/2}},{key:"rotBack",get:function(){return this.rotation+Math.PI}},{key:"angleForward",get:function(){return this.angle}},{key:"angleLeft",get:function(){return this.angle-90}},{key:"angleRight",get:function(){return this.angle+90}},{key:"angleBack",get:function(){return this.angle+180}}]),n}(Nn),Qn=Zn,$n=function(e){Object(kn.a)(n,e);var t=Object(An.a)(n);function n(e){var i,a=e.sargs,s=e.owner;return Object(En.a)(this,n),(i=t.call(this,a))._owner=void 0,i._group="enemyBullet",i._owner=s,i.setOrigin(.5,.5),i}return Object(Sn.a)(n)}(Nn),ei=function(e){Object(kn.a)(n,e);var t=Object(An.a)(n);function n(){var e;return Object(En.a)(this,n),(e=t.call(this,"play")).backgroundImg=void 0,e._network=void 0,e._myShip=void 0,e._myBullet=void 0,e._account=void 0,e._tokenId=void 0,e._shipName=void 0,e._paid=void 0,e._team=void 0,e._wasted=void 0,e._hits=void 0,e._ships=void 0,e._otherShips=void 0,e._otherShipMap=new Map,e._bullets=void 0,e._regionBullets=void 0,e._enemies=void 0,e._airdrops=void 0,e._worldBounds=void 0,e._backgroundSprite=void 0,e.fadeCamera=void 0,e._particles=void 0,e._destroyedSound=void 0,e._fireSound=void 0,e._bulletSound=void 0,e._bgSound=void 0,e._airdropPercentAsteroid=void 0,e._airdropPercentEnemy=void 0,e._airdropPercentBoss=void 0,e._airdropDuration=void 0,e._airdropTimer=void 0,e._startingAsteroids=void 0,e._maxAsteroids=void 0,e._incrementAsteroids=void 0,e._minAsteroidSpeed=void 0,e._maxAsteroidSpeed=void 0,e._minEnemySpeed=void 0,e._maxEnemySpeed=void 0,e._startingEnemies=void 0,e._increaseEnemies=void 0,e._enemyLives=void 0,e._startingBoss=void 0,e._bossLives=void 0,e._increaseBoss=void 0,e._enemyBulletVelocity=void 0,e._bossSpeed=void 0,e._width=void 0,e._height=void 0,e._center=void 0,e._level=void 0,e._levelBoss=void 0,e._levelTimer=void 0,e._randomTimer=void 0,e._nextLevelTimer=void 0,e._readyNewLevel=void 0,e._passedIntro=void 0,e._specialKey=void 0,e._isEnableSoundEffect=void 0,e._isEnableBgSound=void 0,e._shot=void 0,e._waitingText=void 0,e._gameStarted=void 0,e._shipPros=void 0,e._backImg=void 0,e._backBg=void 0,e._bossMode=void 0,e._firstBackImgRandom=void 0,e._firstBgRandom=void 0,e}return Object(Sn.a)(n,[{key:"init",value:function(){this._width=V.gamePros.screenWidth,this._height=V.gamePros.screenHeight,this._center={x:this._width/2,y:this._height/2},this._level=0,this._levelBoss=1,this._readyNewLevel=!1,this._passedIntro=!1,this._isEnableSoundEffect=!0,this._isEnableBgSound=!0,this._firstBackImgRandom=Math.round(10*Math.random()),this._firstBgRandom=Math.round(6*Math.random()),this._startingAsteroids=V.asteroidPros.startingAsteroids,this._maxAsteroids=V.asteroidPros.maxAsteroids,this._incrementAsteroids=V.asteroidPros.incrementAsteroids,this._minAsteroidSpeed=V.asteroidPros.minSpeed,this._maxAsteroidSpeed=V.asteroidPros.maxSpeed,this._minEnemySpeed=V.enemyPros.minSpeed,this._maxEnemySpeed=V.enemyPros.maxSpeed,this._startingEnemies=V.enemyPros.startingEnemies,this._increaseEnemies=V.enemyPros.incrementEnemies,this._enemyBulletVelocity=V.enemyBulletPros.velocity,this._enemyLives=V.enemyBulletPros.lives,this._startingBoss=V.enemyPros.startingBoss,this._increaseBoss=V.enemyPros.incrementBoss,this._bossLives=V.enemyPros.bossLives,this._bossSpeed=V.enemyBulletPros.bossSpeed,this._airdropPercentAsteroid=V.airdropPros.percentAsteroid,this._airdropPercentEnemy=V.airdropPros.percentEnemy,this._airdropPercentBoss=V.airdropPros.percentBoss,this._airdropDuration=V.airdropPros.duration,this.initAssets(),this.initWorld(),this._shot=!1,this._gameStarted=!1}},{key:"initWorld",value:function(){this._ships=this.physics.add.group(),this._ships.runChildUpdate=!0,this._otherShips=this.physics.add.group(),this._otherShips.runChildUpdate=!0,this._bullets=this.physics.add.group(),this._bullets.runChildUpdate=!0,this._regionBullets=this.physics.add.group(),this._regionBullets.runChildUpdate=!0,this._airdrops=this.physics.add.group(),this._airdrops.runChildUpdate=!0,this._enemies=this.physics.add.group(),this._enemies.runChildUpdate=!0,this._backImg=V.graphicAssets.background[this._firstBackImgRandom].name,this._backgroundSprite=this.add.sprite(0,0,V.graphicAssets.background[this._firstBackImgRandom].name),this._backgroundSprite.displayWidth=V.gamePros.screenWidth,this._backgroundSprite.displayHeight=V.gamePros.screenHeight,this._backgroundSprite.setOrigin(0),this._backgroundSprite.setScale(window.innerWidth<1366?1.2:1.5),this.initWorldBounds(),this.physics.add.overlap(this._ships,this._enemies,this.shipEnemyCollision,null,this),this.physics.add.overlap(this._ships,this._airdrops,this.shipAirdropCollision,null,this),this.physics.add.overlap([this._bullets,this._regionBullets],this._enemies,this.bulletEnemyCollision,null,this),this.physics.add.overlap(this._bullets,this._worldBounds,(function(e,t){e.destroy()})),this.physics.add.overlap(this._enemies,this._worldBounds,this.respawnEnemies,null,this)}},{key:"initWorldBounds",value:function(){var e=this._width/2+100,t=this._height/2+100,n=this._center.x-e,i=this._center.x+(e-5),a=this._center.y-t,s=this._center.y+(t-5),o=i-n,r=s-a,d=a+r/2,l=n+o/2;this._worldBounds=this.physics.add.staticGroup(),this._worldBounds.add(new jn.a.GameObjects.Rectangle(this,l,a,o,5)),this._worldBounds.add(new jn.a.GameObjects.Rectangle(this,n,d,5,r)),this._worldBounds.add(new jn.a.GameObjects.Rectangle(this,l,s,o,5,1)),this._worldBounds.add(new jn.a.GameObjects.Rectangle(this,i,d,5,r,0))}},{key:"initShip",value:function(e,t,n){var i=this,a={forward:this.input.keyboard.addKey(n.forward),brake:this.input.keyboard.addKey(n.brake),left:this.input.keyboard.addKey(n.left),right:this.input.keyboard.addKey(n.right),fire:this.input.keyboard.addKey(n.fire)};this._myShip=new Hn({sargs:{scene:this,group:this._ships,x:this.cameras.main.centerX,y:this.cameras.main.centerY,texture:e.spaceship},id:1,shipPros:e,hasCombat:t,inputKeys:a}),this._myShip.setRotation(this._myShip.rotLeft);var s=this.sound.add(V.soundAssets.shipExplose.name,{volume:.5});s.on("complete",(function(){i._myShip.Lives<1?i.gameOver():i._myShip.respawn(i._width/2,i._height/2)})),this._myShip.on("ship_death",(function(){s.play(),i._particles.shipExplode.emitParticleAt(i._myShip.x,i._myShip.y)})),this._myShip._engineSound=this.sound.add(V.soundAssets.engine.name,{loop:!0,volume:.5}),this._isEnableSoundEffect&&this._myShip._engineSound.play(),this._myShip._engineSound.pause()}},{key:"initAssets",value:function(){var e=this;this._bulletSound=this.sound.add(V.soundAssets.fire.name),this._destroyedSound=this.sound.add(V.soundAssets.destroyed.name),this._fireSound=this.sound.add(V.soundAssets.fire.name),this._particles={};var t=this.add.particles(V.graphicAssets.particles.name);t.setDepth(9);this._particles.bulletImpact=t.createEmitter({frame:["blue","red","orange"],scale:{start:.2,end:0},quantity:30,alpha:{start:1,end:0},lifespan:{min:500,max:1e3},speed:{min:120,max:150},frequency:-1,blendMode:"ADD"}),this._particles.asteroidExplode=t.createEmitter({frame:["white","red"],scale:{start:.3,end:0},quantity:60,alpha:{start:1,end:0},lifespan:{min:300,max:600},speed:{min:20,max:150},frequency:-1,blendMode:"ADD"}),this._particles.shipExplode=t.createEmitter({frame:["white","red","orange"],scale:{start:.6,end:0},quantity:60,alpha:{start:1,end:0},lifespan:{min:300,max:600},speed:{min:20,max:150},frequency:-1,blendMode:"ADD"}),this.time.addEvent({delay:1e3,callback:function(){e._backBg=V.soundAssets.bg[e._firstBgRandom].name,e._bgSound=e.sound.add(V.soundAssets.bg[e._firstBgRandom].name),e._bgSound.setLoop(!0)}})}},{key:"create",value:function(e){var t,n=this;if(this._airdropDuration*=Te[e.shipPros.tier],this.registry.set("bonusLives",Ae[e.shipPros.tier]),this._specialKey=e.gameProps.keyboard.special,this.scene.launch("text",{level:1}),!e.network)throw new Error("server instance missing");this._network=e.network,this.initShip(e.shipPros,e.gameProps.hasCombat,e.gameProps.keyboard),this._account=e.shipPros.account,this._tokenId=e.shipPros.tokenID,this._paid=e.shipPros.paid,this._team=e.shipPros.team,this._wasted=e.shipPros.wasted,this._hits=e.shipPros.hits,e.shipPros.hasShield&&(this._myShip.setShiled(this._airdropDuration),Ct.dispatch(ut(oe.SHIELD)),Ct.dispatch(mt(this._airdropDuration))),this._startingAsteroids+=Le[e.gameProps.difficulty].STARTING_ASTEROIDS,this._incrementAsteroids+=Le[e.gameProps.difficulty].INCREASE_ASTEROIDS,this._maxAsteroids+=Le[e.gameProps.difficulty].MAX_ASTEROIDS,this._minAsteroidSpeed*=Le[e.gameProps.difficulty].MIN_ASTEROID_SPEED,this._maxAsteroidSpeed*=Le[e.gameProps.difficulty].MAX_ASTEROID_SPEED,this._startingEnemies+=Le[e.gameProps.difficulty].STARTING_ENEMIES,this._increaseEnemies+=Le[e.gameProps.difficulty].INCREASE_ENEMIES,this._minEnemySpeed*=Le[e.gameProps.difficulty].MIN_ENEMY_SPEED,this._maxEnemySpeed*=Le[e.gameProps.difficulty].MAX_ENEMY_SPEED,this._bossMode=(null===e||void 0===e||null===(t=e.gameProps)||void 0===t?void 0:t.bossMode)||!1,this.input.keyboard.on("keyup-".concat(e.gameProps.keyboard.sounds),(function(){n._isEnableSoundEffect=!n._isEnableSoundEffect,Mn.emit(In.TOGGLE_SOUNDS,n._isEnableSoundEffect)}),this),this.input.keyboard.on("keyup-".concat(e.gameProps.keyboard.music),(function(){n._isEnableBgSound=!n._isEnableBgSound,n._isEnableBgSound?n._bgSound.play():n._bgSound.stop()}),this),this.input.keyboard.on("keyup-".concat(e.gameProps.keyboard.exit),(function(){Ct.dispatch(xt(!0))}),this),Mn.on(In.EXIST_GAME,(function(){n.gameOver()})),this.time.addEvent({delay:2e3,callback:function(){n._bgSound.play()}}),this._network&&this._network.allPlayersReady(!0),this._gameStarted=!0}},{key:"updateBulletLaunchDataToserver",value:function(e,t,n,i,a,s){var o,r,d=a.body.velocity,l=(new jn.a.Math.Vector2).setToPolar(n,i);console.log("ask bullet (",a._bulletType,a,")at : ",(new Date).getTime()),o=d.x+l.x,r=d.y+l.y,this._shot||(this._network&&this._network.updateBulletToServer(e,t,n,o,r,a._bulletType,s),this._shot=!0),this._shot=!1}},{key:"shipEnemyCollision",value:function(e,t){e._hasShield?("asteroid"===t._group&&this.splitAsteroid(t),this._particles.asteroidExplode.emitParticleAt(t.x,t.y),this._isEnableSoundEffect&&this._destroyedSound.play(),t.destroy()):e.Vulnerable&&e.kill()}},{key:"shipAirdropCollision",value:function(e,t){t._kind===me||(t._kind===ue?Ct.dispatch(yt(!0)):t._kind===ye?(Ct.dispatch(ut(t._kind)),Ct.dispatch(mt(this._airdropDuration))):(Ct.dispatch(pt(t._kind)),Ct.dispatch(ht(this._airdropDuration)))),t._kind===ue?e._hasAtomic=!0:t._kind===me?e.Lives+=1:t._kind===ye?e.setShiled(this._airdropDuration):e.updateBulletProperty(t._kind,this._airdropDuration),t.destroy()}},{key:"bulletEnemyCollision",value:function(e,t){if("atomic"!==e._bulletKind&&(this._myShip._hits+=1,this._myShip.setAccuracy()),"normal"===e._bulletKind&&e._owner._bulletType===ie)return e.destroy(),void this.spawnRegionBullet(t.x,t.y,e._owner,"explosive");if("asteroid"===t._group){if(t._type===X&&2===t._lives)return t._lives--,this._particles.asteroidExplode.emitParticleAt(t.x,t.y),void(e._owner._bulletType!==ne&&e.destroy());e._owner.Score+=1,this._network&&"atomic"!==e._bulletKind&&this._network.recordScore(e._owner._account,e._owner._tokenId,e._owner._shipName,e._owner._tier,e._owner._score),this.spawnRandomAirdrop(t,e._owner,this._airdropPercentAsteroid),this.splitAsteroid(t)}if("enemy"===t._group||"boss"===t._group){if("enemy"===t._group&&2===t._lives)return t._lives--,this._particles.asteroidExplode.emitParticleAt(t.x,t.y),void(e._owner._bulletType!==ne&&e.destroy());if("boss"===t._group&&t._lives>1)return t._lives--,this._particles.asteroidExplode.emitParticleAt(t.x,t.y),void(e._owner._bulletType!==ne&&e.destroy());"enemy"===t._group&&(e._owner.Score+=10,this._network&&"atomic"!==e._bulletKind&&this._network.recordScore(e._owner._account,e._owner._tokenId,e._owner._shipName,e._owner._tier,e._owner._score),this.spawnRandomAirdrop(t,e._owner,this._airdropPercentEnemy)),"boss"===t._group&&(e._owner.Score+=80,this._network&&"atomic"!==e._bulletKind&&this._network.recordScore(e._owner._account,e._owner._tokenId,e._owner._shipName,e._owner._tier,e._owner._score),this.spawnRandomAirdrop(t,e._owner,this._airdropPercentBoss))}this._particles.asteroidExplode.emitParticleAt(t.x,t.y),this._isEnableSoundEffect&&this._destroyedSound.play(),"atomic"!==e._bulletKind&&e._owner.reload(),e._owner._bulletType!==ne&&e.destroy(),t.destroy()}},{key:"spawnRandomBullet",value:function(e,t,n,i,a){var s=this;switch(a._bulletType){case $:for(var o=a.body.velocity,r=(new jn.a.Math.Vector2).setToPolar(n,i).add(o),d=Math.sqrt(r.x*r.x+r.y*r.y),l={x:r.x/d,y:r.y/d},c=-1;c<=1;c+=2){var p=this.spawnBullet(e-15*l.y*c,t+15*l.x*c,a);p.rotation=a.rotation,p.setVelocity(r.x,r.y)}break;case ee:for(var h=a.body.velocity,u=(new jn.a.Math.Vector2).setToPolar(n,i).add(h),m=Math.sqrt(u.x*u.x+u.y*u.y),y={x:u.x/m,y:u.y/m},x=-1;x<=1;x++){var g=this.spawnBullet(e-15*y.y*x,t+15*y.x*x,a);g.rotation=a.rotation,g.setVelocity(u.x,u.y)}break;case te:for(var _=-1;_<=1;_++){var b=_*Math.PI/10,f=this.spawnBullet(e,t,a);f.rotation=a.rotation+b;var v=a.body.velocity,w=(new jn.a.Math.Vector2).setToPolar(n,i).add(v).length(),O=a.rotation;f.setVelocity(w*Math.cos(O+b),w*Math.sin(O+b))}break;case ie:var j=this.spawnBullet(e,t,a);j.rotation=a.rotation;var E=a.body.velocity,S=(new jn.a.Math.Vector2).setToPolar(n,i);j.setVelocity(E.x+S.x,E.y+S.y);break;case ne:a._hasLazer=!0,setTimeout((function(){var n=s.spawnBullet(e,t,a);n.rotation=a.rotation;var o=a.body.velocity,r=(new jn.a.Math.Vector2).setToPolar(a.rotation,i);n.setVelocity(o.x+r.x,o.y+r.y),a._hasLazer=!1}),500);break;case ae:var k=this.spawnBullet(e,t,a);k.rotation=a.rotation;var A=a.body.velocity,T=(new jn.a.Math.Vector2).setToPolar(n,i);k.setVelocity(A.x+T.x,A.y+T.y);break;default:console.log("spawnBullet  shooter",a.body);var L=this.spawnBullet(e,t,a);L.rotation=a.rotation;var R=a.body.velocity,P=(new jn.a.Math.Vector2).setToPolar(n,i);L.setVelocity(R.x+P.x,R.y+P.y)}}},{key:"spawnBullet",value:function(e,t,n){var i,a;return n._bulletType===ne?(i=n.x,a=n.y):(i=e,a=t),new Wn({sargs:{scene:this,group:this._bullets,x:i,y:a,texture:se[n._bulletType],frame:0},owner:n,kind:"normal"})}},{key:"spawnRegionBullet",value:function(e,t,n,i){return this._myBullet=new Wn({sargs:{scene:this,group:this._regionBullets,x:e,y:t,texture:se.REGION_BULLET,frame:0},owner:n,kind:i}),this._myBullet}},{key:"spawnRandomAsteroid",value:function(e,t){var n=this.getOuterRimCoords(),i=n.x,a=n.y,s=n.dir;this.spawnAsteroid(i,a,e,t).launchAsteroid(Y(this._minAsteroidSpeed,this._maxAsteroidSpeed),s+Math.PI,H)}},{key:"spawnAsteroid",value:function(e,t,n,i){return new Xn({sargs:{scene:this,group:this._enemies,x:e,y:t,texture:W[n][i],frame:Math.round(2*Math.random())},type:n,size:i})}},{key:"respawnEnemies",value:function(e,t){var n=this.getOuterRimCoords(),i=n.x,a=n.y,s=n.dir;e.setPosition(i,a),"enemy"===e._group?e.launchEnemy(Y(this._minEnemySpeed,this._maxEnemySpeed),s+Math.PI,H):"asteroid"===e._group?e.launchAsteroid(Y(this._minAsteroidSpeed,this._maxAsteroidSpeed),s+Math.PI,H):"enemyBullet"===e._group&&e.destroy()}},{key:"splitAsteroid",value:function(e){if(e._size!==q)for(var t=e._type,n=q,i=e.body.velocity,a=e.getCenter(),s=a.x,o=a.y,r=0;r<2;r++){var d=jn.a.Math.RandomXY(new jn.a.Math.Vector2,40),l=d.x,c=d.y;this.spawnAsteroid(s+l,o+c,t,n).launchAsteroid(Y(this._minAsteroidSpeed,this._maxAsteroidSpeed),i.angle(),H,60)}}},{key:"spawnRandomEnemies",value:function(e,t){var n=this.getOuterRimCoords(),i=n.x,a=n.y,s=n.dir;this.spawnEnemy(i,a,e,t).launchEnemy(Y(this._minEnemySpeed,this._maxEnemySpeed),s+Math.PI,H-Math.PI)}},{key:"spawnEnemy",value:function(e,t,n,i){return new Qn({sargs:{scene:this,group:this._enemies,x:e,y:t,texture:xe[n],frame:Math.round(2*Math.random())},type:n,lives:i})}},{key:"spawnRandomEnemyBullet",value:function(e,t,n,i,a){if(a._type===ge){var s=this.spawnEnemyBullet(e,t,a);s.rotation=n;var o=a.body.velocity,r=(new jn.a.Math.Vector2).setToPolar(n,i);s.setVelocity(o.x+r.x,o.y+r.y)}else if(a._type===_e)for(var d=0;d<10;d++){var l=d*Math.PI/5,c=this.spawnEnemyBullet(e,t,a),p=this._enemyBulletVelocity;c.setVelocity(p.x*Math.cos(l),p.y*Math.sin(l))}else if(a._type===fe||a._type===ve){var h=this.spawnEnemyBullet(e,t,a),u={x:this._myShip.x-a.x,y:this._myShip.y-a.y},m=Math.sqrt(u.x*u.x+u.y*u.y),y={x:u.x/m,y:u.y/m},x={x:y.x*this._bossSpeed,y:y.y*this._bossSpeed};h.setVelocity(x.x,x.y)}else if(a._type===we||a._type===Oe)for(var g={x:this._myShip.x-a.x,y:this._myShip.y-a.y},_=Math.sqrt(g.x*g.x+g.y*g.y),b={x:g.x/_,y:g.y/_},f={x:b.x*this._bossSpeed,y:b.y*this._bossSpeed},v=Math.sqrt(f.x*f.x+f.y*f.y),w={x:f.x/v,y:f.y/v},O=-1;O<=1;O+=2){this.spawnEnemyBullet(e-15*w.y*O,t+15*w.x*O,a).setVelocity(f.x,f.y)}}},{key:"spawnEnemyBullet",value:function(e,t,n){var i=n._type.startsWith("NORMAL")?V.graphicAssets.enemyBullet.name:V.graphicAssets.rocketBullet.name;return new $n({sargs:{scene:this,group:this._enemies,x:e,y:t,texture:i,frame:0},owner:n})}},{key:"spawnRandomAirdrop",value:function(e,t,n){var i=this;if(a=n,Math.floor(100*Math.random())<=a){var a,s=Y(0,9),o="";o=s<=1?re:s<=2?de:s<=3?le:s<=4?ce:s<=5?pe:s<=6?he:s<=7?me:s<=8?ue:ye;var r=this.getOuterRimCoords().dir,d=this.spawnAirdrop(e.x,e.y,t,o);d.launchAirdrop(10+Y(-5,10),r+Math.PI,H);var l=this.time.delayedCall(1e3*V.airdropPros.alertTime,(function(){i.time.addEvent({delay:500,callback:function(){d.setVisible(!d.visible)},callbackScope:i,repeat:-1})}));this.time.delayedCall(1e3*V.airdropPros.lifetime,(function(){l.remove(),d.destroy()}))}}},{key:"spawnAirdrop",value:function(e,t,n,i){return new qn({sargs:{scene:this,group:this._airdrops,x:e,y:t,texture:oe[i],frame:Math.round(2*Math.random())},owner:n,kind:i})}},{key:"getOuterRimCoords",value:function(){var e=0,t=0,n=0,i=Math.random()*(2*this._width+2*this._height);return i<this._width?(e=i,t=0,n=-Y(.1,.9)*Math.PI):i<this._width+this._height?(e=this._width,t=i-this._width,n=Y(-.4,.4)*Math.PI):i<2*this._width+this._height?(e=i-this._width-this._height,t=this._height,n=Y(.1,.9)*Math.PI):(e=0,t=i-2*this._width-this._height,n=Y(.6,1.4)*Math.PI),{x:e,y:t,dir:n}}},{key:"gameOver",value:function(){this.sound.stopAll(),this.scene.stop("play"),this.scene.stop("text"),this.scene.launch("gameOver",{score:this._myShip.Score,paid:this._myShip._paid,accuracy:0!=this._myShip._wasted?this._myShip._hits/this._myShip._wasted:0})}},{key:"nextAsteroids",value:function(){var e=this._level%2==0?0:this._incrementAsteroids;this._startingAsteroids=Math.min(this._startingAsteroids+e,this._maxAsteroids);for(var t=0;t<this._startingAsteroids;t++){var n=1===this._level||Y(0,1)>=.5?K:X,i=J;this.spawnRandomAsteroid(n,i)}}},{key:"nextEnemies",value:function(e,t,n){if(t!==be)for(var i=0;i<e;i++)this.spawnRandomEnemies(t,n);else{this.spawnRandomEnemies(ge,n),this.spawnRandomEnemies(_e,n);for(var a=0;a<e-2;a++){var s=Y(1,3)>=2?_e:ge;this.spawnRandomEnemies(s,n)}}}},{key:"nextLevel",value:function(){var e=this;if(this._passedIntro=!1,this.time.removeEvent(this._levelTimer),this._readyNewLevel=!1,this._levelTimer=this.time.addEvent({delay:2e3,callback:function(){e._readyNewLevel=!1}}),this._level++,this.registry.set("level",this._level),this._bossMode||this._level>=8&&this._level%4===0||this.nextAsteroids(),!this._bossMode&&this._level>=3&&!(this._level>=8&&this._level%4===0)){var t=this._level%2!=0?0:this._increaseEnemies;this._startingEnemies+=t;var n=this._level>=5?be:ge;this.nextEnemies(this._startingEnemies,n,this._enemyLives)}if(this._bossMode){this._startingBoss=Math.ceil(this._level/2);var i=Y(0,1),a=i>.5?fe:ve,s=this._startingBoss%2==0?-1:0,o=this._startingBoss%2==0?1:0;this._level%2==0?this.nextEnemies(Math.floor(this._startingBoss/2)+s,a,this._bossLives):this.nextEnemies(Math.ceil(this._startingBoss/2),a,this._bossLives),a=(i=Y(0,1))>.5?we:Oe,this._level%2==0?(this._bossLives+=1,this.nextEnemies(Math.ceil(this._startingBoss/2)+o,a,this._bossLives)):this.nextEnemies(Math.floor(this._startingBoss/2),a,this._bossLives)}else if(this._level>=8&&this._level%4===0){this._startingBoss=Math.ceil(this._levelBoss/2);var r=Y(0,1),d=r>.5?fe:ve,l=this._startingBoss%2==0?-1:0,c=this._startingBoss%2==0?1:0;this._levelBoss%2==0?this.nextEnemies(Math.floor(this._startingBoss/2)+l,d,this._bossLives):this.nextEnemies(Math.ceil(this._startingBoss/2),d,this._bossLives),d=(r=Y(0,1))>.5?we:Oe,this._levelBoss%2==0?(this._bossLives+=1,this.nextEnemies(Math.ceil(this._startingBoss/2)+c,d,this._bossLives)):this.nextEnemies(Math.floor(this._startingBoss/2),d,this._bossLives),this._levelBoss+=1}}},{key:"introNewEnemy",value:function(e){this.nextEnemies(1,e,this._bossLives)}},{key:"newMission",value:function(){var e=this;2!==this._level||this._passedIntro?4!==this._level||this._passedIntro?(this.registry.set("endLevel",this._level),this.registry.set("newEnemy",-1),this._levelTimer=this.time.addEvent({delay:V.gamePros.endLevelDelay,callback:function(){e._readyNewLevel=!0,e.registry.set("endLevel",-1)}})):(this._passedIntro=!0,this.registry.set("newEnemy",1),this.introNewEnemy(_e),this._levelTimer=this.time.addEvent({delay:V.gamePros.introNewEnemyDelay,callback:function(){e.registry.set("newEnemy",-1)}})):(this._passedIntro=!0,this.registry.set("newEnemy",1),this.introNewEnemy(ge),this._levelTimer=this.time.addEvent({delay:V.gamePros.introNewEnemyDelay,callback:function(){e.registry.set("newEnemy",-1)}}))}},{key:"update",value:function(e,t){this.physics.world.wrap(this._ships);var n=this._enemies.children.entries.filter((function(e){return"enemyBullet"!==e._group})).length;n<=0&&this.newMission(),n<=0&&!0===this._readyNewLevel&&(this.changeEnvPerLevel(),this.nextLevel()),this._myShip&&this._network&&this._myShip.updateToServer(this._network),this.input.keyboard.addKey(this._specialKey).isDown&&this._myShip._hasAtomic&&(this.spawnRegionBullet(this._center.x,this._center.y,this,"atomic"),this._myShip._hasAtomic=!1,Ct.dispatch(yt(!1)))}},{key:"changeEnvPerLevel",value:function(){var e=this;console.log("env changed");var t=(this._level+this._firstBackImgRandom)%V.graphicAssets.background.length,n=(this._level+this._firstBgRandom)%V.soundAssets.bg.length;"".concat(t)!=this._backImg&&this._backgroundSprite&&0!=this._level&&(this.cameras.main.once("camerafadeoutcomplete",(function(e){e.fadeIn(500)}),this),this.cameras.main.fadeOut(500),this.time.removeEvent(this._randomTimer),this._randomTimer=this.time.addEvent({delay:500,callback:function(){e._backImg="".concat(t),e._backgroundSprite.setTexture(V.graphicAssets.background[t].name)}})),"".concat(n)!=this._backBg&&this._bgSound&&0!=this._level&&(this._bgSound.stop(),this._bgSound.destroy(),this._backBg="".concat(n),this._bgSound=this.sound.add(V.soundAssets.bg[n].name),this._bgSound.setLoop(!0),this._bgSound.play())}}]),n}(jn.a.Scene),ti=n(59),ni=function(e){Object(kn.a)(n,e);var t=Object(An.a)(n);function n(e){var i,a=e.sargs,s=e.team,o=e.id,r=e.shipPros,d=e.tier;Object(En.a)(this,n),(i=t.call(this,a,o,d,!1))._shipBody=void 0,i._engineSound=void 0,i._targetPosition=void 0,i._rotation=void 0,i._isForwarding=void 0,i._isBraking=void 0,i._angVel=void 0,i._hasShield=void 0,i._isFire=void 0,i._lastUpdateTimestamp=void 0,i._connected=!1,i._isExplode=void 0,i._explodeDone=!1,i._isEnableSoundEffect=!1,i._shipId=void 0,i._timetemp=0;var l=r.isBroken?V.shipPros.startingLives-1:V.shipPros.startingLives;return i.Lives=l+Ae[r.tier],console.log("this.Lives",l,Ae,r.tier),i._team=s,i._shipId=o,i._targetPosition={x:a.x,y:a.y},i._shipBody=i.body,i._angVel=180,i}return Object(Sn.a)(n,[{key:"updateOtherPlayer",value:function(e,t,n){switch(e){case"name":"string"===typeof t&&this._playerName.setText(t);break;case"x":"number"===typeof t&&(this._targetPosition.x=t);break;case"y":"number"===typeof t&&(this._targetPosition.y=t);break;case"angularVel":"number"===typeof t&&(t>0?this._rotation+=Math.PI/2*n:this._rotation-=Math.PI/2*n);break;case"rotation":"number"===typeof t&&(this._rotation=t);break;case"speed_x":"number"===typeof t&&(this._shipBody.velocity.x=t);break;case"speed_y":"number"===typeof t&&(this._shipBody.velocity.y=t);break;case"isForwarding":"boolean"===typeof t&&(this._isForwarding=t);break;case"isFire":"boolean"===typeof t&&(this._isFire=t);break;case"hasShield":"boolean"===typeof t&&(this._hasShield=t);break;case"isExplode":"boolean"===typeof t&&(this._isExplode=t);break;case"readyToConnect":"boolean"===typeof t&&(this._readyToConnect=t);break;case"team":"number"===typeof t&&(this._team=t);break;case"lives":"number"===typeof t&&(this._lives=t)}}},{key:"updateOtherPlayerChanges",value:function(e,t){var n=this,i=Date.now(),a=e.find((function(e){return"curServerTime"===e.field})),s=null===a||void 0===a?void 0:a.value;if(!(s<this._timetemp)){var o=(i-s-t)/1e3;e.map((function(e){n.updateOtherPlayer(e.field,e.value,o)})),this._timetemp=s}}},{key:"preUpdate",value:function(e,t){Object(Un.a)(Object(Fn.a)(n.prototype),"preUpdate",this).call(this,e,t),this._gunModule.update(e,t),this.x+=.5*((this._targetPosition.x||this.x)-this.x),this.y+=.5*((this._targetPosition.y||this.y)-this.y);var i=((this._rotation||this.rotation)-this.rotation)/(2*Math.PI);i=(i-=Math.round(i))*Math.PI*2,this.rotation+=i,this._lastUpdateTimestamp=e,this.setDepth(this.y),this._isForwarding?(this._engine.setAngle(this.angleBack),this._engine.setSpeed({min:this.body.velocity.length()-150,max:this.body.velocity.length()-100}),this._engine.followOffset.setToPolar(this.rotBack,8),this._isEnableSoundEffect=!0,this._engine.start()):(this._engine.stop(),this._isEnableSoundEffect=!1),this._shield.setVisible(this._hasShield),this._shield.setPosition(this.x,this.y),this._isExplode&&this.kill()}},{key:"kill",value:function(){this._engine.stop(),this.emit("ship_death"),this.setActive(!1).setVisible(!1),this._explodeDone=!0}},{key:"makeTempInvulnerable",value:function(e){var t=this,n=this.scene.time.addEvent({delay:200,callback:function(){t.setVisible(!t.visible)},callbackScope:this,repeat:-1});this.scene.time.delayedCall(1e3*e,(function(){n.remove(),t.setVisible(!0)}),null,this)}},{key:"respawn",value:function(e,t){this.setActive(!0).setVisible(!0),this.setRotation(0),this.setRotation(this.rotLeft),this.setPosition(e,t),this._shipBody.setVelocity(0)}},{key:"Lives",get:function(){return this._lives},set:function(e){e>V.shipPros.startingLives+Ae[this._tier]||(this._lives=e,this.scene.registry.set("playerLives",this._lives))}}]),n}(Gn),ii=function(e){Object(kn.a)(n,e);var t=Object(An.a)(n);function n(){var e;return Object(En.a)(this,n),(e=t.call(this,"multiplay"))._room=void 0,e._network=void 0,e._myShip=void 0,e._account=void 0,e._tokenId=void 0,e._shipName=void 0,e._mySessionId=void 0,e._paid=void 0,e._team=void 0,e._wasted=void 0,e._hits=void 0,e._ships=void 0,e._otherShips=void 0,e._otherShipMap=new Map,e._bullets=void 0,e._bulletsMap=new Map,e._asteroids=void 0,e._asteroidsMap=new Map,e._regionBullets=void 0,e._enemies=void 0,e._airdrops=void 0,e._airdropsMap=new Map,e._worldBounds=void 0,e._backgroundSprite=void 0,e._particles=void 0,e._destroyedSound=void 0,e._fireSound=void 0,e._bulletSound=void 0,e._bgSound=void 0,e._deathSound=void 0,e._airdropPercentAsteroid=void 0,e._airdropPercentEnemy=void 0,e._airdropPercentBoss=void 0,e._airdropDuration=void 0,e._airdropTimer=void 0,e._startingAsteroids=void 0,e._maxAsteroids=void 0,e._incrementAsteroids=void 0,e._minAsteroidSpeed=void 0,e._maxAsteroidSpeed=void 0,e._minEnemySpeed=void 0,e._maxEnemySpeed=void 0,e._startingEnemies=void 0,e._increaseEnemies=void 0,e._enemyLives=void 0,e._startingBoss=void 0,e._bossLives=void 0,e._increaseBoss=void 0,e._enemyBulletVelocity=void 0,e._bossSpeed=void 0,e._width=void 0,e._height=void 0,e._center=void 0,e._level=void 0,e._levelTimer=void 0,e._readyNewLevel=void 0,e._passedIntro=void 0,e._specialKey=void 0,e._isEnableSoundEffect=void 0,e._isEnableBgSound=void 0,e._shot=void 0,e._waitingText=void 0,e._gameStarted=void 0,e._shipPros=void 0,e._joyStick=void 0,e._shipCount=void 0,e}return Object(Sn.a)(n,[{key:"preLoad",value:function(){}},{key:"init",value:function(){this._width=V.gamePros.screenWidth,this._height=V.gamePros.screenHeight,this._center={x:this._width/2,y:this._height/2},this._level=0,this._readyNewLevel=!1,this._passedIntro=!1,this._isEnableSoundEffect=!0,this._isEnableBgSound=!0,this._startingAsteroids=V.asteroidPros.startingAsteroids,this._maxAsteroids=V.asteroidPros.maxAsteroids,this._incrementAsteroids=V.asteroidPros.incrementAsteroids,this._minAsteroidSpeed=V.asteroidPros.minSpeed,this._maxAsteroidSpeed=V.asteroidPros.maxSpeed,this._minEnemySpeed=V.enemyPros.minSpeed,this._maxEnemySpeed=V.enemyPros.maxSpeed,this._startingEnemies=V.enemyPros.startingEnemies,this._increaseEnemies=V.enemyPros.incrementEnemies,this._enemyBulletVelocity=V.enemyBulletPros.velocity,this._enemyLives=V.enemyBulletPros.lives,this._startingBoss=V.enemyPros.startingBoss,this._increaseBoss=V.enemyPros.incrementBoss,this._bossLives=V.enemyPros.bossLives,this._bossSpeed=V.enemyBulletPros.bossSpeed,this._airdropPercentAsteroid=V.airdropPros.percentAsteroid,this._airdropPercentEnemy=V.airdropPros.percentEnemy,this._airdropPercentBoss=V.airdropPros.percentBoss,this._airdropDuration=V.airdropPros.duration,this.initAssets(),this.initWorld(),this._shot=!1,this._gameStarted=!1,this._shipCount=0}},{key:"initWorld",value:function(){this._ships=this.physics.add.group(),this._ships.runChildUpdate=!0,this._otherShips=this.physics.add.group(),this._otherShips.runChildUpdate=!0,this._bullets=this.physics.add.group(),this._bullets.runChildUpdate=!0,this._asteroids=this.physics.add.group(),this._asteroids.runChildUpdate=!0,this._regionBullets=this.physics.add.group(),this._regionBullets.runChildUpdate=!0,this._airdrops=this.physics.add.group(),this._airdrops.runChildUpdate=!0,this._enemies=this.physics.add.group(),this._enemies.runChildUpdate=!0,this._backgroundSprite=this.add.sprite(0,0,V.graphicAssets.background[0].name),this._backgroundSprite.displayWidth=V.gamePros.screenWidth,this._backgroundSprite.displayHeight=V.gamePros.screenHeight,this._backgroundSprite.setOrigin(0),this.initWorldBounds(),this.physics.add.overlap(this._ships,this._asteroids,this.shipAsteroidCollision,null,this),this.physics.add.overlap(this._ships,this._enemies,this.shipEnemyCollision,null,this),this.physics.add.overlap([this._bullets,this._regionBullets],this._asteroids,this.bulletAsteroidCollision,null,this),this.physics.add.overlap([this._bullets,this._regionBullets],this._enemies,this.bulletEnemyCollision,null,this),this.physics.add.overlap(this._ships,this._airdrops,this.shipAirdropCollision,null,this),this.physics.add.overlap(this._bullets,this._otherShips,this.shipBulletCollision,null,this)}},{key:"initWorldBounds",value:function(){var e=this._width/2+100,t=this._height/2+100,n=this._center.x-e,i=this._center.x+(e-5),a=this._center.y-t,s=this._center.y+(t-5),o=i-n,r=s-a,d=a+r/2,l=n+o/2;this._worldBounds=this.physics.add.staticGroup(),this._worldBounds.add(new jn.a.GameObjects.Rectangle(this,l,a,o,5)),this._worldBounds.add(new jn.a.GameObjects.Rectangle(this,n,d,5,r)),this._worldBounds.add(new jn.a.GameObjects.Rectangle(this,l,s,o,5,1)),this._worldBounds.add(new jn.a.GameObjects.Rectangle(this,i,d,5,r,0))}},{key:"initShip",value:function(e,t,n){var i=this,a={forward:this.input.keyboard.addKey(n.forward),brake:this.input.keyboard.addKey(n.brake),left:this.input.keyboard.addKey(n.left),right:this.input.keyboard.addKey(n.right),fire:this.input.keyboard.addKey(n.fire)};this._shipPros=e,this._myShip=new Hn({sargs:{scene:this,group:this._ships,x:this.cameras.main.centerX,y:this.cameras.main.centerY,texture:e.spaceship,team:this._team},id:1,shipPros:e,hasCombat:t,inputKeys:a}),this._myShip.setRotation(this._myShip.rotLeft);var s=this.sound.add(V.soundAssets.shipExplose.name,{volume:.5});this._myShip.on("ship_death",(function(){s.play(),i._myShip.Lives<1?i.gameOver():i.time.delayedCall(3e3,(function(){i._myShip.respawn(i._width/2,i._height/2)})),i._particles.shipExplode.emitParticleAt(i._myShip.x,i._myShip.y)})),this._myShip._engineSound=this.sound.add(V.soundAssets.engine.name,{loop:!0,volume:.5}),this._isEnableSoundEffect&&this._myShip._engineSound.play(),this._myShip._engineSound.pause()}},{key:"initAssets",value:function(){var e=this;this._bulletSound=this.sound.add(V.soundAssets.fire.name),this._destroyedSound=this.sound.add(V.soundAssets.destroyed.name),this._fireSound=this.sound.add(V.soundAssets.fire.name),this._deathSound=this.sound.add(V.soundAssets.shipExplose.name,{volume:.5}),this._particles={};var t=this.add.particles(V.graphicAssets.particles.name);t.setDepth(9);this._particles.bulletImpact=t.createEmitter({frame:["blue","red","orange"],scale:{start:.2,end:0},quantity:30,alpha:{start:1,end:0},lifespan:{min:500,max:1e3},speed:{min:120,max:150},frequency:-1,blendMode:"ADD"}),this._particles.asteroidExplode=t.createEmitter({frame:["white","red"],scale:{start:.3,end:0},quantity:60,alpha:{start:1,end:0},lifespan:{min:300,max:600},speed:{min:20,max:150},frequency:-1,blendMode:"ADD"}),this._particles.shipExplode=t.createEmitter({frame:["white","red","orange"],scale:{start:.6,end:0},quantity:60,alpha:{start:1,end:0},lifespan:{min:300,max:600},speed:{min:20,max:150},frequency:-1,blendMode:"ADD"}),this.time.addEvent({delay:1e3,callback:function(){e._bgSound=e.sound.add(V.soundAssets.bg[0].name)}})}},{key:"create",value:function(e){var t=this,n=this.sys.game.device.os;if(this._joyStick=this.plugins.get("rexvirtualjoystickplugin"),!0===n.android&&(this._joyStick.add(this,{x:200,y:800,radius:100,base:this.add.circle(0,0,100,8947848),thumb:this.add.circle(0,0,50,13421772)}),this.dumpJoyStickState()),this._airdropDuration*=Te[e.shipPros.tier],this.registry.set("bonusLives",Ae[e.shipPros.tier]),this._specialKey=e.gameProps.keyboard.special,this.scene.launch("text",{level:""}),!e.network)throw new Error("server instance missing");this._network=e.network,this._mySessionId=e.network._mySessionId,this.initShip(e.shipPros,e.gameProps.hasCombat,e.gameProps.keyboard),this._account=e.shipPros.account,this._tokenId=e.shipPros.tokenID,this._shipName=e.shipPros.shipName,this._paid=e.shipPros.paid,this._team=e.shipPros.team,this._wasted=e.shipPros.wasted,this._hits=e.shipPros.hits,e.shipPros.hasShield&&(this._myShip.setShiled(this._airdropDuration),Ct.dispatch(ut(oe.SHIELD)),Ct.dispatch(mt(this._airdropDuration))),this._startingAsteroids+=Le[e.gameProps.difficulty].STARTING_ASTEROIDS,this._incrementAsteroids+=Le[e.gameProps.difficulty].INCREASE_ASTEROIDS,this._maxAsteroids+=Le[e.gameProps.difficulty].MAX_ASTEROIDS,this._minAsteroidSpeed*=Le[e.gameProps.difficulty].MIN_ASTEROID_SPEED,this._maxAsteroidSpeed*=Le[e.gameProps.difficulty].MAX_ASTEROID_SPEED,this._startingEnemies+=Le[e.gameProps.difficulty].STARTING_ENEMIES,this._increaseEnemies+=Le[e.gameProps.difficulty].INCREASE_ENEMIES,this._minEnemySpeed*=Le[e.gameProps.difficulty].MIN_ENEMY_SPEED,this._maxEnemySpeed*=Le[e.gameProps.difficulty].MAX_ENEMY_SPEED,this.input.keyboard.on("keyup-".concat(e.gameProps.keyboard.sounds),(function(){t._isEnableSoundEffect=!t._isEnableSoundEffect,Mn.emit(In.TOGGLE_SOUNDS,t._isEnableSoundEffect)}),this),this.time.addEvent({delay:2e3,callback:function(){t._bgSound.play()}}),this.input.keyboard.on("keyup-".concat(e.gameProps.keyboard.music),(function(){t._isEnableBgSound=!t._isEnableBgSound,t._isEnableBgSound?t._bgSound.play():t._bgSound.stop()}),this),this.input.keyboard.on("keyup-".concat(e.gameProps.keyboard.exit),(function(){Ct.dispatch(xt(!0))}),this),Mn.on(In.EXIST_GAME,(function(){t.gameOver()})),this._network.onMyPlayerReady(this.handleMyPlayerReady,this),this._network.onPlayerJoined(this.handlePlayerJoined,this),this._network.onPlayerUpdated(this.handlePlayerUpdated,this),this._network.onPlayerLeft(this.handlePlayerLeft,this),this._network.onBulletCreated(this.handleBulletCreated,this),this._network.onBulletRemoved(this.handleBulletRemoved,this),this._network.onAsteroidCreated(this.handleAsteroidCreated,this),this._network.onAsteroidRemoved(this.handleAsteroidRemoved,this),this._network.onAsteroidChangesUpdated(this.handleAsteroidChangesUpdated,this),this._network.onAirdropCreated(this.handleAirdropCreated,this),this._network.onAirdropUpdated(this.handleAirdropUpdated,this),this._network.onAirdropRemoved(this.handleAirdropRemoved,this),this._network.onCollisionPlayerWithAsteroid(this.handleCollisionPlayerWithAsteroid,this),this._network.onCollisionPlayerWithBullet(this.handleCollisionPlayerWithBullet,this),this._network.onCollisionBulletAsteroid(this.handleCollisionBulletAsteroid,this),this._network.onCollisionPlayerAirdrop(this.handleCollisionPlayerWithAirdrop,this)}},{key:"dumpJoyStickState",value:function(){}},{key:"handlePlayerJoined",value:function(e,t){var n=this,i=new ni({sargs:{scene:this,group:this._otherShips,x:e.x,y:e.y,texture:V.graphicAssets.shipsTypes[0]},team:e._team,id:1,shipPros:this._shipPros,tier:0});this.scene.launch("text",{level:"Multiplayer"}),this._otherShips.add(i),this._otherShipMap.set(t,i);var a=this.sound.add(V.soundAssets.shipExplose.name,{volume:.5});a.on("complete",(function(){i._lives<1?(i.setActive(!1),i.setVisible(!1),i.destroy()):i.respawn(n._width/2,n._height/2)})),i.on("ship_death",(function(){a.play(),n._particles.shipExplode.emitParticleAt(i.x,i.y)})),i._engineSound=this.sound.add(V.soundAssets.engine.name,{loop:!0,volume:.5}),i._isEnableSoundEffect&&i._engineSound.play(),i._engineSound.pause(),this.input.keyboard.enabled=!0,this._network&&this._network.allPlayersReady(!0),this._gameStarted=!0}},{key:"handlePlayerLeft",value:function(e){if(this._otherShipMap.has(e)){var t=this._otherShipMap.get(e);if(!t)return;this._otherShips.remove(t,!0,!0),this._otherShipMap.delete(e)}}},{key:"handleMyPlayerReady",value:function(){this._myShip._readyToConnect=!0}},{key:"handlePlayerUpdated",value:function(e,t){var n=this._otherShipMap.get(t);null===n||void 0===n||n.updateOtherPlayerChanges(e,this._network._dtServer2Client)}},{key:"handleBulletCreated",value:function(e,t,n){if(e.owner!=this._network._mySessionId){var i=Math.sqrt(e.speed_x*e.speed_x+e.speed_y*e.speed_y);e.owner!=this._myShip&&this.spawnRandomBullet(e.x,e.y,e.rotation,i,e.owner,!1,e.teamflag)}}},{key:"handleBulletUpdated",value:function(e,t){var n=this._bulletsMap.get(t);null===n||void 0===n||n.updateServerDataChangesBullet(e,this._network._dtServer2Client)}},{key:"handleBulletRemoved",value:function(e,t){if(this._bulletsMap.has(e)){var n=this._bulletsMap.get(e);if(!n)return;this._bullets.remove(n,!0,!0),this._bulletsMap.delete(e)}}},{key:"handleAsteroidCreated",value:function(e,t,n){var i,a,s,o;i=e.x,a=e.y,s=1===e.type?"FIRST":"SECOND",o=1===e.size?"LARGE":"SMALL";var r=new Xn({sargs:{scene:this,group:this._asteroids,x:i,y:a,texture:W[s][o],frame:Math.round(2*Math.random())},type:s,size:o});o===J&&r.setCircle(29),o===q&&r.setCircle(19),r.setOrigin(.5,.5),r.setAngularVelocity(Y(-50,50)),this._asteroidsMap.set(t,r)}},{key:"handleAsteroidRemoved",value:function(e,t){if(this._asteroidsMap.has(e)){var n=this._asteroidsMap.get(e);if(!n)return;this._asteroids.remove(n,!0,!0),this._asteroidsMap.delete(e)}}},{key:"handleAsteroidChangesUpdated",value:function(e,t){var n=this._asteroidsMap.get(t);if(!this._asteroidsMap.has(t)){var i=this._network._asteroidsMap.get(t);this._network._asteroidsMap.has(t)&&this.handleAsteroidCreated(i,t,t)}null===n||void 0===n||n.updateServerDataChangesAsteroid(e,this._network._dtServer2Client)}},{key:"handleAirdropCreated",value:function(e,t,n){if(console.log("in handleAirdropCreated",e,t),e.owner!==this._mySessionId){var i=new qn({sargs:{scene:this,group:this._airdrops,x:e.x,y:e.y,texture:oe[e.kind],frame:Math.round(2*Math.random())},owner:e.owner,kind:e.kind});this._airdropsMap.set(t,i)}}},{key:"handleAirdropUpdated",value:function(e,t,n){var i=this._airdropsMap.get(n);null===i||void 0===i||i.updateServerDataAirdrop(e,t)}},{key:"handleAirdropRemoved",value:function(e,t){if(this._airdropsMap.has(e)){var n=this._airdropsMap.get(e);if(!n)return;this._airdrops.remove(n,!0,!0),this._airdropsMap.delete(e)}}},{key:"handleCollisionPlayerWithAsteroid",value:function(e){}},{key:"shipAsteroidCollision",value:function(e,t){e._hasShield?"asteroid"===t._group&&(this.splitAsteroid(t),this._particles.asteroidExplode.emitParticleAt(t.x,t.y),this._isEnableSoundEffect&&this._destroyedSound.play(),t.destroy()):e.Vulnerable&&e.kill()}},{key:"shipEnemyCollision",value:function(e,t){e._hasShield?("asteroid"===t._group&&this.splitAsteroid(t),this._particles.asteroidExplode.emitParticleAt(t.x,t.y),this._isEnableSoundEffect&&this._destroyedSound.play(),t.destroy()):e.Vulnerable&&e.kill()}},{key:"bulletAsteroidCollision",value:function(e,t){if("normal"===e._bulletKind&&e._owner._bulletType===ie)return e.destroy(),void this.spawnRegionBullet(t.x,t.y,e._owner,"explosive");if("asteroid"===t._group){if(t._type===X&&2===t._lives)return t._lives--,this._particles.asteroidExplode.emitParticleAt(t.x,t.y),void(e._owner._bulletType!==ne&&e.destroy());e._owner.Score+=1,this._network&&this._network.recordScore(e._owner._account,e._owner._tokenId,e._owner._shipName,e._owner._tier,e._owner._score),e._owner==this._myShip&&this.spawnRandomAirdrop(t,this._mySessionId,this._airdropPercentAsteroid),this.splitAsteroid(t)}this._particles.asteroidExplode.emitParticleAt(t.x,t.y),this._isEnableSoundEffect&&this._destroyedSound.play(),"atomic"!==e._bulletKind&&e._owner.reload(),e._owner._bulletType!==ne&&e.destroy(),t.destroy()}},{key:"bulletEnemyCollision",value:function(e,t){if("normal"===e._bulletKind&&e._owner._bulletType===ie)return e.destroy(),void this.spawnRegionBullet(t.x,t.y,e._owner,"explosive");if("enemy"===t._group||"boss"===t._group){if("enemy"===t._group&&2===t._lives)return t._lives--,this._particles.asteroidExplode.emitParticleAt(t.x,t.y),void(e._owner._bulletType!==ne&&e.destroy());if("boss"===t._group&&t._lives>1)return t._lives--,this._particles.asteroidExplode.emitParticleAt(t.x,t.y),void(e._owner._bulletType!==ne&&e.destroy());"enemy"===t._group&&(e._owner.Score+=10,this._network&&this._network.recordScore(e._owner._account,e._owner._tokenId,e._owner._shipName,e._owner._tier,e._owner._score),this.spawnRandomAirdrop(t,e._owner,this._airdropPercentEnemy)),"boss"===t._group&&(e._owner.Score+=80,this._network&&this._network.recordScore(e._owner._account,e._owner._tokenId,e._owner._shipName,e._owner._tier,e._owner._score),this.spawnRandomAirdrop(t,e._owner,this._airdropPercentBoss))}this._particles.asteroidExplode.emitParticleAt(t.x,t.y),this._isEnableSoundEffect&&this._destroyedSound.play(),"atomic"!==e._bulletKind&&e._owner.reload(),e._owner._bulletType!==ne&&e.destroy(),t.destroy()}},{key:"getKeyByValue",value:function(e,t){var n,i=Object(ti.a)(e.entries());try{for(i.s();!(n=i.n()).done;){var a=Object(d.a)(n.value,2),s=a[0];if(a[1]===t)return s}}catch(o){i.e(o)}finally{i.f()}return 0}},{key:"shipAirdropCollision",value:function(e,t){t._kind===me||(t._kind===ue?Ct.dispatch(yt(!0)):t._kind===ye?(Ct.dispatch(ut(t._kind)),Ct.dispatch(mt(this._airdropDuration))):(Ct.dispatch(pt(t._kind)),Ct.dispatch(ht(this._airdropDuration)))),t._kind===ue?e._hasAtomic=!0:t._kind===me?e.Lives+=1:t._kind===ye?e.setShiled(this._airdropDuration):e.updateBulletProperty(t._kind,this._airdropDuration);var n=t,i=this.getKeyByValue(this._airdropsMap,n);this._network.removeAirdropToServer(i),t.destroy()}},{key:"shipBulletCollision",value:function(e,t){e._owner!=t&&e._owner._team!=t._team&&(t._hasShield?(this._isEnableSoundEffect&&this._destroyedSound.play(),this._particles.bulletImpact.emitParticleAt(t.x,t.y)):t.kill(),e.destroy()),e._owner==this._myShip&&(this._myShip.Score+=5)}},{key:"handleCollisionPlayerWithBullet",value:function(e){e.punished_id===this._mySessionId?this._myShip._hasShield?(this._isEnableSoundEffect&&this._destroyedSound.play(),this._particles.bulletImpact.emitParticleAt(this._myShip.x,this._myShip.y)):this._myShip.Vulnerable&&this._myShip.kill():e.punisher_id===this._mySessionId&&(this._myShip.Score+=5)}},{key:"handleCollisionBulletAsteroid",value:function(e){e.punisher_id===this._network._mySessionId&&(this._myShip.Score+=1),this._isEnableSoundEffect&&this._destroyedSound.play(),this._particles.asteroidExplode.emitParticleAt(e.asteroid_x,e.asteroid_y)}},{key:"handleCollisionPlayerWithAirdrop",value:function(e){console.log("collide player with airdrop",e.id,this._mySessionId,e.player_id),this._mySessionId===e.player_id&&(e.kind===me||(e.kind===ue?Ct.dispatch(yt(!0)):e.kind===ye?(Ct.dispatch(ut(e.kind)),Ct.dispatch(mt(this._airdropDuration))):(Ct.dispatch(pt(e.kind)),Ct.dispatch(ht(this._airdropDuration)))),e.kind===ue?this._myShip._hasAtomic=!0:e.kind===me?this._myShip.Lives+=1:e.kind===ye?this._myShip.setShiled(this._airdropDuration):this._myShip.updateBulletProperty(e.kind,this._airdropDuration))}},{key:"updateBulletLaunchDataToserver",value:function(e,t,n,i,a,s){var o,r,d=a.body.velocity,l=(new jn.a.Math.Vector2).setToPolar(n,i);console.log("ask bullet (",a._bulletType,a,")at : ",(new Date).getTime()),o=d.x+l.x,r=d.y+l.y,this._shot||(this._network&&this._network.updateBulletToServer(e,t,n,o,r,a._bulletType,a._team),this._shot=!0),this._shot=!1}},{key:"spawnRandomBullet",value:function(e,t,n,i,a,s,o){var r=this,d=a._bulletType;if(s)a=this._myShip;else{if(console.log("_otherShipMap",this._otherShipMap,"speed",i),!this._otherShipMap.has(a))return;a=this._otherShipMap.get(a)}switch(d){case $:for(var l=a.body.velocity,c=(new jn.a.Math.Vector2).setToPolar(n,i).add(l),p=Math.sqrt(c.x*c.x+c.y*c.y),h={x:c.x/p,y:c.y/p},u=-1;u<=1;u+=2){var m=this.spawnBullet(e-15*h.y*u,t+15*h.x*u,a,o);m.rotation=a.rotation,m.setVelocity(c.x,c.y)}break;case ee:for(var y=a.body.velocity,x=(new jn.a.Math.Vector2).setToPolar(n,i).add(y),g=Math.sqrt(x.x*x.x+x.y*x.y),_={x:x.x/g,y:x.y/g},b=-1;b<=1;b++){var f=this.spawnBullet(e-15*_.y*b,t+15*_.x*b,a,o);f.rotation=a.rotation,f.setVelocity(x.x,x.y)}break;case te:for(var v=-1;v<=1;v++){var w=v*Math.PI/10,O=this.spawnBullet(e,t,a,o);O.rotation=a.rotation+w;var j=a.body.velocity,E=(new jn.a.Math.Vector2).setToPolar(n,i).add(j).length(),S=a.rotation;O.setVelocity(E*Math.cos(S+w),E*Math.sin(S+w))}break;case ie:var k=this.spawnBullet(e,t,a,o);k.rotation=a.rotation;var A=a.body.velocity,T=(new jn.a.Math.Vector2).setToPolar(n,i);k.setVelocity(A.x+T.x,A.y+T.y);break;case ne:a._hasLazer=!0,setTimeout((function(){var n=r.spawnBullet(e,t,a,o);n.rotation=a.rotation;var s=a.body.velocity,d=(new jn.a.Math.Vector2).setToPolar(a.rotation,i);n.setVelocity(s.x+d.x,s.y+d.y),a._hasLazer=!1}),500);break;case ae:var L=this.spawnBullet(e,t,a,o);L.rotation=a.rotation;var R=a.body.velocity,P=(new jn.a.Math.Vector2).setToPolar(n,i);L.setVelocity(R.x+P.x,R.y+P.y);break;default:var M=this.spawnBullet(e,t,a,o);console.log("shooter.body.velocity",s,"   ",a.body.velocity),M.rotation=a.rotation;var I=a.body.velocity,C=(new jn.a.Math.Vector2).setToPolar(n,i);M.setVelocity(I.x+C.x,I.y+C.y)}}},{key:"spawnBullet",value:function(e,t,n,i){var a,s;return n._bulletType===ne?(a=n.x,s=n.y):(a=e,s=t),new Wn({sargs:{scene:this,group:this._bullets,x:a,y:s,texture:se[n._bulletType],frame:0,teamflag:i},owner:n,kind:"normal"})}},{key:"spawnRegionBullet",value:function(e,t,n,i){return new Wn({sargs:{scene:this,group:this._regionBullets,x:e,y:t,texture:se.REGION_BULLET,frame:0},owner:n,kind:i})}},{key:"spawnRandomAsteroid",value:function(e,t){var n=this.getOuterRimCoords(),i=n.x,a=n.y;n.dir,this.spawnAsteroid(i,a,e,t)}},{key:"spawnAsteroid",value:function(e,t,n,i){return new Xn({sargs:{scene:this,group:this._enemies,x:e,y:t,texture:W[n][i],frame:Math.round(2*Math.random())},type:n,size:i})}},{key:"respawnEnemies",value:function(e,t){var n=this.getOuterRimCoords(),i=n.x,a=n.y,s=n.dir;e.setPosition(i,a),"enemy"===e._group?e.launchEnemy(Y(this._minEnemySpeed,this._maxEnemySpeed),s+Math.PI,H):"asteroid"===e._group?e.launchAsteroid(Y(this._minAsteroidSpeed,this._maxAsteroidSpeed),s+Math.PI,H):"enemyBullet"===e._group&&e.destroy()}},{key:"splitAsteroid",value:function(e){if(e._size!==q)for(var t=e._type,n=q,i=(e.body.velocity,e.getCenter()),a=i.x,s=i.y,o=0;o<2;o++){var r=jn.a.Math.RandomXY(new jn.a.Math.Vector2,40),d=r.x,l=r.y;this.spawnAsteroid(a+d,s+l,t,n)}}},{key:"spawnRandomEnemies",value:function(e,t){var n=this.getOuterRimCoords(),i=n.x,a=n.y,s=n.dir;this.spawnEnemy(i,a,e,t).launchEnemy(Y(this._minEnemySpeed,this._maxEnemySpeed),s+Math.PI,H-Math.PI)}},{key:"spawnEnemy",value:function(e,t,n,i){return new Qn({sargs:{scene:this,group:this._enemies,x:e,y:t,texture:xe[n],frame:Math.round(2*Math.random())},type:n,lives:i})}},{key:"spawnRandomEnemyBullet",value:function(e,t,n,i,a){if(a._type===ge){var s=this.spawnEnemyBullet(e,t,a);s.rotation=n;var o=a.body.velocity,r=(new jn.a.Math.Vector2).setToPolar(n,i);s.setVelocity(o.x+r.x,o.y+r.y)}else if(a._type===_e)for(var d=0;d<10;d++){var l=d*Math.PI/5,c=this.spawnEnemyBullet(e,t,a),p=this._enemyBulletVelocity;c.setVelocity(p.x*Math.cos(l),p.y*Math.sin(l))}else if(a._type===fe||a._type===ve){var h=this.spawnEnemyBullet(e,t,a),u={x:this._myShip.x-a.x,y:this._myShip.y-a.y},m=Math.sqrt(u.x*u.x+u.y*u.y),y={x:u.x/m,y:u.y/m},x={x:y.x*this._bossSpeed,y:y.y*this._bossSpeed};h.setVelocity(x.x,x.y)}else if(a._type===we||a._type===Oe)for(var g={x:this._myShip.x-a.x,y:this._myShip.y-a.y},_=Math.sqrt(g.x*g.x+g.y*g.y),b={x:g.x/_,y:g.y/_},f={x:b.x*this._bossSpeed,y:b.y*this._bossSpeed},v=Math.sqrt(f.x*f.x+f.y*f.y),w={x:f.x/v,y:f.y/v},O=-1;O<=1;O+=2){this.spawnEnemyBullet(e-15*w.y*O,t+15*w.x*O,a).setVelocity(f.x,f.y)}}},{key:"spawnEnemyBullet",value:function(e,t,n){var i=n._type.startsWith("NORMAL")?V.graphicAssets.enemyBullet.name:V.graphicAssets.rocketBullet.name;return new $n({sargs:{scene:this,group:this._enemies,x:e,y:t,texture:i,frame:0},owner:n})}},{key:"spawnRandomAirdrop",value:function(e,t,n){var i=this,a=Y(0,9),s="";s=a<=1?re:a<=2?de:a<=3?le:a<=4?ce:a<=5?pe:a<=6?he:a<=7?me:a<=8?ue:ye;var o=this.getOuterRimCoords().dir,r=this.spawnAirdrop(e.x,e.y,t,s);this._network.createAirdropToServer(e.x,e.y,t,s),r.launchAirdrop(10+Y(-5,10),o+Math.PI,H);var d=this.time.delayedCall(1e3*V.airdropPros.alertTime,(function(){i.time.addEvent({delay:1e3,callback:function(){r.setVisible(!r.visible)},callbackScope:i,repeat:-1})}));this.time.delayedCall(1e3*V.airdropPros.lifetime,(function(){d.remove(),r.destroy()}))}},{key:"spawnAirdrop",value:function(e,t,n,i){return new qn({sargs:{scene:this,group:this._airdrops,x:e,y:t,texture:oe[i],frame:Math.round(2*Math.random())},owner:n,kind:i})}},{key:"getOuterRimCoords",value:function(){var e=0,t=0,n=0,i=Math.random()*(2*this._width+2*this._height);return i<this._width?(e=i,t=0,n=-Y(.1,.9)*Math.PI):i<this._width+this._height?(e=this._width,t=i-this._width,n=Y(-.4,.4)*Math.PI):i<2*this._width+this._height?(e=i-this._width-this._height,t=this._height,n=Y(.1,.9)*Math.PI):(e=0,t=i-2*this._width-this._height,n=Y(.6,1.4)*Math.PI),{x:e,y:t,dir:n}}},{key:"gameOver",value:function(){this.sound.stopAll(),this.scene.stop("multiplay"),this.scene.stop("text"),this.scene.launch("gameOver",{score:this._myShip.Score,paid:this._myShip._paid,accuracy:0!=this._myShip._wasted?this._myShip._hits/this._myShip._wasted:0})}},{key:"nextAsteroids",value:function(){this._startingAsteroids=Math.min(this._startingAsteroids+this._incrementAsteroids,this._maxAsteroids);for(var e=0;e<this._startingAsteroids;e++){var t=1===this._level||Y(0,1)>=.5?K:X,n=J;this.spawnRandomAsteroid(t,n)}}},{key:"nextEnemies",value:function(e,t,n){if(t!==be)for(var i=0;i<e;i++)this.spawnRandomEnemies(t,n);else{this.spawnRandomEnemies(ge,n),this.spawnRandomEnemies(_e,n);for(var a=0;a<e-2;a++){var s=Y(1,3)>=2?_e:ge;this.spawnRandomEnemies(s,n)}}}},{key:"nextLevel",value:function(){var e=this;if(this._passedIntro=!1,this.time.removeEvent(this._levelTimer),this._readyNewLevel=!1,this._levelTimer=this.time.addEvent({delay:2e3,callback:function(){e._readyNewLevel=!1}}),this._level++,this.registry.set("level",this._level),7===this._level||this._level>=8&&this._level%4===0||this.nextAsteroids(),this._level>=3&&!(this._level>=8&&this._level%4===0)){this._startingEnemies+=this._increaseEnemies;var t=this._level>=5?be:ge;this.nextEnemies(this._startingEnemies,t,this._enemyLives)}if(this._level>=8&&this._level%4===0){12!==this._level&&(this._startingBoss+=this._increaseBoss);var n=Y(0,1)>.5?fe:ve;this.nextEnemies(this._startingBoss,n,this._bossLives)}if(this._level>=12&&this._level%4===0){var i=Y(0,1)>.5?we:Oe;this._bossLives+=5,this.nextEnemies(this._startingBoss,i,this._bossLives)}}},{key:"introNewEnemy",value:function(e){this.nextEnemies(1,e,this._bossLives)}},{key:"newMission",value:function(){var e=this;2!==this._level||this._passedIntro?4!==this._level||this._passedIntro?(this.registry.set("endLevel",this._level),this.registry.set("newEnemy",-1),this._levelTimer=this.time.addEvent({delay:V.gamePros.endLevelDelay,callback:function(){e._readyNewLevel=!0,e.registry.set("endLevel",-1)}})):(this._passedIntro=!0,this.registry.set("newEnemy",1),this.introNewEnemy(_e),this._levelTimer=this.time.addEvent({delay:V.gamePros.introNewEnemyDelay,callback:function(){e.registry.set("newEnemy",-1)}})):(this._passedIntro=!0,this.registry.set("newEnemy",1),this.introNewEnemy(ge),this._levelTimer=this.time.addEvent({delay:V.gamePros.introNewEnemyDelay,callback:function(){e.registry.set("newEnemy",-1)}}))}},{key:"update",value:function(e,t){this.physics.world.wrap(this._ships),this._myShip&&this._network&&this._myShip.updateToServer(this._network),this.input.keyboard.addKey(this._specialKey).isDown&&this._myShip._hasAtomic&&(this._network.specialKeyIsDown(!0),this._myShip._hasAtomic=!1,Ct.dispatch(yt(!1)))}}]),n}(jn.a.Scene),ai=function(e){Object(kn.a)(n,e);var t=Object(An.a)(n);function n(){var e;return Object(En.a)(this,n),(e=t.call(this,"text"))._scoreLabel=void 0,e._scoreText=void 0,e._levelLabel=void 0,e._levelText=void 0,e._shotLabel=void 0,e._shotText=void 0,e._accLabel=void 0,e._accText=void 0,e._endLevel=void 0,e._newEnemy=void 0,e._lives=void 0,e._startingLives=void 0,e._bonusLives=void 0,e._width=void 0,e._height=void 0,e}return Object(Sn.a)(n,[{key:"init",value:function(){this._width=V.gamePros.screenWidth,this._height=V.gamePros.screenHeight,this._startingLives=V.shipPros.startingLives+this.registry.values.bonusLives,this._bonusLives=0,this._lives=[]}},{key:"create",value:function(e){var t=this;this._endLevel=this.add.text(this._width/2,this._height/2-50,"",V.fontAssets.endLevel),this._endLevel.setOrigin(.5),this._newEnemy=this.add.text(this._width/2,this._height/2-50,"",V.fontAssets.endLevel),this._newEnemy.setOrigin(.5),this._scoreLabel=this.add.text(16,16,"Score:",V.fontAssets.scoreLabel),this._scoreText=this.add.text(135,16,"0",V.fontAssets.scoreText),this._levelLabel=this.add.text(16,50,"Level:",V.fontAssets.levelLabel),this._levelText=this.add.text(85,50,e.level,V.fontAssets.levelText),this._shotLabel=this.add.text(this._width-155,this._height-45,"Shots:",V.fontAssets.scoreLabel),this._shotText=this.add.text(this._width-16,this._height-16,this.registry.values.shots,V.fontAssets.scoreText),this._shotText.setOrigin(1,1),this._accLabel=this.add.text(this._width-155,this._height-66,"Acc:",V.fontAssets.levelLabel),this._accText=this.add.text(this._width-32,this._height-48,"".concat(this.registry.values.accuracy||0," %"),V.fontAssets.levelText),this._accText.setOrigin(1,1),this.setLives(),this.events.on("shutdown",(function(){return t.registry.events.removeListener("changedata",t.updateData,t)}),this),this.registry.events.on("changedata",this.updateData,this)}},{key:"updateData",value:function(e,t,n){"score"===t?this._scoreText.setText(n):"level"===t?(this._levelText.setText(n),this.setLives()):"playerLives"===t?this.setLives():"shots"===t?n>90?this._shotText.setText("\u221e"):this._shotText.setText(n):"accuracy"===t?this._accText.setText("".concat(n," %")):"endLevel"===t?-1===n?this._endLevel.setText(""):0===n?this._endLevel.setText("Enjoy The Game!"):this._endLevel.setText("Level ".concat(n," completed")):"newEnemy"===t&&(-1===n?this._newEnemy.setText(""):this._newEnemy.setText("A new kind of enemy appears"))}},{key:"setLives",value:function(){this._lives=[];for(var e=this._width,t=0;t<this._startingLives;t++){var n=this.add.image(e-32-40*t,35,V.graphicAssets.lifeEmpty.name);this._lives.push(n)}for(var i=0;i<this.registry.values.playerLives;i++){var a=this.add.image(e-32-40*i,35,V.graphicAssets.lifeFull.name);this._lives[i]=a}}}]),n}(jn.a.Scene),si=function(e){Object(kn.a)(n,e);var t=Object(An.a)(n);function n(){var e;return Object(En.a)(this,n),(e=t.call(this,"gameOver"))._contentText=void 0,e._mainMenuButton=void 0,e._playAgainButton=void 0,e._tokenRewarded=void 0,e._canPlay=void 0,e._shipDamaged=void 0,e._tokenRewarded=!1,e._canPlay=!1,e._shipDamaged=!1,e}return Object(Sn.a)(n,[{key:"create",value:function(e){var t=this;Ct.dispatch(Ie(!0)),V.fontAssets.gameoverFontStyle.fontSize="50px",this.add.text(this.cameras.main.centerX,this.cameras.main.centerY-100,"GAME OVER",V.fontAssets.gameoverFontStyle).setOrigin(.5),V.fontAssets.gameoverFontStyle.fontSize="24px",this._contentText=this.add.text(this.cameras.main.centerX,this.cameras.main.centerY,"You did not get any reward.",V.fontAssets.gameoverFontStyle),this._contentText.setOrigin(.5),0!==e.score&&null!==e&&void 0!==e&&e.paid&&this._contentText.setText("You have reached a score of ".concat(e.score,". \n Sending ").concat(Math.round(e.score*e.accuracy)," $CROSMO to rewards balance...")),this._mainMenuButton=this.add.text(this.cameras.main.centerX,this.cameras.main.centerY+70,"",V.fontAssets.gameoverFontStyle),this._mainMenuButton.setOrigin(.5),this._mainMenuButton.setInteractive(),this._mainMenuButton.on("pointerdown",(function(){t._mainMenuButton.setColor("#4c1a03")})),this._mainMenuButton.on("pointerup",(function(){t._mainMenuButton.setColor("#ff601a"),t.gotoMenu()})),this._playAgainButton=this.add.text(this.cameras.main.centerX,this.cameras.main.centerY+120,"",V.fontAssets.gameoverFontStyle),this._playAgainButton.setOrigin(.5),this._playAgainButton.setInteractive(),this._playAgainButton.on("pointerdown",(function(){t._playAgainButton.setColor("#4c1a03")})),this._playAgainButton.on("pointerup",(function(){t._playAgainButton.setColor("#ff601a"),t.playAgain()})),Mn.on(In.TOKEN_REWARDED,(function(){t._tokenRewarded=!0}),this),Mn.on(In.CAN_PLAY,(function(){t._contentText.setText(""),t._mainMenuButton.setText("Main Menu"),t._playAgainButton.setText("Play Again"),t._canPlay=!0}),this),Mn.on(In.SHIP_DAMAGED,(function(){t._contentText.setText("Your ship is damaged."),t._mainMenuButton.setText("Main Menu"),t._shipDamaged=!0}),this),Mn.on(In.PLAY_AGAIN,(function(){t.startGame()}))}},{key:"gotoMenu",value:function(){window.location.href="/"}},{key:"playAgain",value:function(){Ct.dispatch(Ce(!0))}},{key:"startGame",value:function(){this._canPlay=!1,this.scene.start("play")}}]),n}(jn.a.Scene),oi={type:jn.a.AUTO,parent:"phaser-game",backgroundColor:"black",pixelArt:!1,scale:{mode:jn.a.Scale.FIT,parent:"phaser-example",autoCenter:jn.a.Scale.CENTER_BOTH,width:window.innerWidth<1366?window.innerWidth*window.devicePixelRatio:1920,height:window.innerWidth<768?window.innerHeight*window.devicePixelRatio:1080},fps:{deltaHistory:10,panicMax:120,smoothStep:!0},physics:{default:"arcade",arcade:{gravity:{y:0},debug:!1}},autoFocus:!0,scene:[Bn,ei,ii,ai,si]},ri=new jn.a.Game(oi);window.game=ri;var di=ri;an.a.use([sn.a]);var li,ci,pi,hi,ui,mi,yi,xi,gi,_i,bi,fi,vi,wi,Oi,ji,Ei,Si,ki,Ai,Ti,Li,Ri,Pi,Mi,Ii,Ci,Bi,Di,Ni,Ui,Fi,zi,Vi,Yi,Gi,Hi,Wi,Ki,Xi,Ji,qi,Zi,Qi,$i,ea,ta,na,ia,aa,sa,oa,ra,da,la,ca,pa,ha,ua,ma,ya=function(e){return e.Create="create",e.Join="join",e.Quick="quick",e}(ya||{}),xa=function(e){var t,n,a,s=e.craftInstance,o=e.shooterInstance,r=e.tokenInstance,l=(e.pilotInstance,e.account),c=e.setBg,h=e.setIsGamePlaying,u=e.keyboard,_=e.isPlayEndless,b=e.isMultiplayer,f=e.difficulty,v=e.setCalculating,O=e.viewMultiMode,j=m((function(e){return e.room.lobbyJoined})),E=m((function(e){return e.room.playerList})),S=m((function(e){return e.room.curPlayer})),k=m((function(e){return e.room.curRoom})),A=Object(p.o)(),T=Object(i.useState)(""),L=Object(d.a)(T,2),P=L[0],M=L[1],I=Object(i.useState)(!1),C=Object(d.a)(I,2),B=C[0],D=C[1],N=Object(i.useState)(""),F=Object(d.a)(N,2),z=F[0],V=F[1],Y=Object(i.useState)(""),G=Object(d.a)(Y,2),H=G[0],W=G[1],K=Object(i.useState)([]),X=Object(d.a)(K,2),J=X[0],q=X[1],Z=Object(i.useState)(!1),Q=Object(d.a)(Z,2),$=Q[0],ee=(Q[1],Object(i.useState)(!1)),te=Object(d.a)(ee,2),ne=te[0],ie=(te[1],Object(i.useState)(0)),ae=Object(d.a)(ie,2),se=ae[0],oe=ae[1],re=Object(i.useState)(0),de=Object(d.a)(re,2),le=de[0],ce=de[1],pe=Object(i.useState)(0),he=Object(d.a)(pe,2),ue=he[0],me=he[1],ye=Object(i.useState)(!1),xe=Object(d.a)(ye,2),ge=xe[0],_e=xe[1],be=Object(i.useState)(0),fe=Object(d.a)(be,2),ve=fe[0],we=fe[1],Oe=Object(i.useState)(!1),Se=Object(d.a)(Oe,2),ke=Se[0],Ae=Se[1],Te=di.scene.keys.boot,Le=(di.scene.keys.multiplay,Object(i.useState)(!0)),Re=Object(d.a)(Le,2),Pe=Re[0],Me=Re[1],Ie=Object(i.useState)(!0),Ce=Object(d.a)(Ie,2),Be=Ce[0],Ve=Ce[1];Object(i.useEffect)((function(){var e=function(){var e=Object(x.a)(Object(y.a)().mark((function e(){return Object(y.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ye();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(_||b)&&e()}),[_,b]),Object(i.useEffect)((function(){E.find((function(e){return(null===e||void 0===e?void 0:e.id)==S}));var e=E.filter((function(e){return(null===e||void 0===e?void 0:e.id)!=S})),t=e.filter((function(e){var t;return 1==(null===e||void 0===e||null===(t=e.val)||void 0===t?void 0:t.team)})).length,n=e.filter((function(e){var t;return 2==(null===e||void 0===e||null===(t=e.val)||void 0===t?void 0:t.team)})).length;Ve(k>t||0==k),Me(k>n||0==k)}),[E,S,k]);var Ye=function(){var e=Object(x.a)(Object(y.a)().mark((function e(){var t,n,i,a,d,c;return Object(y.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return W("fetching"),e.next=3,o.getRewardBalance(l);case 3:return t=e.sent,oe(Number(t)/Math.pow(10,6)),e.next=7,r.balanceOf(l);case 7:n=e.sent,ce(Number(n)/Math.pow(10,6)),e.next=13;break;case 13:return e.next=15,s.walletOfOwner(l);case 15:e.t0=e.sent;case 16:if(i=e.t0,!Array.isArray(i)||!i.length){e.next=27;break}return"https://ipfs.filebase.io/ipfs/QmVPpQFBgmE4tHYfXVrs6vCDjuHXc1tRXyVxjZ9ZUqLf4s",e.next=21,Promise.all(i.map((function(e){return Wt.a.get("".concat("https://ipfs.filebase.io/ipfs/QmVPpQFBgmE4tHYfXVrs6vCDjuHXc1tRXyVxjZ9ZUqLf4s","/").concat(e,".json"))}))).catch((function(e){console.log("Getting Token Meta Datas is failed"+e.message),V("error"),M("Getting Token Meta Datas is failed!"),D(!0),setTimeout((function(){return A("/")}),7e3)}));case 21:return a=e.sent,e.next=24,Promise.all(i.map((function(e){return o.getCraftStatus(Number(e))}))).catch((function(e){console.log("Getting Craft Status is failed"+e.message),V("error"),M("Game Contract is not respond!"),D(!0),setTimeout((function(){return A("/")}),7e3)}));case 24:return d=e.sent,Array.isArray(a)&&a.length&&Array.isArray(d)&&d.length&&(c=i.map((function(e,t){return{name:a[t].data.name,tokenId:Number(e),background:a[t].data.attributes[0].value,on_background:a[t].data.attributes[1].value,weapon:a[t].data.attributes[2].value,booster:a[t].data.attributes[3].value,spaceship:a[t].data.attributes[4].value,banner:a[t].data.attributes[5].value,damaged:a[t].data.attributes[6].value,crosmonaut:a[t].data.attributes[7].value,shield:a[t].data.attributes[8].value,class:a[t].data.attributes[9].value,tier:d[t][1],damagedLevel:d[t][2]}}))).length>0&&(q(c),W("fetched")),e.abrupt("return");case 27:V("error"),M("You don't have a NFT. Please purchase one!"),D(!0),setTimeout((function(){return A("/")}),7e3);case 31:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ge=function(){var e=Object(x.a)(Object(y.a)().mark((function e(){var t,n,i,a,s;return Object(y.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!b||0!=ve){e.next=5;break}return V("warning"),M("Select your team!"),D(!0),e.abrupt("return");case 5:if(v(!0),!ge){e.next=25;break}return e.prev=7,e.next=10,o.enterGame({from:l,value:"1000000000000000000"});case 10:return t=e.sent,e.next=13,t.wait();case 13:n=e.sent,n.events,e.next=25;break;case 17:return e.prev=17,e.t0=e.catch(7),console.log("error in enterGame",e.t0),V("error"),M("You need 1 CRO to play game"),D(!0),v(!1),e.abrupt("return");case 25:return e.next=27,Xt.auth.login(l);case 27:if(!(i=e.sent).error){e.next=34;break}return V("error"),M(i.error),D(!0),v(!1),e.abrupt("return");case 34:localStorage.setItem("jwt",JSON.stringify(i)),Ct.dispatch(De(J[ue].tokenId)),Ct.dispatch(Ne(J[ue].name)),Ct.dispatch(Ue(ge)),Ct.dispatch(Fe(ve)),Ct.dispatch(ze(J[ue].tier)),a=Object(U.a)(Object(U.a)({},J[ue]),{},{account:l,paid:ge,team:ve,wasted:0,hits:0}),s={hasCombat:$,difficulty:f,keyboard:u,bossMode:ke},a.damagedLevel>=5?(V("error"),M("Your craft is damaged."),D(!0)):b&&O!=ya.Quick?j?(h(!0),c(""),Te.startMultiGame(a,s)):(V("error"),M("Trying to connect to server, please try again!"),D(!0)):j?Te._network.joinOrCreatePublic().then((function(){h(!0),c(""),Te.startGame(a,s)})).catch((function(e){return console.error("error in joinOrCreatePublic",e)})):(V("error"),M("Trying to connect to server, please try again!"),D(!0)),v(!1);case 44:case"end":return e.stop()}}),e,null,[[7,17]])})));return function(){return e.apply(this,arguments)}}(),He=function(){var e=Object(x.a)(Object(y.a)().mark((function e(){var t,n,i,a,s,d,c,p,h;return Object(y.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(!0),e.prev=1,e.next=4,r.allowance(l,w);case 4:if(t=e.sent,!new qt.BigNumber(t.toString()).eq(new qt.BigNumber("0"))){e.next=14;break}return e.next=8,r.approve(w,"99999999999999999999999999999999999999999999999999999999999");case 8:return n=e.sent,e.next=11,n.wait();case 11:i=e.sent,a=i.events,a[0].transactionHash;case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(1),console.log("error in approve",e.t0),v(!1);case 20:if(!((s=J[ue].tier)<5)){e.next=49;break}if(!(le>=Ee[s+1]*(ne?.95:1))){e.next=44;break}return e.prev=23,e.next=26,o.upgradeCraft(J[ue].tokenId);case 26:return d=e.sent,e.next=29,d.wait();case 29:c=e.sent,p=c.events,p[0].transactionHash&&(h=J.map((function(e,t){return t===ue&&(e.name=je[s+1],e.tier=s+1),e})),q(Object(Jt.a)(h)),ce(le-Ee[s+1]*(ne?.95:1)),V("success"),M("Crosmocraft has been upgraded."),D(!0)),e.next=42;break;case 35:e.prev=35,e.t1=e.catch(23),console.log("error in upgradeCraft",e.t1),V("error"),M("Error occurred in upgrading Crosmocraft."),D(!0),v(!1);case 42:e.next=47;break;case 44:V("error"),M("You need ".concat(Ee[s+1]*(ne?.95:1)," $CROSMO for ").concat(je[s+1]," Level.")),D(!0);case 47:e.next=52;break;case 49:V("success"),M("Your craft is the top level."),D(!0);case 52:v(!1);case 53:case"end":return e.stop()}}),e,null,[[1,16],[23,35]])})));return function(){return e.apply(this,arguments)}}(),We=function(){var e=Object(x.a)(Object(y.a)().mark((function e(){var t,n,i;return Object(y.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v(!0),!(se>0)){e.next=23;break}return e.prev=2,e.next=5,o.claimReward();case 5:return t=e.sent,e.next=8,t.wait();case 8:n=e.sent,i=n.events,i[0].transactionHash&&(V("success"),M("".concat(se.toFixed(1),"$CROSMO has claimed.")),D(!0),ce(le+se),oe(0)),e.next=21;break;case 14:e.prev=14,e.t0=e.catch(2),console.log("error in claimReward",e.t0),V("error"),M("Error occurred in claiming reward."),D(!0),v(!1);case 21:e.next=26;break;case 23:V("error"),M("You don't have any reward token."),D(!0);case 26:v(!1);case 27:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(){return e.apply(this,arguments)}}(),Ke=Object(i.useRef)(null);return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(cn,{children:Object(R.jsxs)(pn,{children:["fetching"===H&&Object(R.jsxs)(g.a,{sx:{display:"block",textAlign:"center"},children:[Object(R.jsx)(hn,{children:"Fetching NFT from your wallet"}),Object(R.jsx)(Gt.a,{sx:{mt:2}})]}),"fetched"===H&&Object(R.jsxs)(un,{children:[Object(R.jsxs)(mn,{children:[Object(R.jsx)(yn,{children:Object(R.jsx)("img",{src:"assets/images/avatar_title.png",alt:"title"})}),Object(R.jsxs)(xn,{children:[Object(R.jsx)(_n,{onClick:function(){return Ke.current.swiper.slidePrev()},children:Object(R.jsx)("img",{src:"assets/images/avatar_prev.png",alt:"prev"})}),Object(R.jsx)(gn,{children:Object(R.jsx)(tn.a,{ref:Ke,navigation:!0,spaceBetween:0,slidesPerView:1,onSlideChange:function(e){me(e.activeIndex)},children:J.map((function(e){return Object(R.jsx)(nn.a,{children:Object(R.jsxs)("div",{children:[Object(R.jsx)("img",{className:"background",src:"assets/images/NFT/8 Background/".concat(e.background,".png"),alt:e.name}),Object(R.jsx)("img",{className:"on_background",src:"assets/images/NFT/7 On Background/".concat(e.on_background,".png"),alt:e.name}),Object(R.jsx)("img",{className:"booster",src:"assets/images/NFT/5 Booster/".concat(e.booster,".png"),alt:e.name}),Object(R.jsx)("img",{className:"weapon",src:"assets/images/NFT/6 Weapon System/".concat(e.weapon,".png"),alt:e.name}),Object(R.jsx)("img",{className:"ship",src:"assets/images/NFT/4 Spaceship/".concat(e.spaceship,".png"),alt:e.name}),Object(R.jsx)("img",{className:"banner",src:"assets/images/NFT/3 Banner/".concat(e.banner,".png"),alt:e.name}),Object(R.jsx)("img",{className:"broken",src:"assets/images/NFT/3 Damaged/".concat(e.damaged,".png"),alt:e.name}),Object(R.jsx)("img",{className:"crosmonaut",src:"assets/images/NFT/2 Crosmonaut/".concat(e.crosmonaut,".png"),alt:e.name}),Object(R.jsx)("img",{className:"shield",src:"assets/images/NFT/1 Force Shield/".concat(e.shield,".png"),alt:e.name}),0!==e.tier&&Object(R.jsx)("p",{className:"tier",children:je[e.tier]}),Object(R.jsx)("img",{className:"tier",src:"assets/images/league_".concat(e.tier,".png"),alt:e.name}),Object(R.jsx)("img",{className:"avatarBg",src:"assets/images/avatar_modal_bg.png",alt:"avatar_bg"}),Object(R.jsx)("p",{className:"name",children:e.name})]})},e.tokenId)}))})}),Object(R.jsx)(_n,{onClick:function(){return Ke.current.swiper.slideNext()},children:Object(R.jsx)("img",{src:"assets/images/avatar_next.png",alt:"next"})})]})]}),Object(R.jsxs)(bn,{children:[Object(R.jsxs)(fn,{children:["Claimable $CROSMO: ",se.toFixed(1)]}),Object(R.jsx)(vn,{onClick:We,children:"Claim Reward"}),Object(R.jsxs)(fn,{children:["$CROSMO Balance: ",le.toFixed(1)]}),Object(R.jsxs)(Qt.a,{row:!0,"aria-labelledby":"demo-row-radio-buttons-group-label",name:"row-radio-buttons-group",onChange:function(e){we(Number(e.target.value)||null)},sx:{"& *":{color:"white",borderColor:"white"}},children:[b&&Object(R.jsx)($t.a,{value:"1",control:Object(R.jsx)(Zt.a,{}),disabled:!Be,label:"Allied",sx:{"& .Mui-disabled":{color:"rgba(255,255,255, 0.5) !important"}}}),b&&Object(R.jsx)($t.a,{value:"2",control:Object(R.jsx)(Zt.a,{}),disabled:!Pe,label:"Axis",sx:{"& .Mui-disabled":{color:"rgba(255,255,255, 0.5) !important"}}})]}),Object(R.jsx)(vn,{onClick:He,children:void 0!==J&&5!==(null===(t=J[ue])||void 0===t?void 0:t.tier)&&Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)("img",{src:"assets/images/upgrade.png",width:30,height:30})," to ",je[(null===(n=J[ue])||void 0===n?void 0:n.tier)+1]," : ",Ee[(null===(a=J[ue])||void 0===a?void 0:a.tier)+1]*(ne?.95:1)]})}),Object(R.jsxs)(fn,{children:[Object(R.jsx)("span",{children:"Pay To Play?"})," ",Object(R.jsx)(en.a,{sx:{"& .MuiSvgIcon-root":{fontSize:28},"& *":{color:"white",borderColor:"white"}},checked:ge,onChange:function(e){_e(e.target.checked)}})]}),!b&&Object(R.jsxs)(fn,{children:[Object(R.jsx)("span",{children:"Boss Mode?"}),Object(R.jsx)(en.a,{sx:{"& .MuiSvgIcon-root":{fontSize:28},"& *":{color:"white",borderColor:"white"}},checked:ke,onChange:function(e){Ae(e.target.checked)}})]}),Object(R.jsx)(wn,{onClick:Ge,children:"PLAY"})]})]})]})}),Object(R.jsx)(ln,{noticeMsg:P,showNotice:B,setShowNotice:D,severity:z})]})},ga=n(655),_a=Object(ga.a)((function(){return{root:{borderRadius:5,height:10,width:"100%",border:"2px solid #ffe2b8"},colorPrimary:{backgroundColor:"#39260b"},bar:{borderRadius:5,backgroundColor:"#fff"}}}))(u.a),ba=Object(ga.a)((function(){return{root:{borderRadius:5,width:"100%",height:10,border:"2px solid #2099e5"},colorPrimary:{backgroundColor:"#0b1939"},bar:{borderRadius:5,backgroundColor:"#235aa5"}}}))(u.a),fa=function(e){var t=e.specialKey,n=Object(i.useState)(0),a=Object(d.a)(n,2),s=a[0],o=a[1],r=Object(i.useState)(0),l=Object(d.a)(r,2),c=l[0],p=l[1],h=m((function(e){return e.phaser.bulletName})),u=m((function(e){return e.phaser.bulletDuration})),y=m((function(e){return e.phaser.bulletChanged})),x=m((function(e){return e.phaser.shieldName})),_=m((function(e){return e.phaser.shieldDuration})),b=m((function(e){return e.phaser.shieldChanged})),v=m((function(e){return e.phaser.hasAtomic})),w=(m((function(e){return e.room.playerList})),u-.15),O=_-.15;return Object(i.useEffect)((function(){var e=setInterval((function(){o(w/u*100),w<=0&&(o(0),clearInterval(e)),w-=.25}),250);return function(){clearInterval(e)}}),[h,u,y]),Object(i.useEffect)((function(){var e=setInterval((function(){p(O/_*100),O<=0&&(p(0),clearInterval(e)),O-=.25}),250);return function(){clearInterval(e)}}),[x,_,b]),Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(g.a,{sx:{display:"flex",position:"fixed",justifyContent:"flex-end",right:{xs:"-100px",sm:"-100px",md:"-220px",lg:"-260px",xl:"-340px"}},children:0!=c&&Object(R.jsx)(g.a,{sx:{textAlign:"center"},children:Object(R.jsx)(g.a,{sx:{width:{xs:"256px",sm:"256px",md:"500px",lg:"580px",xl:"760px"},transform:"rotate(-90deg)"},children:Object(R.jsx)(ba,{variant:"determinate",value:c})})})}),Object(R.jsx)(g.a,{sx:{display:"flex",position:"fixed",justifyContent:"flex-end",right:{xs:0==c?"-100px":"-40px",sm:0==c?"-100px":"-40px",md:0==c?"-220px":"-175px",lg:0==c?"-260px":"-205px",xl:0==c?"-340px":"-300px"}},children:0!=s&&Object(R.jsx)(g.a,{sx:{textAlign:"center"},children:Object(R.jsx)(g.a,{sx:{width:{xs:"256px",sm:"256px",md:"500px",lg:"580px",xl:"760px"},transform:"rotate(-90deg)"},children:Object(R.jsx)(_a,{variant:"determinate",value:s})})})}),v&&Object(R.jsxs)(f.a,{sx:{color:"white",position:"absolute",bottom:"65px",right:"20px",fontSize:"20px"},children:['Press "',t,'" to use atomic bomb']})]})},va=h.a.div(li||(li=Object(l.a)(["\n  position: fixed;\n  width: 100vw;\n  height: 100vh;\n  top: 0;\n  background: #00000066;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 9;\n"]))),wa=h.a.div(ci||(ci=Object(l.a)(["\n  background: url('assets/images/bg_leaderboard.png');\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 1100px;\n  height: 605px;\n  background-size: contain;\n  color: white;\n  font-size: 25px;\n\n  @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n    width: 580px;\n    height: 324px;\n    font-size: 18px;\n    background-position: center;\n    background-repeat: no-repeat;\n    background-size: cover;\n  }\n  \n  @media only screen and (max-width: 960px) and (orientation:landscape)  {\n      \n  }\n  \n  @media only screen and (max-width: 860px) and (orientation:landscape)  {\n      \n  }\n  \n  @media only screen and (max-width: 768px) and (orientation:landscape)  {\n      \n  }\n\n  @media only screen and (max-width: 639px) {\n    width: 92%;\n    height: 80%;\n    background-size: cover;\n    background-repeat: no-repeat;\n    background-position: center;\n  }\n"]))),Oa=h.a.div(pi||(pi=Object(l.a)(["\n  width: 100%;\n  height: 83%;\n  margin: 5.5% auto;\n\n  @media only screen and (max-width: 639px) {\n    width: 100%;\n    height: 80%;\n    margin: 0 auto;\n  }\n"]))),ja=h.a.div(hi||(hi=Object(l.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  width: 94%;\n  margin: 0 auto;\n  img.leagues {\n    width: 150px;\n  }\n  \n  img.close {\n    width: 50px;\n    cursor: pointer;\n  }\n\n  @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n    overflow-x: scroll;\n    margin-top: 40px;\n\n    img.leagues {\n      width: 128px;\n      margin-right: 16px;\n    }\n\n    img.default {\n      margin-left: 0;\n    }\n\n    img.close {\n      position: absolute;\n      width: 36px;\n      top: 0;\n      right: 0;\n    }\n  }\n\n  @media only screen and (max-width: 639px) {\n    margin-top: 64px;\n    flex-wrap: wrap;\n\n    img.leagues {\n      width: 128px;\n      margin: 0 auto;\n      margin-bottom: 8px;\n    }\n\n    img.close {\n      position: absolute;\n      width: 36px;\n      top: 0;\n      right: 0;\n    }\n  }\n"]))),Ea=h.a.div(ui||(ui=Object(l.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n\n  img.league {\n    height: 33px;\n    margin-left: -12px;\n    cursor: pointer;\n  }\n\n  img.default {\n    margin-right: 20px;\n  }\n\n  @media only screen and (max-width: 639px) {\n    flex-wrap: wrap;\n    width: 92%;\n    margin: 0 auto;\n    img {\n      margin-bottom: 8px;\n    }\n\n    img.league {\n      margin-left: 0px;\n    }\n\n    img.default {\n      margin-right: 0px;\n    }\n  }\n"]))),Sa=h.a.div(mi||(mi=Object(l.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-top: 5px;\n\n  img.period {\n    width: 120px;\n    cursor: pointer;\n  }\n\n  @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n    margin-top: 16px;\n    img.period {\n      width: 96px;\n    }\n  }\n\n  @media only screen and (max-width: 639px) {\n    img.period {\n      width: 108px;\n    }\n  }\n"]))),ka=h.a.div(yi||(yi=Object(l.a)(["\n  height: 100%;\n  margin-top: 20px;\n"]))),Aa=h.a.div(xi||(xi=Object(l.a)(["\n  background: url('assets/images/lead_thead.png');\n  background-size: contain;\n  border: 1px solid black;\n  border-radius: 10px;\n  display: flex;\n  align-items: center;\n  width: calc(100% - 46px);\n  margin: 0 auto;\n  img {\n    height: 28px;\n    margin-top: 7px;\n  }\n\n  @media only screen and (max-width: 639px) {\n    width: 100%;\n  }\n"]))),Ta=h.a.div(gi||(gi=Object(l.a)(["\n  height: calc(100% - 150px);\n  overflow-y: scroll;\n  width: calc(100% - 46px);\n  margin: 0 auto;\n\n  /* width */\n  ::-webkit-scrollbar {\n    width: 20px;\n    margin-left: 10px;\n    background: #40808a;\n    border-radius: 8px;\n  }\n\n  /* Track */\n  ::-webkit-scrollbar-track {\n    border-radius: 8px;\n  }\n  \n  /* Handle */\n  ::-webkit-scrollbar-thumb {\n    background: white; \n    border-radius: 8px;\n  }\n\n  /* Handle on hover */\n  ::-webkit-scrollbar-thumb:hover {\n    background: wheat; \n  }\n\n  @media only screen and (max-width: 639px) {\n    height: calc(100% - 216px);\n    width: 100%;\n  }\n"]))),La=h.a.div(_i||(_i=Object(l.a)(["\n  background: #40808a;\n  border: 1px solid black;\n  border-radius: 10px;\n  display: flex;\n  align-items: center;\n  height: 40px;\n  width: 99%;\n  margin-top: 3px;\n\n  @media only screen and (max-width: 639px) {\n    height: 80px;\n  }\n"]))),Ra=h.a.div(bi||(bi=Object(l.a)(["\n  width: 15%;\n  padding-left: 20px;\n"]))),Pa=h.a.div(fi||(fi=Object(l.a)(["\n  width: 55%;\n\n  @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n    text-align: right;\n  }\n\n  @media only screen and (max-width: 639px) {\n    text-align: right;\n  }\n\n"]))),Ma=h.a.div(vi||(vi=Object(l.a)(["\n  width: 30%;\n\n  @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n    text-align: right;\n  }\n\n  @media only screen and (max-width: 639px) {\n    text-align: right;\n  }\n"]))),Ia=function(e){var t=e.scores,n=e.setIsLeaderboard,i=e.league,a=e.setLeague,s=e.period,o=e.setPeriod;return Object(R.jsx)(va,{children:Object(R.jsx)(wa,{children:Object(R.jsxs)(Oa,{children:[Object(R.jsxs)(ja,{children:[Object(R.jsx)("img",{className:"leagues",src:"assets/images/lead_leagues.png",alt:"leagues"}),Object(R.jsxs)(Ea,{children:[Object(R.jsx)("img",{className:"league default",onClick:function(){return a(0)},src:"assets/images/lead_default".concat(0===i?"_active":"",".png"),alt:"default"}),Object(R.jsx)("img",{className:"league",onClick:function(){return a(1)},src:"assets/images/lead_bronze".concat(1===i?"_active":"",".png"),alt:"bronze"}),Object(R.jsx)("img",{className:"league",onClick:function(){return a(2)},src:"assets/images/lead_silver".concat(2===i?"_active":"",".png"),alt:"silver"}),Object(R.jsx)("img",{className:"league",onClick:function(){return a(3)},src:"assets/images/lead_gold".concat(3===i?"_active":"",".png"),alt:"gold"}),Object(R.jsx)("img",{className:"league",onClick:function(){return a(4)},src:"assets/images/lead_diamond".concat(4===i?"_active":"",".png"),alt:"diamond"}),Object(R.jsx)("img",{className:"league",onClick:function(){return a(5)},src:"assets/images/lead_platinum".concat(5===i?"_active":"",".png"),alt:"platinum"})]}),Object(R.jsx)("img",{className:"close",src:"assets/images/btn_close.png",alt:"close",onClick:function(){return n(!1)}})]}),Object(R.jsxs)(Sa,{children:[Object(R.jsx)("img",{className:"period",onClick:function(){return o("weekly")},src:"assets/images/lead_weekly".concat("weekly"===s?"_active":"",".png"),alt:"weekly"}),Object(R.jsx)("img",{className:"period",onClick:function(){return o("monthly")},src:"assets/images/lead_monthly".concat("monthly"===s?"_active":"",".png"),alt:"monthly"}),Object(R.jsx)("img",{className:"period",onClick:function(){return o("all")},src:"assets/images/lead_all".concat("all"===s?"_active":"",".png"),alt:"all"})]}),Object(R.jsxs)(ka,{children:[Object(R.jsxs)(Aa,{children:[Object(R.jsx)(Ra,{children:Object(R.jsx)("img",{src:"assets/images/lead_rank.png",alt:"rank"})}),Object(R.jsx)(Pa,{children:Object(R.jsx)("img",{src:"assets/images/lead_name.png",alt:"name"})}),Object(R.jsx)(Ma,{children:Object(R.jsx)("img",{src:"assets/images/lead_score.png",alt:"name"})})]}),Object(R.jsxs)(Ta,{children:[null===t||void 0===t?void 0:t.map((function(e,t){var n=e.shipName+"  (..."+e.account.slice(-4)+")";return n.indexOf("Crosmocraft")<0&&(n="Crosmocraft #"+e._id),Object(R.jsxs)(La,{children:[Object(R.jsx)(Ra,{children:t+1}),Object(R.jsx)(Pa,{children:n}),Object(R.jsx)(Ma,{children:e.score})]},t)})),(!t||0===t.length)&&Object(R.jsx)("div",{style:{textAlign:"center",marginTop:20},children:"There is no data"})]})]})]})})})},Ca=n(327),Ba=h.a.div(wi||(wi=Object(l.a)(["\n  position: fixed;\n  width: 100vw;\n  height: 100vh;\n  top: 0;\n  background: #00000066;\n  z-index: 9;\n"]))),Da=h.a.div(Oi||(Oi=Object(l.a)(["\n  background: url('assets/images/bg_setting.png');\n  background-repeat: no-repeat;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 80%;\n  height: 86%;\n  max-width: 950px;\n  max-height: 529px;\n  background-size: contain;\n  color: white;\n  font-size: 20px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  img.close {\n    position: absolute;\n    top: 55px;\n    right: 29px;\n    width: 50px;\n    cursor: pointer;\n  }\n\n  @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n    width: 560px;\n    height: 316px;\n    background-size: cover;\n    background-position: center;\n    background-repeat: no-repeat;\n    img.close {\n      top: 0px;\n      right: 0px;\n      width: 36px;\n    }\n  }\n  \n  @media only screen and (max-width: 960px) and (orientation:landscape)  {\n      \n  }\n  \n  @media only screen and (max-width: 860px) and (orientation:landscape)  {\n      \n  }\n  \n  @media only screen and (max-width: 768px) and (orientation:landscape)  {\n      \n  }\n\n  @media only screen and (max-width: 639px) {\n    width: 90%;\n    height: 70%;\n    max-width: 100%;\n    max-height: 100%;\n    background-size: cover;\n    background-position: center;\n    background-repeat: no-repeat;\n\n    img.close {\n      top: 0px;\n      right: 0px;\n      width: 36px;\n    }\n  }\n"]))),Na=h.a.div(ji||(ji=Object(l.a)(["\n  width: 80%;\n  height: 78%;\n  margin-top: 20px;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n\n  @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n    margin-top: 0px;\n  }\n  \n  @media only screen and (max-width: 960px) and (orientation:landscape)  {\n      \n  }\n  \n  @media only screen and (max-width: 860px) and (orientation:landscape)  {\n      \n  }\n  \n  @media only screen and (max-width: 768px) and (orientation:landscape)  {\n      \n  }\n\n  @media only screen and (max-width: 639px) {\n    width: 90%;\n    height: 70%;\n    margin-top: 0;\n  }\n"]))),Ua=h.a.div(Ei||(Ei=Object(l.a)(["\n  height: 44px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0 10%;\n  background: ",";\n  border: 2px solid #234955;\n  border-radius: 10px;\n  cursor: pointer;\n  color: ",";\n"])),(function(e){return e.selected?"#0b171a":"#12262c"}),(function(e){return e.selected?"var(--color-yellow)":"white"})),Fa=h.a.div(Si||(Si=Object(l.a)(["\n\n"]))),za=h.a.div(ki||(ki=Object(l.a)(["\n\n"]))),Va=function(e){var t=e.setIsSetting,n=e.keyboard,a=e.setKeboard,s=[{key:"forward",label:"Move Forward",keyboard:n.forward},{key:"left",label:"Move Left",keyboard:n.left},{key:"right",label:"Move Right",keyboard:n.right},{key:"brake",label:"Brake",keyboard:n.brake},{key:"fire",label:"Fire",keyboard:n.fire},{key:"special",label:"Special",keyboard:n.special},{key:"music",label:"Music ON/OFF",keyboard:n.music},{key:"sounds",label:"Sounds ON/OFF",keyboard:n.sounds},{key:"exit",label:"Exit",keyboard:n.exit}],o=Object(i.useState)(void 0),r=Object(d.a)(o,2),l=r[0],c=r[1],p=Object(i.useState)(""),h=Object(d.a)(p,2),u=h[0],m=h[1];Object(i.useEffect)((function(){c(s)}),[]);var y=function(e){return" "===e?"SPACE":"Escape"===e?"ESC":e.startsWith("Arrow")?e.replace("Arrow","").toUpperCase():e.toUpperCase()};return Object(R.jsx)(Ba,{children:Object(R.jsxs)(Da,{children:[Object(R.jsx)(Na,{children:null===l||void 0===l?void 0:l.map((function(e,t){return Object(R.jsxs)(Ua,{selected:e.key===u,onClick:function(){return m(e.key)},children:[Object(R.jsx)(Fa,{children:e.label}),Object(R.jsx)(za,{children:e.keyboard})]},t)}))}),Object(R.jsx)("img",{className:"close",src:"assets/images/btn_close.png",alt:"close",onClick:function(){return t(!1)}}),Object(R.jsx)(Ca.a,{keyName:"a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,space,esc,up,down,left,right",onKeyDown:function(e,t,n){if(""!==u){s=t.key,a((function(e){return Object(U.a)(Object(U.a)({},e),{},Object(A.a)({},u,y(s)))}));var i=l.map((function(e){return e.key===u&&(e.keyboard=y(t.key)),e}));c(Object(Jt.a)(i)),m("")}var s}})]})})},Ya=h.a.div(Ai||(Ai=Object(l.a)(["\n  position: fixed;\n  width: 100vw;\n  height: 100vh;\n  top: 0;\n  background: #00000066;\n  z-index: 9;\n"]))),Ga=h.a.div(Ti||(Ti=Object(l.a)(["\n  background: url('assets/images/bg_difficulty.png');\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 500px;\n  height: 600px;\n  background-size: contain;\n  color: white;\n  font-size: 30px;\n\n  @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n    width: 306px;\n    height: 356px;\n    background-size: cover;\n    background-position: center;\n    background-repeat: no-repeat;\n    font-size: 24px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n  \n  @media only screen and (max-width: 960px) and (orientation:landscape)  {\n      \n  }\n  \n  @media only screen and (max-width: 860px) and (orientation:landscape)  {\n      \n  }\n  \n  @media only screen and (max-width: 768px) and (orientation:landscape)  {\n      \n  }\n\n  @media only screen and (max-width: 560px) {\n    width: 480px;\n  }\n\n  @media only screen and (max-width: 480px) {\n    width: 360px;\n    background-size: cover;\n    background-position: center;\n    background-repeat: no-repeat;\n    font-size: 24px;\n  }\n"]))),Ha=h.a.div(Li||(Li=Object(l.a)(["\n  text-align: center;\n\n  img.close {\n    position: absolute;\n    width: 50px;\n    cursor: pointer;\n    right: 35px;\n    top: 80px;\n  }\n\n  @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n    img.close {\n      top: 0px;\n      right: 0px;\n      width: 36px;\n    }\n  }\n  \n  @media only screen and (max-width: 960px) and (orientation:landscape)  {\n      \n  }\n  \n  @media only screen and (max-width: 860px) and (orientation:landscape)  {\n      \n  }\n  \n  @media only screen and (max-width: 768px) and (orientation:landscape)  {\n      \n  }\n\n  @media only screen and (max-width: 639px) {\n\n  }\n\n  @media only screen and (max-width: 560px) {\n\n  }\n\n  @media only screen and (max-width: 480px) {\n    img.close {\n      width: 42px;\n      right: 12px;\n    }\n  }\n"]))),Wa=h.a.div(Ri||(Ri=Object(l.a)(["\n  margin-top: 160px;\n  margin-bottom: 50px;\n\n  @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n    margin-top: 0;\n    margin-bottom: 0;\n  }\n  \n  @media only screen and (max-width: 960px) and (orientation:landscape)  {\n      \n  }\n  \n  @media only screen and (max-width: 860px) and (orientation:landscape)  {\n      \n  }\n  \n  @media only screen and (max-width: 768px) and (orientation:landscape)  {\n      \n  }\n"]))),Ka=h.a.div(Pi||(Pi=Object(l.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  align-items: center;\n\n  img.difficulty {\n    width: 150px;\n    margin-top: 10px;\n    cursor: pointer;\n  }\n\n  @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n    \n  }\n  \n  @media only screen and (max-width: 960px) and (orientation:landscape)  {\n    img.difficulty {\n      width: 108px;\n    }\n  }\n  \n  @media only screen and (max-width: 860px) and (orientation:landscape)  {\n      \n  }\n  \n  @media only screen and (max-width: 768px) and (orientation:landscape)  {\n      \n  }\n\n  @media only screen and (max-width: 639px) {\n    img.difficulty {\n      width: 128px;\n    }\n  }\n\n  @media only screen and (max-width: 560px) {\n    img.difficulty {\n      width: 128px;\n    }\n  }\n\n  @media only screen and (max-width: 480px) {\n    img.difficulty {\n      width: 108px;\n    }\n  }\n"]))),Xa=function(e){var t=e.setIsDifficulty,n=e.difficulty,i=e.setDifficulty;return Object(R.jsx)(Ya,{children:Object(R.jsx)(Ga,{children:Object(R.jsxs)(Ha,{children:[Object(R.jsx)(Wa,{children:"CHOOSE DIFFICULTY"}),Object(R.jsxs)(Ka,{children:[Object(R.jsx)("img",{className:"difficulty",onClick:function(){return i("easy")},src:"assets/images/difficulty_easy".concat("easy"===n?"_active":"",".png"),alt:"easy"}),Object(R.jsx)("img",{className:"difficulty",onClick:function(){return i("medium")},src:"assets/images/difficulty_medium".concat("medium"===n?"_active":"",".png"),alt:"medium"}),Object(R.jsx)("img",{className:"difficulty",onClick:function(){return i("hard")},src:"assets/images/difficulty_hard".concat("hard"===n?"_active":"",".png"),alt:"hard"}),Object(R.jsx)("img",{className:"difficulty",onClick:function(){return i("extreme")},src:"assets/images/difficulty_extreme".concat("extreme"===n?"_active":"",".png"),alt:"extreme"})]}),Object(R.jsx)("img",{className:"close",src:"assets/images/btn_close.png",alt:"close",onClick:function(){return t(!1)}})]})})})},Ja=h.a.div(Mi||(Mi=Object(l.a)(["\n  position: fixed;\n  width: 100vw;\n  height: 100vh;\n  top: 0;\n  background: #00000066;\n"]))),qa=h.a.div(Ii||(Ii=Object(l.a)(["\n  background: url('assets/images/bg_confirm.png');\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 530px;\n  height: 310px;\n  background-size: contain;\n  display: flex;\n  align-items: flex-end;\n  justify-content: center;\n"]))),Za=h.a.div(Ci||(Ci=Object(l.a)(["\n  width: 44%;\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 55px;\n  \n  img {\n    width: 110px;\n    cursor: pointer;\n  }\n"]))),Qa=function(){return Object(R.jsx)(Ja,{children:Object(R.jsx)(qa,{children:Object(R.jsxs)(Za,{children:[Object(R.jsx)("img",{src:"assets/images/btn_yes.png",alt:"yes",onClick:function(){return Mn.emit(In.EXIST_GAME),void Ct.dispatch(xt(!1))}}),Object(R.jsx)("img",{src:"assets/images/btn_no.png",alt:"no",onClick:function(){return Ct.dispatch(xt(!1))}})]})})})},$a=[{inputs:[{internalType:"string",name:"_initBaseURI",type:"string"},{internalType:"address",name:"_shipParts",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"SHIP1",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"SHIP2",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"SHIP3",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"adminAddress",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"airDropNFT",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"baseExtension",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"canMint",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"curIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getInfo",outputs:[{components:[{internalType:"uint256",name:"regularCost",type:"uint256"},{internalType:"uint256",name:"memberCost",type:"uint256"},{internalType:"uint256",name:"whitelistCost",type:"uint256"},{internalType:"uint256",name:"maxSupply",type:"uint256"},{internalType:"uint256",name:"totalSupply",type:"uint256"},{internalType:"uint256",name:"maxMintPerAddress",type:"uint256"},{internalType:"uint256",name:"maxMintPerTx",type:"uint256"}],internalType:"struct IDrop.Info",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[],name:"greatId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"greatMaxSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"legendId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"legendMaxSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxMintAmount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"bytes32",name:"shipType",type:"bytes32"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"mintCost",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bool",name:"_state",type:"bool"}],name:"pause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"regularId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"regularMaxSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address[]",name:"_holders",type:"address[]"},{internalType:"uint256[]",name:"_counts",type:"uint256[]"}],name:"setAirDropCounts",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_newBaseExtension",type:"string"}],name:"setBaseExtension",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_newBaseURI",type:"string"}],name:"setBaseURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"shipParts",outputs:[{internalType:"contract ShipItems",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"}],name:"walletOfOwner",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"withdrawAll",outputs:[],stateMutability:"nonpayable",type:"function"}],es=[{inputs:[{internalType:"address",name:"_crosmoToken",type:"address"},{internalType:"address",name:"_crosmoCraft",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[],name:"REPAIRE_COOLDOWN",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"UPGRADE_COST",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"claimReward",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"craftStatus",outputs:[{internalType:"uint256",name:"lastUpdated",type:"uint256"},{internalType:"uint8",name:"tier",type:"uint8"},{internalType:"uint8",name:"damagedLevel",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"crosmoCraft",outputs:[{internalType:"contract IERC721",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"crosmoPilot",outputs:[{internalType:"contract IERC721",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"crosmoStation",outputs:[{internalType:"contract IERC721",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"crosmoToken",outputs:[{internalType:"contract IERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"enterGame",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"craftID",type:"uint256"}],name:"getCraftStatus",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint8",name:"",type:"uint8"},{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_player",type:"address"}],name:"getRewardBalance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"player",type:"address"}],name:"hasCrosmoStation",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"score",type:"uint256"},{internalType:"address",name:"player",type:"address"},{internalType:"uint256",name:"craftID",type:"uint256"}],name:"playSession",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"rewardBalance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"scale",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_pilot",type:"address"}],name:"setCrosmoPilot",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_station",type:"address"}],name:"setCrosmoStation",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"craftID",type:"uint256"}],name:"updateCraftStatus",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"craftID",type:"uint256"}],name:"upgradeCraft",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdrawToken",outputs:[],stateMutability:"nonpayable",type:"function"}],ts=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Paused",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Unpaused",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"pause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"unpause",outputs:[],stateMutability:"nonpayable",type:"function"}],ns=h.a.div(Bi||(Bi=Object(l.a)(["\n  width: 100%;\n\n  @media only screen and (max-width: 639px) {\n    margin-top: 25%;\n    padding-bottom: 10%;\n  }\n\n  @media only screen and (max-width: 560px) {\n    margin-top: 45%;\n    padding-bottom: 10%;\n  }\n"]))),is=h.a.div(Di||(Di=Object(l.a)(["\n  width: 100%;\n  background-position: center;\n  background-size: cover;\n}\n"]))),as=h.a.div(Ni||(Ni=Object(l.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n\n  @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n\n  }\n  \n  @media only screen and (max-width: 960px) and (orientation:landscape)  {\n      \n  }\n  \n  @media only screen and (max-width: 860px) and (orientation:landscape)  {\n      \n  }\n  \n  @media only screen and (max-width: 768px) and (orientation:landscape)  {\n      \n  }\n"]))),ss=h.a.div(Ui||(Ui=Object(l.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n  }\n  \n  @media only screen and (max-width: 960px) and (orientation:landscape)  {\n      \n  }\n  \n  @media only screen and (max-width: 860px) and (orientation:landscape)  {\n      \n  }\n  \n  @media only screen and (max-width: 768px) and (orientation:landscape)  {\n      \n  }\n\n  img {\n    max-width: 770px;\n    width: 70%;\n\n    @media only screen and (max-width: 1600px) {\n\n    }\n\n    @media only screen and (max-width: 1366px) {\n\n    }\n\n    @media only screen and (max-width: 1024px) and (orientation:portrait)  {\n      width: 50%;\n      margin-bottom: 10%;\n    }\n    \n    @media only screen and (max-width: 960px) and (orientation:portrait)  {\n      width: 60%;\n    }\n    \n    @media only screen and (max-width: 860px) and (orientation:portrait)  {\n      width: 70%;\n    }\n    \n    @media only screen and (max-width: 768px) and (orientation:portrait)  {\n      width: 80%;\n    }\n\n    @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n      width: 50%;\n\n    }\n    \n    @media only screen and (max-width: 960px) and (orientation:landscape)  {\n        \n    }\n    \n    @media only screen and (max-width: 860px) and (orientation:landscape)  {\n        \n    }\n    \n    @media only screen and (max-width: 768px) and (orientation:landscape)  {\n        \n    }\n\n    @media only screen and (max-width: 639px) {\n      width: 90%;\n      margin-bottom: 10%;\n    }\n\n    @media only screen and (max-width: 639px) {\n\n    }\n\n    @media only screen and (max-width: 560px) {\n\n    }\n\n    @media only screen and (max-width: 480px) {\n\n    }\n  }\n"]))),os=h.a.div(Fi||(Fi=Object(l.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  \n  img {\n    width: auto;\n    margin: 0 auto;\n    cursor: pointer;\n  }\n  \n  img.play {\n    height: 55px;\n    margin-top: 3px;\n  }\n\n  img.playmulti {\n    height: 48px;\n    margin-top: 12px;\n    &:hover {\n      box-shadow: rgba(0, 0, 0, 0.17) 0px -23px 25px 0px inset, rgba(0, 0, 0, 0.15) 0px -36px 30px 0px inset, rgba(0, 0, 0, 0.1) 0px -79px 40px 0px inset, rgba(0, 0, 0, 0.06) 0px 2px 1px, rgba(0, 0, 0, 0.09) 0px 4px 2px, rgba(0, 0, 0, 0.09) 0px 8px 4px, rgba(0, 0, 0, 0.09) 0px 16px 8px, rgba(0, 0, 0, 0.09) 0px 32px 16px;\n    }\n  }\n  \n  img.setting {\n    height: 45px;\n    margin-top: 5px;\n  }\n\n  @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n    z-index: 2;\n    img, img.play, img.playmulti, img.setting {\n      height: 36px;\n    }\n\n    img.play, img.playmulti {\n      height: 42px;\n    }\n  }\n  \n  @media only screen and (max-width: 960px) and (orientation:landscape)  {\n      \n  }\n  \n  @media only screen and (max-width: 860px) and (orientation:landscape)  {\n      \n  }\n  \n  @media only screen and (max-width: 768px) and (orientation:landscape)  {\n      \n  }\n\n  @media only screen and (max-width: 639px) {\n    img, img.play, img.playmulti, img.setting {\n      height: 48px;\n    }\n\n    img.play, img.playmulti {\n      height: 52px;\n    }\n  }\n\n  @media only screen and (max-width: 560px) {\n    img, img.play, img.playmulti, img.setting {\n      height: 42px;\n    }\n\n    img.play, img.playmulti {\n      height: 46px;\n    }\n  }\n\n  @media only screen and (max-width: 480px) {\n    img, img.play, img.playmulti, img.setting {\n      height: 38px;\n    }\n\n    img.play, img.playmulti {\n      height: 42px;\n    }\n  }\n"]))),rs=h.a.div(zi||(zi=Object(l.a)(["\n  position: absolute;\n  right: 15px;\n  bottom: 16px;\n  img {\n    width: 90px;\n    cursor: pointer;\n  }\n\n  @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n    img {\n      width: 76px;\n    }\n  }\n  \n  @media only screen and (max-width: 960px) and (orientation:landscape)  {\n    img {\n      width: 64px;\n    }\n  }\n  \n  @media only screen and (max-width: 860px) and (orientation:landscape)  {\n      \n  }\n  \n  @media only screen and (max-width: 768px) and (orientation:landscape)  {\n      \n  }\n\n  @media only screen and (max-width: 639px) {\n\n    img {\n      width: 84px;\n    }\n  }\n\n  @media only screen and (max-width: 560px) {\n\n    img {\n      width: 76px;\n    }\n  }\n\n  @media only screen and (max-width: 480px) {\n\n    img {\n      width: 64px;\n    }\n  }\n"]))),ds=h.a.div(Vi||(Vi=Object(l.a)(["\n  position: fixed;\n  width: 100vw;\n  height: 100vh;\n  top: 0;\n  background: #00000066;\n  z-index: 9;\n\n  @media only screen and (max-width: 1024px) and (orientation:portrait) {\n    \n  }\n\n  @media only screen and (max-width: 960px) and (orientation:portrait) {\n    \n  }\n\n  @media only screen and (max-width: 860px) and (orientation:portrait) {\n    \n  }\n\n  @media only screen and (max-width: 768px) and (orientation:portrait) {\n    \n  }\n\n  @media only screen and (max-width: 639px) {\n    \n  }\n\n  @media only screen and (max-width: 560px) {\n    \n  }\n\n  @media only screen and (max-width: 480px) {\n    \n  }\n"]))),ls=h.a.div(Yi||(Yi=Object(l.a)(["\n  background: url('assets/images/bg_multiplayer.png');\n  background-repeat: no-repeat;\n  background-position: center;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 600px;\n  height: 576px;\n  background-size: contain;\n  color: white;\n\n  @media only screen and (max-width: 1024px) and (orientation:landscape) {\n    \n  }\n\n  @media only screen and (max-width: 960px) and (orientation:landscape) {\n    height: 90%;\n    background-size: 150%;\n  }\n\n  @media only screen and (max-width: 860px) and (orientation:landscape) {\n    \n  }\n\n  @media only screen and (max-width: 768px) and (orientation:landscape) {\n    \n  }\n\n  @media only screen and (max-width: 1024px) and (orientation:portrait) {\n    \n  }\n\n  @media only screen and (max-width: 1024px) and (orientation:portrait) {\n    \n  }\n\n  @media only screen and (max-width: 1024px) and (orientation:portrait) {\n    \n  }\n\n  @media only screen and (max-width: 1024px) and (orientation:portrait) {\n    \n  }\n\n  @media only screen and (max-width: 960px) and (orientation:portrait) {\n    \n  }\n\n  @media only screen and (max-width: 860px) and (orientation:portrait) {\n    \n  }\n\n  @media only screen and (max-width: 768px) and (orientation:portrait) {\n    \n  }\n\n  @media only screen and (max-width: 639px) {\n    width: 92%;\n    height: 80%;\n    background-size: cover;\n    z-index: 9;\n  }\n\n  @media only screen and (max-width: 560px) {\n    \n  }\n\n  @media only screen and (max-width: 480px) {\n    \n  }\n"]))),cs=h.a.div(Gi||(Gi=Object(l.a)(["\n  text-align: center;\n  height: calc(100% - 76px);\n  margin-top: 76px;\n\n  img.close {\n    position: absolute;\n    width: 36px;\n    cursor: pointer;\n    right: 8px;\n    top: 22px;\n  }\n\n  @media only screen and (max-width: 1024px) and (orientation:landscape) {\n    \n  }\n\n  @media only screen and (max-width: 960px) and (orientation:landscape) {\n    height: calc(100% - 36px);\n    margin-top: 36px;\n\n    img.close {\n      width: 32px;\n      right: 0px;\n      top: 0px;\n    }\n  }\n\n  @media only screen and (max-width: 860px) and (orientation:landscape) {\n    \n  }\n\n  @media only screen and (max-width: 768px) and (orientation:landscape) {\n    \n  }\n\n  @media only screen and (max-width: 639px) {\n    height: calc(100% - 108px);\n    margin-top: 108px;\n    img.close {\n      position: absolute;\n      width: 32px;\n      cursor: pointer;\n      right: 0px;\n      top: 18px;\n    }\n  }\n\n  @media only screen and (max-width: 560px) {\n    \n  }\n\n  @media only screen and (max-width: 480px) {\n    height: calc(100% - 64px);\n    margin-top: 64px;\n  }\n"]))),ps=h.a.div(Hi||(Hi=Object(l.a)(["\n    width: calc(100% - 46px);\n    margin: 0 auto;\n    height: 100%;\n\n    @media only screen and (max-width: 639px) {\n      width: 94%;\n    }\n  \n    @media only screen and (max-width: 560px) {\n      \n    }\n  \n    @media only screen and (max-width: 480px) {\n      \n    }\n"]))),hs=h.a.div(Wi||(Wi=Object(l.a)(["\n  background: url('assets/images/lead_thead.png');\n  background-size: contain;\n  border: 1px solid black;\n  border-radius: 10px;\n  display: flex;\n  align-items: center;\n  width: 100%;\n  font-size: 24px;\n  padding: 8px 0px;\n\n  @media only screen and (max-width: 960px) and (orientation:landscape) {\n    font-size: 18px;\n    padding: 8px 0px;\n  }\n\n  @media only screen and (max-width: 639px) {\n    font-size: 18px;\n    padding: 8px 0px;\n  }\n\n  @media only screen and (max-width: 560px) {\n    \n  }\n\n  @media only screen and (max-width: 480px) {\n    \n  }\n"]))),us=h.a.div(Ki||(Ki=Object(l.a)(["\n  height: calc(100% - 76px);\n  overflow-y: auto;\n\n  /* width */\n  ::-webkit-scrollbar {\n    width: 20px;\n    margin-left: 10px;\n    background: #40808a;\n    border-radius: 8px;\n  }\n\n  /* Track */\n  ::-webkit-scrollbar-track {\n    border-radius: 8px;\n  }\n  \n  /* Handle */\n  ::-webkit-scrollbar-thumb {\n    background: white; \n    border-radius: 8px;\n  }\n\n  /* Handle on hover */\n  ::-webkit-scrollbar-thumb:hover {\n    background: wheat; \n  }\n"]))),ms=h.a.div(Xi||(Xi=Object(l.a)(["\n  opacity: ",";\n  background: #40808a;\n  border: 1px solid black;\n  border-radius: 10px;\n  display: flex;\n  align-items: center;\n  height: 40px;\n  width: 100%;\n  margin-top: 3px;\n  &:hover {\n    cursor: pointer;\n    box-shadow: rgba(0, 0, 0, 0.17) 0px -23px 25px 0px inset, rgba(0, 0, 0, 0.15) 0px -36px 30px 0px inset, rgba(0, 0, 0, 0.1) 0px -79px 40px 0px inset, rgba(0, 0, 0, 0.06) 0px 2px 1px, rgba(0, 0, 0, 0.09) 0px 4px 2px, rgba(0, 0, 0, 0.09) 0px 8px 4px, rgba(0, 0, 0, 0.09) 0px 16px 8px, rgba(0, 0, 0, 0.09) 0px 32px 16px;\n  }\n"])),(function(e){return null!==e&&void 0!==e&&e.joinable?1:.5})),ys=h.a.div(Ji||(Ji=Object(l.a)(["\n  width: 30%;\n  padding-left: 8px;\n"]))),xs=h.a.div(qi||(qi=Object(l.a)(["\n  width: 15%;\n"]))),gs=h.a.div(Zi||(Zi=Object(l.a)(["\n  width: 15%;\n"]))),_s=h.a.div(Qi||(Qi=Object(l.a)(["\n  width: 20%;\n"]))),bs=h.a.div($i||($i=Object(l.a)(["\n  width: 20%;\n"]))),fs=function(e){return e.OvO="1X1",e.DvD="2X2",e.TvT="3X3",e}({}),vs=function(e){var t=e.setShowMultiJoin,n=e.setIsViewMulti,a=e.playMultiplayer,s=Object(i.useState)(""),o=Object(d.a)(s,2),r=(o[0],o[1],Object(i.useState)("")),l=Object(d.a)(r,2),c=(l[0],l[1],Object(i.useState)(!1)),p=Object(d.a)(c,2),h=(p[0],p[1],Object(i.useState)(!1)),u=Object(d.a)(h,2),y=(u[0],u[1]),x=Object(i.useState)(!1),g=Object(d.a)(x,2),_=(g[0],g[1],m((function(e){return e.room.lobbyJoined}))),b=m((function(e){return e.room.availableRooms}));Object(i.useEffect)((function(){}),[b]);var f=function(e,t){_&&di.scene.keys.boot._network.joinCustomById(e,t).then((function(){n(!1),a()})).catch((function(e){console.error(e),t&&y(!0)}))};return Object(R.jsx)(ds,{children:Object(R.jsx)(ls,{children:Object(R.jsxs)(cs,{children:[Object(R.jsx)("img",{className:"close",src:"assets/images/btn_close.png",alt:"close",onClick:function(){return t(!1)}}),Object(R.jsxs)(ps,{children:[Object(R.jsxs)(hs,{children:[Object(R.jsx)(ys,{children:"ID"}),Object(R.jsx)(xs,{children:"Mode"}),Object(R.jsx)(gs,{children:"Map"}),Object(R.jsx)(_s,{children:"Players"}),Object(R.jsx)(bs,{children:"Cost"})]}),Object(R.jsxs)(us,{children:[null===b||void 0===b?void 0:b.map((function(e,t){var n,i,a;return Object(R.jsxs)(ms,{onClick:function(){var t;(null===e||void 0===e?void 0:e.maxClients)>(null===e||void 0===e?void 0:e.clients)&&(f(null===e||void 0===e?void 0:e.roomId,null),Ct.dispatch(rt(function(e){var t=1;switch(e){case fs.OvO:t=1;break;case fs.DvD:t=2;break;case fs.TvT:t=3}return t}(null===e||void 0===e||null===(t=e.metadata)||void 0===t?void 0:t.roomMode))))},joinable:(null===e||void 0===e?void 0:e.maxClients)>(null===e||void 0===e?void 0:e.clients),children:[Object(R.jsx)(ys,{children:null===e||void 0===e?void 0:e.roomId}),Object(R.jsx)(xs,{children:null===e||void 0===e||null===(n=e.metadata)||void 0===n?void 0:n.roomMode}),Object(R.jsx)(gs,{children:null===e||void 0===e||null===(i=e.metadata)||void 0===i?void 0:i.mapMode}),Object(R.jsx)(_s,{children:(null===e||void 0===e?void 0:e.clients)||0}),Object(R.jsx)(bs,{children:(null===e||void 0===e||null===(a=e.metadata)||void 0===a?void 0:a.cost)||0})]},t)})),(!b||0===b.length)&&Object(R.jsx)("div",{style:{textAlign:"center",marginTop:20},children:"There is no any Room!"})]})]})]})})})},ws=function(e){return e.Blank="Blank",e.Asteroid="Asteroid",e}({}),Os=h.a.div(ea||(ea=Object(l.a)(["\n  width: 100%;\n  max-width: 1700px;\n  margin: 0 auto;\n\n  @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n    margin-top: 10%;\n  }\n\n  @media only screen and (max-width: 639px) {\n    max-width: 100%;\n    margin-top: 10%;\n  }\n\n  @media only screen and (max-width: 560px) {\n    max-width: 100%;\n    margin-top: 45%;\n  }\n}\n"]))),js=h.a.div(ta||(ta=Object(l.a)(["\n  width: 88%;\n  max-width: 980px;\n  margin: 0 auto;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n    width: 92%;\n    max-width: 100%;\n  }\n  \n  @media only screen and (max-width: 639px) {\n    width: 92%;\n  }\n"]))),Es=(h.a.h3(na||(na=Object(l.a)(["\n  font-size: 25px;\n  color: white;\n  text-align: center;\n  font-weight: normal;\n\n  @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n    p {\n      font-size: 24px;\n      color: #FFFFFF;\n    }\n    img {\n      width: 90%;\n    }\n  }\n\n  @media only screen and (max-width: 639px) {\n    p {\n      font-size: 24px;\n      color: #FFFFFF;\n    }\n    img {\n      width: 90%;\n    }\n  }\n"]))),h.a.div(ia||(ia=Object(l.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  width: 100%;\n  @media only screen and (max-width: 639px) {\n    display: block;\n  }\n"])))),Ss=h.a.div(aa||(aa=Object(l.a)(["\n  width: 70%;\n\n  @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n    width: 50%;\n  }\n  \n  @media only screen and (max-width: 639px) {\n    width: 100%;\n    max-width: 100%;\n  }\n\n  @media only screen and (max-width: 560px) {\n    \n  }\n\n  @media only screen and (max-width: 480px) {\n    \n  }\n"]))),ks=h.a.div(sa||(sa=Object(l.a)(["\n  text-align: center;\n  margin-bottom: 10px;\n  p {\n    font-size: 48px;\n    color: #FFFFFF;\n  }\n  img {\n    width: 450px;\n  }\n  \n  @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n    margin-bottom: 8px;\n    p {\n      font-size: 24px;\n      color: #FFFFFF;\n    }\n    img {\n      width: 78%;\n    }\n  }\n\n  @media only screen and (max-width: 639px) {\n    margin-bottom: 16px;\n    p {\n      font-size: 38px;\n      color: #FFFFFF;\n    }\n    img {\n      width: 90%;\n    }\n  }\n"]))),As=h.a.div(oa||(oa=Object(l.a)(["\n  display: flex;\n  justify-content: space-between;\n"]))),Ts=h.a.div(ra||(ra=Object(l.a)(["\n  width: 425px;\n  height: 460px;\n  background-size: contain;\n  margin: 0 auto;\n  display: flex;\n\n  --swiper-navigation-size: 24px;\n\n  @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n    width: 226px;\n    height: 226px;\n  }\n\n  @media only screen and (max-width: 639px) {\n    width: 312px;\n    height: 312px;\n  }\n\n  @media only screen and (max-width: 480px) {\n    width: 264px;\n    height: 264px;\n    max-height: fit-content;\n  }\n\n  .swiper-container {\n    width: 425px;\n    height: 440px;\n    border-radius: 8px;\n    overflow: hidden;\n\n    @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n      width: 226px;\n      height: 226px;\n    }\n    \n\n    @media only screen and (max-width: 639px) {\n      width: 312px;\n      height: 312px;\n    }\n  }\n\n  .swiper-container .swiper-button-next::after,\n  .swiper-container .swiper-button-prev::after {\n    content: none;\n  }\n\n  .swiper-slide {\n    height: 440px;\n    margin-left: 0px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n      width: 226px;\n      height: 235px;\n    }\n\n    @media only screen and (max-width: 480px) {\n      width: 264px;\n      height: 264px;\n    }\n  }\n\n  .swiper-slide img.create-game {\n    width: 100%;\n    height: 100%;\n    object-fit: cover\n  }\n\n  .swiper-slide p.title {\n    position: absolute;\n    color: white;\n    font-size: 36px;\n  }\n\n  .swiper-slide img.ship {\n    position: absolute;\n    width: 400px;\n    top: 0px;\n    left: 12px;\n    @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n      width: 226px;\n      top: -36px;\n      left: 0px;\n    }\n\n    @media only screen and (max-width: 480px) {\n      width: 264px;\n      left: 0px;\n    }\n  }\n\n  .swiper-slide img.shield {\n    position: absolute;\n    width: 400px;\n    top: 0px;\n    left: 12px;\n\n    @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n      width: 226px;\n      top: -36px;\n      left: 0px;\n    }\n    @media only screen and (max-width: 480px) {\n      width: 264px;\n      left: 0px;\n    }\n  }\n  \n  .swiper-slide img.broken {\n    position: absolute;\n    width: 400px;\n    top: 0px;\n    left: 12px;\n    @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n      width: 226px;\n      top: -36px;\n      left: 0px;\n    }\n    @media only screen and (max-width: 480px) {\n      width: 264px;\n      left: 0px;\n    }\n  }\n  .swiper-slide img.crosmonaut {\n    position: absolute;\n    width: 400px;\n    top: 0px;\n    left: 12px;\n    @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n      width: 226px;\n      top: -36px;\n      left: 0px;\n    }\n    @media only screen and (max-width: 480px) {\n      width: 264px;\n      left: 0px;\n    }\n  }\n  .swiper-slide img.background {\n    position: absolute;\n    width: 400px;\n    top: 0px;\n    left: 12px;\n    @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n      width: 226px;\n      top: -36px;\n      left: 0px;\n    }\n    @media only screen and (max-width: 480px) {\n      width: 264px;\n      left: 0px;\n    }\n  }\n  .swiper-slide img.on_background {\n    position: absolute;\n    width: 400px;\n    top: 0px;\n    left: 12px;\n    @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n      width: 226px;\n      top: -36px;\n      left: 0px;\n    }\n    @media only screen and (max-width: 480px) {\n      width: 264px;\n      left: 0px;\n      top: -30px;\n    }\n  }\n  .swiper-slide img.booster {\n    position: absolute;\n    width: 400px;\n    top: 0px;\n    left: 12px;\n    @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n      width: 226px;\n      top: -36px;\n      left: 0px;\n    }\n    @media only screen and (max-width: 480px) {\n      width: 264px;\n      left: 0px;\n    }\n  }\n  .swiper-slide img.weapon {\n    position: absolute;\n    width: 400px;\n    top: 0px;\n    left: 12px;\n    @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n      width: 226px;\n      top: -36px;\n      left: 0px;\n    }\n    @media only screen and (max-width: 480px) {\n      width: 264px;\n      left: 0px;\n    }\n  }\n  \n  .swiper-slide img.banner {\n    position: absolute;\n    width: 400px;\n    top: 0px;\n    left: 12px;\n    @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n      width: 226px;\n      top: -36px;\n      left: 0px;\n    }\n    @media only screen and (max-width: 480px) {\n      width: 264px;\n      left: 0px;\n    }\n  }\n  .swiper-slide img.tier {\n    position: absolute;\n    width: 80px;\n    top: 20px;\n    right: 33px;\n    @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n      width: 226px;\n    }\n    @media only screen and (max-width: 480px) {\n      width: 264px;\n      top: 0px;\n      left: 0px;\n    }\n  }\n  \n  .swiper-slide img.avatarBg {\n    position: absolute;\n    top: -46px;\n    left: 2px;\n    width: 421px;\n    height: 462px;\n    @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n      width: 226px;\n      height: 226px;\n      top: -45px;\n      left: 1px;\n    }\n    @media only screen and (max-width: 480px) {\n      width: 264px;\n      height: 264px;\n      top: -26px;\n      left: 0;\n      height: calc(100% + 30px);\n    }\n  }\n\n  .swiper-slide p.name {\n    position: absolute;\n    top: -15px;\n    left: calc(50% );\n    transform: translate(-50%, 0);\n    font-size: 16px;\n    color: var(--color-yellow);\n\n    @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n      width: 226px;\n      width: 226px;\n      text-align: center;\n      top: -32px;\n    }\n\n    @media only screen and (max-width: 480px) {\n      top: -20px;\n      top: -16px;\n      width: 264px;\n      text-align: center;\n    }\n  }\n\n  .swiper-slide p.tier {\n    position: absolute;\n    left: calc(50% - 10px);\n    bottom: 50px;\n    transform: translate(-50%, 0);\n    font-size: 16px;\n    color: var(--color-yellow);\n  }\n"]))),Ls=h.a.div(da||(da=Object(l.a)(["\n  display: flex;\n  align-items: center;\n  \n  img {\n    width: 50px;\n    height: 55px;\n    cursor: pointer;\n\n    @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n      width: 30px;\n      height: 30x;\n    }\n\n    @media only screen and (max-width: 480px) {\n      width: 32px;\n      height: 32px;\n      margin-top: 26px;\n    }\n  }\n"]))),Rs=h.a.div(la||(la=Object(l.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-around;\n  height: 300px;\n  flex-direction: column;\n  margin-top: 65px;\n\n  color: var(--color-yellow);\n\n  @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n    width: 50%;\n    height: auto;\n    margin-top: 0;\n    justify-content: center;\n  }\n\n  @media only screen and (max-width: 639px) {\n    width: 100%;\n    margin-top: 32px;\n  }\n\n  @media only screen and (max-width: 480px) {\n    width: 100%;\n    height: auto;\n    margin-top: 32px;\n  }\n"]))),Ps=h.a.div(ca||(ca=Object(l.a)(["\n  font-size: 23px;\n  text-align: center;\n  span {\n    padding-top: 4px;\n  }\n\n  @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n    font-size: 18px;\n    margin-bottom: 8px;\n  }\n\n  @media only screen and (max-width: 639px) {\n    margin-bottom: 8px;\n    font-size: 18px;\n  }\n"]))),Ms=(h.a.div(pa||(pa=Object(l.a)(["\n  padding: 8px 10px;\n  border-radius: 8px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 25px;\n  background: rgba(40,13,95,1);\n  color: white;\n  cursor: pointer;\n\n  @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n    font-size: 18px;\n    margin-bottom: 8px;\n  }\n\n  @media only screen and (max-width: 639px) {\n    margin-bottom: 8px;\n    font-size: 18px;\n  }\n"]))),h.a.div(ha||(ha=Object(l.a)(["\n  background: url('assets/images/avatar_join.png');\n  font-size: 30px;\n  background-size: contain;\n  background-repeat: no-repeat;\n  width: 132px;\n  height: 50px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  color: white;\n  cursor: pointer;\n\n  @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n    width: 102px;\n    height: 38px;\n    margin-bottom: 8px;\n    font-size: 18px;\n  }\n\n  @media only screen and (max-width: 639px) {\n    width: 102px;\n    height: 38px;\n    margin-bottom: 8px;\n    font-size: 18px;\n  }\n"])))),Is=h.a.div(ua||(ua=Object(l.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  img.room {\n    width: 80px;\n    object-fit: cover;\n    opacity: 0.45;\n    &:hover {\n      cursor: pointer;\n    }\n  }\n  img.room.selected {\n    opacity: 1 !important\n  }\n\n  @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n    margin-bottom: 8px;\n    font-size: 18px;\n  }\n\n  @media only screen and (max-width: 639px) {\n    margin-bottom: 8px;\n    font-size: 18px;\n  }\n"])));h.a.div(ma||(ma=Object(l.a)(["\n  width: 80px;\n  margin-right: 4px;\n  margin-left: 4px;\n  padding: 8px 10px;\n  border-radius: 8px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 18px;\n  background-image: ",";\n  color: white;\n  cursor: pointer;\n\n  @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n    margin-bottom: 8px;\n  }\n\n  @media only screen and (max-width: 639px) {\n    margin-bottom: 8px;\n  }\n"])),(function(e){return e.bgColor}));an.a.use([sn.a]);var Cs,Bs,Ds,Ns,Us,Fs=function(e){var t=e.setIsViewMulti,n=e.playMultiplayer,a=Object(i.useState)(""),s=Object(d.a)(a,2),o=s[0],r=(s[1],Object(i.useState)(!1)),l=Object(d.a)(r,2),c=l[0],p=l[1],h=Object(i.useState)(""),u=Object(d.a)(h,2),y=u[0],x=(u[1],Object(i.useState)(fs.OvO)),g=Object(d.a)(x,2),_=g[0],b=g[1],f=Object(i.useState)(ws.Blank),v=Object(d.a)(f,2),w=v[0],O=v[1],j=Object(i.useState)(0),E=Object(d.a)(j,2),S=E[0],k=(E[1],Object(i.useState)("")),A=Object(d.a)(k,2),T=A[0],L=(A[1],Object(i.useState)(!1)),P=Object(d.a)(L,2),M=(P[0],P[1],m((function(e){return e.room.lobbyJoined}))),I=(m((function(e){return e.room.availableRooms})),Object(i.useRef)(null));return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(Os,{children:Object(R.jsx)(js,{children:Object(R.jsxs)(Es,{children:[Object(R.jsxs)(Ss,{children:[Object(R.jsx)(ks,{children:Object(R.jsx)("p",{children:"Select The Game Mode"})}),Object(R.jsxs)(As,{children:[Object(R.jsx)(Ls,{onClick:function(){return I.current.swiper.slidePrev()},children:Object(R.jsx)("img",{src:"assets/images/avatar_prev.png",alt:"prev"})}),Object(R.jsx)(Ts,{children:Object(R.jsx)(tn.a,{ref:I,navigation:!0,spaceBetween:0,slidesPerView:1,onSlideChange:function(e){switch(e.activeIndex){case 0:default:O(ws.Blank);break;case 1:O(ws.Asteroid)}},children:Object.keys(ws).map((function(e,t){return Object(R.jsxs)(nn.a,{children:[Object(R.jsx)("img",{className:"create-game",src:"assets/images/mapmode/".concat(e,".jpg"),alt:e}),Object(R.jsxs)("p",{className:"title",children:[e," MAP"]})]},t)}))})}),Object(R.jsx)(Ls,{onClick:function(){return I.current.swiper.slideNext()},children:Object(R.jsx)("img",{src:"assets/images/avatar_next.png",alt:"next"})})]})]}),Object(R.jsxs)(Rs,{children:[Object(R.jsx)(Ps,{children:"Select The Play Mode"}),Object(R.jsx)(Is,{children:Object.values(fs).map((function(e,t){return Object(R.jsx)("img",{className:"room ".concat(_==e?"selected":""),src:"assets/images/roommode/".concat(e,".png"),alt:e,onClick:function(){return b(e)}},t)}))}),Object(R.jsxs)(Ps,{children:["Cost: ",S," Crons"]}),Object(R.jsx)(Ms,{onClick:function(e){(e.preventDefault(),M)&&di.scene.keys.boot._network.createCustom({name:"",password:T,autoDispose:!0,roomMode:_,mapMode:w,cost:S}).then((function(){t(!1),n()})).catch((function(e){return console.error(e)}))},children:"Create"})]})]})})}),Object(R.jsx)(ln,{noticeMsg:o,showNotice:c,setShowNotice:p,severity:y})]})},zs=n(325),Vs=function(e){return Object(R.jsx)(zs.Joystick,{size:75,baseColor:"#4b4b4b70",stickColor:"#42eacb80",stop:function(t){var n,i,a=null!==(n=t.y)&&void 0!==n?n:0,s=(null!==(i=t.x)&&void 0!==i?i:0)-0,o=0-a,r=(180*Math.atan2(o,s)/Math.PI+360)%360;e.onDirectionChange({isMoving:!1,direction:r})},move:function(t){var n,i,a=null!==(n=t.y)&&void 0!==n?n:0,s=(null!==(i=t.x)&&void 0!==i?i:0)-0,o=0-a,r=(180*Math.atan2(o,s)/Math.PI+360)%360;e.onDirectionChange({isMoving:!0,direction:r})}})},Ys=h.a.div(Cs||(Cs=Object(l.a)(["\n  position: fixed;\n  bottom: 32px;\n  left: 16px;\n  max-width: 100%;\n"]))),Gs=h.a.div(Bs||(Bs=Object(l.a)(["\n  position: relative;\n  padding: 0;\n  display: flex;\n  flex-direction: column;\n"]))),Hs=h.a.div(Ds||(Ds=Object(l.a)(["\n  margin-top: auto;\n  align-self: flex-end;\n"])));function Ws(e){var t=e.isMultiplayer,n=function(e){var t=Object(i.useState)(window.innerWidth),n=Object(d.a)(t,2),a=n[0],s=n[1];return Object(i.useEffect)((function(){var e=function(){return s(window.innerWidth)};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),a<=e}(1024),a=di.scene.keys.multiplay,s=di.scene.keys.play;return Object(R.jsx)(Ys,{children:Object(R.jsx)(Gs,{children:n&&Object(R.jsx)(Hs,{children:Object(R.jsx)(Vs,{onDirectionChange:function(e){var n,i;t?null===(n=a._myShip)||void 0===n||n.handleJoystickMovement(e):null===(i=s._myShip)||void 0===i||i.handleJoystickMovement(e)}})})})})}var Ks,Xs,Js=h.a.div(Ns||(Ns=Object(l.a)(["\n  position: fixed;\n  bottom: 40px;\n  right: 20px;\n"]))),qs=h.a.img(Us||(Us=Object(l.a)(["\n  border-radius: 50%;\n  width: 46px;\n  height: 46px;\n"])));function Zs(e){var t=e.isMultiplayer,n=function(e){var t=Object(i.useState)(window.innerWidth),n=Object(d.a)(t,2),a=n[0],s=n[1];return Object(i.useEffect)((function(){var e=function(){return s(window.innerWidth)};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),a<=e}(1024),a=di.scene.keys.multiplay,s=di.scene.keys.play,o=function(){var e,n;t?null===(e=a._myShip)||void 0===e||e._gunModule.setTriggerHeld(!0):null===(n=s._myShip)||void 0===n||n._gunModule.setTriggerHeld(!0)};return Object(R.jsx)(R.Fragment,{children:n&&Object(R.jsx)(Js,{onTouchStart:function(){return o()},onTouchCancel:function(){return o()},children:Object(R.jsx)(qs,{src:"assets/images/icon_DOUBLE_BULLET.png",alt:"Fire Button"})})})}var Qs=h.a.div(Ks||(Ks=Object(l.a)(["\n  position: fixed;\n  right: 96px;\n  bottom: 40px;\n"]))),$s=h.a.img(Xs||(Xs=Object(l.a)([";\n  width: 46px;\n  height: 46px;\n  border-radius: 50%;\n"])));function eo(e){var t=e.isMultiplayer,n=function(e){var t=Object(i.useState)(window.innerWidth),n=Object(d.a)(t,2),a=n[0],s=n[1];return Object(i.useEffect)((function(){var e=function(){return s(window.innerWidth)};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),a<=e}(1024),a=di.scene.keys.multiplay,s=di.scene.keys.play,o=function(){t?a._myShip._hasAtomic&&(a._network.specialKeyIsDown(!0),a._myShip._hasAtomic=!1,Ct.dispatch(yt(!1))):s._myShip._hasAtomic&&(s.spawnRegionBullet(s._center.x,s._center.y,s,"atomic"),s._myShip._hasAtomic=!1,Ct.dispatch(yt(!1)))};return Object(R.jsx)(R.Fragment,{children:n&&Object(R.jsx)(Qs,{onTouchStart:function(){return o()},onTouchEnd:function(){return o()},children:Object(R.jsx)($s,{src:"assets/images/icon_ATOMIC_BULLET.png",alt:"Fire Button"})})})}var to,no,io,ao,so=function(e){return e.Create="create",e.Join="join",e.Quick="quick",e}(so||{}),oo=function(e){var t,n=e.account,a=e.web3Provider,s=e.chainId,o=e.setBg,r=e.setIsGamePlaying,l=Object(p.o)(),c=(m((function(e){return e.user.loggedIn})),m((function(e){return e.room.roomJoined}))),h=m((function(e){return e.user.gameOver})),u=m((function(e){return e.user.canPlayAgain})),_=m((function(e){return e.user.joinLobbyRoom})),b=m((function(e){return e.user.tokenId})),f=m((function(e){return e.phaser.hasAtomic})),j=Object(i.useState)(null),E=Object(d.a)(j,2),S=E[0],k=E[1],A=Object(i.useState)(null),T=Object(d.a)(A,2),L=T[0],P=T[1],M=Object(i.useState)(null),I=Object(d.a)(M,2),C=I[0],B=I[1],D=Object(i.useState)(null),N=Object(d.a)(D,2),U=N[0],F=(N[1],Object(i.useState)(!1)),z=Object(d.a)(F,2),V=z[0],Y=z[1],G=Object(i.useState)(!1),H=Object(d.a)(G,2),W=H[0],K=H[1],X=Object(i.useState)(!1),J=Object(d.a)(X,2),q=J[0],Z=J[1],Q=Object(i.useState)(!1),$=Object(d.a)(Q,2),ee=$[0],te=$[1],ne=Object(i.useState)(!1),ie=Object(d.a)(ne,2),ae=ie[0],se=ie[1],oe=Object(i.useState)(!1),re=Object(d.a)(oe,2),de=re[0],le=re[1],ce=m((function(e){return e.phaser.isExist})),pe=Object(i.useState)(!1),he=Object(d.a)(pe,2),ue=he[0],me=he[1],ye=Object(i.useState)(void 0),xe=Object(d.a)(ye,2),ge=xe[0],_e=xe[1],be=Object(i.useState)(!1),fe=Object(d.a)(be,2),ve=fe[0],we=fe[1],Oe=Object(i.useState)(void 0),je=Object(d.a)(Oe,2),Ee=je[0],Se=je[1],ke=Object(i.useState)({forward:"W",left:"A",right:"D",brake:"S",fire:"SPACE",special:"Q",music:"Y",sounds:"U",exit:"ESC"}),Ae=Object(d.a)(ke,2),Te=Ae[0],Le=Ae[1],Re=Object(i.useState)("easy"),Pe=Object(d.a)(Re,2),Me=Pe[0],De=Pe[1],Ne=Object(i.useState)("monthly"),Ue=Object(d.a)(Ne,2),Fe=Ue[0],ze=Ue[1],Ve=Object(i.useState)(0),Ye=Object(d.a)(Ve,2),Ge=Ye[0],He=Ye[1],We=Object(i.useState)(""),Ke=Object(d.a)(We,2),Xe=Ke[0],Je=Ke[1],qe=Object(i.useState)(!1),Ze=Object(d.a)(qe,2),Qe=Ze[0],$e=Ze[1],et=Object(i.useState)(""),tt=Object(d.a)(et,2),nt=tt[0],it=tt[1];Object(i.useEffect)((function(){if(void 0!==n&&s===O.mainnet.chainId){var e=new v.a.Contract("0xC6373d6F369A9FfE7D93B21F2A5b0E16291d996D",$a,a),t=new v.a.Contract(w,es,a),i=new v.a.Contract("0xe6C2F6Ab401F08EB7B073Eac710D7DB2FBc2191C",ts,a);k(e.connect(a.getSigner())),P(t.connect(a.getSigner())),B(i.connect(a.getSigner()))}}),[n,s]),Object(i.useEffect)((function(){var e=function(){var e=Object(x.a)(Object(y.a)().mark((function e(){var t,i;return Object(y.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Y(!0),e.prev=1,e.next=4,L.enterGame({from:n,value:"1000000000000000000"});case 4:return t=e.sent,e.next=7,t.wait();case 7:i=e.sent,i.events,Y(!1),Mn.emit(In.PLAY_AGAIN),e.next=21;break;case 13:return e.prev=13,e.t0=e.catch(1),it("error"),Je("You need 1 CRO to play game"),$e(!0),Ct.dispatch(Ce(!1)),Y(!1),e.abrupt("return");case 21:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(){return e.apply(this,arguments)}}();u&&e()}),[u]),Object(i.useEffect)((function(){var e=function(){var e=Object(x.a)(Object(y.a)().mark((function e(){return Object(y.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:at();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();_&&e()}),[_]),Object(i.useEffect)((function(){var e=function(){var e=Object(x.a)(Object(y.a)().mark((function e(){var t,n;return Object(y.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ct.dispatch(Ie(!1)),e.next=3,L.getCraftStatus(b);case 3:t=e.sent,n=t[2],Mn.emit(In.TOKEN_REWARDED),n<5?Mn.emit(In.CAN_PLAY):Mn.emit(In.SHIP_DAMAGED);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();h&&e()}),[h]),Object(i.useEffect)((function(){var e=function(){var e=Object(x.a)(Object(y.a)().mark((function e(){var t;return Object(y.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xt.score.getScores(Fe,Ge);case 2:t=e.sent,Se(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[Fe,Ge]),Object(i.useEffect)((function(){var e=localStorage.getItem("forward"),t=localStorage.getItem("left"),n=localStorage.getItem("right"),i=localStorage.getItem("brake"),a=localStorage.getItem("fire"),s=localStorage.getItem("special"),o=localStorage.getItem("music"),r=localStorage.getItem("sounds"),d=localStorage.getItem("exit");null!==e&&"null"!==e&&void 0!==e&&"undefined"!==e&&Le({forward:e,left:t,right:n,brake:i,fire:a,special:s,music:o,sounds:r,exit:d});var l=localStorage.getItem("difficulty");null!==l&&"null"!==l&&void 0!==l&&"undefined"!==l&&De(l)}),[]),Object(i.useEffect)((function(){localStorage.setItem("forward",null===Te||void 0===Te?void 0:Te.forward),localStorage.setItem("left",null===Te||void 0===Te?void 0:Te.left),localStorage.setItem("right",null===Te||void 0===Te?void 0:Te.right),localStorage.setItem("brake",null===Te||void 0===Te?void 0:Te.brake),localStorage.setItem("fire",null===Te||void 0===Te?void 0:Te.fire),localStorage.setItem("special",null===Te||void 0===Te?void 0:Te.special),localStorage.setItem("music",null===Te||void 0===Te?void 0:Te.music),localStorage.setItem("sounds",null===Te||void 0===Te?void 0:Te.sounds),localStorage.setItem("exit",null===Te||void 0===Te?void 0:Te.exit)}),[Te]),Object(i.useEffect)((function(){localStorage.setItem("difficulty",Me||void 0)}),[Me]),Mn.on(In.GOTO_MAINMENU,(function(){r(!1),o("bg_shooter"),l("/")}));var at=function(){n?(Z(!0),o("bg_shooter"),Ct.dispatch(Be(!0))):(it("error"),Je("Please connect your wallet first."),$e(!0))};return t=W||ue||q?!ue||W||ge&&ge!=so.Join||q?!ue||W||ge!=so.Create||q?c?Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(fa,{specialKey:Te.special}),Object(R.jsx)(Ws,{isMultiplayer:q}),Object(R.jsx)(Zs,{isMultiplayer:q}),f&&Object(R.jsx)(eo,{isMultiplayer:q})]}):Object(R.jsx)(is,{children:Object(R.jsx)(xa,{craftInstance:S,shooterInstance:L,tokenInstance:C,pilotInstance:U,account:n,setBg:o,setIsGamePlaying:r,keyboard:Te,isPlayEndless:W,isMultiplayer:q,viewMultiMode:ge,difficulty:Me,setCalculating:Y})}):Object(R.jsx)(is,{children:Object(R.jsx)(Fs,{setIsViewMulti:me,playMultiplayer:at})}):Object(R.jsxs)(as,{children:[Object(R.jsx)(ss,{children:Object(R.jsx)("img",{src:"assets/images/title.png",alt:"title"})}),Object(R.jsxs)(os,{children:[Object(R.jsx)("img",{className:"playmulti",src:"assets/images/join.png",alt:"play endless",onClick:function(){return _e(so.Join),void we(!0)}}),Object(R.jsx)("img",{className:"playmulti",src:"assets/images/create.png",alt:"play endless",onClick:function(){_e(so.Create)}})]}),Object(R.jsx)(rs,{children:Object(R.jsx)("img",{src:"assets/images/btn_setting.png",alt:"setting",onClick:function(){return te(!0)}})}),Object(R.jsx)(ln,{noticeMsg:Xe,showNotice:Qe,setShowNotice:$e,severity:nt})]}):Object(R.jsxs)(as,{children:[Object(R.jsx)(ss,{children:Object(R.jsx)("img",{src:"assets/images/title.png",alt:"title"})}),Object(R.jsxs)(os,{children:[Object(R.jsx)("img",{className:"play",src:"assets/images/btn_playendless.png",alt:"play endless",onClick:function(){n?(K(!0),o("bg_shooter")):(it("error"),Je("Please connect your wallet first."),$e(!0))}}),Object(R.jsx)("img",{className:"play",src:"assets/images/btn_crosmostation.png",alt:"enter crosmostation"}),Object(R.jsx)("img",{className:"setting",src:"assets/images/btn_difficulty.png",alt:"difficulty",onClick:function(){return le(!0)}}),Object(R.jsx)("img",{className:"setting",src:"assets/images/btn_highscores.png",alt:"high scores",onClick:function(){return se(!0)}})]}),Object(R.jsx)(rs,{children:Object(R.jsx)("img",{src:"assets/images/btn_setting.png",alt:"setting",onClick:function(){return te(!0)}})}),Object(R.jsx)(ln,{noticeMsg:Xe,showNotice:Qe,setShowNotice:$e,severity:nt})]}),Object(R.jsxs)(ns,{isPlayEndless:W,isMultiplayer:q,children:[t,ce&&Object(R.jsx)(Qa,{}),ee&&Object(R.jsx)(Va,{setIsSetting:te,keyboard:Te,setKeboard:Le}),ae&&Object(R.jsx)(Ia,{scores:Ee,setIsLeaderboard:se,league:Ge,setLeague:He,period:Fe,setPeriod:ze}),ue&&ve&&Object(R.jsx)(vs,{setShowMultiJoin:we,setIsViewMulti:me,playMultiplayer:at}),de&&Object(R.jsx)(Xa,{setIsDifficulty:le,difficulty:Me,setDifficulty:De}),V&&Object(R.jsx)(g.a,{sx:{position:"fixed",width:"100%",background:"rgba(0, 0, 0, .5)",top:0,left:0,bottom:0,right:0,pointerEvents:"stroke",zIndex:999},children:Object(R.jsx)(g.a,{sx:{position:"absolute",display:"flex",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"white"},children:Object(R.jsx)(Gt.a,{sx:{color:"inherit"}})})})]})},ro=h.a.div(to||(to=Object(l.a)(["\n  position: absolute;\n  top: 0;\n  right: 0;\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  min-height: 100vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: url('assets/images/",".png');\n  background-position: center;\n  background-size: cover;\n  overflow: auto;\n}\n"])),(function(e){return e.bg})),lo=h.a.div(no||(no=Object(l.a)(["\n  position: fixed;\n  top: 16px;\n  left: 50%;\n  transform: translate(-50%, 0%);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  color: #4a97d2;\n\n  @media only screen and (max-width: 1024px) and (orientation:portrait)  {\n    bottom: 16px;\n    top: unset;\n  }\n  \n  @media only screen and (max-width: 960px) and (orientation:portrait)  {\n      \n  }\n  \n  @media only screen and (max-width: 860px) and (orientation:portrait)  {\n      \n  }\n  \n  @media only screen and (max-width: 768px) and (orientation:portrait)  {\n      \n  }\n\n  @media only screen and (max-width: 1024px) and (orientation:landscape)  {\n    bottom: 8px;\n    top: unset;\n  }\n  \n  @media only screen and (max-width: 960px) and (orientation:landscape)  {\n      \n  }\n  \n  @media only screen and (max-width: 860px) and (orientation:landscape)  {\n      \n  }\n  \n  @media only screen and (max-width: 768px) and (orientation:landscape)  {\n      \n  }\n\n  @media only screen and (max-width: 639px) {\n    font-size: 18px;\n  }\n"]))),co=h.a.div(io||(io=Object(l.a)(["\n  font-size: 18px;\n  color: white;\n  text-align: center;\n  font-weight: normal;\n"]))),po=Object(h.a)(u.a)(ao||(ao=Object(l.a)(["\n  width: 360px;\n"]))),ho=function(){var e=m((function(e){return e.room.lobbyJoined})),t=Object(i.useState)({}),n=Object(d.a)(t,2),a=n[0],s=(a.walletProviderName,a.address),o=a.browserWeb3Provider,r=(a.serverWeb3Provider,a.connected,a.chainId),l=n[1],h=Object(i.useState)("bg_main"),u=Object(d.a)(h,2),y=u[0],x=u[1],g=Object(i.useState)(!1),_=Object(d.a)(g,2),b=_[0],f=_[1];return Object(R.jsxs)(ro,{bg:y,children:[Object(R.jsxs)(c.a,{children:[!b&&Object(R.jsx)(Yt,{account:s,setWallet:l,setBg:x}),Object(R.jsxs)(p.d,{children:[Object(R.jsx)(p.b,{path:"/",element:Object(R.jsx)(p.a,{to:"/shooter",replace:!0})}),Object(R.jsx)(p.b,{path:"shooter",element:Object(R.jsx)(oo,{account:s,web3Provider:o,chainId:r,setBg:x,setIsGamePlaying:f})})]})]}),!e&&Object(R.jsxs)(lo,{children:[Object(R.jsx)(co,{children:" Connecting to server..."}),Object(R.jsx)(po,{color:"inherit",sx:{mt:1}})]})]})},uo=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,674)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,s=t.getLCP,o=t.getTTFB;n(e),i(e),a(e),s(e),o(e)}))};o.a.render(Object(R.jsx)(a.a.StrictMode,{children:Object(R.jsx)(r.a,{store:Ct,children:Object(R.jsx)(ho,{})})}),document.getElementById("root")),uo()}},[[597,1,2]]]);